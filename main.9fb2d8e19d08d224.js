var HA=Object.defineProperty,GA=Object.defineProperties,qA=Object.getOwnPropertyDescriptors,D0=Object.getOwnPropertySymbols,WA=Object.prototype.hasOwnProperty,zA=Object.prototype.propertyIsEnumerable,S0=(br,ot,lt)=>ot in br?HA(br,ot,{enumerable:!0,configurable:!0,writable:!0,value:lt}):br[ot]=lt,Vl=(br,ot)=>{for(var lt in ot||(ot={}))WA.call(ot,lt)&&S0(br,lt,ot[lt]);if(D0)for(var lt of D0(ot))zA.call(ot,lt)&&S0(br,lt,ot[lt]);return br},C0=(br,ot)=>GA(br,qA(ot));(self.webpackChunkpwa_medium=self.webpackChunkpwa_medium||[]).push([[179],{429:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{factory:()=>zn,getGlobalVars:()=>er,registerAnalytics:()=>oi,resetGlobalVars:()=>On,settings:()=>Cn});var Z=function(){return Z=Object.assign||function(Me){for(var Be,st=1,We=arguments.length;st<We;st++)for(var tt in Be=arguments[st])Object.prototype.hasOwnProperty.call(Be,tt)&&(Me[tt]=Be[tt]);return Me},Z.apply(this,arguments)};function ln(de,Me,Be,st){return new(Be||(Be=Promise))(function(tt,It){function Ut(rn){try{wt(st.next(rn))}catch(tr){It(tr)}}function an(rn){try{wt(st.throw(rn))}catch(tr){It(tr)}}function wt(rn){rn.done?tt(rn.value):function(tt){return tt instanceof Be?tt:new Be(function(It){It(tt)})}(rn.value).then(Ut,an)}wt((st=st.apply(de,Me||[])).next())})}function ge(de,Me){var st,We,tt,It,Be={label:0,sent:function(){if(1&tt[0])throw tt[1];return tt[1]},trys:[],ops:[]};return It={next:Ut(0),throw:Ut(1),return:Ut(2)},"function"==typeof Symbol&&(It[Symbol.iterator]=function(){return this}),It;function Ut(wt){return function(rn){return function(wt){if(st)throw new TypeError("Generator is already executing.");for(;Be;)try{if(st=1,We&&(tt=2&wt[0]?We.return:wt[0]?We.throw||((tt=We.return)&&tt.call(We),0):We.next)&&!(tt=tt.call(We,wt[1])).done)return tt;switch(We=0,tt&&(wt=[2&wt[0],tt.value]),wt[0]){case 0:case 1:tt=wt;break;case 4:return Be.label++,{value:wt[1],done:!1};case 5:Be.label++,We=wt[1],wt=[0];continue;case 7:wt=Be.ops.pop(),Be.trys.pop();continue;default:if(!(tt=(tt=Be.trys).length>0&&tt[tt.length-1])&&(6===wt[0]||2===wt[0])){Be=0;continue}if(3===wt[0]&&(!tt||wt[1]>tt[0]&&wt[1]<tt[3])){Be.label=wt[1];break}if(6===wt[0]&&Be.label<tt[1]){Be.label=tt[1],tt=wt;break}if(tt&&Be.label<tt[2]){Be.label=tt[2],Be.ops.push(wt);break}tt[2]&&Be.ops.pop(),Be.trys.pop();continue}wt=Me.call(de,Be)}catch(rn){wt=[6,rn],We=0}finally{st=tt=0}if(5&wt[0])throw wt[1];return{value:wt[0]?wt[1]:void 0,done:!0}}([wt,rn])}}}var D=lt(2),E=(lt(915),lt(433)),k=lt(488),U=lt(544),re="https://www.googletagmanager.com/gtag/js",Pe=(()=>{return(de=Pe||(Pe={})).EVENT="event",de.SET="set",de.CONFIG="config",Pe;var de})(),dt=(()=>{return(de=dt||(dt={})).ADD_SHIPPING_INFO="add_shipping_info",de.ADD_PAYMENT_INFO="add_payment_info",de.ADD_TO_CART="add_to_cart",de.ADD_TO_WISHLIST="add_to_wishlist",de.BEGIN_CHECKOUT="begin_checkout",de.CHECKOUT_PROGRESS="checkout_progress",de.EXCEPTION="exception",de.GENERATE_LEAD="generate_lead",de.LOGIN="login",de.PAGE_VIEW="page_view",de.PURCHASE="purchase",de.REFUND="refund",de.REMOVE_FROM_CART="remove_from_cart",de.SCREEN_VIEW="screen_view",de.SEARCH="search",de.SELECT_CONTENT="select_content",de.SELECT_ITEM="select_item",de.SELECT_PROMOTION="select_promotion",de.SET_CHECKOUT_OPTION="set_checkout_option",de.SHARE="share",de.SIGN_UP="sign_up",de.TIMING_COMPLETE="timing_complete",de.VIEW_CART="view_cart",de.VIEW_ITEM="view_item",de.VIEW_ITEM_LIST="view_item_list",de.VIEW_PROMOTION="view_promotion",de.VIEW_SEARCH_RESULTS="view_search_results",dt;var de})(),St=new E.Logger("@firebase/analytics");function nt(de,Me,Be,st,We,tt){return ln(this,void 0,void 0,function(){var It,Ut,an,wt;return ge(this,function(rn){switch(rn.label){case 0:It=st[We],rn.label=1;case 1:return rn.trys.push([1,7,,8]),It?[4,Me[It]]:[3,3];case 2:return rn.sent(),[3,6];case 3:return[4,Promise.all(Be)];case 4:return Ut=rn.sent(),(an=Ut.find(function(tr){return tr.measurementId===We}))?[4,Me[an.appId]]:[3,6];case 5:rn.sent(),rn.label=6;case 6:return[3,8];case 7:return wt=rn.sent(),St.error(wt),[3,8];case 8:return de(Pe.CONFIG,We,tt),[2]}})})}function Nn(de,Me,Be,st,We){return ln(this,void 0,void 0,function(){var tt,It,Ut,an,wt,rn,Bn;return ge(this,function(zr){switch(zr.label){case 0:return zr.trys.push([0,4,,5]),tt=[],We&&We.send_to?(It=We.send_to,Array.isArray(It)||(It=[It]),[4,Promise.all(Be)]):[3,2];case 1:for(Ut=zr.sent(),an=function(pe){var fe=Ut.find(function(Ce){return Ce.measurementId===pe}),me=fe&&Me[fe.appId];if(!me)return tt=[],"break";tt.push(me)},wt=0,rn=It;wt<rn.length&&"break"!==an(rn[wt]);wt++);zr.label=2;case 2:return 0===tt.length&&(tt=Object.values(Me)),[4,Promise.all(tt)];case 3:return zr.sent(),de(Pe.EVENT,st,We||{}),[3,5];case 4:return Bn=zr.sent(),St.error(Bn),[3,5];case 5:return[2]}})})}var un,vn=((un={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",un["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",un["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",un["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",un["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",un["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",un["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",un["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',un["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',un),Vt=new k.ErrorFactory("analytics","Analytics",vn),Zn=new(function(){function de(Me,Be){void 0===Me&&(Me={}),void 0===Be&&(Be=1e3),this.throttleMetadata=Me,this.intervalMillis=Be}return de.prototype.getThrottleMetadata=function(Me){return this.throttleMetadata[Me]},de.prototype.setThrottleMetadata=function(Me,Be){this.throttleMetadata[Me]=Be},de.prototype.deleteThrottleMetadata=function(Me){delete this.throttleMetadata[Me]},de}());function Kn(de){return new Headers({Accept:"application/json","x-goog-api-key":de})}function Pr(de){var Me;return ln(this,void 0,void 0,function(){var Be,We,tt,It,Ut,an;return ge(this,function(rn){switch(rn.label){case 0:return Be=de.appId,We={method:"GET",headers:Kn(de.apiKey)},tt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",Be),[4,fetch(tt,We)];case 1:if(200===(It=rn.sent()).status||304===It.status)return[3,6];Ut="",rn.label=2;case 2:return rn.trys.push([2,4,,5]),[4,It.json()];case 3:return an=rn.sent(),(null===(Me=an.error)||void 0===Me?void 0:Me.message)&&(Ut=an.error.message),[3,5];case 4:return rn.sent(),[3,5];case 5:throw Vt.create("config-fetch-failed",{httpStatus:It.status,responseMessage:Ut});case 6:return[2,It.json()]}})})}function Rn(de,Me,Be,st){var We=Me.throttleEndTimeMillis,tt=Me.backoffCount;return void 0===st&&(st=Zn),ln(this,void 0,void 0,function(){var It,Ut,an,wt,rn,tr,jn;return ge(this,function(Bn){switch(Bn.label){case 0:It=de.appId,Ut=de.measurementId,Bn.label=1;case 1:return Bn.trys.push([1,3,,4]),[4,_n(Be,We)];case 2:return Bn.sent(),[3,4];case 3:if(an=Bn.sent(),Ut)return St.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+Ut+' provided in the "measurementId" field in the local Firebase config. ['+an.message+"]"),[2,{appId:It,measurementId:Ut}];throw an;case 4:return Bn.trys.push([4,6,,7]),[4,Pr(de)];case 5:return wt=Bn.sent(),st.deleteThrottleMetadata(It),[2,wt];case 6:if(!function(de){if(!(de instanceof k.FirebaseError))return!1;var Me=Number(de.httpStatus);return 429===Me||500===Me||503===Me||504===Me}(rn=Bn.sent())){if(st.deleteThrottleMetadata(It),Ut)return St.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+Ut+' provided in the "measurementId" field in the local Firebase config. ['+rn.message+"]"),[2,{appId:It,measurementId:Ut}];throw rn}return tr=503===Number(rn.httpStatus)?(0,k.calculateBackoffMillis)(tt,st.intervalMillis,30):(0,k.calculateBackoffMillis)(tt,st.intervalMillis),jn={throttleEndTimeMillis:Date.now()+tr,backoffCount:tt+1},st.setThrottleMetadata(It,jn),St.debug("Calling attemptFetch again in "+tr+" millis"),[2,Rn(de,jn,Be,st)];case 7:return[2]}})})}function _n(de,Me){return new Promise(function(Be,st){var We=Math.max(Me-Date.now(),0),tt=setTimeout(Be,We);de.addEventListener(function(){clearTimeout(tt),st(Vt.create("fetch-throttle",{throttleEndTimeMillis:Me}))})})}var je=function(){function de(){this.listeners=[]}return de.prototype.addEventListener=function(Me){this.listeners.push(Me)},de.prototype.abort=function(){this.listeners.forEach(function(Me){return Me()})},de}();var $t,dn,Ge={},xe=[],Ft={},Pt="dataLayer",Zt="gtag",Qn=!1;function On(de,Me,Be){void 0===de&&(de=!1),void 0===Me&&(Me={}),void 0===Be&&(Be=[]),Qn=de,Ge=Me,xe=Be,Pt="dataLayer",Zt="gtag"}function er(){return{initializationPromisesMap:Ge,dynamicConfigPromisesList:xe}}function Cn(de){if(Qn)throw Vt.create("already-initialized");de.dataLayerName&&(Pt=de.dataLayerName),de.gtagName&&(Zt=de.gtagName)}function zn(de,Me){!function(){var de=[];if((0,k.isBrowserExtension)()&&de.push("This is a browser extension environment."),(0,k.areCookiesEnabled)()||de.push("Cookies are not available."),de.length>0){var Me=de.map(function(st,We){return"("+(We+1)+") "+st}).join(" "),Be=Vt.create("invalid-analytics-context",{errorInfo:Me});St.warn(Be.message)}}();var Be=de.options.appId;if(!Be)throw Vt.create("no-app-id");if(!de.options.apiKey){if(!de.options.measurementId)throw Vt.create("no-api-key");St.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+de.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Ge[Be])throw Vt.create("already-exists",{id:Be});if(!Qn){(function(){for(var de=window.document.getElementsByTagName("script"),Me=0,Be=Object.values(de);Me<Be.length;Me++){var st=Be[Me];if(st.src&&st.src.includes(re))return st}return null})()||function(de){var Me=document.createElement("script");Me.src=re+"?l="+de,Me.async=!0,document.head.appendChild(Me)}(Pt),function(de){var Me=[];Array.isArray(window[de])?Me=window[de]:window[de]=Me}(Pt);var st=function(de,Me,Be,st,We){var tt=function(){for(var It=[],Ut=0;Ut<arguments.length;Ut++)It[Ut]=arguments[Ut];window[st].push(arguments)};return window[We]&&"function"==typeof window[We]&&(tt=window[We]),window[We]=function(de,Me,Be,st){return function(tt,It,Ut){return ln(this,void 0,void 0,function(){var an;return ge(this,function(wt){switch(wt.label){case 0:return wt.trys.push([0,6,,7]),tt!==Pe.EVENT?[3,2]:[4,Nn(de,Me,Be,It,Ut)];case 1:return wt.sent(),[3,5];case 2:return tt!==Pe.CONFIG?[3,4]:[4,nt(de,Me,Be,st,It,Ut)];case 3:return wt.sent(),[3,5];case 4:de(Pe.SET,It),wt.label=5;case 5:return[3,7];case 6:return an=wt.sent(),St.error(an),[3,7];case 7:return[2]}})})}}(tt,de,Me,Be),{gtagCore:tt,wrappedGtag:window[We]}}(Ge,xe,Ft,Pt,Zt);dn=st.wrappedGtag,$t=st.gtagCore,Qn=!0}Ge[Be]=function(de,Me,Be,st,We){return ln(this,void 0,void 0,function(){var tt,It,Ut,an,wt,rn,tr;return ge(this,function(jn){switch(jn.label){case 0:return tt=function(de,Me,Be){return void 0===Me&&(Me=Zn),ln(this,void 0,void 0,function(){var st,We,tt,It,Ut,an,wt=this;return ge(this,function(rn){if(tt=(st=de.options).apiKey,It=st.measurementId,!(We=st.appId))throw Vt.create("no-app-id");if(!tt){if(It)return[2,{measurementId:It,appId:We}];throw Vt.create("no-api-key")}return Ut=Me.getThrottleMetadata(We)||{backoffCount:0,throttleEndTimeMillis:Date.now()},an=new je,setTimeout(function(){return ln(wt,void 0,void 0,function(){return ge(this,function(tr){return an.abort(),[2]})})},6e4),[2,Rn({appId:We,apiKey:tt,measurementId:It},Ut,an,Me)]})})}(de),tt.then(function(Bn){Be[Bn.measurementId]=Bn.appId,de.options.measurementId&&Bn.measurementId!==de.options.measurementId&&St.warn("The measurement ID in the local Firebase config ("+de.options.measurementId+") does not match the measurement ID fetched from the server ("+Bn.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(Bn){return St.error(Bn)}),Me.push(tt),It=function(){return ln(this,void 0,void 0,function(){var de;return ge(this,function(Me){switch(Me.label){case 0:return(0,k.isIndexedDBAvailable)()?[3,1]:(St.warn(Vt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return Me.trys.push([1,3,,4]),[4,(0,k.validateIndexedDBOpenable)()];case 2:return Me.sent(),[3,4];case 3:return de=Me.sent(),St.warn(Vt.create("indexeddb-unavailable",{errorInfo:de}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(Bn){if(Bn)return st.getId()}),[4,Promise.all([tt,It])];case 1:return Ut=jn.sent(),an=Ut[0],wt=Ut[1],We("js",new Date),(tr={}).origin="firebase",tr.update=!0,rn=tr,null!=wt&&(rn.firebase_id=wt),We(Pe.CONFIG,an.measurementId,rn),[2,an.measurementId]}})})}(de,xe,Ft,Me,$t);var It={app:de,logEvent:function(Ut,an,wt){(function(de,Me,Be,st,We){return ln(this,void 0,void 0,function(){var tt,It;return ge(this,function(Ut){switch(Ut.label){case 0:return We&&We.global?(de(Pe.EVENT,Be,st),[2]):[3,1];case 1:return[4,Me];case 2:tt=Ut.sent(),It=Z(Z({},st),{send_to:tt}),de(Pe.EVENT,Be,It),Ut.label=3;case 3:return[2]}})})})(dn,Ge[Be],Ut,an,wt).catch(function(rn){return St.error(rn)})},setCurrentScreen:function(Ut,an){(function(de,Me,Be,st){return ln(this,void 0,void 0,function(){var We;return ge(this,function(tt){switch(tt.label){case 0:return st&&st.global?(de(Pe.SET,{screen_name:Be}),[2,Promise.resolve()]):[3,1];case 1:return[4,Me];case 2:We=tt.sent(),de(Pe.CONFIG,We,{update:!0,screen_name:Be}),tt.label=3;case 3:return[2]}})})})(dn,Ge[Be],Ut,an).catch(function(wt){return St.error(wt)})},setUserId:function(Ut,an){(function(de,Me,Be,st){return ln(this,void 0,void 0,function(){var We;return ge(this,function(tt){switch(tt.label){case 0:return st&&st.global?(de(Pe.SET,{user_id:Be}),[2,Promise.resolve()]):[3,1];case 1:return[4,Me];case 2:We=tt.sent(),de(Pe.CONFIG,We,{update:!0,user_id:Be}),tt.label=3;case 3:return[2]}})})})(dn,Ge[Be],Ut,an).catch(function(wt){return St.error(wt)})},setUserProperties:function(Ut,an){(function(de,Me,Be,st){return ln(this,void 0,void 0,function(){var We,tt,It,Ut,an;return ge(this,function(wt){switch(wt.label){case 0:if(!st||!st.global)return[3,1];for(We={},tt=0,It=Object.keys(Be);tt<It.length;tt++)We["user_properties."+(Ut=It[tt])]=Be[Ut];return de(Pe.SET,We),[2,Promise.resolve()];case 1:return[4,Me];case 2:an=wt.sent(),de(Pe.CONFIG,an,{update:!0,user_properties:Be}),wt.label=3;case 3:return[2]}})})})(dn,Ge[Be],Ut,an).catch(function(wt){return St.error(wt)})},setAnalyticsCollectionEnabled:function(Ut){(function(de,Me){return ln(this,void 0,void 0,function(){var Be;return ge(this,function(st){switch(st.label){case 0:return[4,de];case 1:return Be=st.sent(),window["ga-disable-"+Be]=!Me,[2]}})})})(Ge[Be],Ut).catch(function(an){return St.error(an)})},INTERNAL:{delete:function(){return delete Ge[Be],Promise.resolve()}}};return It}var Zr="analytics";function oi(de){de.INTERNAL.registerComponent(new U.Component(Zr,function(Be){return zn(Be.getProvider("app").getImmediate(),Be.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:Cn,EventName:dt,isSupported:Ti})),de.INTERNAL.registerComponent(new U.Component("analytics-internal",function(Be){try{return{logEvent:Be.getProvider(Zr).getImmediate().logEvent}}catch(We){throw Vt.create("interop-component-reg-failed",{reason:We})}},"PRIVATE")),de.registerVersion("@firebase/analytics","0.6.0")}function Ti(){return ln(this,void 0,void 0,function(){return ge(this,function(Be){switch(Be.label){case 0:if((0,k.isBrowserExtension)())return[2,!1];if(!(0,k.areCookiesEnabled)())return[2,!1];if(!(0,k.isIndexedDBAvailable)())return[2,!1];Be.label=1;case 1:return Be.trys.push([1,3,,4]),[4,(0,k.validateIndexedDBOpenable)()];case 2:return[2,Be.sent()];case 3:return Be.sent(),[2,!1];case 4:return[2]}})})}oi(D.default)},2:(br,ot,lt)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var Xe,Nt,$=lt(796),Q=lt(488),Z=lt(544),kt=lt(433),In=((Xe={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Xe["bad-app-name"]="Illegal App name: '{$appName}",Xe["duplicate-app"]="Firebase App named '{$appName}' already exists",Xe["app-deleted"]="Firebase App named '{$appName}' already deleted",Xe["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Xe["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Xe),Ot=new Q.ErrorFactory("app","Firebase",In),ln="@firebase/app",_t="[DEFAULT]",He=((Nt={})[ln]="fire-core",Nt["@firebase/analytics"]="fire-analytics",Nt["@firebase/auth"]="fire-auth",Nt["@firebase/database"]="fire-rtdb",Nt["@firebase/functions"]="fire-fn",Nt["@firebase/installations"]="fire-iid",Nt["@firebase/messaging"]="fire-fcm",Nt["@firebase/performance"]="fire-perf",Nt["@firebase/remote-config"]="fire-rc",Nt["@firebase/storage"]="fire-gcs",Nt["@firebase/firestore"]="fire-fst",Nt["fire-js"]="fire-js",Nt["firebase-wrapper"]="fire-js-all",Nt),rt=new kt.Logger("@firebase/app"),D=function(){function dt(Se,De,Ve){var at,Gt,St=this;this.firebase_=Ve,this.isDeleted_=!1,this.name_=De.name,this.automaticDataCollectionEnabled_=De.automaticDataCollectionEnabled||!1,this.options_=Q.deepCopy(Se),this.container=new Z.ComponentContainer(De.name),this._addComponent(new Z.Component("app",function(){return St},"PUBLIC"));try{for(var Wt=$.__values(this.firebase_.INTERNAL.components.values()),on=Wt.next();!on.done;on=Wt.next())this._addComponent(on.value)}catch(Nn){at={error:Nn}}finally{try{on&&!on.done&&(Gt=Wt.return)&&Gt.call(Wt)}finally{if(at)throw at.error}}}return Object.defineProperty(dt.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(Se){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=Se},enumerable:!1,configurable:!0}),Object.defineProperty(dt.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(dt.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),dt.prototype.delete=function(){var Se=this;return new Promise(function(De){Se.checkDestroyed_(),De()}).then(function(){return Se.firebase_.INTERNAL.removeApp(Se.name_),Promise.all(Se.container.getProviders().map(function(De){return De.delete()}))}).then(function(){Se.isDeleted_=!0})},dt.prototype._getService=function(Se,De){return void 0===De&&(De=_t),this.checkDestroyed_(),this.container.getProvider(Se).getImmediate({identifier:De})},dt.prototype._removeServiceInstance=function(Se,De){void 0===De&&(De=_t),this.container.getProvider(Se).clearInstance(De)},dt.prototype._addComponent=function(Se){try{this.container.addComponent(Se)}catch(De){rt.debug("Component "+Se.name+" failed to register with FirebaseApp "+this.name,De)}},dt.prototype._addOrOverwriteComponent=function(Se){this.container.addOrOverwriteComponent(Se)},dt.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ot.create("app-deleted",{appName:this.name_})},dt}();D.prototype.name&&D.prototype.options||D.prototype.delete||console.log("dc");var U=function k(){var dt=function(dt){var Se={},De=new Map,Ve={__esModule:!0,initializeApp:function(nn,Lt){void 0===Lt&&(Lt={}),("object"!=typeof Lt||null===Lt)&&(Lt={name:Lt});var vn=Lt;void 0===vn.name&&(vn.name=_t);var Vt=vn.name;if("string"!=typeof Vt||!Vt)throw Ot.create("bad-app-name",{appName:String(Vt)});if(Q.contains(Se,Vt))throw Ot.create("duplicate-app",{appName:Vt});var yn=new dt(nn,vn,Ve);return Se[Vt]=yn,yn},app:Gt,registerVersion:function(nn,Lt,un){var vn,Vt=null!==(vn=He[nn])&&void 0!==vn?vn:nn;un&&(Vt+="-"+un);var yn=Vt.match(/\s|\//),Jn=Lt.match(/\s|\//);if(yn||Jn){var ir=['Unable to register library "'+Vt+'" with version "'+Lt+'":'];return yn&&ir.push('library name "'+Vt+'" contains illegal characters (whitespace or "/")'),yn&&Jn&&ir.push("and"),Jn&&ir.push('version name "'+Lt+'" contains illegal characters (whitespace or "/")'),void rt.warn(ir.join(" "))}on(new Z.Component(Vt+"-version",function(){return{library:Vt,version:Lt}},"VERSION"))},setLogLevel:kt.setLogLevel,onLog:function(nn,Lt){if(null!==nn&&"function"!=typeof nn)throw Ot.create("invalid-log-argument",{appName:name});kt.setUserLogHandler(nn,Lt)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:on,removeApp:function(nn){delete Se[nn]},components:De,useAsService:function(nn,Lt){return"serverAuth"===Lt?null:Lt}}};function Gt(nn){if(!Q.contains(Se,nn=nn||_t))throw Ot.create("no-app",{appName:nn});return Se[nn]}function on(nn){var Lt,un,vn=nn.name;if(De.has(vn))return rt.debug("There were multiple attempts to register component "+vn+"."),"PUBLIC"===nn.type?Ve[vn]:null;if(De.set(vn,nn),"PUBLIC"===nn.type){var Vt=function(Zn){if(void 0===Zn&&(Zn=Gt()),"function"!=typeof Zn[vn])throw Ot.create("invalid-app-argument",{appName:vn});return Zn[vn]()};void 0!==nn.serviceProps&&Q.deepExtend(Vt,nn.serviceProps),Ve[vn]=Vt,dt.prototype[vn]=function(){for(var Zn=[],Kn=0;Kn<arguments.length;Kn++)Zn[Kn]=arguments[Kn];return this._getService.bind(this,vn).apply(this,nn.multipleInstances?Zn:[])}}try{for(var yn=$.__values(Object.keys(Se)),Jn=yn.next();!Jn.done;Jn=yn.next())Se[Jn.value]._addComponent(nn)}catch(Zn){Lt={error:Zn}}finally{try{Jn&&!Jn.done&&(un=yn.return)&&un.call(yn)}finally{if(Lt)throw Lt.error}}return"PUBLIC"===nn.type?Ve[vn]:null}return Ve.default=Ve,Object.defineProperty(Ve,"apps",{get:function(){return Object.keys(Se).map(function(nn){return Se[nn]})}}),Gt.App=dt,Ve}(D);return dt.INTERNAL=$.__assign($.__assign({},dt.INTERNAL),{createFirebaseNamespace:k,extendNamespace:function(De){Q.deepExtend(dt,De)},createSubscribe:Q.createSubscribe,ErrorFactory:Q.ErrorFactory,deepExtend:Q.deepExtend}),dt}(),N=function(){function dt(Se){this.container=Se}return dt.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(De){if(function(dt){var Se=dt.getComponent();return"VERSION"===(null==Se?void 0:Se.type)}(De)){var Ve=De.getImmediate();return Ve.library+"/"+Ve.version}return null}).filter(function(De){return De}).join(" ")},dt}();if(Q.isBrowser()&&void 0!==self.firebase){rt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&rt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var re=U.initializeApp;U.initializeApp=function(){for(var dt=[],Se=0;Se<arguments.length;Se++)dt[Se]=arguments[Se];return Q.isNode()&&rt.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),re.apply(void 0,dt)};var dt,Pe=U;(dt=Pe).INTERNAL.registerComponent(new Z.Component("platform-logger",function(De){return new N(De)},"PRIVATE")),dt.registerVersion(ln,"0.6.11",undefined),dt.registerVersion("fire-js",""),ot.default=Pe,ot.firebase=Pe},548:(br,ot,lt)=>{(function(){var Q,$=lt(2).default,Z="function"==typeof Object.defineProperties?Object.defineProperty:function(n,u,g){n!=Array.prototype&&n!=Object.prototype&&(n[u]=g.value)},Xe=function(n){n=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,n];for(var u=0;u<n.length;++u){var g=n[u];if(g&&g.Math==Math)return g}return globalThis}(this);function Ot(n){var u=0;return function(){return u<n.length?{done:!1,value:n[u++]}:{done:!0}}}function ln(n){var u="undefined"!=typeof Symbol&&Symbol.iterator&&n[Symbol.iterator];return u?u.call(n):{next:Ot(n)}}!function(n,u){if(u){var g=Xe;n=n.split(".");for(var b=0;b<n.length-1;b++){var M=n[b];M in g||(g[M]={}),g=g[M]}(u=u(b=g[n=n[n.length-1]]))!=b&&null!=u&&Z(g,n,{configurable:!0,writable:!0,value:u})}}("Promise",function(n){function u(Y){this.b=0,this.c=void 0,this.a=[];var be=this.f();try{Y(be.resolve,be.reject)}catch(ht){be.reject(ht)}}function g(){this.a=null}function b(Y){return Y instanceof u?Y:new u(function(be){be(Y)})}if(n)return n;g.prototype.b=function(Y){if(null==this.a){this.a=[];var be=this;this.c(function(){be.g()})}this.a.push(Y)};var M=Xe.setTimeout;g.prototype.c=function(Y){M(Y,0)},g.prototype.g=function(){for(;this.a&&this.a.length;){var Y=this.a;this.a=[];for(var be=0;be<Y.length;++be){var ht=Y[be];Y[be]=null;try{ht()}catch(Mt){this.f(Mt)}}}this.a=null},g.prototype.f=function(Y){this.c(function(){throw Y})},u.prototype.f=function(){function Y(Mt){return function(Wn){ht||(ht=!0,Mt.call(be,Wn))}}var be=this,ht=!1;return{resolve:Y(this.v),reject:Y(this.g)}},u.prototype.v=function(Y){if(Y===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(Y instanceof u)this.o(Y);else{e:switch(typeof Y){case"object":var be=null!=Y;break e;case"function":be=!0;break e;default:be=!1}be?this.m(Y):this.h(Y)}},u.prototype.m=function(Y){var be=void 0;try{be=Y.then}catch(ht){return void this.g(ht)}"function"==typeof be?this.u(be,Y):this.h(Y)},u.prototype.g=function(Y){this.i(2,Y)},u.prototype.h=function(Y){this.i(1,Y)},u.prototype.i=function(Y,be){if(0!=this.b)throw Error("Cannot settle("+Y+", "+be+"): Promise already settled in state"+this.b);this.b=Y,this.c=be,this.l()},u.prototype.l=function(){if(null!=this.a){for(var Y=0;Y<this.a.length;++Y)G.b(this.a[Y]);this.a=null}};var G=new g;return u.prototype.o=function(Y){var be=this.f();Y.Pa(be.resolve,be.reject)},u.prototype.u=function(Y,be){var ht=this.f();try{Y.call(be,ht.resolve,ht.reject)}catch(Mt){ht.reject(Mt)}},u.prototype.then=function(Y,be){function ht(kr,zi){return"function"==typeof kr?function(Su){try{Mt(kr(Su))}catch(Cf){Wn(Cf)}}:zi}var Mt,Wn,ii=new u(function(kr,zi){Mt=kr,Wn=zi});return this.Pa(ht(Y,Mt),ht(be,Wn)),ii},u.prototype.catch=function(Y){return this.then(void 0,Y)},u.prototype.Pa=function(Y,be){function ht(){switch(Mt.b){case 1:Y(Mt.c);break;case 2:be(Mt.c);break;default:throw Error("Unexpected state: "+Mt.b)}}var Mt=this;null==this.a?G.b(ht):this.a.push(ht)},u.resolve=b,u.reject=function(Y){return new u(function(be,ht){ht(Y)})},u.race=function(Y){return new u(function(be,ht){for(var Mt=ln(Y),Wn=Mt.next();!Wn.done;Wn=Mt.next())b(Wn.value).Pa(be,ht)})},u.all=function(Y){var be=ln(Y),ht=be.next();return ht.done?b([]):new u(function(Mt,Wn){function ii(Su){return function(Cf){kr[Su]=Cf,0==--zi&&Mt(kr)}}var kr=[],zi=0;do{kr.push(void 0),zi++,b(ht.value).Pa(ii(kr.length-1),Wn),ht=be.next()}while(!ht.done)})},u});var ge=ge||{},te=this||self,$e=/^[\w+/_-]+[=]{0,2}$/,Ze=null;function Ae(){}function mt(n){var u=typeof n;if("object"==u){if(!n)return"null";if(n instanceof Array)return"array";if(n instanceof Object)return u;var g=Object.prototype.toString.call(n);if("[object Window]"==g)return"object";if("[object Array]"==g||"number"==typeof n.length&&void 0!==n.splice&&void 0!==n.propertyIsEnumerable&&!n.propertyIsEnumerable("splice"))return"array";if("[object Function]"==g||void 0!==n.call&&void 0!==n.propertyIsEnumerable&&!n.propertyIsEnumerable("call"))return"function"}else if("function"==u&&void 0===n.call)return"object";return u}function fn(n){var u=mt(n);return"array"==u||"object"==u&&"number"==typeof n.length}function Dt(n){return"function"==mt(n)}function Re(n){var u=typeof n;return"object"==u&&null!=n||"function"==u}function it(n){return Object.prototype.hasOwnProperty.call(n,ze)&&n[ze]||(n[ze]=++At)}var ze="closure_uid_"+(1e9*Math.random()>>>0),At=0;function Nt(n,u,g){return n.call.apply(n.bind,arguments)}function _t(n,u,g){if(!n)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,b),n.apply(u,M)}}return function(){return n.apply(u,arguments)}}function He(n,u,g){return(He=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Nt:_t).apply(null,arguments)}function rt(n,u){var g=Array.prototype.slice.call(arguments,1);return function(){var b=g.slice();return b.push.apply(b,arguments),n.apply(this,b)}}var D=Date.now||function(){return+new Date};function C(n,u){function g(){}g.prototype=u.prototype,n.$a=u.prototype,n.prototype=new g,n.prototype.constructor=n}function E(n,u,g){this.code=U+n,this.message=u||N[n]||"",this.a=g||null}function k(n){var u=n&&n.code;return u?new E(u.substring(U.length),n.message,n.serverResponse):null}C(E,Error),E.prototype.w=function(){var n={code:this.code,message:this.message};return this.a&&(n.serverResponse=this.a),n},E.prototype.toJSON=function(){return this.w()};var pt,U="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},ee={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function ae(n){for(var u in ee)if(ee[u].id===n)return{firebaseEndpoint:(n=ee[u]).Sa,secureTokenEndpoint:n.Ya,identityPlatformEndpoint:n.Va};return null}function re(n){if(!n)return!1;try{return!!n.$goog_Thenable}catch(u){return!1}}function Pe(n){if(Error.captureStackTrace)Error.captureStackTrace(this,Pe);else{var u=Error().stack;u&&(this.stack=u)}n&&(this.message=String(n))}function dt(n,u){for(var g="",b=(n=n.split("%s")).length-1,M=0;M<b;M++)g+=n[M]+(M<u.length?u[M]:"%s");Pe.call(this,g+n[b])}function Se(n,u){throw new dt("Failure"+(n?": "+n:""),Array.prototype.slice.call(arguments,1))}function De(n,u){this.c=n,this.f=u,this.b=0,this.a=null}function Ve(n,u){n.f(u),100>n.b&&(n.b++,u.next=n.a,n.a=u)}function at(){this.b=this.a=null}pt=ae("__EID__")?"__EID__":void 0,C(Pe,Error),Pe.prototype.name="CustomError",C(dt,Pe),dt.prototype.name="AssertionError",De.prototype.get=function(){if(0<this.b){this.b--;var n=this.a;this.a=n.next,n.next=null}else n=this.c();return n};var Gt=new De(function(){return new Wt},function(n){n.reset()});function St(){var n=ei,u=null;return n.a&&(u=n.a,n.a=n.a.next,n.a||(n.b=null),u.next=null),u}function Wt(){this.next=this.b=this.a=null}at.prototype.add=function(n,u){var g=Gt.get();g.set(n,u),this.b?this.b.next=g:this.a=g,this.b=g},Wt.prototype.set=function(n,u){this.a=n,this.b=u,this.next=null},Wt.prototype.reset=function(){this.next=this.b=this.a=null};var on=Array.prototype.indexOf?function(n,u){return Array.prototype.indexOf.call(n,u,void 0)}:function(n,u){if("string"==typeof n)return"string"!=typeof u||1!=u.length?-1:n.indexOf(u,0);for(var g=0;g<n.length;g++)if(g in n&&n[g]===u)return g;return-1},nt=Array.prototype.forEach?function(n,u,g){Array.prototype.forEach.call(n,u,g)}:function(n,u,g){for(var b=n.length,M="string"==typeof n?n.split(""):n,G=0;G<b;G++)G in M&&u.call(g,M[G],G,n)},vr=Array.prototype.filter?function(n,u){return Array.prototype.filter.call(n,u,void 0)}:function(n,u){for(var g=n.length,b=[],M=0,G="string"==typeof n?n.split(""):n,Y=0;Y<g;Y++)if(Y in G){var be=G[Y];u.call(void 0,be,Y,n)&&(b[M++]=be)}return b},nn=Array.prototype.map?function(n,u){return Array.prototype.map.call(n,u,void 0)}:function(n,u){for(var g=n.length,b=Array(g),M="string"==typeof n?n.split(""):n,G=0;G<g;G++)G in M&&(b[G]=u.call(void 0,M[G],G,n));return b},Lt=Array.prototype.some?function(n,u){return Array.prototype.some.call(n,u,void 0)}:function(n,u){for(var g=n.length,b="string"==typeof n?n.split(""):n,M=0;M<g;M++)if(M in b&&u.call(void 0,b[M],M,n))return!0;return!1};function vn(n,u){return 0<=on(n,u)}function Vt(n,u){var g;return(g=0<=(u=on(n,u)))&&Array.prototype.splice.call(n,u,1),g}function yn(n,u){!function(n,u){for(var g="string"==typeof n?n.split(""):n,b=n.length-1;0<=b;--b)b in g&&u.call(void 0,g[b],b,n)}(n,function(b,M){u.call(void 0,b,M,n)&&Array.prototype.splice.call(n,M,1)})}function Jn(n){return Array.prototype.concat.apply([],arguments)}function ir(n){var u=n.length;if(0<u){for(var g=Array(u),b=0;b<u;b++)g[b]=n[b];return g}return[]}var Ge,Zn=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]},Kn=/&/g,Pr=/</g,or=/>/g,Rn=/"/g,_n=/'/g,Jr=/\x00/g,je=/[\x00&<>"']/;function he(n,u){return-1!=n.indexOf(u)}function Fe(n,u){return n<u?-1:n>u?1:0}e:{var xe=te.navigator;if(xe){var Ft=xe.userAgent;if(Ft){Ge=Ft;break e}}Ge=""}function Pt(n){return he(Ge,n)}function Zt(n,u){for(var g in n)u.call(void 0,n[g],g,n)}function $t(n){for(var u in n)return!1;return!0}function dn(n){var g,u={};for(g in n)u[g]=n[g];return u}var Qn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function On(n,u){for(var g,b,M=1;M<arguments.length;M++){for(g in b=arguments[M])n[g]=b[g];for(var G=0;G<Qn.length;G++)g=Qn[G],Object.prototype.hasOwnProperty.call(b,g)&&(n[g]=b[g])}}function er(n,u){e:{try{var g=n&&n.ownerDocument,b=g&&(g.defaultView||g.parentWindow);if((b=b||te).Element&&b.Location){var M=b;break e}}catch(Y){}M=null}if(M&&void 0!==M[u]&&(!n||!(n instanceof M[u])&&(n instanceof M.Location||n instanceof M.Element))){if(Re(n))try{var G=n.constructor.displayName||n.constructor.name||Object.prototype.toString.call(n)}catch(Y){G="<object could not be stringified>"}else G=void 0===n?"undefined":null===n?"null":typeof n;Se("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,G)}}function Cn(n,u){this.a=n===sr&&u||"",this.b=zn}function Cr(n){return n instanceof Cn&&n.constructor===Cn&&n.b===zn?n.a:(Se("expected object of type Const, got '"+n+"'"),"type_error:Const")}Cn.prototype.sa=!0,Cn.prototype.ra=function(){return this.a},Cn.prototype.toString=function(){return"Const{"+this.a+"}"};var zn={},sr={},Bi=new Cn(sr,"");function Zr(n,u){this.a=n===st&&u||"",this.b=Be}function oi(n){return n instanceof Zr&&n.constructor===Zr&&n.b===Be?n.a:(Se("expected object of type TrustedResourceUrl, got '"+n+"' of type "+mt(n)),"type_error:TrustedResourceUrl")}function Ti(n,u){var g=Cr(n);if(!Me.test(g))throw Error("Invalid TrustedResourceUrl format: "+g);return n=g.replace(de,function(b,M){if(!Object.prototype.hasOwnProperty.call(u,M))throw Error('Found marker, "'+M+'", in format string, "'+g+'", but no valid label mapping found in args: '+JSON.stringify(u));return(b=u[M])instanceof Cn?Cr(b):encodeURIComponent(String(b))}),new Zr(st,n)}Zr.prototype.sa=!0,Zr.prototype.ra=function(){return this.a.toString()},Zr.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var de=/%{(\w+)}/g,Me=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Be={},st={};function We(n,u){this.a=n===wt&&u||"",this.b=an}function tt(n){return n instanceof We&&n.constructor===We&&n.b===an?n.a:(Se("expected object of type SafeUrl, got '"+n+"' of type "+mt(n)),"type_error:SafeUrl")}We.prototype.sa=!0,We.prototype.ra=function(){return this.a.toString()},We.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var It=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ut(n){return n instanceof We?n:(n="object"==typeof n&&n.sa?n.ra():String(n),It.test(n)||(n="about:invalid#zClosurez"),new We(wt,n))}var an={},wt={};function rn(){this.a="",this.b=jn}function tr(n){return n instanceof rn&&n.constructor===rn&&n.b===jn?n.a:(Se("expected object of type SafeHtml, got '"+n+"' of type "+mt(n)),"type_error:SafeHtml")}rn.prototype.sa=!0,rn.prototype.ra=function(){return this.a.toString()},rn.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jn={};function Bn(n){var u=new rn;return u.a=n,u}Bn("<!DOCTYPE html>");var zr=Bn("");function me(n,u){for(var g=n.split("%s"),b="",M=Array.prototype.slice.call(arguments,1);M.length&&1<g.length;)b+=g.shift()+M.shift();return b+g.join("%s")}function Ce(n){return je.test(n)&&(-1!=n.indexOf("&")&&(n=n.replace(Kn,"&amp;")),-1!=n.indexOf("<")&&(n=n.replace(Pr,"&lt;")),-1!=n.indexOf(">")&&(n=n.replace(or,"&gt;")),-1!=n.indexOf('"')&&(n=n.replace(Rn,"&quot;")),-1!=n.indexOf("'")&&(n=n.replace(_n,"&#39;")),-1!=n.indexOf("\0")&&(n=n.replace(Jr,"&#0;"))),n}function J(n){return J[" "](n),n}Bn("<br>"),J[" "]=Ae;var cn,n,W=Pt("Opera"),se=Pt("Trident")||Pt("MSIE"),ye=Pt("Edge"),_e=ye||se,ke=Pt("Gecko")&&!(he(Ge.toLowerCase(),"webkit")&&!Pt("Edge"))&&!(Pt("Trident")||Pt("MSIE"))&&!Pt("Edge"),vt=he(Ge.toLowerCase(),"webkit")&&!Pt("Edge");function ct(){var n=te.document;return n?n.documentMode:void 0}e:{var Tt="",Bt=(n=Ge,ke?/rv:([^\);]+)(\)|;)/.exec(n):ye?/Edge\/([\d\.]+)/.exec(n):se?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vt?/WebKit\/(\S+)/.exec(n):W?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Bt&&(Tt=Bt?Bt[1]:""),se){var cr=ct();if(null!=cr&&cr>parseFloat(Tt)){cn=String(cr);break e}}cn=Tt}var bn,xn={};function pn(n){return function(n,u){var g=xn;return Object.prototype.hasOwnProperty.call(g,n)?g[n]:g[n]=u()}(n,function(){for(var u=0,g=Zn(String(cn)).split("."),b=Zn(String(n)).split("."),M=Math.max(g.length,b.length),G=0;0==u&&G<M;G++){var Y=g[G]||"",be=b[G]||"";do{if(Y=/(\d*)(\D*)(.*)/.exec(Y)||["","","",""],be=/(\d*)(\D*)(.*)/.exec(be)||["","","",""],0==Y[0].length&&0==be[0].length)break;u=Fe(0==Y[1].length?0:parseInt(Y[1],10),0==be[1].length?0:parseInt(be[1],10))||Fe(0==Y[2].length,0==be[2].length)||Fe(Y[2],be[2]),Y=Y[3],be=be[3]}while(0==u)}return 0<=u})}bn=te.document&&se?ct():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(n){}var xs=!se||9<=Number(bn);function Lr(n){var u=document;return"string"==typeof n?u.getElementById(n):n}function $o(n,u){Zt(u,function(g,b){g&&"object"==typeof g&&g.sa&&(g=g.ra()),"style"==b?n.style.cssText=g:"class"==b?n.className=g:"for"==b?n.htmlFor=g:$i.hasOwnProperty(b)?n.setAttribute($i[b],g):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?n.setAttribute(b,g):n[b]=g})}var ro,Qo,$i={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pi(n,u,g){function b(Y){Y&&u.appendChild("string"==typeof Y?n.createTextNode(Y):Y)}for(var M=2;M<g.length;M++){var G=g[M];!fn(G)||Re(G)&&0<G.nodeType?b(G):nt(Lo(G)?ir(G):G,b)}}function _s(n,u){return u=String(u),"application/xhtml+xml"===n.contentType&&(u=u.toLowerCase()),n.createElement(u)}function Lo(n){if(n&&"number"==typeof n.length){if(Re(n))return"function"==typeof n.item||"string"==typeof n.item;if(Dt(n))return"function"==typeof n.item}return!1}function Ko(n){te.setTimeout(function(){throw n},0)}function ws(n,u){Qo||function(){if(te.Promise&&te.Promise.resolve){var n=te.Promise.resolve(void 0);Qo=function(){n.then(Oi)}}else Qo=function(){var u=Oi;!Dt(te.setImmediate)||te.Window&&te.Window.prototype&&!Pt("Edge")&&te.Window.prototype.setImmediate==te.setImmediate?(ro||(ro=function(){var n=te.MessageChannel;if(void 0===n&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Pt("Presto")&&(n=function(){var M=_s(document,"IFRAME");M.style.display="none",function(n){var u=new Zr(st,Cr(Bi));er(n,"HTMLIFrameElement"),n.src=oi(u).toString()}(M),document.documentElement.appendChild(M);var G=M.contentWindow;(M=G.document).open(),M.write(tr(zr)),M.close();var Y="callImmediate"+Math.random(),be="file:"==G.location.protocol?"*":G.location.protocol+"//"+G.location.host;M=He(function(ht){("*"==be||ht.origin==be)&&ht.data==Y&&this.port1.onmessage()},this),G.addEventListener("message",M,!1),this.port1={},this.port2={postMessage:function(){G.postMessage(Y,be)}}}),void 0!==n&&!Pt("Trident")&&!Pt("MSIE")){var u=new n,g={},b=g;return u.port1.onmessage=function(){if(void 0!==g.next){var M=(g=g.next).Fb;g.Fb=null,M()}},function(M){b.next={Fb:M},b=b.next,u.port2.postMessage(0)}}return function(M){te.setTimeout(M,0)}}()),ro(u)):te.setImmediate(u)}}(),Hi||(Qo(),Hi=!0),ei.add(n,u)}var Hi=!1,ei=new at;function Oi(){for(var n;n=St();){try{n.a.call(n.b)}catch(u){Ko(u)}Ve(Gt,n)}Hi=!1}function Sn(n,u){if(this.a=Di,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,n!=Ae)try{var g=this;n.call(u,function(b){Ki(g,Yo,b)},function(b){if(!(b instanceof go))try{throw b instanceof Error?b:Error("Promise rejected.")}catch(M){}Ki(g,Ir,b)})}catch(b){Ki(this,Ir,b)}}var Di=0,Yo=2,Ir=3;function io(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}io.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var bs=new De(function(){return new io},function(n){n.reset()});function Fr(n,u,g){var b=bs.get();return b.g=n,b.b=u,b.f=g,b}function jt(n){if(n instanceof Sn)return n;var u=new Sn(Ae);return Ki(u,Yo,n),u}function kn(n){return new Sn(function(u,g){g(n)})}function Ws(n,u,g){Qi(n,u,g,null)||ws(rt(u,n))}function hr(n){return new Sn(function(u){var g=n.length,b=[];if(g)for(var M=function(be,ht,Mt){g--,b[be]=ht?{Ob:!0,value:Mt}:{Ob:!1,reason:Mt},0==g&&u(b)},G=0;G<n.length;G++)Ws(n[G],rt(M,G,!0),rt(M,G,!1));else u(b)})}function oo(n,u){if(n.a==Di)if(n.c){var g=n.c;if(g.b){for(var b=0,M=null,G=null,Y=g.b;Y&&(Y.c||(b++,Y.a==n&&(M=Y),!(M&&1<b)));Y=Y.next)M||(G=Y);M&&(g.a==Di&&1==b?oo(g,u):(G?((b=G).next==g.f&&(g.f=b),b.next=b.next.next):To(g),Jo(g,M,Ir,u)))}n.c=null}else Ki(n,Ir,u)}function Si(n,u){n.b||n.a!=Yo&&n.a!=Ir||ls(n),n.f?n.f.next=u:n.b=u,n.f=u}function Fn(n,u,g,b){var M=Fr(null,null,null);return M.a=new Sn(function(G,Y){M.g=u?function(be){try{var ht=u.call(b,be);G(ht)}catch(Mt){Y(Mt)}}:G,M.b=g?function(be){try{var ht=g.call(b,be);void 0===ht&&be instanceof go?Y(be):G(ht)}catch(Mt){Y(Mt)}}:Y}),M.a.c=n,Si(n,M),M.a}function Ki(n,u,g){n.a==Di&&(n===g&&(u=Ir,g=new TypeError("Promise cannot resolve to itself")),n.a=1,Qi(g,n.Zc,n.$c,n)||(n.i=g,n.a=u,n.c=null,ls(n),u!=Ir||g instanceof go||function(n,u){n.g=!0,ws(function(){n.g&&Pn.call(null,u)})}(n,g)))}function Qi(n,u,g,b){if(n instanceof Sn)return Si(n,Fr(u||Ae,g||null,b)),!0;if(re(n))return n.then(u,g,b),!0;if(Re(n))try{var M=n.then;if(Dt(M))return function(n,u,g,b,M){function G(ht){be||(be=!0,b.call(M,ht))}var be=!1;try{u.call(n,function(ht){be||(be=!0,g.call(M,ht))},G)}catch(ht){G(ht)}}(n,M,u,g,b),!0}catch(G){return g.call(b,G),!0}return!1}function ls(n){n.h||(n.h=!0,ws(n.fc,n))}function To(n){var u=null;return n.b&&(n.b=(u=n.b).next,u.next=null),n.b||(n.f=null),u}function Jo(n,u,g,b){if(g==Ir&&u.b&&!u.c)for(;n&&n.g;n=n.c)n.g=!1;if(u.a)u.a.c=null,ks(u,g,b);else try{u.c?u.g.call(u.f):ks(u,g,b)}catch(M){Pn.call(null,M)}Ve(bs,u)}function ks(n,u,g){u==Yo?n.g.call(n.f,g):n.b&&n.b.call(n.f,g)}Sn.prototype.then=function(n,u,g){return Fn(this,Dt(n)?n:null,Dt(u)?u:null,g)},Sn.prototype.$goog_Thenable=!0,(Q=Sn.prototype).na=function(n,u){return(n=Fr(n,n,u)).c=!0,Si(this,n),this},Q.s=function(n,u){return Fn(this,null,n,u)},Q.cancel=function(n){if(this.a==Di){var u=new go(n);ws(function(){oo(this,u)},this)}},Q.Zc=function(n){this.a=Di,Ki(this,Yo,n)},Q.$c=function(n){this.a=Di,Ki(this,Ir,n)},Q.fc=function(){for(var n;n=To(this);)Jo(this,n,this.a,this.i);this.h=!1};var Pn=Ko;function go(n){Pe.call(this,n)}function Es(){0!=si&&(j[it(this)]=this),this.xa=this.xa,this.oa=this.oa}C(go,Pe),go.prototype.name="cancel";var si=0,j={};function L(n){if(!n.xa&&(n.xa=!0,n.Da(),0!=si)){var u=it(n);if(0!=si&&n.oa&&0<n.oa.length)throw Error(n+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete j[u]}}Es.prototype.xa=!1,Es.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var K=Object.freeze||function(n){return n},le=!se||9<=Number(bn),we=se&&!pn("9"),Ne=function(){if(!te.addEventListener||!Object.defineProperty)return!1;var n=!1,u=Object.defineProperty({},"passive",{get:function(){n=!0}});try{te.addEventListener("test",Ae,u),te.removeEventListener("test",Ae,u)}catch(g){}return n}();function Qe(n,u){this.type=n,this.b=this.target=u,this.defaultPrevented=!1}function yt(n,u){if(Qe.call(this,n?n.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,n){var g=this.type=n.type,b=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.b=u,u=n.relatedTarget){if(ke){e:{try{J(u.nodeName);var M=!0;break e}catch(G){}M=!1}M||(u=null)}}else"mouseover"==g?u=n.fromElement:"mouseout"==g&&(u=n.toElement);this.relatedTarget=u,b?(this.clientX=void 0!==b.clientX?b.clientX:b.pageX,this.clientY=void 0!==b.clientY?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ft[n.pointerType]||"",this.a=n,n.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},C(yt,Qe);var ft=K({2:"touch",3:"pen",4:"mouse"});yt.prototype.preventDefault=function(){yt.$a.preventDefault.call(this);var n=this.a;if(n.preventDefault)n.preventDefault();else if(n.returnValue=!1,we)try{(n.ctrlKey||112<=n.keyCode&&123>=n.keyCode)&&(n.keyCode=-1)}catch(u){}},yt.prototype.g=function(){return this.a};var xt="closure_listenable_"+(1e6*Math.random()|0),qt=0;function sn(n,u,g,b,M){this.listener=n,this.proxy=null,this.src=u,this.type=g,this.capture=!!b,this.Ua=M,this.key=++qt,this.va=this.Oa=!1}function mn(n){n.va=!0,n.listener=null,n.proxy=null,n.src=null,n.Ua=null}function jr(n){this.src=n,this.a={},this.b=0}function Vn(n,u){var g=u.type;g in n.a&&Vt(n.a[g],u)&&(mn(u),0==n.a[g].length&&(delete n.a[g],n.b--))}function wn(n,u,g,b){for(var M=0;M<n.length;++M){var G=n[M];if(!G.va&&G.listener==u&&G.capture==!!g&&G.Ua==b)return M}return-1}jr.prototype.add=function(n,u,g,b,M){var G=n.toString();(n=this.a[G])||(n=this.a[G]=[],this.b++);var Y=wn(n,u,b,M);return-1<Y?(u=n[Y],g||(u.Oa=!1)):((u=new sn(u,this.src,G,!!b,M)).Oa=g,n.push(u)),u};var lr="closure_lm_"+(1e6*Math.random()|0),gi={};function nr(n,u,g,b,M){if(b&&b.once)Fo(n,u,g,b,M);else if(Array.isArray(u))for(var G=0;G<u.length;G++)nr(n,u[G],g,b,M);else g=Er(g),n&&n[xt]?Kr(n,u,g,Re(b)?!!b.capture:!!b,M):$r(n,u,g,!1,b,M)}function $r(n,u,g,b,M,G){if(!u)throw Error("Invalid event type");var Y=Re(M)?!!M.capture:!!M,be=ti(n);if(be||(n[lr]=be=new jr(n)),!(g=be.add(u,g,b,Y,G)).proxy)if(b=function(){var n=zs,u=le?function(g){return n.call(u.src,u.listener,g)}:function(g){if(!(g=n.call(u.src,u.listener,g)))return g};return u}(),g.proxy=b,b.src=n,b.listener=g,n.addEventListener)Ne||(M=Y),void 0===M&&(M=!1),n.addEventListener(u.toString(),b,M);else if(n.attachEvent)n.attachEvent(fs(u.toString()),b);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(b)}}function Fo(n,u,g,b,M){if(Array.isArray(u))for(var G=0;G<u.length;G++)Fo(n,u[G],g,b,M);else g=Er(g),n&&n[xt]?jo(n,u,g,Re(b)?!!b.capture:!!b,M):$r(n,u,g,!0,b,M)}function Gr(n,u,g,b,M){if(Array.isArray(u))for(var G=0;G<u.length;G++)Gr(n,u[G],g,b,M);else b=Re(b)?!!b.capture:!!b,g=Er(g),n&&n[xt]?(n=n.v,(u=String(u).toString())in n.a&&-1<(g=wn(G=n.a[u],g,b,M))&&(mn(G[g]),Array.prototype.splice.call(G,g,1),0==G.length&&(delete n.a[u],n.b--))):n&&(n=ti(n))&&(u=n.a[u.toString()],n=-1,u&&(n=wn(u,g,b,M)),(g=-1<n?u[n]:null)&&Pi(g))}function Pi(n){if("number"!=typeof n&&n&&!n.va){var u=n.src;if(u&&u[xt])Vn(u.v,n);else{var g=n.type,b=n.proxy;u.removeEventListener?u.removeEventListener(g,b,n.capture):u.detachEvent?u.detachEvent(fs(g),b):u.addListener&&u.removeListener&&u.removeListener(b),(g=ti(u))?(Vn(g,n),0==g.b&&(g.src=null,u[lr]=null)):mn(n)}}}function fs(n){return n in gi?gi[n]:gi[n]="on"+n}function Zo(n,u,g,b){var M=!0;if((n=ti(n))&&(u=n.a[u.toString()]))for(u=u.concat(),n=0;n<u.length;n++){var G=u[n];G&&G.capture==g&&!G.va&&(G=es(G,b),M=M&&!1!==G)}return M}function es(n,u){var g=n.listener,b=n.Ua||n.src;return n.Oa&&Pi(n),g.call(b,u)}function zs(n,u){if(n.va)return!0;if(!le){if(!u)e:{u=["window","event"];for(var g=te,b=0;b<u.length;b++)if(null==(g=g[u[b]])){u=null;break e}u=g}if(u=new yt(b=u,this),g=!0,!(0>b.keyCode||null!=b.returnValue)){e:{var M=!1;if(0==b.keyCode)try{b.keyCode=-1;break e}catch(Y){M=!0}(M||null==b.returnValue)&&(b.returnValue=!0)}for(b=[],M=u.b;M;M=M.parentNode)b.push(M);for(n=n.type,M=b.length-1;0<=M;M--){u.b=b[M];var G=Zo(b[M],n,!0,u);g=g&&G}for(M=0;M<b.length;M++)u.b=b[M],G=Zo(b[M],n,!1,u),g=g&&G}return g}return es(n,new yt(u,this))}function ti(n){return(n=n[lr])instanceof jr?n:null}var fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Er(n){return Dt(n)?n:(n[fr]||(n[fr]=function(u){return n.handleEvent(u)}),n[fr])}function Tr(){Es.call(this),this.v=new jr(this),this.$b=this,this.fb=null}function Kr(n,u,g,b,M){n.v.add(String(u),g,!1,b,M)}function jo(n,u,g,b,M){n.v.add(String(u),g,!0,b,M)}function Mi(n,u,g,b){if(!(u=n.v.a[String(u)]))return!0;u=u.concat();for(var M=!0,G=0;G<u.length;++G){var Y=u[G];if(Y&&!Y.va&&Y.capture==g){var be=Y.listener,ht=Y.Ua||Y.src;Y.Oa&&Vn(n.v,Y),M=!1!==be.call(ht,b)&&M}}return M&&!b.defaultPrevented}function Ci(n,u,g){if(Dt(n))g&&(n=He(n,g));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=He(n.handleEvent,n)}return 2147483647<Number(u)?-1:te.setTimeout(n,u||0)}function ai(n){var u=null;return new Sn(function(g,b){-1==(u=Ci(function(){g(void 0)},n))&&b(Error("Failed to schedule timer."))}).s(function(g){throw te.clearTimeout(u),g})}function zt(n){if(n.V&&"function"==typeof n.V)return n.V();if("string"==typeof n)return n.split("");if(fn(n)){for(var u=[],g=n.length,b=0;b<g;b++)u.push(n[b]);return u}for(b in u=[],g=0,n)u[g++]=n[b];return u}function Hn(n){if(n.Y&&"function"==typeof n.Y)return n.Y();if(!n.V||"function"!=typeof n.V){if(fn(n)||"string"==typeof n){var u=[];n=n.length;for(var g=0;g<n;g++)u.push(g);return u}for(var b in u=[],g=0,n)u[g++]=b;return u}}function Vr(n,u){this.b={},this.a=[],this.c=0;var g=arguments.length;if(1<g){if(g%2)throw Error("Uneven number of arguments");for(var b=0;b<g;b+=2)this.set(arguments[b],arguments[b+1])}else if(n)if(n instanceof Vr)for(g=n.Y(),b=0;b<g.length;b++)this.set(g[b],n.get(g[b]));else for(b in n)this.set(b,n[b])}function qr(n){if(n.c!=n.a.length){for(var u=0,g=0;u<n.a.length;){var b=n.a[u];Rr(n.b,b)&&(n.a[g++]=b),u++}n.a.length=g}if(n.c!=n.a.length){var M={};for(g=u=0;u<n.a.length;)Rr(M,b=n.a[u])||(n.a[g++]=b,M[b]=1),u++;n.a.length=g}}function Rr(n,u){return Object.prototype.hasOwnProperty.call(n,u)}C(Tr,Es),Tr.prototype[xt]=!0,Tr.prototype.addEventListener=function(n,u,g,b){nr(this,n,u,g,b)},Tr.prototype.removeEventListener=function(n,u,g,b){Gr(this,n,u,g,b)},Tr.prototype.dispatchEvent=function(n){var u,g=this.fb;if(g)for(u=[];g;g=g.fb)u.push(g);g=this.$b;var b=n.type||n;if("string"==typeof n)n=new Qe(n,g);else if(n instanceof Qe)n.target=n.target||g;else{var M=n;On(n=new Qe(b,g),M)}if(M=!0,u)for(var G=u.length-1;0<=G;G--){var Y=n.b=u[G];M=Mi(Y,b,!0,n)&&M}if(M=Mi(Y=n.b=g,b,!0,n)&&M,M=Mi(Y,b,!1,n)&&M,u)for(G=0;G<u.length;G++)M=Mi(Y=n.b=u[G],b,!1,n)&&M;return M},Tr.prototype.Da=function(){if(Tr.$a.Da.call(this),this.v){var g,n=this.v;for(g in n.a){for(var b=n.a[g],M=0;M<b.length;M++)mn(b[M]);delete n.a[g],n.b--}}this.fb=null},(Q=Vr.prototype).V=function(){qr(this);for(var n=[],u=0;u<this.a.length;u++)n.push(this.b[this.a[u]]);return n},Q.Y=function(){return qr(this),this.a.concat()},Q.clear=function(){this.b={},this.c=this.a.length=0},Q.get=function(n,u){return Rr(this.b,n)?this.b[n]:u},Q.set=function(n,u){Rr(this.b,n)||(this.c++,this.a.push(n)),this.b[n]=u},Q.forEach=function(n,u){for(var g=this.Y(),b=0;b<g.length;b++){var M=g[b],G=this.get(M);n.call(u,G,M,this)}};var ts=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vi(n,u){var g;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,n instanceof vi?(this.i=void 0!==u?u:n.i,Do(this,n.f),this.l=n.l,this.a=n.a,En(this,n.g),this.c=n.c,so(this,Yi(n.b)),this.h=n.h):n&&(g=String(n).match(ts))?(this.i=!!u,Do(this,g[1]||"",!0),this.l=Vo(g[2]||""),this.a=Vo(g[3]||"",!0),En(this,g[4]),this.c=Vo(g[5]||"",!0),so(this,g[6]||"",!0),this.h=Vo(g[7]||"")):(this.i=!!u,this.b=new co(null,this.i))}function Do(n,u,g){n.f=g?Vo(u,!0):u,n.f&&(n.f=n.f.replace(/:$/,""))}function En(n,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);n.g=u}else n.g=null}function so(n,u,g){u instanceof co?(n.b=u,function(n,u){u&&!n.f&&(yo(n),n.c=null,n.a.forEach(function(g,b){var M=b.toLowerCase();b!=M&&(Wr(this,b),Yn(this,M,g))},n)),n.f=u}(n.b,n.i)):(g||(u=ao(u,vo)),n.b=new co(u,n.i))}function Ur(n,u,g){n.b.set(u,g)}function Mr(n,u){return n.b.get(u)}function li(n){return n instanceof vi?new vi(n):new vi(n,void 0)}function Ei(n,u,g,b){var M=new vi(null,void 0);return n&&Do(M,n),u&&(M.a=u),g&&En(M,g),b&&(M.c=b),M}function Vo(n,u){return n?u?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ao(n,u,g){return"string"==typeof n?(n=encodeURI(n).replace(u,uo),g&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uo(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vi.prototype.toString=function(){var n=[],u=this.f;u&&n.push(ao(u,xr,!0),":");var g=this.a;return(g||"file"==u)&&(n.push("//"),(u=this.l)&&n.push(ao(u,xr,!0),"@"),n.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(g=this.g)&&n.push(":",String(g))),(g=this.c)&&(this.a&&"/"!=g.charAt(0)&&n.push("/"),n.push(ao(g,"/"==g.charAt(0)?tu:na,!0))),(g=this.b.toString())&&n.push("?",g),(g=this.h)&&n.push("#",ao(g,So)),n.join("")},vi.prototype.resolve=function(n){var u=new vi(this),g=!!n.f;g?Do(u,n.f):g=!!n.l,g?u.l=n.l:g=!!n.a,g?u.a=n.a:g=null!=n.g;var b=n.c;if(g)En(u,n.g);else if(g=!!n.c){if("/"!=b.charAt(0))if(this.a&&!this.c)b="/"+b;else{var M=u.c.lastIndexOf("/");-1!=M&&(b=u.c.substr(0,M+1)+b)}if(".."==(M=b)||"."==M)b="";else if(he(M,"./")||he(M,"/.")){b=0==M.lastIndexOf("/",0),M=M.split("/");for(var G=[],Y=0;Y<M.length;){var be=M[Y++];"."==be?b&&Y==M.length&&G.push(""):".."==be?((1<G.length||1==G.length&&""!=G[0])&&G.pop(),b&&Y==M.length&&G.push("")):(G.push(be),b=!0)}b=G.join("/")}else b=M}return g?u.c=b:g=""!==n.b.toString(),g?so(u,Yi(n.b)):g=!!n.h,g&&(u.h=n.h),u};var xr=/[#\/\?@]/g,na=/[#\?:]/g,tu=/[#\?]/g,vo=/[#\?@]/g,So=/#/g;function co(n,u){this.b=this.a=null,this.c=n||null,this.f=!!u}function yo(n){n.a||(n.a=new Vr,n.b=0,n.c&&function(n,u){if(n){n=n.split("&");for(var g=0;g<n.length;g++){var b=n[g].indexOf("="),M=null;if(0<=b){var G=n[g].substring(0,b);M=n[g].substring(b+1)}else G=n[g];u(G,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}(n.c,function(u,g){n.add(decodeURIComponent(u.replace(/\+/g," ")),g)}))}function lo(n){var u=Hn(n);if(void 0===u)throw Error("Keys are undefined");var g=new co(null,void 0);n=zt(n);for(var b=0;b<u.length;b++){var M=u[b],G=n[b];Array.isArray(G)?Yn(g,M,G):g.add(M,G)}return g}function Wr(n,u){yo(n),u=Rt(n,u),Rr(n.a.b,u)&&(n.c=null,n.b-=n.a.get(u).length,Rr((n=n.a).b,u)&&(delete n.b[u],n.c--,n.a.length>2*n.c&&qr(n)))}function $s(n,u){return yo(n),u=Rt(n,u),Rr(n.a.b,u)}function Yn(n,u,g){Wr(n,u),0<g.length&&(n.c=null,n.a.set(Rt(n,u),ir(g)),n.b+=g.length)}function Yi(n){var u=new co;return u.c=n.c,n.a&&(u.a=new Vr(n.a),u.b=n.b),u}function Rt(n,u){return u=String(u),n.f&&(u=u.toLowerCase()),u}function Ls(n){var u=[];return ns(new qi,n,u),u.join("")}function qi(){}function ns(n,u,g){if(null==u)g.push("null");else{if("object"==typeof u){if(Array.isArray(u)){var b=u;u=b.length,g.push("[");for(var M="",G=0;G<u;G++)g.push(M),ns(n,b[G],g),M=",";return void g.push("]")}if(!(u instanceof String||u instanceof Number||u instanceof Boolean)){for(b in g.push("{"),M="",u)Object.prototype.hasOwnProperty.call(u,b)&&"function"!=typeof(G=u[b])&&(g.push(M),Is(b,g),g.push(":"),ns(n,G,g),M=",");return void g.push("}")}u=u.valueOf()}switch(typeof u){case"string":Is(u,g);break;case"number":g.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":g.push(String(u));break;case"function":g.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}(Q=co.prototype).add=function(n,u){yo(this),this.c=null,n=Rt(this,n);var g=this.a.get(n);return g||this.a.set(n,g=[]),g.push(u),this.b+=1,this},Q.clear=function(){this.a=this.c=null,this.b=0},Q.forEach=function(n,u){yo(this),this.a.forEach(function(g,b){nt(g,function(M){n.call(u,M,b,this)},this)},this)},Q.Y=function(){yo(this);for(var n=this.a.V(),u=this.a.Y(),g=[],b=0;b<u.length;b++)for(var M=n[b],G=0;G<M.length;G++)g.push(u[b]);return g},Q.V=function(n){yo(this);var u=[];if("string"==typeof n)$s(this,n)&&(u=Jn(u,this.a.get(Rt(this,n))));else{n=this.a.V();for(var g=0;g<n.length;g++)u=Jn(u,n[g])}return u},Q.set=function(n,u){return yo(this),this.c=null,$s(this,n=Rt(this,n))&&(this.b-=this.a.get(n).length),this.a.set(n,[u]),this.b+=1,this},Q.get=function(n,u){return n&&0<(n=this.V(n)).length?String(n[0]):u},Q.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var n=[],u=this.a.Y(),g=0;g<u.length;g++){var b=u[g],M=encodeURIComponent(String(b));b=this.V(b);for(var G=0;G<b.length;G++){var Y=M;""!==b[G]&&(Y+="="+encodeURIComponent(String(b[G]))),n.push(Y)}}return this.c=n.join("&")};var Co={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},nu=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Is(n,u){u.push('"',n.replace(nu,function(g){var b=Co[g];return b||(b="\\u"+(65536|g.charCodeAt(0)).toString(16).substr(1),Co[g]=b),b}),'"')}function ui(){var n=ki();return se&&!!bn&&11==bn||/Edge\/\d+/.test(n)}function y(){return te.window&&te.window.location.href||self&&self.location&&self.location.href||""}function P(n,u){u=u||te.window;var g="about:blank";n&&(g=tt(Ut(n))),u.location.href=g}function B(n,u){var b,g=[];for(b in n)b in u?typeof n[b]!=typeof u[b]?g.push(b):"object"==typeof n[b]&&null!=n[b]&&null!=u[b]?0<B(n[b],u[b]).length&&g.push(b):n[b]!==u[b]&&g.push(b):g.push(b);for(b in u)b in n||g.push(b);return g}function Te(n){return!!((n=(n||ki()).toLowerCase()).match(/android/)||n.match(/webos/)||n.match(/iphone|ipad|ipod/)||n.match(/blackberry/)||n.match(/windows phone/)||n.match(/iemobile/))}function qe(n){n=n||te.window;try{n.close()}catch(u){}}function Xt(n,u,g){var b=Math.floor(1e9*Math.random()).toString();u=u||500,g=g||600;var M=(window.screen.availHeight-g)/2,G=(window.screen.availWidth-u)/2;for(Y in u={width:u,height:g,top:0<M?M:0,left:0<G?G:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},g=ki().toLowerCase(),b&&(u.target=b,he(g,"crios/")&&(u.target="_blank")),ps(ki())==ds&&(n=n||"http://localhost",u.scrollbars=!0),g=n||"",(n=u)||(n={}),b=window,u=g instanceof We?g:Ut(void 0!==g.href?g.href:String(g)),g=n.target||g.target,M=[],n)switch(Y){case"width":case"height":case"top":case"left":M.push(Y+"="+n[Y]);break;case"target":case"noopener":case"noreferrer":break;default:M.push(Y+"="+(n[Y]?1:0))}var Y=M.join(",");if((Pt("iPhone")&&!Pt("iPod")&&!Pt("iPad")||Pt("iPad")||Pt("iPod"))&&b.navigator&&b.navigator.standalone&&g&&"_self"!=g?(er(Y=_s(document,"A"),"HTMLAnchorElement"),u instanceof We||u instanceof We||(u="object"==typeof u&&u.sa?u.ra():String(u),It.test(u)||(u="about:invalid#zClosurez"),u=new We(wt,u)),Y.href=tt(u),Y.setAttribute("target",g),n.noreferrer&&Y.setAttribute("rel","noreferrer"),(n=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,b,1),Y.dispatchEvent(n),Y={}):n.noreferrer?(Y=b.open("",g,Y),n=tt(u),Y&&(_e&&he(n,";")&&(n="'"+n.replace(/'/g,"%27")+"'"),Y.opener=null,n=Bn('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ce(n)+'">'),b=Y.document)&&(b.write(tr(n)),b.close())):(Y=b.open(tt(u),g,Y))&&n.noopener&&(Y.opener=null),Y)try{Y.focus()}catch(be){}return Y}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xi=/^[^@]+@[^@]+$/;function mo(){var n=null;return new Sn(function(u){"complete"==te.document.readyState?u():(n=function(){u()},Fo(window,"load",n))}).s(function(u){throw Gr(window,"load",n),u})}function Ks(n){return n=n||ki(),!("file:"!==l()&&"ionic:"!==l()||!n.toLowerCase().match(/iphone|ipad|ipod|android/))}function hs(){var n=te.window;try{return!(!n||n==n.top)}catch(u){return!1}}function Br(){return void 0!==te.WorkerGlobalScope&&"function"==typeof te.importScripts}function fi(){return $.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":$.INTERNAL.hasOwnProperty("node")?"Node":Br()?"Worker":"Browser"}function ru(){var n=fi();return"ReactNative"===n||"Node"===n}var ds="Firefox";function ps(n){var u=n.toLowerCase();return he(u,"opera/")||he(u,"opr/")||he(u,"opios/")?"Opera":he(u,"iemobile")?"IEMobile":he(u,"msie")||he(u,"trident/")?"IE":he(u,"edge/")?"Edge":he(u,"firefox/")?ds:he(u,"silk/")?"Silk":he(u,"blackberry")?"Blackberry":he(u,"webos")?"Webos":!he(u,"safari/")||he(u,"chrome/")||he(u,"crios/")||he(u,"android")?!he(u,"chrome/")&&!he(u,"crios/")||he(u,"edge/")?he(u,"android")?"Android":(n=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==n.length?n[1]:"Other":"Chrome":"Safari"}var Mu={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Da(n,u){u=u||[];var M,g=[],b={};for(M in Mu)b[Mu[M]]=!0;for(M=0;M<u.length;M++)void 0!==b[u[M]]&&(delete b[u[M]],g.push(u[M]));return g.sort(),(u=g).length||(u=["FirebaseCore-web"]),"Browser"===(g=fi())?g=ps(b=ki()):"Worker"===g&&(g=ps(b=ki())+"-"+g),g+"/JsCore/"+n+"/"+u.join(",")}function ki(){return te.navigator&&te.navigator.userAgent||""}function Qr(n,u){n=n.split("."),u=u||te;for(var g=0;g<n.length&&"object"==typeof u&&null!=u;g++)u=u[n[g]];return g!=n.length&&(u=void 0),u}function ra(){try{var n=te.localStorage,u=H();if(n)return n.setItem(u,"1"),n.removeItem(u),!ui()||!!te.indexedDB}catch(g){return Br()&&!!te.indexedDB}return!1}function Ts(){return(v()||"chrome-extension:"===l()||Ks())&&!ru()&&ra()&&!Br()}function v(){return"http:"===l()||"https:"===l()}function l(){return te.location&&te.location.protocol||null}function h(n){return!(Te(n=n||ki())||ps(n)==ds)}function m(n){return void 0===n?null:Ls(n)}function S(n){var g,u={};for(g in n)n.hasOwnProperty(g)&&null!=n[g]&&(u[g]=n[g]);return u}function R(n){if(null!==n)return JSON.parse(n)}function H(n){return n||Math.floor(1e9*Math.random()).toString()}function z(n){return!("Safari"==ps(n=n||ki())||n.toLowerCase().match(/iphone|ipad|ipod/))}function ue(){var n=te.___jsl;if(n&&n.H)for(var u in n.H)if(n.H[u].r=n.H[u].r||[],n.H[u].L=n.H[u].L||[],n.H[u].r=n.H[u].L.concat(),n.CP)for(var g=0;g<n.CP.length;g++)n.CP[g]=null}function ne(n,u){if(n>u)throw Error("Short delay should be less than long delay!");this.a=n,this.c=u,n=ki(),u=fi(),this.b=Te(n)||"ReactNative"===u}function Le(){var n=te.document;return!n||void 0===n.visibilityState||"visible"==n.visibilityState}function Ke(n){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n)}function Et(n){try{var u=new Date(parseInt(n,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(n))return u.toUTCString()}catch(g){}return null}function Kt(){return!(!Qr("fireauth.oauthhelper",te)&&!Qr("fireauth.iframe",te))}ne.prototype.get=function(){var n=te.navigator;return!n||"boolean"!=typeof n.onLine||!v()&&"chrome-extension:"!==l()&&void 0===n.connection||n.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ii,ar={};function Li(n){ar[n]||(ar[n]=!0,Ke(n))}try{var yi={};Object.defineProperty(yi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(yi,"abcd",{configurable:!0,enumerable:!0,value:2}),Ii=2==yi.abcd}catch(n){Ii=!1}function tn(n,u,g){Ii?Object.defineProperty(n,u,{configurable:!0,enumerable:!0,value:g}):n[u]=g}function mi(n,u){if(u)for(var g in u)u.hasOwnProperty(g)&&tn(n,g,u[g])}function Bo(n){var u={};return mi(u,n),u}function vc(n){var u=n;if("object"==typeof n&&null!=n)for(var g in u="length"in n?[]:{},n)tn(u,g,vc(n[g]));return u}function Ln(n){var u=n&&(n[Jc]?"phone":null);if(!(u&&n&&n[Xc]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");tn(this,"uid",n[Xc]),tn(this,"displayName",n[ia]||null);var g=null;n[Sa]&&(g=new Date(n[Sa]).toUTCString()),tn(this,"enrollmentTime",g),tn(this,"factorId",u)}function Hl(n){try{var u=new yc(n)}catch(g){u=null}return u}Ln.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ia="displayName",Sa="enrolledAt",Xc="mfaEnrollmentId",Jc="phoneInfo";function yc(n){Ln.call(this,n),tn(this,"phoneNumber",n[Jc])}function Mf(n){var u={},g=n[Xi],b=n[mc],M=n[Qs];if(n=Hl(n[Zc]),!M||M!=ur&&M!=Ca&&!g||M==Ca&&!b||M==bt&&!n)throw Error("Invalid checkActionCode response!");M==Ca?(u[Fs]=g||null,u[_o]=g||null,u[Ao]=b):(u[Fs]=b||null,u[_o]=b||null,u[Ao]=g||null),u[_i]=n||null,tn(this,tl,M),tn(this,el,vc(u))}C(yc,Ln),yc.prototype.w=function(){var n=yc.$a.w.call(this);return n.phoneNumber=this.phoneNumber,n};var bt="REVERT_SECOND_FACTOR_ADDITION",ur="EMAIL_SIGNIN",Ca="VERIFY_AND_CHANGE_EMAIL",Xi="email",Zc="mfaInfo",mc="newEmail",Qs="requestType",Ao="email",Fs="fromEmail",_i="multiFactorInfo",_o="previousEmail",el="data",tl="operation";function pr(n){var u=Mr(n=li(n),Ji)||null,g=Mr(n,No)||null,b=Mr(n,Aa)||null;if(b=b&&oa[b]||null,!u||!g||!b)throw new E("argument-error",Ji+", "+No+"and "+Aa+" are required in a valid action code URL.");mi(this,{apiKey:u,operation:b,code:g,continueUrl:Mr(n,Ai)||null,languageCode:Mr(n,Fi)||null,tenantId:Mr(n,Gl)||null})}var Ji="apiKey",No="oobCode",Ai="continueUrl",Fi="languageCode",Aa="mode",Gl="tenantId",oa={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:bt,signIn:ur,verifyAndChangeEmail:Ca,verifyEmail:"VERIFY_EMAIL"};function xf(n){try{return new pr(n)}catch(u){return null}}function xu(n){var u=n[ql];if(void 0===u)throw new E("missing-continue-uri");if("string"!=typeof u||"string"==typeof u&&!u.length)throw new E("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var g=n[_c];if(g&&"object"==typeof g){u=g[Ec];var b=g[Ss];if(g=g[bc],"string"==typeof u&&u.length){if(this.a=u,void 0!==b&&"boolean"!=typeof b)throw new E("argument-error",Ss+" property must be a boolean when specified.");if(this.g=!!b,void 0!==g&&("string"!=typeof g||"string"==typeof g&&!g.length))throw new E("argument-error",bc+" property must be a non empty string when specified.");this.b=g||null}else{if(void 0!==u)throw new E("argument-error",Ec+" property must be a non empty string when specified.");if(void 0!==b||void 0!==g)throw new E("missing-android-pkg-name")}}else if(void 0!==g)throw new E("argument-error",_c+" property must be a non null object when specified.");if(this.f=null,(u=n[iu])&&"object"==typeof u){if("string"==typeof(u=u[rs])&&u.length)this.f=u;else if(void 0!==u)throw new E("argument-error",rs+" property must be a non empty string when specified.")}else if(void 0!==u)throw new E("argument-error",iu+" property must be a non null object when specified.");if(void 0!==(u=n[wc])&&"boolean"!=typeof u)throw new E("argument-error",wc+" property must be a boolean when specified.");if(this.c=!!u,void 0!==(n=n[ku])&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",ku+" property must be a non empty string when specified.");this.i=n||null}var _c="android",ku="dynamicLinkDomain",wc="handleCodeInApp",iu="iOS",ql="url",Ss="installApp",bc="minimumVersion",Ec="packageName",rs="bundleId";function sa(n){var u={};for(var g in u.continueUrl=n.h,u.canHandleCodeInApp=n.c,(u.androidPackageName=n.a)&&(u.androidMinimumVersion=n.b,u.androidInstallApp=n.g),u.iOSBundleId=n.f,u.dynamicLinkDomain=n.i,u)null===u[g]&&delete u[g];return u}var Ic=null;function di(n){var u=kf(n);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.g=n,this.c=u.exp,this.h=u.sub,D(),this.a=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.b=!!u.is_anonymous||"anonymous"==this.a}function Tc(n){try{return new di(n)}catch(u){return null}}function kf(n){if(!n||3!=(n=n.split(".")).length)return null;for(var u=(4-(n=n[1]).length%4)%4,g=0;g<u;g++)n+=".";try{return JSON.parse(function(n){var u="";return function(n,u){function g(ht){for(;b<n.length;){var Mt=n.charAt(b++),Wn=Ic[Mt];if(null!=Wn)return Wn;if(!/^[\s\xa0]*$/.test(Mt))throw Error("Unknown base64 encoding at char: "+Mt)}return ht}!function(){if(!Ic){Ic={};for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],g=0;5>g;g++)for(var b=n.concat(u[g].split("")),M=0;M<b.length;M++){var G=b[M];void 0===Ic[G]&&(Ic[G]=M)}}}();for(var b=0;;){var M=g(-1),G=g(0),Y=g(64),be=g(64);if(64===be&&-1===M)break;u(M<<2|G>>4),64!=Y&&(u(G<<4&240|Y>>2),64!=be&&u(Y<<6&192|be))}}(n,function(g){u+=String.fromCharCode(g)}),u}(n))}catch(b){}return null}di.prototype.S=function(){return this.f},di.prototype.i=function(){return this.b},di.prototype.toString=function(){return this.g};var Lf="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),su=["client_id","response_type","scope","redirect_uri","state"],Ra={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:su},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:su},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:su},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Lf},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Lu(n){for(var u in Ra)if(Ra[u].fa==n)return Ra[u];return null}function Fu(n){var u={};u["facebook.com"]=Zi,u["google.com"]=au,u["github.com"]=aa,u["twitter.com"]=Ff;var g=n&&n[Dc];try{if(g)return u[g]?new u[g](n):new gs(n);if(void 0!==n[ju])return new js(n)}catch(b){}return null}var ju="idToken",Dc="providerId";function js(n){var u=n[Dc];if(!u&&n[ju]){var g=Tc(n[ju]);g&&g.a&&(u=g.a)}if(!u)throw Error("Invalid additional user info!");("anonymous"==u||"custom"==u)&&(u=null),g=!1,void 0!==n.isNewUser?g=!!n.isNewUser:"identitytoolkit#SignupNewUserResponse"===n.kind&&(g=!0),tn(this,"providerId",u),tn(this,"isNewUser",g)}function gs(n){js.call(this,n),tn(this,"profile",vc((n=R(n.rawUserInfo||"{}"))||{}))}function Zi(n){if(gs.call(this,n),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function aa(n){if(gs.call(this,n),"github.com"!=this.providerId)throw Error("Invalid provider ID!");tn(this,"username",this.profile&&this.profile.login||null)}function au(n){if(gs.call(this,n),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ff(n){if(gs.call(this,n),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");tn(this,"username",n.screenName||null)}function jf(n){var u=li(n),g=Mr(u,"link"),b=Mr(li(g),"link");return u=Mr(u,"deep_link_id"),Mr(li(u),"link")||u||b||g||n}function Oa(n,u){if(!n&&!u)throw new E("internal-error","Internal assert: no raw session string available");if(n&&u)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=n||null,this.b=u||null,this.type=this.a?Pa:rl}C(gs,js),C(Zi,gs),C(aa,gs),C(au,gs),C(Ff,gs);var Pa="enroll",rl="signin";function Vu(){}function Sc(n,u){return n.then(function(g){if(g[Eo]){var b=Tc(g[Eo]);if(!b||u!=b.h)throw new E("user-mismatch");return g}throw new E("user-mismatch")}).s(function(g){throw g&&g.code&&g.code==U+"user-not-found"?new E("user-mismatch"):g})}function Uu(n,u){if(!u)throw new E("internal-error","failed to construct a credential");this.a=u,tn(this,"providerId",n),tn(this,"signInMethod",n)}function Bu(n){return{pendingToken:n.a,requestUri:"http://localhost"}}function Hu(n){if(n&&n.providerId&&n.signInMethod&&0==n.providerId.indexOf("saml.")&&n.pendingToken)try{return new Uu(n.providerId,n.pendingToken)}catch(u){}return null}function Ro(n,u,g){if(this.a=null,u.idToken||u.accessToken)u.idToken&&tn(this,"idToken",u.idToken),u.accessToken&&tn(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&tn(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else{if(!u.oauthToken||!u.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");tn(this,"accessToken",u.oauthToken),tn(this,"secret",u.oauthTokenSecret)}tn(this,"providerId",n),tn(this,"signInMethod",g)}function uu(n){var u={};return n.idToken&&(u.id_token=n.idToken),n.accessToken&&(u.access_token=n.accessToken),n.secret&&(u.oauth_token_secret=n.secret),u.providerId=n.providerId,n.nonce&&!n.a&&(u.nonce=n.nonce),u={postBody:lo(u).toString(),requestUri:"http://localhost"},n.a&&(delete u.postBody,u.pendingToken=n.a),u}function Cc(n){if(n&&n.providerId&&n.signInMethod){var u={idToken:n.oauthIdToken,accessToken:n.oauthTokenSecret?null:n.oauthAccessToken,oauthTokenSecret:n.oauthTokenSecret,oauthToken:n.oauthTokenSecret&&n.oauthAccessToken,nonce:n.nonce,pendingToken:n.pendingToken};try{return new Ro(n.providerId,u,n.signInMethod)}catch(g){}}return null}function Cs(n,u){this.Pc=u||[],mi(this,{providerId:n,isOAuthProvider:!0}),this.Hb={},this.ob=(Lu(n)||{}).Ja||null,this.nb=null}function ua(n){if("string"!=typeof n||0!=n.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');Cs.call(this,n,[])}function is(n){Cs.call(this,n,su),this.a=[]}function os(){is.call(this,"facebook.com")}function Gu(n){if(!n)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=n;return Re(n)&&(u=n.accessToken),(new os).credential({accessToken:u})}function bo(){is.call(this,"github.com")}function Vf(n){if(!n)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=n;return Re(n)&&(u=n.accessToken),(new bo).credential({accessToken:u})}function Ma(){is.call(this,"google.com"),this.Ca("profile")}function Wl(n,u){var g=n;return Re(n)&&(g=n.idToken,u=n.accessToken),(new Ma).credential({idToken:g,accessToken:u})}function qu(){Cs.call(this,"twitter.com",Lf)}function Ac(n,u){var g=n;if(Re(g)||(g={oauthToken:n,oauthTokenSecret:u}),!g.oauthToken||!g.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ro("twitter.com",g,"twitter.com")}function vs(n,u,g){this.a=n,this.f=u,tn(this,"providerId","password"),tn(this,"signInMethod",g===Ho.EMAIL_LINK_SIGN_IN_METHOD?Ho.EMAIL_LINK_SIGN_IN_METHOD:Ho.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xa(n){return n&&n.email&&n.password?new vs(n.email,n.password,n.signInMethod):null}function Ho(){mi(this,{providerId:"password",isOAuthProvider:!1})}function Wu(n,u){if(!(u=zu(u)))throw new E("argument-error","Invalid email link!");return new vs(n,u.code,Ho.EMAIL_LINK_SIGN_IN_METHOD)}function zu(n){return(n=xf(n=jf(n)))&&n.operation===ur?n:null}function ka(n){if(!(n.cb&&n.bb||n.La&&n.ea))throw new E("internal-error");this.a=n,tn(this,"providerId","phone"),this.fa="phone",tn(this,"signInMethod","phone")}function Uf(n){if(n&&"phone"===n.providerId&&(n.verificationId&&n.verificationCode||n.temporaryProof&&n.phoneNumber)){var u={};return nt(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(g){n[g]&&(u[g]=n[g])}),new ka(u)}return null}function $u(n){return n.a.La&&n.a.ea?{temporaryProof:n.a.La,phoneNumber:n.a.ea}:{sessionInfo:n.a.cb,code:n.a.bb}}function As(n){try{this.a=n||$.auth()}catch(u){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}mi(this,{providerId:"phone",isOAuthProvider:!1})}function La(n,u){if(!n)throw new E("missing-verification-id");if(!u)throw new E("missing-verification-code");return new ka({cb:n,bb:u})}function Ys(n){if(n.temporaryProof&&n.phoneNumber)return new ka({La:n.temporaryProof,ea:n.phoneNumber});var u=n&&n.providerId;if(!u||"password"===u)return null;var g=n&&n.oauthAccessToken,b=n&&n.oauthTokenSecret,M=n&&n.nonce,G=n&&n.oauthIdToken,Y=n&&n.pendingToken;try{switch(u){case"google.com":return Wl(G,g);case"facebook.com":return Gu(g);case"github.com":return Vf(g);case"twitter.com":return Ac(g,b);default:return g||b||G||Y?Y?0==u.indexOf("saml.")?new Uu(u,Y):new Ro(u,{pendingToken:Y,idToken:n.oauthIdToken,accessToken:n.oauthAccessToken},u):new is(u).credential({idToken:G,accessToken:g,rawNonce:M}):null}}catch(be){return null}}function il(n){if(!n.isOAuthProvider)throw new E("invalid-oauth-provider")}function Go(n,u,g,b,M,G,Y){if(this.c=n,this.b=u||null,this.g=g||null,this.f=b||null,this.i=G||null,this.h=Y||null,this.a=M||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function cu(n){return(n=n||{}).type?new Go(n.type,n.eventId,n.urlResponse,n.sessionId,n.error&&k(n.error),n.postBody,n.tenantId):null}function od(){this.b=null,this.a=[]}Oa.prototype.Ha=function(){return jt(this.a?this.a:this.b)},Oa.prototype.w=function(){return this.type==Pa?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Vu.prototype.ja=function(){},Vu.prototype.b=function(){},Vu.prototype.c=function(){},Vu.prototype.w=function(){},Uu.prototype.ja=function(n){return Jl(n,Bu(this))},Uu.prototype.b=function(n,u){var g=Bu(this);return g.idToken=u,pa(n,g)},Uu.prototype.c=function(n,u){return Sc(Iu(n,Bu(this)),u)},Uu.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ro.prototype.ja=function(n){return Jl(n,uu(this))},Ro.prototype.b=function(n,u){var g=uu(this);return g.idToken=u,pa(n,g)},Ro.prototype.c=function(n,u){return Sc(Iu(n,uu(this)),u)},Ro.prototype.w=function(){var n={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(n.oauthIdToken=this.idToken),this.accessToken&&(n.oauthAccessToken=this.accessToken),this.secret&&(n.oauthTokenSecret=this.secret),this.nonce&&(n.nonce=this.nonce),this.a&&(n.pendingToken=this.a),n},Cs.prototype.Ka=function(n){return this.Hb=dn(n),this},C(ua,Cs),C(is,Cs),is.prototype.Ca=function(n){return vn(this.a,n)||this.a.push(n),this},is.prototype.Pb=function(){return ir(this.a)},is.prototype.credential=function(n,u){var g;if(!(g=Re(n)?{idToken:n.idToken||null,accessToken:n.accessToken||null,nonce:n.rawNonce||null}:{idToken:n||null,accessToken:u||null}).idToken&&!g.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ro(this.providerId,g,this.providerId)},C(os,is),tn(os,"PROVIDER_ID","facebook.com"),tn(os,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(bo,is),tn(bo,"PROVIDER_ID","github.com"),tn(bo,"GITHUB_SIGN_IN_METHOD","github.com"),C(Ma,is),tn(Ma,"PROVIDER_ID","google.com"),tn(Ma,"GOOGLE_SIGN_IN_METHOD","google.com"),C(qu,Cs),tn(qu,"PROVIDER_ID","twitter.com"),tn(qu,"TWITTER_SIGN_IN_METHOD","twitter.com"),vs.prototype.ja=function(n){return this.signInMethod==Ho.EMAIL_LINK_SIGN_IN_METHOD?qn(n,dd,{email:this.a,oobCode:this.f}):qn(n,Gn,{email:this.a,password:this.f})},vs.prototype.b=function(n,u){return this.signInMethod==Ho.EMAIL_LINK_SIGN_IN_METHOD?qn(n,pd,{idToken:u,email:this.a,oobCode:this.f}):qn(n,Ee,{idToken:u,email:this.a,password:this.f})},vs.prototype.c=function(n,u){return Sc(this.ja(n),u)},vs.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},mi(Ho,{PROVIDER_ID:"password"}),mi(Ho,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),mi(Ho,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),ka.prototype.ja=function(n){return n.eb($u(this))},ka.prototype.b=function(n,u){var g=$u(this);return g.idToken=u,qn(n,ri,g)},ka.prototype.c=function(n,u){var g=$u(this);return g.operation="REAUTH",Sc(n=qn(n,wi,g),u)},ka.prototype.w=function(){var n={providerId:"phone"};return this.a.cb&&(n.verificationId=this.a.cb),this.a.bb&&(n.verificationCode=this.a.bb),this.a.La&&(n.temporaryProof=this.a.La),this.a.ea&&(n.phoneNumber=this.a.ea),n},As.prototype.eb=function(n,u){var g=this.a.a;return jt(u.verify()).then(function(b){if("string"!=typeof b)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===u.type){var Y,M=Re(n)?n.session:null,G=Re(n)?n.phoneNumber:n;return Y=M&&M.type==Pa?M.Ha().then(function(be){return function(n,u){return qn(n,Ue,u).then(function(g){return g.phoneSessionInfo.sessionInfo})}(g,{idToken:be,phoneEnrollmentInfo:{phoneNumber:G,recaptchaToken:b}})}):M&&M.type==rl?M.Ha().then(function(be){return function(n,u){return qn(n,Je,u).then(function(g){return g.phoneResponseInfo.sessionInfo})}(g,{mfaPendingCredential:be,mfaEnrollmentId:n.multiFactorHint&&n.multiFactorHint.uid||n.multiFactorUid,phoneSignInInfo:{recaptchaToken:b}})}):function(n,u){return qn(n,X,u)}(g,{phoneNumber:G,recaptchaToken:b}),Y.then(function(be){return"function"==typeof u.reset&&u.reset(),be},function(be){throw"function"==typeof u.reset&&u.reset(),be})}throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')})},mi(As,{PROVIDER_ID:"phone"}),mi(As,{PHONE_SIGN_IN_METHOD:"phone"}),Go.prototype.getUid=function(){var n=[];return n.push(this.c),this.b&&n.push(this.b),this.f&&n.push(this.f),this.h&&n.push(this.h),n.join("-")},Go.prototype.S=function(){return this.h},Go.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ua,ol=null;function Fa(n){var u="unauthorized-domain",g=void 0,b=li(n);n=b.a,"chrome-extension"==(b=b.f)?g=me("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):"http"==b||"https"==b?g=me("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",n):u="operation-not-supported-in-this-environment",E.call(this,u,g)}function lu(n,u,g){E.call(this,n,g),(n=u||{}).Ib&&tn(this,"email",n.Ib),n.ea&&tn(this,"phoneNumber",n.ea),n.credential&&tn(this,"credential",n.credential),n.Yb&&tn(this,"tenantId",n.Yb)}function Ku(n){if(n.code){var u=n.code||"";0==u.indexOf(U)&&(u=u.substring(U.length));var g={credential:Ys(n),Yb:n.tenantId};if(n.email)g.Ib=n.email;else if(n.phoneNumber)g.ea=n.phoneNumber;else if(!g.credential)return new E(u,n.message||void 0);return new lu(u,g,n.message)}return null}function ja(){}function ca(){}function Qu(n){if(!n.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],g=0;g<u.length;g++){var b=u[g];try{return new ActiveXObject(b),n.f=b}catch(M){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return n.f}function Ba(){}function la(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=He(this.pc,this),this.a.onerror=He(this.Rb,this),this.a.onprogress=He(this.qc,this),this.a.ontimeout=He(this.uc,this)}function fu(n,u){n.readyState=u,n.onreadystatechange&&n.onreadystatechange()}function sl(n,u,g){this.reset(n,u,g,void 0,void 0)}function Hf(n){this.f=n,this.b=this.c=this.a=null}function Yu(n,u){this.name=n,this.value=u}C(Fa,E),C(lu,E),lu.prototype.w=function(){var n={code:this.code,message:this.message};this.email&&(n.email=this.email),this.phoneNumber&&(n.phoneNumber=this.phoneNumber),this.tenantId&&(n.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&On(n,u),n},lu.prototype.toJSON=function(){return this.w()},ja.prototype.c=null,C(ca,ja),ca.prototype.a=function(){var n=Qu(this);return n?new ActiveXObject(n):new XMLHttpRequest},ca.prototype.b=function(){var n={};return Qu(this)&&(n[0]=!0,n[1]=!0),n},Ua=new ca,C(Ba,ja),Ba.prototype.a=function(){var n=new XMLHttpRequest;if("withCredentials"in n)return n;if("undefined"!=typeof XDomainRequest)return new la;throw Error("Unsupported browser")},Ba.prototype.b=function(){return{}},(Q=la.prototype).open=function(n,u,g){if(null!=g&&!g)throw Error("Only async requests are supported.");this.a.open(n,u)},Q.send=function(n){if(n){if("string"!=typeof n)throw Error("Only string data is supported");this.a.send(n)}else this.a.send()},Q.abort=function(){this.a.abort()},Q.setRequestHeader=function(){},Q.getResponseHeader=function(n){return"content-type"==n.toLowerCase()?this.a.contentType:""},Q.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,fu(this,4)},Q.Rb=function(){this.status=500,this.response=this.responseText="",fu(this,4)},Q.uc=function(){this.Rb()},Q.qc=function(){this.status=200,fu(this,1)},Q.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},sl.prototype.a=null,sl.prototype.reset=function(n,u,g,b,M){b||D(),delete this.a},Yu.prototype.toString=function(){return this.name};var hu=new Yu("SEVERE",1e3),Gf=new Yu("WARNING",900),Lp=new Yu("CONFIG",700),Fp=new Yu("FINE",500);function sd(n){return n.c?n.c:n.a?sd(n.a):(Se("Root logger has no level set."),null)}Hf.prototype.log=function(n,u,g){if(n.value>=sd(this).value)for(Dt(u)&&(u=u()),n=new sl(n,String(u),this.f),g&&(n.a=g),g=this;g;)g=g.a};var du={},al=null;function Ni(n){var u;if(al||(al=new Hf(""),du[""]=al,al.c=Lp),!(u=du[n])){u=new Hf(n);var g=n.lastIndexOf("."),b=n.substr(g+1);(g=Ni(n.substr(0,g))).b||(g.b={}),g.b[b]=u,u.a=g,du[n]=u}return u}function ss(n,u){n&&n.log(Fp,u,void 0)}function Ha(n){this.f=n}function qf(n){Tr.call(this),this.o=n,this.readyState=Nc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Ni("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(Ha,ja),Ha.prototype.a=function(){return new qf(this.f)},Ha.prototype.b=function(n){return function(){return n}}({}),C(qf,Tr);var Nc=0;function qo(n){n.c.read().then(n.oc.bind(n)).catch(n.Ta.bind(n))}function as(n,u){u&&n.f&&(n.status=n.f.status,n.statusText=n.f.statusText),n.readyState=4,n.f=null,n.c=null,n.l=null,Xu(n)}function Xu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}function Ga(n){Tr.call(this),this.headers=new Vr,this.O=n||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=Ju,this.u=this.R=!1}(Q=qf.prototype).open=function(n,u){if(this.readyState!=Nc)throw this.abort(),Error("Error reopening a connection");this.m=n,this.g=u,this.readyState=1,Xu(this)},Q.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.i,method:this.m,credentials:void 0,cache:void 0};n&&(u.body=n),this.o.fetch(new Request(this.g,u)).then(this.tc.bind(this),this.Ta.bind(this))},Q.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,as(this,!1)),this.readyState=Nc},Q.tc=function(n){this.a&&(this.f=n,this.b||(this.b=n.headers,this.readyState=2,Xu(this)),this.a&&(this.readyState=3,Xu(this),this.a&&("arraybuffer"===this.responseType?n.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==te.ReadableStream&&"body"in n?(this.response=this.responseText="",this.c=n.body.getReader(),this.l=new TextDecoder,qo(this)):n.text().then(this.sc.bind(this),this.Ta.bind(this)))))},Q.oc=function(n){if(this.a){var u=this.l.decode(n.value?n.value:new Uint8Array(0),{stream:!n.done});u&&(this.response=this.responseText+=u),n.done?as(this,!0):Xu(this),3==this.readyState&&qo(this)}},Q.sc=function(n){this.a&&(this.response=this.responseText=n,as(this,!0))},Q.rc=function(n){this.a&&(this.response=n,as(this,!0))},Q.Ta=function(n){var u=this.h;u&&u.log(Gf,"Failed to fetch url "+this.g,n instanceof Error?n:Error(n)),this.a&&as(this,!0)},Q.setRequestHeader=function(n,u){this.i.append(n,u)},Q.getResponseHeader=function(n){return this.b?this.b.get(n.toLowerCase())||"":((n=this.h)&&n.log(Gf,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},Q.getAllResponseHeaders=function(){if(!this.b){var n=this.h;return n&&n.log(Gf,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}n=[];for(var u=this.b.entries(),g=u.next();!g.done;)n.push((g=g.value)[0]+": "+g[1]),g=u.next();return n.join("\r\n")},C(Ga,Tr);var Ju="";Ga.prototype.b=Ni("goog.net.XhrIo");var Wf=/^https?$/i,ad=["POST","PUT"];function Vp(n){return"content-type"==n.toLowerCase()}function zl(n,u){n.c=!1,n.a&&(n.f=!0,n.a.abort(),n.f=!1),n.h=u,us(n),fa(n)}function us(n){n.G||(n.G=!0,n.dispatchEvent("complete"),n.dispatchEvent("error"))}function Rc(n){if(n.c&&void 0!==ge)if(n.A[1]&&4==pu(n)&&2==gu(n))ss(n.b,Ns(n,"Local request error detected and ignored"));else if(n.i&&4==pu(n))Ci(n.Ub,0,n);else if(n.dispatchEvent("readystatechange"),4==pu(n)){ss(n.b,Ns(n,"Request complete")),n.c=!1;try{var b,u=gu(n);e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}if(!(b=g)){var M;if(M=0===u){var G=String(n.l).match(ts)[1]||null;if(!G&&te.self&&te.self.location){var Y=te.self.location.protocol;G=Y.substr(0,Y.length-1)}M=!Wf.test(G?G.toLowerCase():"")}b=M}if(b)n.dispatchEvent("complete"),n.dispatchEvent("success");else{try{var be=2<pu(n)?n.a.statusText:""}catch(ht){ss(n.b,"Can not get status: "+ht.message),be=""}n.h=be+" ["+gu(n)+"]",us(n)}}finally{fa(n)}}}function fa(n,u){if(n.a){$l(n);var g=n.a,b=n.A[0]?Ae:null;n.a=null,n.A=null,u||n.dispatchEvent("ready");try{g.onreadystatechange=b}catch(M){(n=n.b)&&n.log(hu,"Problem encountered resetting onreadystatechange: "+M.message,void 0)}}}function $l(n){n.a&&n.u&&(n.a.ontimeout=null),n.o&&(te.clearTimeout(n.o),n.o=null)}function pu(n){return n.a?n.a.readyState:0}function gu(n){try{return 2<pu(n)?n.a.status:-1}catch(u){return-1}}function Ns(n,u){return u+" ["+n.P+" "+n.l+" "+gu(n)+"]"}function Xs(n){var u=ld;this.g=[],this.u=u,this.o=n||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function vu(n,u,g){n.a=!0,n.c=g,n.f=!u,yu(n)}function Vs(n){if(n.a){if(!n.m)throw new Zu(n);n.m=!1}}function Rs(n,u,g,b){n.g.push([u,g,b]),n.a&&yu(n)}function Oc(n){return Lt(n.g,function(u){return Dt(u[1])})}function yu(n){if(n.h&&n.a&&Oc(n)){var u=n.h,g=ul[u];g&&(te.clearTimeout(g.a),delete ul[u]),n.h=0}n.b&&(n.b.l--,delete n.b),u=n.c;for(var b=g=!1;n.g.length&&!n.i;){var M=n.g.shift(),G=M[0],Y=M[1];if(M=M[2],G=n.f?Y:G)try{var be=G.call(M||n.o,u);void 0!==be&&(n.f=n.f&&(be==u||be instanceof Error),n.c=u=be),(re(u)||"function"==typeof te.Promise&&u instanceof te.Promise)&&(b=!0,n.i=!0)}catch(ht){u=ht,n.f=!0,Oc(n)||(g=!0)}}n.c=u,b&&(be=He(n.v,n,!0),b=He(n.v,n,!1),u instanceof Xs?(Rs(u,be,b),u.A=!0):u.then(be,b)),g&&(u=new zf(u),ul[u.a]=u,n.h=u.a)}function Zu(){Pe.call(this)}function qa(){Pe.call(this)}function zf(n){this.a=te.setTimeout(He(this.c,this),0),this.b=n}(Q=Ga.prototype).Ma=function(){void 0!==ge&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ss(this.b,Ns(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},Q.abort=function(){this.a&&this.c&&(ss(this.b,Ns(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),fa(this))},Q.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),fa(this,!0)),Ga.$a.Da.call(this)},Q.Ub=function(){this.xa||(this.N||this.i||this.f?Rc(this):this.Ic())},Q.Ic=function(){Rc(this)},Q.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ju:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var n=this.b;return n&&n.log(hu,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return ss(this.b,"Can not get response: "+u.message),null}},Xs.prototype.cancel=function(n){if(this.a)this.c instanceof Xs&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,n?u.cancel(n):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(n=new qa(this),Vs(this),vu(this,!1,n))}},Xs.prototype.v=function(n,u){this.i=!1,vu(this,n,u)},Xs.prototype.then=function(n,u,g){var b,M,G=new Sn(function(Y,be){b=Y,M=be});return Rs(this,b,function(Y){Y instanceof qa?G.cancel():M(Y)}),G.then(n,u,g)},Xs.prototype.$goog_Thenable=!0,C(Zu,Pe),Zu.prototype.message="Deferred has already fired",Zu.prototype.name="AlreadyCalledError",C(qa,Pe),qa.prototype.message="Deferred was canceled",qa.prototype.name="CanceledError",zf.prototype.c=function(){throw delete ul[this.a],this.b};var ul={};function ec(n){var u={},g=u.document||document,b=oi(n).toString(),M=_s(document,"SCRIPT"),G={Vb:M,Ma:void 0},Y=new Xs(G),be=null,ht=null!=u.timeout?u.timeout:5e3;return 0<ht&&(be=window.setTimeout(function(){Os(M,!0);var Mt=new Yr(Kf,"Timeout reached for loading script "+b);Vs(Y),vu(Y,!1,Mt)},ht),G.Ma=be),M.onload=M.onreadystatechange=function(){M.readyState&&"loaded"!=M.readyState&&"complete"!=M.readyState||(Os(M,u.wd||!1,be),Vs(Y),vu(Y,!0,null))},M.onerror=function(){Os(M,!0,be);var Mt=new Yr($f,"Error while loading script "+b);Vs(Y),vu(Y,!1,Mt)},On(G=u.attributes||{},{type:"text/javascript",charset:"UTF-8"}),$o(M,G),function(n,u){er(n,"HTMLScriptElement"),n.src=oi(u),null===Ze&&(Ze=(u=(u=te.document).querySelector&&u.querySelector("script[nonce]"))&&(u=u.nonce||u.getAttribute("nonce"))&&$e.test(u)?u:""),(u=Ze)&&n.setAttribute("nonce",u)}(M,n),function(n){var u;return(u=(n||document).getElementsByTagName("HEAD"))&&0!=u.length?u[0]:n.documentElement}(g).appendChild(M),Y}function ld(){if(this&&this.Vb){var n=this.Vb;n&&"SCRIPT"==n.tagName&&Os(n,!0,this.Ma)}}function Os(n,u,g){null!=g&&te.clearTimeout(g),n.onload=Ae,n.onerror=Ae,n.onreadystatechange=Ae,u&&window.setTimeout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)},0)}var $f=0,Kf=1;function Yr(n,u){var g="Jsloader error (code #"+n+")";u&&(g+=": "+u),Pe.call(this,g),this.code=n}function tc(n){this.f=n}function Js(n,u,g){if(this.c=n,this.l=(n=u||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=n.secureTokenTimeout||Ql,this.g=dn(n.secureTokenHeaders||Qf),this.h=n.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=n.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=n.firebaseTimeout||_u,this.a=dn(n.firebaseHeaders||Mc),g&&(this.a["X-Client-Version"]=g,this.g["X-Client-Version"]=g),g="Node"==fi(),!(g=te.XMLHttpRequest||g&&$.INTERNAL.node&&$.INTERNAL.node.XMLHttpRequest)&&!Br())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=Br()?new Ha(self):ru()?new tc(g):new Ba,this.b=null}C(Yr,Pe),C(tc,ja),tc.prototype.a=function(){return new this.f},tc.prototype.b=function(){return{}};var mu,Eo="idToken",Ql=new ne(3e4,6e4),Qf={"Content-Type":"application/x-www-form-urlencoded"},_u=new ne(3e4,6e4),Mc={"Content-Type":"application/json"};function Wa(n,u){u?n.a["X-Firebase-Locale"]=u:delete n.a["X-Firebase-Locale"]}function ha(n,u){u&&(n.l=Us("https://securetoken.googleapis.com/v1/token",u),n.h=Us("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),n.i=Us("https://identitytoolkit.googleapis.com/v2/",u))}function Us(n,u){return n=li(n),u=li(u.url),n.c=n.a+n.c,Do(n,u.f),n.a=u.a,En(n,u.g),n.toString()}function cl(n,u){u?(n.a["X-Client-Version"]=u,n.g["X-Client-Version"]=u):(delete n.a["X-Client-Version"],delete n.g["X-Client-Version"])}function xc(n,u,g,b,M,G,Y){(function(){var n=ki();return!((n="Chrome"!=ps(n)?null:(n=n.match(/\sChrome\/(\d+)/i))&&2==n.length?parseInt(n[1],10):null)&&30>n||se&&bn&&!(9<bn))})()||Br()?n=He(n.u,n):(mu||(mu=new Sn(function(be,ht){!function(n,u){((window.gapi||{}).client||{}).request?n():(te[kc]=function(){((window.gapi||{}).client||{}).request?n():u(Error("CORS_UNSUPPORTED"))},function(n,u){Rs(n,null,u,void 0)}(ec(Ti(ll,{onload:kc})),function(){u(Error("CORS_UNSUPPORTED"))}))}(be,ht)})),n=He(n.o,n)),n(u,g,b,M,G,Y)}Js.prototype.S=function(){return this.b},Js.prototype.u=function(n,u,g,b,M,G){if(Br()&&(void 0===te.fetch||void 0===te.Headers||void 0===te.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var Y=new Ga(this.f);if(G){Y.g=Math.max(0,G);var be=setTimeout(function(){Y.dispatchEvent("timeout")},G)}Kr(Y,"complete",function(){be&&clearTimeout(be);var ht=null;try{ht=JSON.parse(function(n){try{return n.a?n.a.responseText:""}catch(u){return ss(n.b,"Can not get responseText: "+u.message),""}}(this))||null}catch(Mt){ht=null}u&&u(ht)}),jo(Y,"ready",function(){be&&clearTimeout(be),L(this)}),jo(Y,"timeout",function(){be&&clearTimeout(be),L(this),u&&u(null)}),function(n,u,g,b,M){if(n.a)throw Error("[goog.net.XhrIo] Object is active with another request="+n.l+"; newUri="+u);g=g?g.toUpperCase():"GET",n.l=u,n.h="",n.P=g,n.G=!1,n.c=!0,n.a=n.O?n.O.a():Ua.a(),n.A=function(n){return n.c||(n.c=n.b())}(n.O?n.O:Ua),n.a.onreadystatechange=He(n.Ub,n);try{ss(n.b,Ns(n,"Opening Xhr")),n.N=!0,n.a.open(g,String(u),!0),n.N=!1}catch(Y){return ss(n.b,Ns(n,"Error opening Xhr: "+Y.message)),void zl(n,Y)}u=b||"";var G=new Vr(n.headers);M&&function(n,u){if(n.forEach&&"function"==typeof n.forEach)n.forEach(u,void 0);else if(fn(n)||"string"==typeof n)nt(n,u,void 0);else for(var g=Hn(n),b=zt(n),M=b.length,G=0;G<M;G++)u.call(void 0,b[G],g&&g[G],n)}(M,function(Y,be){G.set(be,Y)}),M=function(n){e:{for(var u=Vp,g=n.length,b="string"==typeof n?n.split(""):n,M=0;M<g;M++)if(M in b&&u.call(void 0,b[M],M,n)){u=M;break e}u=-1}return 0>u?null:"string"==typeof n?n.charAt(u):n[u]}(G.Y()),b=te.FormData&&u instanceof te.FormData,!vn(ad,g)||M||b||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),G.forEach(function(Y,be){this.a.setRequestHeader(be,Y)},n),n.m&&(n.a.responseType=n.m),"withCredentials"in n.a&&n.a.withCredentials!==n.R&&(n.a.withCredentials=n.R);try{$l(n),0<n.g&&(n.u=function(n){return se&&pn(9)&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(n.a),ss(n.b,Ns(n,"Will abort after "+n.g+"ms if incomplete, xhr2 "+n.u)),n.u?(n.a.timeout=n.g,n.a.ontimeout=He(n.Ma,n)):n.o=Ci(n.Ma,n.g,n)),ss(n.b,Ns(n,"Sending request")),n.i=!0,n.a.send(u),n.i=!1}catch(Y){ss(n.b,Ns(n,"Send error: "+Y.message)),zl(n,Y)}}(Y,n,g,b,M)};var ll=new Cn(sr,"https://apis.google.com/js/client.js?onload=%{onload}"),kc="__fcb"+Math.floor(1e6*Math.random()).toString();function ys(n){if("string"!=typeof(n=n.email)||!xi.test(n))throw new E("invalid-email")}function wu(n){"email"in n&&ys(n)}function Oo(n){if(!n[Eo])throw n.mfaPendingCredential?new E("multi-factor-auth-required",null,dn(n)):new E("internal-error")}function fl(n){if(n.phoneNumber||n.temporaryProof){if(!n.phoneNumber||!n.temporaryProof)throw new E("internal-error")}else{if(!n.sessionInfo)throw new E("missing-verification-id");if(!n.code)throw new E("missing-verification-code")}}Js.prototype.o=function(n,u,g,b,M){var G=this;mu.then(function(){window.gapi.client.setApiKey(G.c);var Y=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:n,method:g,body:b,headers:M,authType:"none",callback:function(be){window.gapi.auth.setToken(Y),u&&u(be)}})}).s(function(Y){u&&u({error:{message:Y&&Y.message||"CORS_UNSUPPORTED"}})})},Js.prototype.yb=function(){return qn(this,Ie,{})},Js.prototype.Ab=function(n,u){return qn(this,ce,{idToken:n,email:u})},Js.prototype.Bb=function(n,u){return qn(this,Ee,{idToken:n,password:u})};var bu={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function hl(n){if(!n.phoneVerificationInfo)throw new E("internal-error");if(!n.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!n.phoneVerificationInfo.code)throw new E("missing-verification-code")}function da(n){if(!n.requestUri||!n.sessionId&&!n.postBody&&!n.pendingToken)throw new E("internal-error")}function pl(n,u){return u.oauthIdToken&&u.providerId&&0==u.providerId.indexOf("oidc.")&&!u.pendingToken&&(n.sessionId?u.nonce=n.sessionId:n.postBody&&$s(n=new co(n.postBody),"nonce")&&(u.nonce=n.get("nonce"))),u}function Xl(n){var u=null;if(n.needConfirmation?(n.code="account-exists-with-different-credential",u=Ku(n)):"FEDERATED_USER_ID_ALREADY_LINKED"==n.errorMessage?(n.code="credential-already-in-use",u=Ku(n)):"EMAIL_EXISTS"==n.errorMessage?(n.code="email-already-in-use",u=Ku(n)):n.errorMessage&&(u=ma(n.errorMessage)),u)throw u;Oo(n)}function Jl(n,u){return u.returnIdpCredential=!0,qn(n,ut,u)}function pa(n,u){return u.returnIdpCredential=!0,qn(n,en,u)}function Iu(n,u){return u.returnIdpCredential=!0,u.autoCreate=!1,qn(n,Jt,u)}function Tu(n){if(!n.oobCode)throw new E("invalid-action-code")}(Q=Js.prototype).Cb=function(n,u){var g={idToken:n},b=[];return Zt(bu,function(M,G){var Y=u[G];null===Y?b.push(M):G in u&&(g[G]=Y)}),b.length&&(g.deleteAttribute=b),qn(this,ce,g)},Q.ub=function(n,u){return On(n={requestType:"PASSWORD_RESET",email:n},u),qn(this,_,n)},Q.vb=function(n,u){return On(n={requestType:"EMAIL_SIGNIN",email:n},u),qn(this,s,n)},Q.tb=function(n,u){return On(n={requestType:"VERIFY_EMAIL",idToken:n},u),qn(this,f,n)},Q.Db=function(n,u,g){return On(n={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:n,newEmail:u},g),qn(this,p,n)},Q.eb=function(n){return qn(this,mr,n)},Q.mb=function(n,u){return qn(this,V,{oobCode:n,newPassword:u})},Q.Qa=function(n){return qn(this,Zl,{oobCode:n})},Q.ib=function(n){return qn(this,gl,{oobCode:n})};var gl={endpoint:"setAccountInfo",B:Tu,Z:"email",C:!0},Zl={endpoint:"resetPassword",B:Tu,F:function(n){var u=n.requestType;if(!u||!n.email&&"EMAIL_SIGNIN"!=u&&"VERIFY_AND_CHANGE_EMAIL"!=u)throw new E("internal-error")},C:!0},ef={endpoint:"signupNewUser",B:function(n){if(ys(n),!n.password)throw new E("weak-password")},F:Oo,U:!0,C:!0},ga={endpoint:"createAuthUri",C:!0},hd={endpoint:"deleteAccount",M:["idToken"]},tf={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(n){if("array"!=mt(n.deleteProvider))throw new E("internal-error")}},dd={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ys,F:Oo,U:!0,C:!0},pd={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ys,F:Oo,U:!0},va={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:hl,F:Oo,C:!0,Na:!0},a={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:hl,F:Oo,C:!0,Na:!0},i={endpoint:"getAccountInfo"},s={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(n){if("EMAIL_SIGNIN"!=n.requestType)throw new E("internal-error");ys(n)},Z:"email",C:!0},f={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(n){if("VERIFY_EMAIL"!=n.requestType)throw new E("internal-error")},Z:"email",C:!0},p={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(n){if("VERIFY_AND_CHANGE_EMAIL"!=n.requestType)throw new E("internal-error")},Z:"email",C:!0},_={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(n){if("PASSWORD_RESET"!=n.requestType)throw new E("internal-error");ys(n)},Z:"email",C:!0},I={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},O={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(n){if(!n.recaptchaSiteKey)throw new E("internal-error")}},V={endpoint:"resetPassword",B:Tu,Z:"email",C:!0},X={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},ce={endpoint:"setAccountInfo",M:["idToken"],B:wu,U:!0},Ee={endpoint:"setAccountInfo",M:["idToken"],B:function(n){if(wu(n),!n.password)throw new E("weak-password")},F:Oo,U:!0},Ie={endpoint:"signupNewUser",F:Oo,U:!0,C:!0},Ue={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(n){if(!n.phoneEnrollmentInfo)throw new E("internal-error");if(!n.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!n.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},F:function(n){if(!n.phoneSessionInfo||!n.phoneSessionInfo.sessionInfo)throw new E("internal-error")},C:!0,Na:!0},Je={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(n){if(!n.phoneSignInInfo||!n.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},F:function(n){if(!n.phoneResponseInfo||!n.phoneResponseInfo.sessionInfo)throw new E("internal-error")},C:!0,Na:!0},ut={endpoint:"verifyAssertion",B:da,Xa:pl,F:Xl,U:!0,C:!0},Jt={endpoint:"verifyAssertion",B:da,Xa:pl,F:function(n){if(n.errorMessage&&"USER_NOT_FOUND"==n.errorMessage)throw new E("user-not-found");if(n.errorMessage)throw ma(n.errorMessage);Oo(n)},U:!0,C:!0},en={endpoint:"verifyAssertion",B:function(n){if(da(n),!n.idToken)throw new E("internal-error")},Xa:pl,F:Xl,U:!0},Tn={endpoint:"verifyCustomToken",B:function(n){if(!n.token)throw new E("invalid-custom-token")},F:Oo,U:!0,C:!0},Gn={endpoint:"verifyPassword",B:function(n){if(ys(n),!n.password)throw new E("wrong-password")},F:Oo,U:!0,C:!0},mr={endpoint:"verifyPhoneNumber",B:fl,F:Oo,C:!0},ri={endpoint:"verifyPhoneNumber",B:function(n){if(!n.idToken)throw new E("internal-error");fl(n)},F:function(n){if(n.temporaryProof)throw n.code="credential-already-in-use",Ku(n);Oo(n)}},wi={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:fl,F:Oo,C:!0},ya={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(n){if(!!n[Eo]^!!n.refreshToken)throw new E("internal-error")},C:!0,Na:!0};function qn(n,u,g){if(!function(n,u){if(!u||!u.length)return!0;if(!n)return!1;for(var g=0;g<u.length;g++){var b=n[u[g]];if(null==b||""===b)return!1}return!0}(g,u.M))return kn(new E("internal-error"));var G,b=!!u.Na,M=u.Tb||"POST";return jt(g).then(u.B).then(function(){return u.U&&(g.returnSecureToken=!0),u.C&&n.b&&void 0===g.tenantId&&(g.tenantId=n.b),function(n,u,g,b,M,G,Y){var be=li(u+g);Ur(be,"key",n.c),Y&&Ur(be,"cb",D().toString());var ht="GET"==b;if(ht)for(var Mt in M)M.hasOwnProperty(Mt)&&Ur(be,Mt,M[Mt]);return new Sn(function(Wn,ii){xc(n,be.toString(),function(kr){kr?kr.error?ii(za(kr,G||{})):Wn(kr):ii(new E("network-request-failed"))},b,ht?void 0:Ls(S(M)),n.a,n.m.get())})}(n,b?n.i:n.h,u.endpoint,M,g,u.Gb,u.kb||!1)}).then(function(Y){return G=Y,u.Xa?u.Xa(g,G):G}).then(u.F).then(function(){if(!u.Z)return G;if(!(u.Z in G))throw new E("internal-error");return G[u.Z]})}function ma(n){return za({error:{errors:[{message:n}],code:400,message:n}})}function za(n,u){var g=(n.error&&n.error.errors&&n.error.errors[0]||{}).reason||"",b={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(g=b[g]?new E(b[g]):null)return g;for(var M in g=n.error&&n.error.message||"",On(b={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},u||{}),u=(u=g.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0,b)if(0===g.indexOf(M))return new E(b[M],u);return!u&&n&&(u=m(n)),new E("internal-error",u)}function vl(n){this.b=n,this.a=null,this.qb=function(n){return(rf||(rf=new Sn(function(n,u){function g(){ue(),Qr("gapi.load")("gapi.iframes",{callback:n,ontimeout:function(){ue(),u(Error("Network Error"))},timeout:Bs.get()})}if(Qr("gapi.iframes.Iframe"))n();else if(Qr("gapi.load"))g();else{var b="__iframefcb"+Math.floor(1e6*Math.random()).toString();te[b]=function(){Qr("gapi.load")?g():u(Error("Network Error"))},jt(ec(b=Ti(gd,{onload:b}))).s(function(){u(Error("Network Error"))})}}).s(function(n){throw rf=null,n}))).then(function(){return new Sn(function(u,g){Qr("gapi.iframes.getContext")().open({where:document.body,url:n.b,messageHandlersFilter:Qr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(b){function M(){clearTimeout(G),u()}n.a=b,n.a.restyle({setHideOnLeave:!1});var G=setTimeout(function(){g(Error("Network Error"))},$a.get());b.ping(M).then(M,function(){g(Error("Network Error"))})})})})}(this)}var gd=new Cn(sr,"https://apis.google.com/js/api.js?onload=%{onload}"),Bs=new ne(3e4,6e4),$a=new ne(5e3,15e3),rf=null;function Up(n,u,g,b){this.l=n,this.h=u,this.i=g,this.g=b,this.f=null,n=this.g?Ei((n=li(this.g.url)).f,n.a,n.g,"/emulator/auth/iframe"):Ei("https",this.l,null,"/__/auth/iframe"),this.a=n,Ur(this.a,"apiKey",this.h),Ur(this.a,"appName",this.i),this.b=null,this.c=[]}function of(n,u,g,b,M,G){this.u=n,this.o=u,this.c=g,this.v=b,this.m=G,this.i=this.g=this.l=null,this.a=M,this.h=this.f=null}function vd(n){try{return $.app(n).auth().Ga()}catch(u){return[]}}function eo(n,u,g,b,M,G){this.o=n,this.g=u,this.b=g,this.f=G,this.c=b||null,this.i=M||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function Bp(n){var u=y();return function(n){return qn(n,I,{}).then(function(u){return u.authorizedDomains||[]})}(n).then(function(g){e:{var b=li(u),M=b.f;b=b.a;for(var G=0;G<g.length;G++){var Y=g[G],be=b,ht=M;if(0==Y.indexOf("chrome-extension://")?be=li(Y).a==be&&"chrome-extension"==ht:"http"!=ht&&"https"!=ht?be=!1:rr.test(Y)?be=be==Y:(Y=Y.split(".").join("\\."),be=new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(be)),be){g=!0;break e}}g=!1}if(!g)throw new Fa(y())})}function Hp(n){return n.v||(n.v=mo().then(function(){if(!n.u){var u=n.c,g=n.i,b=vd(n.b),M=new Up(n.o,n.g,n.b,n.f);M.f=u,M.b=g,M.c=ir(b||[]),n.u=M.toString()}n.m=new vl(n.u),function(n){if(!n.m)throw Error("IfcHandler must be initialized!");!function(n,u){n.qb.then(function(){n.a.register("authEvent",u,Qr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(n.m,function(u){var g={};if(u&&u.authEvent){var b=!1;for(u=cu(u.authEvent),g=0;g<n.h.length;g++)b=n.h[g](u)||b;return(g={}).status=b?"ACK":"ERROR",jt(g)}return g.status="ERROR",jt(g)})}(n)})),n.v}function yd(n){return n.l||(n.A=n.c?Da(n.c,vd(n.b)):null,n.l=new Js(n.g,ae(n.i),n.A),n.f&&ha(n.l,n.f)),n.l}function ml(n,u,g,b,M,G,Y,be,ht,Mt,Wn,ii){return(n=new of(n,u,g,b,M,ii)).l=G,n.g=Y,n.i=be,n.b=dn(ht||null),n.f=Mt,n.xb(Wn).toString()}function Gp(n){if(this.a=n||$.INTERNAL.reactNative&&$.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function qp(n){this.b=n,this.a={},this.f=He(this.c,this)}Up.prototype.toString=function(){return this.f?Ur(this.a,"v",this.f):Wr(this.a.b,"v"),this.b?Ur(this.a,"eid",this.b):Wr(this.a.b,"eid"),this.c.length?Ur(this.a,"fw",this.c.join(",")):Wr(this.a.b,"fw"),this.a.toString()},of.prototype.xb=function(n){return this.h=n,this},of.prototype.toString=function(){if(this.m){var n=li(this.m.url);n=Ei(n.f,n.a,n.g,"/emulator/auth/handler")}else n=Ei("https",this.u,null,"/__/auth/handler");if(Ur(n,"apiKey",this.o),Ur(n,"appName",this.c),Ur(n,"authType",this.v),this.a.isOAuthProvider){var u=this.a;try{var g=$.app(this.c).auth().ka()}catch(be){g=null}for(var b in u.nb=g,Ur(n,"providerId",this.a.providerId),u=S((g=this.a).Hb))u[b]=u[b].toString();b=g.Pc,u=dn(u);for(var M=0;M<b.length;M++){var G=b[M];G in u&&delete u[G]}g.ob&&g.nb&&!u[g.ob]&&(u[g.ob]=g.nb),$t(u)||Ur(n,"customParameters",m(u))}if("function"==typeof this.a.Pb&&(g=this.a.Pb()).length&&Ur(n,"scopes",g.join(",")),this.l?Ur(n,"redirectUrl",this.l):Wr(n.b,"redirectUrl"),this.g?Ur(n,"eventId",this.g):Wr(n.b,"eventId"),this.i?Ur(n,"v",this.i):Wr(n.b,"v"),this.b)for(var Y in this.b)this.b.hasOwnProperty(Y)&&!Mr(n,Y)&&Ur(n,Y,this.b[Y]);return this.h?Ur(n,"tid",this.h):Wr(n.b,"tid"),this.f?Ur(n,"eid",this.f):Wr(n.b,"eid"),(Y=vd(this.c)).length&&Ur(n,"fw",Y.join(",")),n.toString()},(Q=eo.prototype).Nb=function(n,u,g){var b=new E("popup-closed-by-user"),M=new E("web-storage-unsupported"),G=this,Y=!1;return this.la().then(function(){(function(n){var u={type:"webStorageSupport"};return Hp(n).then(function(){return function(n,u){return n.qb.then(function(){return new Sn(function(g){n.a.send(u.type,u,g,Qr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(n.m,u)}).then(function(g){if(g&&g.length&&void 0!==g[0].webStorageSupport)return g[0].webStorageSupport;throw Error()})})(G).then(function(be){be||(n&&qe(n),u(M),Y=!0)})}).s(function(){}).then(function(){if(!Y)return function(n){return new Sn(function(u){return function g(){ai(2e3).then(function(){if(n&&!n.closed)return g();u()})}()})}(n)}).then(function(){if(!Y)return ai(g).then(function(){u(b)})})},Q.Wb=function(){var n=ki();return!h(n)&&!z(n)},Q.Sb=function(){return!1},Q.Lb=function(n,u,g,b,M,G,Y,be){if(!n)return kn(new E("popup-blocked"));if(Y&&!h())return this.la().s(function(Mt){qe(n),M(Mt)}),b(),jt();this.a||(this.a=Bp(yd(this)));var ht=this;return this.a.then(function(){var Mt=ht.la().s(function(Wn){throw qe(n),M(Wn),Wn});return b(),Mt}).then(function(){il(g),Y||P(ml(ht.o,ht.g,ht.b,u,g,null,G,ht.c,void 0,ht.i,be,ht.f),n)}).s(function(Mt){throw"auth/network-request-failed"==Mt.code&&(ht.a=null),Mt})},Q.Mb=function(n,u,g,b){this.a||(this.a=Bp(yd(this)));var M=this;return this.a.then(function(){il(u),P(ml(M.o,M.g,M.b,n,u,y(),g,M.c,void 0,M.i,b,M.f))}).s(function(G){throw"auth/network-request-failed"==G.code&&(M.a=null),G})},Q.la=function(){var n=this;return Hp(this).then(function(){return n.m.qb}).s(function(){throw n.a=null,new E("network-request-failed")})},Q.Zb=function(){return!0},Q.Ea=function(n){this.h.push(n)},Q.Ra=function(n){yn(this.h,function(u){return u==n})},(Q=Gp.prototype).get=function(n){return jt(this.a.getItem(n)).then(function(u){return u&&R(u)})},Q.set=function(n,u){return jt(this.a.setItem(n,m(u)))},Q.T=function(n){return jt(this.a.removeItem(n))},Q.ca=function(){},Q.ia=function(){};var Po,Wp=[];function cv(n,u,g){$t(n.a)&&n.b.addEventListener("message",n.f),void 0===n.a[u]&&(n.a[u]=[]),n.a[u].push(g)}function _l(n){this.a=n}function cs(n){this.c=n,this.b=!1,this.a=[]}function th(n,u,g,b){var M,Y,be,ht,G=g||{},Mt=null;if(n.b)return kn(Error("connection_unavailable"));var Wn=b?800:50,ii="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Sn(function(kr,zi){ii?(M=Math.floor(Math.random()*Math.pow(10,20)).toString(),ii.port1.start(),be=setTimeout(function(){zi(Error("unsupported_event"))},Wn),n.a.push(Mt={messageChannel:ii,onMessage:Y=function(Su){Su.data.eventId===M&&("ack"===Su.data.status?(clearTimeout(be),ht=setTimeout(function(){zi(Error("timeout"))},3e3)):"done"===Su.data.status?(clearTimeout(ht),void 0!==Su.data.response?kr(Su.data.response):zi(Error("unknown_error"))):(clearTimeout(be),clearTimeout(ht),zi(Error("invalid_response"))))}}),ii.port1.addEventListener("message",Y),n.c.postMessage({eventType:u,eventId:M,data:G},[ii.port2])):zi(Error("connection_unavailable"))}).then(function(kr){return nh(n,Mt),kr}).s(function(kr){throw nh(n,Mt),kr})}function nh(n,u){if(u){var g=u.messageChannel;g&&(g.port1.removeEventListener("message",u.onMessage),g.port1.close()),yn(n.a,function(M){return M==u})}}function md(){if(!_d())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=te.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var n=this;Br()&&self?(this.l=function(){var n=Br()?self:null;if(nt(Wp,function(g){g.b==n&&(u=g)}),!u){var u=new qp(n);Wp.push(u)}return u}(),cv(this.l,"keyChanged",function(u,g){return wd(n).then(function(b){return 0<b.length&&nt(n.a,function(M){M(b)}),{keyProcessed:vn(b,g.key)}})}),cv(this.l,"ping",function(){return jt(["keyChanged"])})):function(){var n=te.navigator;return n&&n.serviceWorker?jt().then(function(){return n.serviceWorker.ready}).then(function(u){return u.active||null}).s(function(){return null}):jt(null)}().then(function(u){(n.h=u)&&(n.g=new cs(new _l(u)),th(n.g,"ping",null,!0).then(function(g){g[0].fulfilled&&vn(g[0].value,"keyChanged")&&(n.o=!0)}).s(function(){}))})}function rh(n){return new Sn(function(u,g){var b=n.m.open("firebaseLocalStorageDb",1);b.onerror=function(M){try{M.preventDefault()}catch(G){}g(Error(M.target.error))},b.onupgradeneeded=function(M){M=M.target.result;try{M.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(G){g(G)}},b.onsuccess=function(M){(M=M.target.result).objectStoreNames.contains("firebaseLocalStorage")?u(M):function(n){return new Sn(function(u,g){var b=n.m.deleteDatabase("firebaseLocalStorageDb");b.onsuccess=function(){u()},b.onerror=function(M){g(Error(M.target.error))}})}(n).then(function(){return rh(n)}).then(function(G){u(G)}).s(function(G){g(G)})}})}function ih(n){return n.v||(n.v=rh(n)),n.v}function _d(){try{return!!te.indexedDB}catch(n){return!1}}function wl(n){return n.objectStore("firebaseLocalStorage")}function af(n,u){return n.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function Fc(n){return new Sn(function(u,g){n.onsuccess=function(b){b&&b.target?u(b.target.result):u()},n.onerror=function(b){g(b.target.error)}})}function zp(n,u){return n.g&&n.h&&function(){var n=te.navigator;return n&&n.serviceWorker&&n.serviceWorker.controller||null}()===n.h?th(n.g,"keyChanged",{key:u},n.o).then(function(){}).s(function(){}):jt()}function wd(n){return ih(n).then(function(u){var g=wl(af(u,!1));return g.getAll?Fc(g.getAll()):new Sn(function(b,M){var G=[],Y=g.openCursor();Y.onsuccess=function(be){(be=be.target.result)?(G.push(be.value),be.continue()):b(G)},Y.onerror=function(be){M(be.target.error)}})}).then(function(u){var g={},b=[];if(0==n.b){for(b=0;b<u.length;b++)g[u[b].fbase_key]=u[b].value;b=B(n.c,g),n.c=g}return b})}function $p(n){n.i&&n.i.cancel("STOP_EVENT"),n.f&&(clearTimeout(n.f),n.f=null)}function Kp(n){var u=this,g=null;this.a=[],this.type="indexedDB",this.c=n,this.b=jt().then(function(){if(_d()){var b=H(),M="__sak"+b;return Po||(Po=new md),(g=Po).set(M,b).then(function(){return g.get(M)}).then(function(G){if(G!==b)throw Error("indexedDB not supported!");return g.T(M)}).then(function(){return g}).s(function(){return u.c})}return u.c}).then(function(b){return u.type=b.type,b.ca(function(M){nt(u.a,function(G){G(M)})}),b})}function jc(){this.a={},this.type="inMemory"}function oh(){if(!function(){var n="Node"==fi();if(!(n=Qp()||n&&$.INTERNAL.node&&$.INTERNAL.node.localStorage))return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch(u){return!1}}())throw"Node"==fi()?new E("internal-error","The LocalStorage compatibility library was not found."):new E("web-storage-unsupported");this.a=Qp()||$.INTERNAL.node.localStorage,this.type="localStorage"}function Qp(){try{var n=te.localStorage,u=H();return n&&(n.setItem(u,"1"),n.removeItem(u)),n}catch(g){return null}}function uf(){this.type="nullStorage"}function bd(){if(!function(){var n="Node"==fi();if(!(n=Yp()||n&&$.INTERNAL.node&&$.INTERNAL.node.sessionStorage))return!1;try{return n.setItem("__sak","1"),n.removeItem("__sak"),!0}catch(u){return!1}}())throw"Node"==fi()?new E("internal-error","The SessionStorage compatibility library was not found."):new E("web-storage-unsupported");this.a=Yp()||$.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Yp(){try{var n=te.sessionStorage,u=H();return n&&(n.setItem(u,"1"),n.removeItem(u)),n}catch(g){return null}}function fv(){var n={};n.Browser=hv,n.Node=dv,n.ReactNative=pv,n.Worker=Xp,this.a=n[fi()]}qp.prototype.c=function(n){var u=n.data.eventType,g=n.data.eventId,b=this.a[u];if(b&&0<b.length){n.ports[0].postMessage({status:"ack",eventId:g,eventType:u,response:null});var M=[];nt(b,function(G){M.push(jt().then(function(){return G(n.origin,n.data.data)}))}),hr(M).then(function(G){var Y=[];nt(G,function(be){Y.push({fulfilled:be.Ob,value:be.value,reason:be.reason?be.reason.message:void 0})}),nt(Y,function(be){for(var ht in be)void 0===be[ht]&&delete be[ht]}),n.ports[0].postMessage({status:"done",eventId:g,eventType:u,response:Y})})}},_l.prototype.postMessage=function(n,u){this.a.postMessage(n,u)},cs.prototype.close=function(){for(;0<this.a.length;)nh(this,this.a[0]);this.b=!0},(Q=md.prototype).set=function(n,u){var b,g=!1,M=this;return ih(this).then(function(G){return Fc((G=wl(af(b=G,!0))).get(n))}).then(function(G){var Y=wl(af(b,!0));return G?(G.value=u,Fc(Y.put(G))):(M.b++,g=!0,(G={}).fbase_key=n,G.value=u,Fc(Y.add(G)))}).then(function(){return M.c[n]=u,zp(M,n)}).na(function(){g&&M.b--})},Q.get=function(n){return ih(this).then(function(u){return Fc(wl(af(u,!1)).get(n))}).then(function(u){return u&&u.value})},Q.T=function(n){var u=!1,g=this;return ih(this).then(function(b){return u=!0,g.b++,Fc(wl(af(b,!0)).delete(n))}).then(function(){return delete g.c[n],zp(g,n)}).na(function(){u&&g.b--})},Q.ca=function(n){0==this.a.length&&function(n){$p(n),function u(){n.f=setTimeout(function(){n.i=wd(n).then(function(g){0<g.length&&nt(n.a,function(b){b(g)})}).then(function(){u()}).s(function(g){"STOP_EVENT"!=g.message&&u()})},800)}()}(this),this.a.push(n)},Q.ia=function(n){yn(this.a,function(u){return u==n}),0==this.a.length&&$p(this)},(Q=Kp.prototype).get=function(n){return this.b.then(function(u){return u.get(n)})},Q.set=function(n,u){return this.b.then(function(g){return g.set(n,u)})},Q.T=function(n){return this.b.then(function(u){return u.T(n)})},Q.ca=function(n){this.a.push(n)},Q.ia=function(n){yn(this.a,function(u){return u==n})},(Q=jc.prototype).get=function(n){return jt(this.a[n])},Q.set=function(n,u){return this.a[n]=u,jt()},Q.T=function(n){return delete this.a[n],jt()},Q.ca=function(){},Q.ia=function(){},(Q=oh.prototype).get=function(n){var u=this;return jt().then(function(){return R(u.a.getItem(n))})},Q.set=function(n,u){var g=this;return jt().then(function(){var b=m(u);null===b?g.T(n):g.a.setItem(n,b)})},Q.T=function(n){var u=this;return jt().then(function(){u.a.removeItem(n)})},Q.ca=function(n){te.window&&nr(te.window,"storage",n)},Q.ia=function(n){te.window&&Gr(te.window,"storage",n)},(Q=uf.prototype).get=function(){return jt(null)},Q.set=function(){return jt()},Q.T=function(){return jt()},Q.ca=function(){},Q.ia=function(){},(Q=bd.prototype).get=function(n){var u=this;return jt().then(function(){return R(u.a.getItem(n))})},Q.set=function(n,u){var g=this;return jt().then(function(){var b=m(u);null===b?g.T(n):g.a.setItem(n,b)})},Q.T=function(n){var u=this;return jt().then(function(){u.a.removeItem(n)})},Q.ca=function(){},Q.ia=function(){};var Ed,Id,hv={D:oh,ab:bd},dv={D:oh,ab:bd},pv={D:Gp,ab:uf},Xp={D:oh,ab:uf},El={qd:"local",NONE:"none",sd:"session"};function Jp(){var n=!(z(ki())||!hs()),u=h(),g=ra();this.v=n,this.h=u,this.l=g,this.a={},Ed||(Ed=new fv),n=Ed;try{this.g=!ui()&&Kt()||!te.indexedDB?new n.a.D:new Kp(Br()?new jc:new n.a.D)}catch(b){this.g=new jc,this.h=!0}try{this.i=new n.a.ab}catch(b){this.i=new jc}this.m=new jc,this.f=He(this.Xb,this),this.b={}}function Il(){return Id||(Id=new Jp),Id}function Vc(n,u){switch(u){case"session":return n.i;case"none":return n.m;default:return n.g}}function Tl(n,u){return"firebase:"+n.name+(u?":"+u:"")}function _a(n,u,g){return g=Tl(u,g),"local"==u.D&&(n.b[g]=null),Vc(n,u.D).T(g)}function Zp(n){n.c&&(clearInterval(n.c),n.c=null)}function mm(n){this.a=n,this.b=Il()}(Q=Jp.prototype).get=function(n,u){return Vc(this,n.D).get(Tl(n,u))},Q.set=function(n,u,g){var b=Tl(n,g),M=this,G=Vc(this,n.D);return G.set(b,u).then(function(){return G.get(b)}).then(function(Y){"local"==n.D&&(M.b[b]=Y)})},Q.addListener=function(n,u,g){n=Tl(n,u),this.l&&(this.b[n]=te.localStorage.getItem(n)),$t(this.a)&&(Vc(this,"local").ca(this.f),this.h||(ui()||!Kt())&&te.indexedDB||!this.l||function(n){Zp(n),n.c=setInterval(function(){for(var u in n.a){var g=te.localStorage.getItem(u),b=n.b[u];g!=b&&(n.b[u]=g,g=new yt({type:"storage",key:u,target:window,oldValue:b,newValue:g,a:!0}),n.Xb(g))}},1e3)}(this)),this.a[n]||(this.a[n]=[]),this.a[n].push(g)},Q.removeListener=function(n,u,g){n=Tl(n,u),this.a[n]&&(yn(this.a[n],function(b){return b==g}),0==this.a[n].length&&delete this.a[n]),$t(this.a)&&(Vc(this,"local").ia(this.f),Zp(this))},Q.Xb=function(n){if(n&&n.g){var u=n.a.key;if(null==u)for(var g in this.a){var b=this.b[g];void 0===b&&(b=null);var M=te.localStorage.getItem(g);M!==b&&(this.b[g]=M,this.lb(g))}else if(0==u.indexOf("firebase:")&&this.a[u]){if(void 0!==n.a.a?Vc(this,"local").ia(this.f):Zp(this),this.v)if(g=te.localStorage.getItem(u),(b=n.a.newValue)!==g)null!==b?te.localStorage.setItem(u,b):te.localStorage.removeItem(u);else if(this.b[u]===b&&void 0===n.a.a)return;var G=this;g=function(){(void 0!==n.a.a||G.b[u]!==te.localStorage.getItem(u))&&(G.b[u]=te.localStorage.getItem(u),G.lb(u))},se&&bn&&10==bn&&te.localStorage.getItem(u)!==n.a.newValue&&n.a.newValue!==n.a.oldValue?setTimeout(g,10):g()}}else nt(n,He(this.lb,this))},Q.lb=function(n){this.a[n]&&nt(this.a[n],function(u){u()})};var ah,sh={name:"authEvent",D:"local"};function Hs(){this.a=Il()}function Dl(n,u){this.b=Dd,this.f=te.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=n,this.h=u,this.l=te.Int32Array?new Int32Array(64):Array(64),void 0===ah&&(ah=te.Int32Array?new Int32Array(yv):yv),this.reset()}C(Dl,function(){this.b=-1});for(var Dd=64,cf=Dd-1,Sd=[],uh=0;uh<cf;uh++)Sd[uh]=0;var ch=Jn(128,Sd);function lf(n){for(var u=n.f,g=n.l,b=0,M=0;M<u.length;)g[b++]=u[M]<<24|u[M+1]<<16|u[M+2]<<8|u[M+3],M=4*b;for(u=16;64>u;u++){var G=(0|g[u-16])+(((M=0|g[u-15])>>>7|M<<25)^(M>>>18|M<<14)^M>>>3)|0,Y=(0|g[u-7])+(((b=0|g[u-2])>>>17|b<<15)^(b>>>19|b<<13)^b>>>10)|0;g[u]=G+Y|0}b=0|n.a[0],M=0|n.a[1];var be=0|n.a[2],ht=0|n.a[3],Mt=0|n.a[4],Wn=0|n.a[5],ii=0|n.a[6];for(G=0|n.a[7],u=0;64>u;u++){var kr=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&M^b&be^M&be)|0;Y=(G=G+((Mt>>>6|Mt<<26)^(Mt>>>11|Mt<<21)^(Mt>>>25|Mt<<7))|0)+((Y=(Y=Mt&Wn^~Mt&ii)+(0|ah[u])|0)+(0|g[u])|0)|0,G=ii,ii=Wn,Wn=Mt,Mt=ht+Y|0,ht=be,be=M,M=b,b=Y+kr|0}n.a[0]=n.a[0]+b|0,n.a[1]=n.a[1]+M|0,n.a[2]=n.a[2]+be|0,n.a[3]=n.a[3]+ht|0,n.a[4]=n.a[4]+Mt|0,n.a[5]=n.a[5]+Wn|0,n.a[6]=n.a[6]+ii|0,n.a[7]=n.a[7]+G|0}function lh(n,u,g){void 0===g&&(g=u.length);var b=0,M=n.c;if("string"==typeof u)for(;b<g;)n.f[M++]=u.charCodeAt(b++),M==n.b&&(lf(n),M=0);else{if(!fn(u))throw Error("message must be string or array");for(;b<g;){var G=u[b++];if(!("number"==typeof G&&0<=G&&255>=G&&G==(0|G)))throw Error("message must be a byte array");n.f[M++]=G,M==n.b&&(lf(n),M=0)}}n.c=M,n.g+=g}Dl.prototype.reset=function(){this.g=this.c=0,this.a=te.Int32Array?new Int32Array(this.h):ir(this.h)};var yv=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Uc(){Dl.call(this,8,Cd)}C(Uc,Dl);var Cd=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ad(n,u,g,b,M,G){this.m=n,this.i=u,this.l=g,this.v=b||null,this.u=M||null,this.o=G,this.h=u+":"+g,this.A=new Hs,this.g=new mm(this.h),this.f=null,this.b=[],this.a=this.c=null}function fh(n){return new E("invalid-cordova-configuration",n)}function eg(n,u){for(var g=0;g<n.b.length;g++)try{n.b[g](u)}catch(b){}}function tg(n){return n.f||(n.f=n.la().then(function(){return new Sn(function(u){n.Ea(function g(b){return u(b),n.Ra(g),!1}),function(n){function u(Y){b=!0,M&&M.cancel(),Rd(n).then(function(be){var ht=g;if(be&&Y&&Y.url){var Mt=null;-1!=(ht=jf(Y.url)).indexOf("/__/auth/callback")&&(Mt=(Mt="object"==typeof(Mt=R(Mr(Mt=li(ht),"firebaseError")||null))?k(Mt):null)?new Go(be.c,be.b,null,null,Mt,null,be.S()):new Go(be.c,be.b,ht,be.f,null,null,be.S())),ht=Mt||g}eg(n,ht)})}var g=new Go("unknown",null,null,null,new E("no-auth-event")),b=!1,M=ai(500).then(function(){return Rd(n).then(function(){b||eg(n,g)})}),G=te.handleOpenURL;te.handleOpenURL=function(Y){if(0==Y.toLowerCase().indexOf(Qr("BuildInfo.packageName",te).toLowerCase()+"://")&&u({url:Y}),"function"==typeof G)try{G(Y)}catch(be){console.error(be)}},ol||(ol=new od),function(n){var u=ol;u.a.push(n),u.b||(u.b=function(g){for(var b=0;b<u.a.length;b++)u.a[b](g)},"function"==typeof(n=Qr("universalLinks.subscribe",te))&&n(null,u.b))}(u)}(n)})})),n.f}function Rd(n){var u=null;return function(n){return n.b.get(sh,n.a).then(function(u){return cu(u)})}(n.g).then(function(g){return u=g,_a((g=n.g).b,sh,g.a)}).then(function(){return u})}function ng(n){this.a=n,this.b=Il()}(Q=Ad.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(Ks(void 0)?mo().then(function(){return new Sn(function(n,u){var g=te.document,b=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);g.addEventListener("deviceready",function(){clearTimeout(b),n()},!1)})}):kn(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Qr("universalLinks.subscribe",te))throw fh("cordova-universal-links-plugin-fix is not installed");if(void 0===Qr("BuildInfo.packageName",te))throw fh("cordova-plugin-buildinfo is not installed");if("function"!=typeof Qr("cordova.plugins.browsertab.openUrl",te))throw fh("cordova-plugin-browsertab is not installed");if("function"!=typeof Qr("cordova.InAppBrowser.open",te))throw fh("cordova-plugin-inappbrowser is not installed")},function(){throw new E("cordova-not-ready")})},Q.Nb=function(n,u){return u(new E("operation-not-supported-in-this-environment")),jt()},Q.Lb=function(){return kn(new E("operation-not-supported-in-this-environment"))},Q.Zb=function(){return!1},Q.Wb=function(){return!0},Q.Sb=function(){return!0},Q.Mb=function(n,u,g,b){if(this.c)return kn(new E("redirect-operation-pending"));var M=this,G=te.document,Y=null,be=null,ht=null,Mt=null;return this.c=jt().then(function(){return il(u),tg(M)}).then(function(){return function(n,u,g,b,M){var G=function(){for(var n=20,u=[];0<n;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return u.join("")}(),Y=new Go(u,b,null,G,new E("no-auth-event"),null,M),be=Qr("BuildInfo.packageName",te);if("string"!=typeof be)throw new E("invalid-cordova-configuration");var ht=Qr("BuildInfo.displayName",te),Mt={};if(ki().toLowerCase().match(/iphone|ipad|ipod/))Mt.ibi=be;else{if(!ki().toLowerCase().match(/android/))return kn(new E("operation-not-supported-in-this-environment"));Mt.apn=be}ht&&(Mt.appDisplayName=ht),G=function(n){var u=new Uc;lh(u,n),n=[];var g=8*u.g;lh(u,ch,56>u.c?56-u.c:u.b-(u.c-56));for(var b=63;56<=b;b--)u.f[b]=255&g,g/=256;for(lf(u),b=g=0;b<u.i;b++)for(var M=24;0<=M;M-=8)n[g++]=u.a[b]>>M&255;return function(n){return nn(n,function(u){return 1<(u=u.toString(16)).length?u:"0"+u}).join("")}(n)}(G),Mt.sessionId=G;var Wn=ml(n.m,n.i,n.l,u,g,null,b,n.v,Mt,n.u,M,n.o);return n.la().then(function(){var ii=n.h;return n.A.a.set(sh,Y.w(),ii)}).then(function(){var ii=Qr("cordova.plugins.browsertab.isAvailable",te);if("function"!=typeof ii)throw new E("invalid-cordova-configuration");var kr=null;ii(function(zi){if(zi){if("function"!=typeof(kr=Qr("cordova.plugins.browsertab.openUrl",te)))throw new E("invalid-cordova-configuration");kr(Wn)}else{if("function"!=typeof(kr=Qr("cordova.InAppBrowser.open",te)))throw new E("invalid-cordova-configuration");zi=ki(),n.a=kr(Wn,zi.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||zi.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(M,n,u,g,b)}).then(function(){return new Sn(function(Wn,ii){be=function(){var kr=Qr("cordova.plugins.browsertab.close",te);return Wn(),"function"==typeof kr&&kr(),M.a&&"function"==typeof M.a.close&&(M.a.close(),M.a=null),!1},M.Ea(be),Mt=function(){Le()&&ht()},G.addEventListener("resume",ht=function(){Y||(Y=ai(2e3).then(function(){ii(new E("redirect-cancelled-by-user"))}))},!1),ki().toLowerCase().match(/android/)||G.addEventListener("visibilitychange",Mt,!1)}).s(function(Wn){return Rd(M).then(function(){throw Wn})})}).na(function(){ht&&G.removeEventListener("resume",ht,!1),Mt&&G.removeEventListener("visibilitychange",Mt,!1),Y&&Y.cancel(),be&&M.Ra(be),M.c=null})},Q.Ea=function(n){this.b.push(n),tg(this).s(function(u){"auth/invalid-cordova-configuration"===u.code&&(u=new Go("unknown",null,null,null,new E("no-auth-event")),n(u))})},Q.Ra=function(n){yn(this.b,function(u){return u==n})};var ff={name:"pendingRedirect",D:"session"};function hf(n){return _a(n.b,ff,n.a)}function hh(n,u,g,b){this.i={},this.u=0,this.O=n,this.m=u,this.v=g,this.G=b,this.h=[],this.f=!1,this.l=He(this.o,this),this.b=new Bc,this.A=new ag,this.g=new ng(Ld(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Od(this.O,this.m,this.v,pt,this.G)}function Od(n,u,g,b,M){var G=$.SDK_VERSION||null;return Ks()?new Ad(n,u,g,G,b,M):new eo(n,u,g,G,b,M)}function Pd(n){n.f||(n.f=!0,n.a.Ea(n.l));var u=n.a;return n.a.la().s(function(g){throw n.a==u&&n.reset(),g})}function rc(n){n.a.Wb()&&Pd(n).s(function(u){var g=new Go("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));gh(u)&&n.o(g)}),n.a.Sb()||Fd(n.b)}function dh(n,u){vn(n.h,u)||n.h.push(u),n.f||function(n){return n.b.get(ff,n.a).then(function(u){return"pending"==u})}(n.g).then(function(g){g?hf(n.g).then(function(){Pd(n).s(function(b){var M=new Go("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));gh(b)&&n.o(M)})}):rc(n)}).s(function(){rc(n)})}function Md(n,u){yn(n.h,function(g){return g==u})}hh.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Od(this.O,this.m,this.v,null,this.G),this.i={}},hh.prototype.o=function(n){if(!n)throw new E("invalid-auth-event");if(6e5<=D()-this.u&&(this.i={},this.u=0),n&&n.getUid()&&this.i.hasOwnProperty(n.getUid()))return!1;for(var u=!1,g=0;g<this.h.length;g++){var b=this.h[g];if(b.Eb(n.c,n.b)){(u=this.c[n.c])&&(u.h(n,b),n&&(n.f||n.b)&&(this.i[n.getUid()]=!0,this.u=D())),u=!0;break}}return Fd(this.b),u};var Ev=new ne(2e3,1e4),ph=new ne(3e4,6e4);function ig(n,u,g,b,M,G,Y){return n.a.Lb(u,g,b,function(){n.f||(n.f=!0,n.a.Ea(n.l))},function(){n.reset()},M,G,Y)}function gh(n){return!(!n||"auth/cordova-not-ready"!=n.code)}function xd(n,u,g,b,M){var G;return function(n){return n.b.set(ff,"pending",n.a)}(n.g).then(function(){return n.a.Mb(u,g,b,M).s(function(Y){if(gh(Y))throw new E("operation-not-supported-in-this-environment");return G=Y,hf(n.g).then(function(){throw G})}).then(function(){return n.a.Zb()?new Sn(function(){}):hf(n.g).then(function(){return n.qa()}).then(function(){}).s(function(){})})})}function kd(n,u,g,b,M){return n.a.Nb(b,function(G){u.ma(g,null,G,M)},Ev.get())}hh.prototype.qa=function(){return this.b.qa()};var df={};function Ld(n,u,g){return n=n+":"+u,g&&(n=n+":"+g.url),n}function pf(n,u,g,b){var M=Ld(u,g,b);return df[M]||(df[M]=new hh(n,u,g,b)),df[M]}function Bc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Fd(n){n.g||(n.g=!0,Hc(n,!1,null,null))}function Sl(n){n.g&&!n.i&&Hc(n,!1,null,null)}function Cl(n,u){if(n.b=function(){return jt(u)},n.f.length)for(var g=0;g<n.f.length;g++)n.f[g](u)}function Hc(n,u,g,b){u?b?function(n,u){if(n.b=function(){return kn(u)},n.c.length)for(var g=0;g<n.c.length;g++)n.c[g](u)}(n,b):Cl(n,g):Cl(n,{user:null}),n.f=[],n.c=[]}function ag(){}function Vd(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(n){this.hb=n},enumerable:!1})}function gf(n,u){this.a=u,tn(this,"verificationId",n)}function vh(n,u,g,b){return new As(n).eb(u,g).then(function(M){return new gf(M,b)})}function wm(n){var u=kf(n);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");mi(this,{token:n,expirationTime:Et(1e3*u.exp),authTime:Et(1e3*u.auth_time),issuedAtTime:Et(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function yh(n,u,g){var b=u&&u[Ud];if(!b)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=n,this.f=dn(u),this.g=g,this.c=new Oa(null,b),this.b=[];var M=this;nt(u[ug]||[],function(G){(G=Hl(G))&&M.b.push(G)}),tn(this,"auth",this.a),tn(this,"session",this.c),tn(this,"hints",this.b)}Bc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Bc.prototype.h=function(n,u){if(n){this.reset(),this.g=!0;var g=n.c,b=n.b,M=n.a&&"auth/web-storage-unsupported"==n.a.code,G=n.a&&"auth/operation-not-supported-in-this-environment"==n.a.code;this.i=!(!M&&!G),"unknown"!=g||M||G?n.a?(Hc(this,!0,null,n.a),jt()):u.Fa(g,b)?function(n,u,g){g=g.Fa(u.c,u.b);var b=u.g,M=u.f,G=u.i,Y=u.S(),be=!!u.c.match(/Redirect$/);g(b,M,Y,G).then(function(ht){Hc(n,be,ht,null)}).s(function(ht){Hc(n,be,null,ht)})}(this,n,u):kn(new E("invalid-auth-event")):(Hc(this,!1,null,null),jt())}else kn(new E("invalid-auth-event"))},Bc.prototype.qa=function(){var n=this;return new Sn(function(u,g){n.b?n.b().then(u,g):(n.f.push(u),n.c.push(g),function(n){var u=new E("timeout");n.a&&n.a.cancel(),n.a=ai(ph.get()).then(function(){n.b||(n.g=!0,Hc(n,!0,null,u))})}(n))})},ag.prototype.h=function(n,u){if(n){var g=n.c,b=n.b;n.a?(u.ma(n.c,null,n.a,n.b),jt()):u.Fa(g,b)?function(n,u){var g=n.b,b=n.c;u.Fa(b,g)(n.g,n.f,n.S(),n.i).then(function(M){u.ma(b,M,null,g)}).s(function(M){u.ma(b,null,M,g)})}(n,u):kn(new E("invalid-auth-event"))}else kn(new E("invalid-auth-event"))},gf.prototype.confirm=function(n){return n=La(this.verificationId,n),this.a(n)};var ug="mfaInfo",Ud="mfaPendingCredential";function Bd(n,u,g,b){E.call(this,"multi-factor-auth-required",b,u),this.b=new yh(n,u,g),tn(this,"resolver",this.b)}function cg(n,u,g){if(n&&Re(n.serverResponse)&&"auth/multi-factor-auth-required"===n.code)try{return new Bd(u,n.serverResponse,g,n.message)}catch(b){}return null}function Zs(){}function Hd(n){tn(this,"factorId",n.fa),this.a=n}function fg(n){if(Hd.call(this,n),this.a.fa!=As.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Al(n,u){for(var g in Qe.call(this,n),u)this[g]=u[g]}function Gd(n,u){this.a=n,this.b=[],this.c=He(this.xc,this),nr(this.a,"userReloaded",this.c);var g=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&nt(u.multiFactor.enrolledFactors,function(b){var M=null,G={};if(b){b.uid&&(G[Xc]=b.uid),b.displayName&&(G[ia]=b.displayName),b.enrollmentTime&&(G[Sa]=new Date(b.enrollmentTime).toISOString()),b.phoneNumber&&(G[Jc]=b.phoneNumber);try{M=new yc(G)}catch(Y){}b=M}else b=null;b&&g.push(b)}),mh(this,g)}function mh(n,u){n.b=u,tn(n,"enrolledFactors",u)}function qd(n,u,g){if(this.h=n,this.i=u,this.g=g,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Xn(n,u){n.stop(),n.b=ai(function(n,u){return u?(n.a=n.c,n.g()):(u=n.a,n.a*=2,n.a>n.f&&(n.a=n.f),u)}(n,u)).then(function(){return function(){var n=te.document,u=null;return Le()||!n?jt():new Sn(function(g){u=function(){Le()&&(n.removeEventListener("visibilitychange",u,!1),g())},n.addEventListener("visibilitychange",u,!1)}).s(function(g){throw n.removeEventListener("visibilitychange",u,!1),g})}()}).then(function(){return n.h()}).then(function(){Xn(n,!0)}).s(function(g){n.i(g)&&Xn(n,!1)})}function vf(n){this.c=n,this.b=this.a=null}function _h(n){return n.b&&1e3*n.b.c||0}function Wd(n,u){var g=u.refreshToken;n.b=Tc(u[Eo]||""),n.a=g}function yf(n,u){this.a=n||null,this.b=u||null,mi(this,{lastSignInTime:Et(u||null),creationTime:Et(n||null)})}function zd(n,u,g,b,M,G){mi(this,{uid:n,displayName:b||null,photoURL:M||null,email:g||null,phoneNumber:G||null,providerId:u})}function to(n,u,g){this.G=[],this.l=n.apiKey,this.m=n.appName,this.o=n.authDomain||null;var b=$.SDK_VERSION?Da($.SDK_VERSION):null;this.a=new Js(this.l,ae(pt),b),n.emulatorConfig&&ha(this.a,n.emulatorConfig),this.b=new vf(this.a),wf(this,u[Eo]),Wd(this.b,u),tn(this,"refreshToken",this.b.a),pg(this,g||{}),Tr.call(this),this.P=!1,this.o&&Ts()&&(this.i=pf(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(n){return new qd(function(){return n.I(!0)},function(u){return!(!u||"auth/network-request-failed"!=u.code)},function(){var u=_h(n.b)-D()-3e5;return 0<u?u:0})}(this),this.$=He(this.gb,this);var M=this;this.pa=null,this.Ba=function(G){M.wa(G.h)},this.ba=null,this.za=function(G){ha(M.a,G.c)},this.W=null,this.X=[],this.Aa=function(G){Gc(M,G.f)},this.aa=null,this.N=new Gd(this,g),tn(this,"multiFactor",this.N)}function mf(n,u){n.ba&&Gr(n.ba,"languageCodeChanged",n.Ba),(n.ba=u)&&nr(u,"languageCodeChanged",n.Ba)}function bh(n,u){n.W&&Gr(n.W,"emulatorConfigChanged",n.za),(n.W=u)&&nr(u,"emulatorConfigChanged",n.za)}function Gc(n,u){n.X=u,cl(n.a,$.SDK_VERSION?Da($.SDK_VERSION,n.X):null)}function dg(n,u){n.aa&&Gr(n.aa,"frameworkChanged",n.Aa),(n.aa=u)&&nr(u,"frameworkChanged",n.Aa)}function Eh(n){try{return $.app(n.m).auth()}catch(u){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+n.m+"'!")}}function _f(n){n.A||n.u.b||(n.u.start(),Gr(n,"tokenChanged",n.$),nr(n,"tokenChanged",n.$))}function Nl(n){Gr(n,"tokenChanged",n.$),n.u.stop()}function wf(n,u){n.ya=u,tn(n,"_lat",u)}function Du(n){for(var u=[],g=0;g<n.R.length;g++)u.push(n.R[g](n));return hr(u).then(function(){return n})}function Ih(n){n.i&&!n.P&&(n.P=!0,dh(n.i,n))}function pg(n,u){mi(n,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new yf(u.createdAt,u.lastLoginAt),providerData:[]}),n.a.b=n.tenantId}function gg(){}function Kd(n){return jt().then(function(){if(n.A)throw new E("app-deleted")})}function Qd(n){return nn(n.providerData,function(u){return u.providerId})}function Th(n,u){u&&(Cv(n,u.providerId),n.providerData.push(u))}function Cv(n,u){yn(n.providerData,function(g){return g.providerId==u})}function ic(n,u,g){("uid"!=u||g)&&n.hasOwnProperty(u)&&tn(n,u,g)}function Yd(n,u){n!=u&&(mi(n,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),tn(n,"metadata",u.metadata?function(n){return new yf(n.a,n.b)}(u.metadata):new yf),nt(u.providerData,function(g){Th(n,g)}),function(n,u){n.b=u.b,n.a=u.a}(n.b,u.b),tn(n,"refreshToken",n.b.a),mh(n.N,u.N.b))}function Dh(n){return n.I().then(function(u){var g=n.isAnonymous;return function(n,u){return qn(n.a,i,{idToken:u}).then(He(n.Jc,n))}(n,u).then(function(){return g||ic(n,"isAnonymous",!1),u})})}function ba(n,u){u[Eo]&&n.ya!=u[Eo]&&(Wd(n.b,u),n.dispatchEvent(new Al("tokenChanged")),wf(n,u[Eo]),ic(n,"refreshToken",n.b.a))}function Jd(n,u){return Dh(n).then(function(){if(vn(Qd(n),u))return Du(n).then(function(){throw new E("provider-already-linked")})})}function Sh(n,u,g){return Bo({user:n,credential:Ys(u),additionalUserInfo:u=Fu(u),operationType:g})}function Nv(n,u){return ba(n,u),n.reload().then(function(){return n})}function Rv(n,u,g,b,M){if(!Ts())return kn(new E("operation-not-supported-in-this-environment"));if(n.f&&!M)return kn(n.f);var G=Lu(g.providerId),Y=H(n.uid+":::"),be=null;(!h()||hs())&&n.o&&g.isOAuthProvider&&(be=ml(n.o,n.l,n.m,u,g,null,Y,$.SDK_VERSION||null,null,null,n.tenantId));var ht=Xt(be,G&&G.ua,G&&G.ta);return b=b().then(function(){if(Pv(n),!M)return n.I().then(function(){})}).then(function(){return ig(n.i,ht,u,g,Y,!!be,n.tenantId)}).then(function(){return new Sn(function(Mt,Wn){n.ma(u,null,new E("cancelled-popup-request"),n.h||null),n.g=Mt,n.O=Wn,n.h=Y,n.c=kd(n.i,n,u,ht,Y)})}).then(function(Mt){return ht&&qe(ht),Mt?Bo(Mt):null}).s(function(Mt){throw ht&&qe(ht),Mt}),Mo(n,b,M)}function Ov(n,u,g,b,M){if(!Ts())return kn(new E("operation-not-supported-in-this-environment"));if(n.f&&!M)return kn(n.f);var G=null,Y=H(n.uid+":::");return b=b().then(function(){if(Pv(n),!M)return n.I().then(function(){})}).then(function(){return n.ga=Y,Du(n)}).then(function(be){return n.ha&&(be=(be=n.ha).b.set(ep,n.w(),be.a)),be}).then(function(){return xd(n.i,u,g,Y,n.tenantId)}).s(function(be){if(G=be,n.ha)return tp(n.ha);throw G}).then(function(){if(G)throw G}),Mo(n,b,M)}function Pv(n){if(!n.i||!n.P)throw new E(n.i&&!n.P?"internal-error":"auth-domain-config-required")}function Mo(n,u,g){var b=function(n,u,g){return n.f&&!g?(u.cancel(),kn(n.f)):u.s(function(b){throw!b||"auth/user-disabled"!=b.code&&"auth/user-token-expired"!=b.code||(n.f||n.dispatchEvent(new Al("userInvalidated")),n.f=b),b})}(n,u,g);return n.G.push(b),b.na(function(){Vt(n.G,b)}),b.s(function(M){var G=null;throw M&&"auth/multi-factor-auth-required"===M.code&&(G=cg(M.w(),Eh(n),He(n.ic,n))),G||M})}function Mv(n){if(!n.apiKey)return null;var u={apiKey:n.apiKey,authDomain:n.authDomain,appName:n.appName,emulatorConfig:n.emulatorConfig},g={};if(!n.stsTokenManager||!n.stsTokenManager.accessToken)return null;g[Eo]=n.stsTokenManager.accessToken,g.refreshToken=n.stsTokenManager.refreshToken||null;var b=new to(u,g,n);return n.providerData&&nt(n.providerData,function(M){M&&Th(b,Bo(M))}),n.redirectEventId&&(b.ga=n.redirectEventId),b}function Zd(n){this.a=n,this.b=Il()}yh.prototype.Qc=function(n){var u=this;return n.rb(this.a.a,this.c).then(function(g){var b=dn(u.f);return delete b[ug],delete b[Ud],On(b,g),u.g(b)})},C(Bd,E),Zs.prototype.rb=function(n,u,g){return u.type==Pa?function(n,u,g,b){return g.Ha().then(function(M){return M={idToken:M},void 0!==b&&(M.displayName=b),On(M,{phoneVerificationInfo:$u(n.a)}),qn(u,va,M)})}(this,n,u,g):function(n,u,g){return g.Ha().then(function(b){return On(b={mfaPendingCredential:b},{phoneVerificationInfo:$u(n.a)}),qn(u,a,b)})}(this,n,u)},C(Hd,Zs),C(fg,Hd),C(Al,Qe),(Q=Gd.prototype).xc=function(n){mh(this,function(n){var u=[];return nt(n.mfaInfo||[],function(g){(g=Hl(g))&&u.push(g)}),u}(n.gd))},Q.Qb=function(){return this.a.I().then(function(n){return new Oa(n,null)})},Q.ec=function(n,u){var g=this,b=this.a.a;return this.Qb().then(function(M){return n.rb(b,M,u)}).then(function(M){return ba(g.a,M),g.a.reload()})},Q.ad=function(n){var u=this,g="string"==typeof n?n:n.uid,b=this.a.a;return this.a.I().then(function(M){return qn(b,ya,{idToken:M,mfaEnrollmentId:g})}).then(function(M){var G=vr(u.b,function(Y){return Y.uid!=g});return mh(u,G),ba(u.a,M),u.a.reload().s(function(Y){if("auth/user-token-expired"!=Y.code)throw Y})})},Q.w=function(){return{multiFactor:{enrolledFactors:nn(this.b,function(n){return n.w()})}}},qd.prototype.start=function(){this.a=this.c,Xn(this,!0)},qd.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},vf.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:_h(this)}},vf.prototype.getToken=function(n){return n=!!n,this.b&&!this.a?kn(new E("user-token-expired")):n||!this.b||D()>_h(this)-3e4?this.a?function(n,u){return function(n,u){return new Sn(function(g,b){"refresh_token"==u.grant_type&&u.refresh_token||"authorization_code"==u.grant_type&&u.code?xc(n,n.l+"?key="+encodeURIComponent(n.c),function(M){M?M.error?b(za(M)):M.access_token&&M.refresh_token?g(M):b(new E("internal-error")):b(new E("network-request-failed"))},"POST",lo(u).toString(),n.g,n.v.get()):b(new E("internal-error"))})}(n.c,u).then(function(g){return n.b=Tc(g.access_token),n.a=g.refresh_token,{accessToken:n.b.toString(),refreshToken:n.a}}).s(function(g){throw"auth/user-token-expired"==g.code&&(n.a=null),g})}(this,{grant_type:"refresh_token",refresh_token:this.a}):jt(null):jt({accessToken:this.b.toString(),refreshToken:this.a})},yf.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(to,Tr),to.prototype.wa=function(n){this.pa=n,Wa(this.a,n)},to.prototype.ka=function(){return this.pa},to.prototype.Ga=function(){return ir(this.X)},to.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},tn(to.prototype,"providerId","firebase"),(Q=to.prototype).reload=function(){var n=this;return Mo(this,Kd(this).then(function(){return Dh(n).then(function(){return Du(n)}).then(gg)}))},Q.nc=function(n){return this.I(n).then(function(u){return new wm(u)})},Q.I=function(n){var u=this;return Mo(this,Kd(this).then(function(){return u.b.getToken(n)}).then(function(g){if(!g)throw new E("internal-error");return g.accessToken!=u.ya&&(wf(u,g.accessToken),u.dispatchEvent(new Al("tokenChanged"))),ic(u,"refreshToken",g.refreshToken),g.accessToken}))},Q.Jc=function(n){if(!(n=n.users)||!n.length)throw new E("internal-error");pg(this,{uid:(n=n[0]).localId,displayName:n.displayName,photoURL:n.photoUrl,email:n.email,emailVerified:!!n.emailVerified,phoneNumber:n.phoneNumber,lastLoginAt:n.lastLoginAt,createdAt:n.createdAt,tenantId:n.tenantId});for(var u=function(n){return(n=n.providerUserInfo)&&n.length?nn(n,function(u){return new zd(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}(n),g=0;g<u.length;g++)Th(this,u[g]);ic(this,"isAnonymous",!(this.email&&n.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Al("userReloaded",{gd:n}))},Q.Kc=function(n){return Li("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(n)},Q.sb=function(n){var u=this,g=null;return Mo(this,n.c(this.a,this.uid).then(function(b){return ba(u,b),g=Sh(u,b,"reauthenticate"),u.f=null,u.reload()}).then(function(){return g}),!0)},Q.Bc=function(n){return Li("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(n)},Q.pb=function(n){var u=this,g=null;return Mo(this,Jd(this,n.providerId).then(function(){return u.I()}).then(function(b){return n.b(u.a,b)}).then(function(b){return g=Sh(u,b,"link"),Nv(u,b)}).then(function(){return g}))},Q.Cc=function(n,u){var g=this;return Mo(this,Jd(this,"phone").then(function(){return vh(Eh(g),n,u,He(g.pb,g))}))},Q.Lc=function(n,u){var g=this;return Mo(this,jt().then(function(){return vh(Eh(g),n,u,He(g.sb,g))}),!0)},Q.Ab=function(n){var u=this;return Mo(this,this.I().then(function(g){return u.a.Ab(g,n)}).then(function(g){return ba(u,g),u.reload()}))},Q.dd=function(n){var u=this;return Mo(this,this.I().then(function(g){return n.b(u.a,g)}).then(function(g){return ba(u,g),u.reload()}))},Q.Bb=function(n){var u=this;return Mo(this,this.I().then(function(g){return u.a.Bb(g,n)}).then(function(g){return ba(u,g),u.reload()}))},Q.Cb=function(n){if(void 0===n.displayName&&void 0===n.photoURL)return Kd(this);var u=this;return Mo(this,this.I().then(function(g){return u.a.Cb(g,{displayName:n.displayName,photoUrl:n.photoURL})}).then(function(g){return ba(u,g),ic(u,"displayName",g.displayName||null),ic(u,"photoURL",g.photoUrl||null),nt(u.providerData,function(b){"password"===b.providerId&&(tn(b,"displayName",u.displayName),tn(b,"photoURL",u.photoURL))}),Du(u)}).then(gg))},Q.bd=function(n){var u=this;return Mo(this,Dh(this).then(function(g){return vn(Qd(u),n)?function(n,u,g){return qn(n,tf,{idToken:u,deleteProvider:g})}(u.a,g,[n]).then(function(b){var M={};return nt(b.providerUserInfo||[],function(G){M[G.providerId]=!0}),nt(Qd(u),function(G){M[G]||Cv(u,G)}),M[As.PROVIDER_ID]||tn(u,"phoneNumber",null),Du(u)}):Du(u).then(function(){throw new E("no-such-provider")})}))},Q.delete=function(){var n=this;return Mo(this,this.I().then(function(u){return qn(n.a,hd,{idToken:u})}).then(function(){n.dispatchEvent(new Al("userDeleted"))})).then(function(){for(var u=0;u<n.G.length;u++)n.G[u].cancel("app-deleted");mf(n,null),bh(n,null),dg(n,null),n.G=[],n.A=!0,Nl(n),tn(n,"refreshToken",null),n.i&&Md(n.i,n)})},Q.Eb=function(n,u){return!!("linkViaPopup"==n&&(this.h||null)==u&&this.g||"reauthViaPopup"==n&&(this.h||null)==u&&this.g||"linkViaRedirect"==n&&(this.ga||null)==u||"reauthViaRedirect"==n&&(this.ga||null)==u)},Q.ma=function(n,u,g,b){"linkViaPopup"!=n&&"reauthViaPopup"!=n||b!=(this.h||null)||(g&&this.O?this.O(g):u&&!g&&this.g&&this.g(u),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},Q.Fa=function(n,u){return"linkViaPopup"==n&&u==(this.h||null)?He(this.Jb,this):"reauthViaPopup"==n&&u==(this.h||null)?He(this.Kb,this):"linkViaRedirect"==n&&(this.ga||null)==u?He(this.Jb,this):"reauthViaRedirect"==n&&(this.ga||null)==u?He(this.Kb,this):null},Q.Dc=function(n){var u=this;return Rv(this,"linkViaPopup",n,function(){return Jd(u,n.providerId).then(function(){return Du(u)})},!1)},Q.Mc=function(n){return Rv(this,"reauthViaPopup",n,function(){return jt()},!0)},Q.Ec=function(n){var u=this;return Ov(this,"linkViaRedirect",n,function(){return Jd(u,n.providerId)},!1)},Q.Nc=function(n){return Ov(this,"reauthViaRedirect",n,function(){return jt()},!0)},Q.Jb=function(n,u,g,b){var M=this;this.c&&(this.c.cancel(),this.c=null);var G=null;return Mo(this,this.I().then(function(Y){return pa(M.a,{requestUri:n,postBody:b,sessionId:u,idToken:Y})}).then(function(Y){return G=Sh(M,Y,"link"),Nv(M,Y)}).then(function(){return G}))},Q.Kb=function(n,u,g,b){var M=this;this.c&&(this.c.cancel(),this.c=null);var G=null;return Mo(this,jt().then(function(){return Sc(Iu(M.a,{requestUri:n,sessionId:u,postBody:b,tenantId:g}),M.uid)}).then(function(be){return G=Sh(M,be,"reauthenticate"),ba(M,be),M.f=null,M.reload()}).then(function(){return G}),!0)},Q.tb=function(n){var u=this,g=null;return Mo(this,this.I().then(function(b){return g=b,void 0===n||$t(n)?{}:sa(new xu(n))}).then(function(b){return u.a.tb(g,b)}).then(function(b){if(u.email!=b)return u.reload()}).then(function(){}))},Q.Db=function(n,u){var g=this,b=null;return Mo(this,this.I().then(function(M){return b=M,void 0===u||$t(u)?{}:sa(new xu(u))}).then(function(M){return g.a.Db(b,n,M)}).then(function(M){if(g.email!=M)return g.reload()}).then(function(){}))},Q.ic=function(n){var u=null,g=this;return Mo(this,n=Sc(jt(n),g.uid).then(function(b){return u=Sh(g,b,"reauthenticate"),ba(g,b),g.f=null,g.reload()}).then(function(){return u}),!0)},Q.toJSON=function(){return this.w()},Q.w=function(){var n={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&On(n,this.metadata.w()),nt(this.providerData,function(u){n.providerData.push(function(n){var g,u={};for(g in n)n.hasOwnProperty(g)&&(u[g]=n[g]);return u}(u))}),On(n,this.N.w()),n};var ep={name:"redirectUser",D:"session"};function tp(n){return _a(n.b,ep,n.a)}function Ch(n){this.a=n,this.b=Il(),this.c=null,this.f=function(n){var u=Ea("local"),g=Ea("session"),b=Ea("none");return function(n,u,g){var b=Tl(u,g),M=Vc(n,u.D);return n.get(u,g).then(function(G){var Y=null;try{Y=R(te.localStorage.getItem(b))}catch(be){}if(Y&&!G)return te.localStorage.removeItem(b),n.set(u,Y,g);Y&&G&&"localStorage"!=M.type&&te.localStorage.removeItem(b)})}(n.b,u,n.a).then(function(){return n.b.get(g,n.a)}).then(function(M){return M?g:n.b.get(b,n.a).then(function(G){return G?b:n.b.get(u,n.a).then(function(Y){return Y?u:n.b.get(Qa,n.a).then(function(be){return be?Ea(be):u})})})}).then(function(M){return n.c=M,bf(n,M.D)}).s(function(){n.c||(n.c=u)})}(this),this.b.addListener(Ea("local"),this.a,He(this.g,this))}function bf(n,u){var b,g=[];for(b in El)El[b]!==u&&g.push(_a(n.b,Ea(El[b]),n.a));return g.push(_a(n.b,Qa,n.a)),function(n){return new Sn(function(u,g){var b=n.length,M=[];if(b)for(var G=function(Mt,Wn){b--,M[Mt]=Wn,0==b&&u(M)},Y=function(Mt){g(Mt)},be=0;be<n.length;be++)Ws(n[be],rt(G,be),Y);else u(M)})}(g)}Ch.prototype.g=function(){var n=this,u=Ea("local");Rl(this,function(){return jt().then(function(){return n.c&&"local"!=n.c.D?n.b.get(u,n.a):null}).then(function(g){if(g)return bf(n,"local").then(function(){n.c=u})})})};var Qa={name:"persistence",D:"session"};function Ea(n){return{name:"authUser",D:n}}function Ah(n,u){return Rl(n,function(){return n.b.set(n.c,u.w(),n.a)})}function vg(n){return Rl(n,function(){return _a(n.b,n.c,n.a)})}function rp(n,u,g){return Rl(n,function(){return n.b.get(n.c,n.a).then(function(b){return b&&u&&(b.authDomain=u),b&&g&&(b.emulatorConfig=g),Mv(b||{})})})}function Rl(n,u){return n.f=n.f.then(u,u),n.f}function Ia(n){if(this.m=!1,tn(this,"settings",new Vd),tn(this,"app",n),!ci(this).options||!ci(this).options.apiKey)throw new E("invalid-api-key");n=$.SDK_VERSION?Da($.SDK_VERSION):null,this.a=new Js(ci(this).options&&ci(this).options.apiKey,ae(pt),n),this.R=[],this.u=[],this.P=[],this.ac=$.INTERNAL.createSubscribe(He(this.yc,this)),this.X=void 0,this.bc=$.INTERNAL.createSubscribe(He(this.zc,this)),ac(this,null),this.l=new Ch(ci(this).options.apiKey+":"+ci(this).name),this.G=new Zd(ci(this).options.apiKey+":"+ci(this).name),this.$=ji(this,function(n){var u=ci(n).options.authDomain,g=function(n){var u=function(n,u){return n.b.get(ep,n.a).then(function(g){return g&&u&&(g.authDomain=u),Mv(g||{})})}(n.G,ci(n).options.authDomain).then(function(g){return(n.o=g)&&(g.ha=n.G),tp(n.G)});return ji(n,u)}(n).then(function(){return rp(n.l,u,n.f)}).then(function(b){return b?(b.ha=n.G,n.o&&(n.o.ga||null)==(b.ga||null)?b:b.reload().then(function(){return Ah(n.l,b).then(function(){return b})}).s(function(M){return"auth/network-request-failed"==M.code?b:vg(n.l)})):null}).then(function(b){ac(n,b||null)});return ji(n,g)}(this)),this.i=ji(this,function(n){return n.$.then(function(){return ip(n)}).s(function(){}).then(function(){if(!n.m)return n.pa()}).s(function(){}).then(function(){if(!n.m){n.ba=!0;var u=n.l;u.b.addListener(Ea("local"),u.a,n.pa)}})}(this)),this.ba=!1,this.pa=He(this.Yc,this),this.Ba=He(this.da,this),this.ya=He(this.kc,this),this.za=He(this.vc,this),this.Aa=He(this.wc,this),this.b=null,function(n){var u=ci(n).options.authDomain,g=ci(n).options.apiKey;u&&Ts()&&(n.gb=n.$.then(function(){if(!n.m){if(n.b=pf(u,g,ci(n).name,n.f),dh(n.b,n),gr(n)&&Ih(gr(n)),n.o){Ih(n.o);var b=n.o;b.wa(n.ka()),mf(b,n),Gc(b=n.o,n.N),dg(b,n),ha((b=n.o).a,n.f),bh(b,n),n.o=null}return n.b}}))}(this),this.INTERNAL={},this.INTERNAL.delete=He(this.delete,this),this.INTERNAL.logFramework=He(this.Fc,this),this.A=0,Tr.call(this),function(n){Object.defineProperty(n,"lc",{get:function(){return this.ka()},set:function(u){this.wa(u)},enumerable:!1}),n.aa=null,Object.defineProperty(n,"ti",{get:function(){return this.S()},set:function(u){this.xb(u)},enumerable:!1}),n.W=null}(this),this.N=[],this.f=null}function Ol(n){Qe.call(this,"languageCodeChanged"),this.h=n}function qc(n){Qe.call(this,"emulatorConfigChanged"),this.c=n}function Nh(n){Qe.call(this,"frameworkChanged"),this.f=n}function sc(n){return n.gb||kn(new E("auth-domain-config-required"))}function ip(n){if(!Ts())return kn(new E("operation-not-supported-in-this-environment"));var u=sc(n).then(function(){return n.b.qa()}).then(function(g){return g?Bo(g):null});return ji(n,u)}function ac(n,u){gr(n)&&(function(n,u){yn(n.R,function(g){return g==u})}(gr(n),n.Ba),Gr(gr(n),"tokenChanged",n.ya),Gr(gr(n),"userDeleted",n.za),Gr(gr(n),"userInvalidated",n.Aa),Nl(gr(n))),u&&(u.R.push(n.Ba),nr(u,"tokenChanged",n.ya),nr(u,"userDeleted",n.za),nr(u,"userInvalidated",n.Aa),0<n.A&&_f(u)),tn(n,"currentUser",u),u&&(u.wa(n.ka()),mf(u,n),Gc(u,n.N),dg(u,n),ha(u.a,n.f),bh(u,n))}function Wc(n,u){var g=null,b=null;return ji(n,u.then(function(M){return g=Ys(M),b=Fu(M),function(n,u){var g={};return g.apiKey=ci(n).options.apiKey,g.authDomain=ci(n).options.authDomain,g.appName=ci(n).name,n.f&&(g.emulatorConfig=n.f),n.$.then(function(){return function(n,u,g,b){var M=new to(n,u);return g&&(M.ha=g),b&&Gc(M,b),M.reload().then(function(){return M})}(g,u,n.G,n.Ga())}).then(function(b){return gr(n)&&b.uid==gr(n).uid?(Yd(gr(n),b),n.da(b)):(ac(n,b),Ih(b),n.da(b))}).then(function(){Ml(n)})}(n,M)},function(M){var G=null;throw M&&"auth/multi-factor-auth-required"===M.code&&(G=cg(M.w(),n,He(n.jc,n))),G||M}).then(function(){return Bo({user:gr(n),credential:g,additionalUserInfo:b,operationType:"signIn"})}))}function ci(n){return n.app}function gr(n){return n.currentUser}function If(n){return gr(n)&&gr(n)._lat||null}function Ml(n){if(n.ba){for(var u=0;u<n.u.length;u++)n.u[u]&&n.u[u](If(n));if(n.X!==n.getUid()&&n.P.length)for(n.X=n.getUid(),u=0;u<n.P.length;u++)n.P[u]&&n.P[u](If(n))}}function ji(n,u){return n.R.push(u),u.na(function(){Vt(n.R,u)}),u}function Tf(){}function xl(){this.a={},this.b=1e12}Ch.prototype.wb=function(n){var u=null,g=this;return function(n){var u=new E("invalid-persistence-type"),g=new E("unsupported-persistence-type");e:{for(b in El)if(El[b]==n){var b=!0;break e}b=!1}if(!b||"string"!=typeof n)throw u;switch(fi()){case"ReactNative":if("session"===n)throw g;break;case"Node":if("none"!==n)throw g;break;case"Worker":if("session"===n||!_d()&&"none"!==n)throw g;break;default:if(!ra()&&"none"!==n)throw g}}(n),Rl(this,function(){return n!=g.c.D?g.b.get(g.c,g.a).then(function(b){return u=b,bf(g,n)}).then(function(){if(g.c=Ea(n),u)return g.b.set(g.c,u,g.a)}):jt()})},C(Ia,Tr),C(Ol,Qe),C(qc,Qe),C(Nh,Qe),(Q=Ia.prototype).wb=function(n){return ji(this,n=this.l.wb(n))},Q.wa=function(n){this.aa===n||this.m||(this.aa=n,Wa(this.a,this.aa),this.dispatchEvent(new Ol(this.ka())))},Q.ka=function(){return this.aa},Q.ed=function(){var n=te.navigator;this.wa(n&&(n.languages&&n.languages[0]||n.language||n.userLanguage)||null)},Q.fd=function(n){if(!this.f){if(!/^https?:\/\//.test(n))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Ke("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),te.document&&mo().then(function(){var n=te.document.createElement("div");n.innerText="Running in emulator mode. Do not use with production credentials.",n.style.position="fixed",n.style.width="100%",n.style.backgroundColor="#ffffff",n.style.border=".1em solid #000000",n.style.color="#ff0000",n.style.bottom="0px",n.style.left="0px",n.style.margin="0px",n.style.zIndex=1e4,n.style.textAlign="center",n.classList.add("firebase-emulator-warning"),te.document.body.appendChild(n)}),this.f={url:n},this.settings.hb=!0,ha(this.a,this.f),this.dispatchEvent(new qc(this.f))}},Q.Fc=function(n){this.N.push(n),cl(this.a,$.SDK_VERSION?Da($.SDK_VERSION,this.N):null),this.dispatchEvent(new Nh(this.N))},Q.Ga=function(){return ir(this.N)},Q.xb=function(n){this.W===n||this.m||(this.W=n,this.a.b=this.W)},Q.S=function(){return this.W},Q.toJSON=function(){return{apiKey:ci(this).options.apiKey,authDomain:ci(this).options.authDomain,appName:ci(this).name,currentUser:gr(this)&&gr(this).w()}},Q.Eb=function(n,u){switch(n){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==u&&!!this.g;default:return!1}},Q.ma=function(n,u,g,b){"signInViaPopup"==n&&this.h==b&&(g&&this.O?this.O(g):u&&!g&&this.g&&this.g(u),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},Q.Fa=function(n,u){return"signInViaRedirect"==n||"signInViaPopup"==n&&this.h==u&&this.g?He(this.hc,this):null},Q.hc=function(n,u,g,b){var M=this,G={requestUri:n,postBody:b,sessionId:u,tenantId:g};return this.c&&(this.c.cancel(),this.c=null),M.$.then(function(){return Wc(M,Jl(M.a,G))})},Q.Wc=function(n){if(!Ts())return kn(new E("operation-not-supported-in-this-environment"));var u=this,g=Lu(n.providerId),b=H(),M=null;(!h()||hs())&&ci(this).options.authDomain&&n.isOAuthProvider&&(M=ml(ci(this).options.authDomain,ci(this).options.apiKey,ci(this).name,"signInViaPopup",n,null,b,$.SDK_VERSION||null,null,null,this.S(),this.f));var G=Xt(M,g&&g.ua,g&&g.ta);return ji(this,g=sc(this).then(function(Y){return ig(Y,G,"signInViaPopup",n,b,!!M,u.S())}).then(function(){return new Sn(function(Y,be){u.ma("signInViaPopup",null,new E("cancelled-popup-request"),u.h),u.g=Y,u.O=be,u.h=b,u.c=kd(u.b,u,"signInViaPopup",G,b)})}).then(function(Y){return G&&qe(G),Y?Bo(Y):null}).s(function(Y){throw G&&qe(G),Y}))},Q.Xc=function(n){if(!Ts())return kn(new E("operation-not-supported-in-this-environment"));var u=this,g=sc(this).then(function(){return function(n){return Rl(n,function(){return n.b.set(Qa,n.c.D,n.a)})}(u.l)}).then(function(){return xd(u.b,"signInViaRedirect",n,void 0,u.S())});return ji(this,g)},Q.qa=function(){var n=this;return ip(this).then(function(u){return n.b&&Sl(n.b.b),u}).s(function(u){throw n.b&&Sl(n.b.b),u})},Q.cd=function(n){if(!n)return kn(new E("null-user"));if(this.W!=n.tenantId)return kn(new E("tenant-id-mismatch"));var u=this,g={};g.apiKey=ci(this).options.apiKey,g.authDomain=ci(this).options.authDomain,g.appName=ci(this).name;var b=function(n,u,g,b){var M=n.b,G={};return G[Eo]=M.b&&M.b.toString(),G.refreshToken=M.a,u=new to(u||{apiKey:n.l,authDomain:n.o,appName:n.m},G),g&&(u.ha=g),b&&Gc(u,b),Yd(u,n),u}(n,g,u.G,u.Ga());return ji(this,this.i.then(function(){if(ci(u).options.apiKey!=n.l)return b.reload()}).then(function(){return gr(u)&&n.uid==gr(u).uid?(Yd(gr(u),n),u.da(n)):(ac(u,b),Ih(b),u.da(b))}).then(function(){Ml(u)}))},Q.zb=function(){var n=this;return ji(this,this.i.then(function(){return n.b&&Sl(n.b.b),gr(n)?(ac(n,null),vg(n.l).then(function(){Ml(n)})):jt()}))},Q.Yc=function(){var n=this;return rp(this.l,ci(this).options.authDomain).then(function(u){if(!n.m){var g;if(g=gr(n)&&u){g=gr(n).uid;var b=u.uid;g=null!=g&&""!==g&&null!=b&&""!==b&&g==b}if(g)return Yd(gr(n),u),gr(n).I();(gr(n)||u)&&(ac(n,u),u&&(Ih(u),u.ha=n.G),n.b&&dh(n.b,n),Ml(n))}})},Q.da=function(n){return Ah(this.l,n)},Q.kc=function(){Ml(this),this.da(gr(this))},Q.vc=function(){this.zb()},Q.wc=function(){this.zb()},Q.jc=function(n){var u=this;return this.i.then(function(){return Wc(u,jt(n))})},Q.yc=function(n){var u=this;this.addAuthTokenListener(function(){n.next(gr(u))})},Q.zc=function(n){var u=this;!function(n,u){n.P.push(u),ji(n,n.i.then(function(){!n.m&&vn(n.P,u)&&n.X!==n.getUid()&&(n.X=n.getUid(),u(If(n)))}))}(this,function(){n.next(gr(u))})},Q.Hc=function(n,u,g){var b=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof n?n(gr(b)):"function"==typeof n.next&&n.next(gr(b))}),this.ac(n,u,g)},Q.Gc=function(n,u,g){var b=this;return this.ba&&Promise.resolve().then(function(){b.X=b.getUid(),"function"==typeof n?n(gr(b)):"function"==typeof n.next&&n.next(gr(b))}),this.bc(n,u,g)},Q.mc=function(n){var u=this;return ji(this,this.i.then(function(){return gr(u)?gr(u).I(n).then(function(b){return{accessToken:b}}):null}))},Q.Sc=function(n){var u=this;return this.i.then(function(){return Wc(u,qn(u.a,Tn,{token:n}))}).then(function(g){var b=g.user;return ic(b,"isAnonymous",!1),u.da(b),g})},Q.Tc=function(n,u){var g=this;return this.i.then(function(){return Wc(g,qn(g.a,Gn,{email:n,password:u}))})},Q.dc=function(n,u){var g=this;return this.i.then(function(){return Wc(g,qn(g.a,ef,{email:n,password:u}))})},Q.Za=function(n){var u=this;return this.i.then(function(){return Wc(u,n.ja(u.a))})},Q.Rc=function(n){return Li("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(n)},Q.yb=function(){var n=this;return this.i.then(function(){var u=gr(n);if(u&&u.isAnonymous){var g=Bo({providerId:null,isNewUser:!1});return Bo({user:u,credential:null,additionalUserInfo:g,operationType:"signIn"})}return Wc(n,n.a.yb()).then(function(b){var M=b.user;return ic(M,"isAnonymous",!0),n.da(M),b})})},Q.getUid=function(){return gr(this)&&gr(this).uid||null},Q.cc=function(n){this.addAuthTokenListener(n),this.A++,0<this.A&&gr(this)&&_f(gr(this))},Q.Oc=function(n){var u=this;nt(this.u,function(g){g==n&&u.A--}),0>this.A&&(this.A=0),0==this.A&&gr(this)&&Nl(gr(this)),this.removeAuthTokenListener(n)},Q.addAuthTokenListener=function(n){var u=this;this.u.push(n),ji(this,this.i.then(function(){u.m||vn(u.u,n)&&n(If(u))}))},Q.removeAuthTokenListener=function(n){yn(this.u,function(u){return u==n})},Q.delete=function(){this.m=!0;for(var n=0;n<this.R.length;n++)this.R[n].cancel("app-deleted");return this.R=[],this.l&&(n=this.l).b.removeListener(Ea("local"),n.a,this.pa),this.b&&(Md(this.b,this),Sl(this.b.b)),Promise.resolve()},Q.gc=function(n){return ji(this,function(n,u){return qn(n,ga,{identifier:u,continueUri:v()?y():"http://localhost"}).then(function(g){return g.signinMethods||[]})}(this.a,n))},Q.Ac=function(n){return!!zu(n)},Q.vb=function(n,u){var g=this;return ji(this,jt().then(function(){var b=new xu(u);if(!b.c)throw new E("argument-error",wc+" must be true when sending sign in link to email");return sa(b)}).then(function(b){return g.a.vb(n,b)}).then(function(){}))},Q.hd=function(n){return this.Qa(n).then(function(u){return u.data.email})},Q.mb=function(n,u){return ji(this,this.a.mb(n,u).then(function(){}))},Q.Qa=function(n){return ji(this,this.a.Qa(n).then(function(u){return new Mf(u)}))},Q.ib=function(n){return ji(this,this.a.ib(n).then(function(){}))},Q.ub=function(n,u){var g=this;return ji(this,jt().then(function(){return void 0===u||$t(u)?{}:sa(new xu(u))}).then(function(b){return g.a.ub(n,b)}).then(function(){}))},Q.Vc=function(n,u){return ji(this,vh(this,n,u,He(this.Za,this)))},Q.Uc=function(n,u){var g=this;return ji(this,jt().then(function(){var b=u||y(),M=Wu(n,b);if(!(b=zu(b)))throw new E("argument-error","Invalid email link!");if(b.tenantId!==g.S())throw new E("tenant-id-mismatch");return g.Za(M)}))},Tf.prototype.render=function(){},Tf.prototype.reset=function(){},Tf.prototype.getResponse=function(){},Tf.prototype.execute=function(){};var ms=null;function sp(n,u){return(u=_g(u))&&n.a[u]||null}function _g(n){return(n=void 0===n?1e12:n)?n.toString():null}function ap(n,u){this.g=!1,this.c=u,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Lr(n);var g=this;this.i=function(){g.execute()},this.h?this.execute():nr(this.f,"click",this.i)}function wg(n){if(n.g)throw Error("reCAPTCHA mock was already deleted!")}function Oh(){}function bg(){}xl.prototype.render=function(n,u){return this.a[this.b.toString()]=new ap(n,u),this.b++},xl.prototype.reset=function(n){var u=sp(this,n);n=_g(n),u&&n&&(u.delete(),delete this.a[n])},xl.prototype.getResponse=function(n){return(n=sp(this,n))?n.getResponse():null},xl.prototype.execute=function(n){(n=sp(this,n))&&n.execute()},ap.prototype.getResponse=function(){return wg(this),this.b},ap.prototype.execute=function(){wg(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var n=50,u=[];0<n;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),n--;return u.join("")}();var u=n.c.callback,g=n.c["expired-callback"];if(u)try{u(n.b)}catch(b){}n.a=setTimeout(function(){if(n.a=null,n.b=null,g)try{g()}catch(b){}n.h&&n.execute()},6e4)},500))},ap.prototype.delete=function(){wg(this),this.g=!0,clearTimeout(this.a),this.a=null,Gr(this.f,"click",this.i)},tn(Oh,"FACTOR_ID","phone"),bg.prototype.g=function(){return ms||(ms=new xl),jt(ms)},bg.prototype.c=function(){};var up=null;function Df(){this.b=te.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Eg=new Cn(sr,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),jv=new ne(3e4,6e4);Df.prototype.g=function(n){var u=this;return new Sn(function(g,b){var M=setTimeout(function(){b(new E("network-request-failed"))},jv.get());!te.grecaptcha||n!==u.f&&!u.b?(te[u.a]=function(){if(te.grecaptcha){u.f=n;var Y=te.grecaptcha.render;te.grecaptcha.render=function(be,ht){return be=Y(be,ht),u.b++,be},clearTimeout(M),g(te.grecaptcha)}else clearTimeout(M),b(new E("internal-error"));delete te[u.a]},jt(ec(Ti(Eg,{onload:u.a,hl:n||""}))).s(function(){clearTimeout(M),b(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(M),g(te.grecaptcha))})},Df.prototype.c=function(){this.b--};var cp=null;function lp(n,u,g,b,M,G,Y){if(tn(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=u,this.g=null,Y?(up||(up=new bg),Y=up):(cp||(cp=new Df),Y=cp),this.v=Y,this.a=g||{theme:"light",type:"image"},this.h=[],this.a[hp])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vv],!te.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Lr(u)||!this.i&&Lr(u).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Js(n,G||null,M||null),this.u=b||function(){return null};var be=this;this.l=[];var ht=this.a[fp];this.a[fp]=function(Wn){if(Tg(be,Wn),"function"==typeof ht)ht(Wn);else if("string"==typeof ht){var ii=Qr(ht,te);"function"==typeof ii&&ii(Wn)}};var Mt=this.a[Ig];this.a[Ig]=function(){if(Tg(be,null),"function"==typeof Mt)Mt();else if("string"==typeof Mt){var Wn=Qr(Mt,te);"function"==typeof Wn&&Wn()}}}var fp="callback",Ig="expired-callback",hp="sitekey",Vv="size";function Tg(n,u){for(var g=0;g<n.l.length;g++)try{n.l[g](u)}catch(b){}}function Ph(n,u){return n.h.push(u),u.na(function(){Vt(n.h,u)}),u}function Mh(n){if(n.A)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function ea(n,u,g){var b=!1;try{this.b=g||$.app()}catch(Y){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");g=this.b.options.apiKey;var M=this,G=null;try{G=this.b.auth().Ga()}catch(Y){}try{b=this.b.auth().settings.appVerificationDisabledForTesting}catch(Y){}G=$.SDK_VERSION?Da($.SDK_VERSION,G):null,lp.call(this,g,n,u,function(){try{var Y=M.b.auth().ka()}catch(be){Y=null}return Y},G,ae(pt),b)}function xh(n,u,g,b){e:{g=Array.prototype.slice.call(g);for(var M=0,G=!1,Y=0;Y<u.length;Y++)if(u[Y].optional)G=!0;else{if(G)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");M++}if(G=u.length,g.length<M||G<g.length)b="Expected "+(M==G?1==M?"1 argument":M+" arguments":M+"-"+G+" arguments")+" but got "+g.length+".";else{for(M=0;M<g.length;M++)if(G=u[M].optional&&void 0===g[M],!u[M].K(g[M])&&!G){if(u=u[M],0>M||M>=Sg.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");g=Sg[M],b=(b?"":g+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.J+".";break e}b=null}}if(b)throw new E("argument-error",n+" failed: "+b)}(Q=lp.prototype).Ia=function(){var n=this;return this.f?this.f:this.f=Ph(this,jt().then(function(){if(v()&&!Br())return mo();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return n.v.g(n.u())}).then(function(u){return n.g=u,qn(n.o,O,{})}).then(function(u){n.a[hp]=u.recaptchaSiteKey}).s(function(u){throw n.f=null,u}))},Q.render=function(){Mh(this);var n=this;return Ph(this,this.Ia().then(function(){if(null===n.c){var u=n.m;if(!n.i){var g=Lr(u);u=function(n,u,g){var b=arguments,M=document,G=String(b[0]),Y=b[1];if(!xs&&Y&&(Y.name||Y.type)){if(G=["<",G],Y.name&&G.push(' name="',Ce(Y.name),'"'),Y.type){G.push(' type="',Ce(Y.type),'"');var be={};On(be,Y),delete be.type,Y=be}G.push(">"),G=G.join("")}return G=_s(M,G),Y&&("string"==typeof Y?G.className=Y:Array.isArray(Y)?G.className=Y.join(" "):$o(G,Y)),2<b.length&&pi(M,G,b),G}("DIV"),g.appendChild(u)}n.c=n.g.render(u,n.a)}return n.c}))},Q.verify=function(){Mh(this);var n=this;return Ph(this,this.render().then(function(u){return new Sn(function(g){var b=n.g.getResponse(u);if(b)g(b);else{var M=function(G){G&&(function(n,u){yn(n.l,function(g){return g==u})}(n,M),g(G))};n.l.push(M),n.i&&n.g.execute(n.c)}})}))},Q.reset=function(){Mh(this),null!==this.c&&this.g.reset(this.c)},Q.clear=function(){Mh(this),this.A=!0,this.v.c();for(var n=0;n<this.h.length;n++)this.h[n].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){n=Lr(this.m);for(var u;u=n.firstChild;)n.removeChild(u)}},C(ea,lp);var Sg="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function gn(n,u){return{name:n||"",J:"a valid string",optional:!!u,K:function(g){return"string"==typeof g}}}function Cg(n,u){return{name:n||"",J:"a boolean",optional:!!u,K:function(g){return"boolean"==typeof g}}}function fo(n,u){return{name:n||"",J:"a valid object",optional:!!u,K:Re}}function kl(n,u){return{name:n||"",J:"a function",optional:!!u,K:function(g){return"function"==typeof g}}}function Ya(n,u){return{name:n||"",J:"null",optional:!!u,K:function(g){return null===g}}}function uc(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(u){return!!u&&!(!u.ja||n&&u.providerId!==n)}}}function pp(n,u){return Re(n)&&"string"==typeof n.type&&n.type===u&&"function"==typeof n.Ha}function kh(n){return Re(n)&&"string"==typeof n.uid}function Wi(n,u,g,b){return{name:g||"",J:n.J+" or "+u.J,optional:!!b,K:function(M){return n.K(M)||u.K(M)}}}function Vi(n,u){for(var g in u){var b=u[g].name;n[b]=Hv(b,n[g],u[g].j)}}function Ag(n,u){for(var g in u){var b=u[g].name;b!==g&&Object.defineProperty(n,b,{get:rt(function(M){return this[M]},g),set:rt(function(M,G,Y,be){xh(M,[Y],[be],!0),this[G]=be},b,g,u[g].jb),enumerable:!0})}}function Ui(n,u,g,b){n[u]=Hv(u,g,b)}function Hv(n,u,g){function b(){var Y=Array.prototype.slice.call(arguments);return xh(M,g,Y),u.apply(this,Y)}if(!g)return u;var G,M=function(n){return(n=n.split("."))[n.length-1]}(n);for(G in u)b[G]=u[G];for(G in u.prototype)b.prototype[G]=u.prototype[G];return b}Vi(Ia.prototype,{ib:{name:"applyActionCode",j:[gn("code")]},Qa:{name:"checkActionCode",j:[gn("code")]},mb:{name:"confirmPasswordReset",j:[gn("code"),gn("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[gn("email"),gn("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[gn("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[gn("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Wi(fo(),kl(),"nextOrObserver"),kl("opt_error",!0),kl("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Wi(fo(),kl(),"nextOrObserver"),kl("opt_error",!0),kl("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[gn("email"),Wi(fo("opt_actionCodeSettings",!0),Ya(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[gn("email"),fo("actionCodeSettings")]},wb:{name:"setPersistence",j:[gn("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[uc()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[uc()]},Sc:{name:"signInWithCustomToken",j:[gn("token")]},Tc:{name:"signInWithEmailAndPassword",j:[gn("email"),gn("password")]},Uc:{name:"signInWithEmailLink",j:[gn("email"),gn("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[gn("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Wi({name:"user",J:"an instance of Firebase User",optional:!1,K:function(u){return!!(u&&u instanceof to)}},Ya(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[gn(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[gn("url")]},hd:{name:"verifyPasswordResetCode",j:[gn("code")]}}),Ag(Ia.prototype,{lc:{name:"languageCode",jb:Wi(gn(),Ya(),"languageCode")},ti:{name:"tenantId",jb:Wi(gn(),Ya(),"tenantId")}}),(Ia.Persistence=El).LOCAL="local",Ia.Persistence.SESSION="session",Ia.Persistence.NONE="none",Vi(to.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Cg("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Cg("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[uc()]},pb:{name:"linkWithCredential",j:[uc()]},Cc:{name:"linkWithPhoneNumber",j:[gn("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[uc()]},sb:{name:"reauthenticateWithCredential",j:[uc()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[gn("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(n){return!!(n&&n.providerId&&n.hasOwnProperty&&n.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Wi(fo("opt_actionCodeSettings",!0),Ya(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[gn(null,!0)]},bd:{name:"unlink",j:[gn("provider")]},Ab:{name:"updateEmail",j:[gn("email")]},Bb:{name:"updatePassword",j:[gn("password")]},dd:{name:"updatePhoneNumber",j:[uc("phone")]},Cb:{name:"updateProfile",j:[fo("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[gn("email"),Wi(fo("opt_actionCodeSettings",!0),Ya(null,!0),"opt_actionCodeSettings",!0)]}}),Vi(xl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Vi(Tf.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Vi(Sn.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Ag(Vd.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Cg("appVerificationDisabledForTesting")}}),Vi(gf.prototype,{confirm:{name:"confirm",j:[gn("verificationCode")]}}),Ui(Vu,"fromJSON",function(n){n="string"==typeof n?JSON.parse(n):n;for(var u,g=[Cc,xa,Uf,Hu],b=0;b<g.length;b++)if(u=g[b](n))return u;return null},[Wi(gn(),fo(),"json")]),Ui(Ho,"credential",function(n,u){return new vs(n,u)},[gn("email"),gn("password")]),Vi(vs.prototype,{w:{name:"toJSON",j:[gn(null,!0)]}}),Vi(os.prototype,{Ca:{name:"addScope",j:[gn("scope")]},Ka:{name:"setCustomParameters",j:[fo("customOAuthParameters")]}}),Ui(os,"credential",Gu,[Wi(gn(),fo(),"token")]),Ui(Ho,"credentialWithLink",Wu,[gn("email"),gn("emailLink")]),Vi(bo.prototype,{Ca:{name:"addScope",j:[gn("scope")]},Ka:{name:"setCustomParameters",j:[fo("customOAuthParameters")]}}),Ui(bo,"credential",Vf,[Wi(gn(),fo(),"token")]),Vi(Ma.prototype,{Ca:{name:"addScope",j:[gn("scope")]},Ka:{name:"setCustomParameters",j:[fo("customOAuthParameters")]}}),Ui(Ma,"credential",Wl,[Wi(gn(),Wi(fo(),Ya()),"idToken"),Wi(gn(),Ya(),"accessToken",!0)]),Vi(qu.prototype,{Ka:{name:"setCustomParameters",j:[fo("customOAuthParameters")]}}),Ui(qu,"credential",Ac,[Wi(gn(),fo(),"token"),gn("secret",!0)]),Vi(is.prototype,{Ca:{name:"addScope",j:[gn("scope")]},credential:{name:"credential",j:[Wi(gn(),Wi(fo(),Ya()),"optionsOrIdToken"),Wi(gn(),Ya(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[fo("customOAuthParameters")]}}),Vi(Ro.prototype,{w:{name:"toJSON",j:[gn(null,!0)]}}),Vi(Uu.prototype,{w:{name:"toJSON",j:[gn(null,!0)]}}),Ui(As,"credential",La,[gn("verificationId"),gn("verificationCode")]),Vi(As.prototype,{eb:{name:"verifyPhoneNumber",j:[Wi(gn(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(g){return!!g&&(g.session&&g.phoneNumber?pp(g.session,Pa)&&"string"==typeof g.phoneNumber:g.session&&g.multiFactorHint?pp(g.session,rl)&&kh(g.multiFactorHint):g.session&&g.multiFactorUid?pp(g.session,rl)&&"string"==typeof g.multiFactorUid:!!g.phoneNumber&&"string"==typeof g.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(n){return!(!n||"string"!=typeof n.type||"function"!=typeof n.verify)}}]}}),Vi(ka.prototype,{w:{name:"toJSON",j:[gn(null,!0)]}}),Vi(E.prototype,{toJSON:{name:"toJSON",j:[gn(null,!0)]}}),Vi(lu.prototype,{toJSON:{name:"toJSON",j:[gn(null,!0)]}}),Vi(Fa.prototype,{toJSON:{name:"toJSON",j:[gn(null,!0)]}}),Vi(Bd.prototype,{toJSON:{name:"toJSON",j:[gn(null,!0)]}}),Vi(yh.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(n){return!!n&&!!n.rb}}]}}),Vi(Gd.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(n){return!!n&&!!n.rb}},gn("displayName",!0)]},ad:{name:"unenroll",j:[Wi({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:kh},gn(),"multiFactorInfoIdentifier")]}}),Vi(ea.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ui(pr,"parseLink",xf,[gn("link")]),Ui(Oh,"assertion",function(n){return new fg(n)},[uc("phone")]),function(){if(void 0===$||!$.INTERNAL||!$.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var n={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ur,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:bt,VERIFY_AND_CHANGE_EMAIL:Ca,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Ia,AuthCredential:Vu,Error:E};Ui(n,"EmailAuthProvider",Ho,[]),Ui(n,"FacebookAuthProvider",os,[]),Ui(n,"GithubAuthProvider",bo,[]),Ui(n,"GoogleAuthProvider",Ma,[]),Ui(n,"TwitterAuthProvider",qu,[]),Ui(n,"OAuthProvider",is,[gn("providerId")]),Ui(n,"SAMLAuthProvider",ua,[gn("providerId")]),Ui(n,"PhoneAuthProvider",As,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(n){return!!(n&&n instanceof Ia)}}]),Ui(n,"RecaptchaVerifier",ea,[Wi(gn(),{name:"",J:"an HTML element",optional:!1,K:function(n){return!!(n&&n instanceof Element)}},"recaptchaContainer"),fo("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(n){return!!(n&&n instanceof $.app.App)}}]),Ui(n,"ActionCodeURL",pr,[]),Ui(n,"PhoneMultiFactorGenerator",Oh,[]),$.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return new Ia(u=u.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:n,instantiationMode:"LAZY",type:"PUBLIC"}),$.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return{getUid:He((u=u.getProvider("auth").getImmediate()).getUid,u),getToken:He(u.mc,u),addAuthTokenListener:He(u.cc,u),removeAuthTokenListener:He(u.Oc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),$.registerVersion("@firebase/auth","0.15.0"),$.INTERNAL.extendNamespace({User:to})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},544:(br,ot,lt)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var $=lt(385),Q=lt(488),Z=function(){function ge(te,$e,Ze){this.name=te,this.instanceFactory=$e,this.type=Ze,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return ge.prototype.setInstantiationMode=function(te){return this.instantiationMode=te,this},ge.prototype.setMultipleInstances=function(te){return this.multipleInstances=te,this},ge.prototype.setServiceProps=function(te){return this.serviceProps=te,this},ge}(),kt="[DEFAULT]",Xe=function(){function ge(te,$e){this.name=te,this.container=$e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return ge.prototype.get=function(te){void 0===te&&(te=kt);var $e=this.normalizeInstanceIdentifier(te);if(!this.instancesDeferred.has($e)){var Ze=new Q.Deferred;this.instancesDeferred.set($e,Ze);try{var Ae=this.getOrInitializeService($e);Ae&&Ze.resolve(Ae)}catch(mt){}}return this.instancesDeferred.get($e).promise},ge.prototype.getImmediate=function(te){var $e=$.__assign({identifier:kt,optional:!1},te),Ae=$e.optional,mt=this.normalizeInstanceIdentifier($e.identifier);try{var fn=this.getOrInitializeService(mt);if(!fn){if(Ae)return null;throw Error("Service "+this.name+" is not available")}return fn}catch(Dt){if(Ae)return null;throw Dt}},ge.prototype.getComponent=function(){return this.component},ge.prototype.setComponent=function(te){var $e,Ze;if(te.name!==this.name)throw Error("Mismatching Component "+te.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=te,function(ge){return"EAGER"===ge.instantiationMode}(te))try{this.getOrInitializeService(kt)}catch(At){}try{for(var Ae=$.__values(this.instancesDeferred.entries()),mt=Ae.next();!mt.done;mt=Ae.next()){var fn=$.__read(mt.value,2),Re=fn[1],it=this.normalizeInstanceIdentifier(fn[0]);try{var ze=this.getOrInitializeService(it);Re.resolve(ze)}catch(At){}}}catch(At){$e={error:At}}finally{try{mt&&!mt.done&&(Ze=Ae.return)&&Ze.call(Ae)}finally{if($e)throw $e.error}}},ge.prototype.clearInstance=function(te){void 0===te&&(te=kt),this.instancesDeferred.delete(te),this.instances.delete(te)},ge.prototype.delete=function(){return $.__awaiter(this,void 0,void 0,function(){var te;return $.__generator(this,function($e){switch($e.label){case 0:return te=Array.from(this.instances.values()),[4,Promise.all($.__spread(te.filter(function(Ze){return"INTERNAL"in Ze}).map(function(Ze){return Ze.INTERNAL.delete()}),te.filter(function(Ze){return"_delete"in Ze}).map(function(Ze){return Ze._delete()})))];case 1:return $e.sent(),[2]}})})},ge.prototype.isComponentSet=function(){return null!=this.component},ge.prototype.getOrInitializeService=function(te){var $e=this.instances.get(te);return!$e&&this.component&&($e=this.component.instanceFactory(this.container,function(ge){return ge===kt?void 0:ge}(te)),this.instances.set(te,$e)),$e||null},ge.prototype.normalizeInstanceIdentifier=function(te){return this.component?this.component.multipleInstances?te:kt:te},ge}(),ln=function(){function ge(te){this.name=te,this.providers=new Map}return ge.prototype.addComponent=function(te){var $e=this.getProvider(te.name);if($e.isComponentSet())throw new Error("Component "+te.name+" has already been registered with "+this.name);$e.setComponent(te)},ge.prototype.addOrOverwriteComponent=function(te){this.getProvider(te.name).isComponentSet()&&this.providers.delete(te.name),this.addComponent(te)},ge.prototype.getProvider=function(te){if(this.providers.has(te))return this.providers.get(te);var $e=new Xe(te,this);return this.providers.set(te,$e),$e},ge.prototype.getProviders=function(){return Array.from(this.providers.values())},ge}();ot.Component=Z,ot.ComponentContainer=ln,ot.Provider=Xe},679:(br,ot,lt)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var $=lt(2),Q=lt(209),Z=lt(488),kt=lt(433),Xe=lt(544);function In(v){return v&&"object"==typeof v&&"default"in v?v:{default:v}}var v,Ot=In($),ln=function(){function v(l){this.domStorage_=l,this.prefix_="firebase:"}return v.prototype.set=function(l,h){null==h?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),Z.stringify(h))},v.prototype.get=function(l){var h=this.domStorage_.getItem(this.prefixedName_(l));return null==h?null:Z.jsonEval(h)},v.prototype.remove=function(l){this.domStorage_.removeItem(this.prefixedName_(l))},v.prototype.prefixedName_=function(l){return this.prefix_+l},v.prototype.toString=function(){return this.domStorage_.toString()},v}(),ge=function(){function v(){this.cache_={},this.isInMemoryStorage=!0}return v.prototype.set=function(l,h){null==h?delete this.cache_[l]:this.cache_[l]=h},v.prototype.get=function(l){return Z.contains(this.cache_,l)?this.cache_[l]:null},v.prototype.remove=function(l){delete this.cache_[l]},v}(),te=function(v){try{if("undefined"!=typeof window&&void 0!==window[v]){var l=window[v];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new ln(l)}}catch(h){}return new ge},$e=te("localStorage"),Ze=te("sessionStorage"),Ae=new kt.Logger("@firebase/database"),mt=(v=1,function(){return v++}),fn=function(v){var l=Z.stringToByteArray(v),h=new Z.Sha1;h.update(l);var m=h.digest();return Z.base64.encodeByteArray(m)},Dt=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];for(var h="",m=0;m<v.length;m++){var S=v[m];Array.isArray(S)||S&&"object"==typeof S&&"number"==typeof S.length?h+=Dt.apply(null,S):h+="object"==typeof S?Z.stringify(S):S,h+=" "}return h},Re=null,it=!0,ze=function(v,l){Z.assert(!l||!0===v||!1===v,"Can't turn on custom loggers persistently."),!0===v?(Ae.logLevel=kt.LogLevel.VERBOSE,Re=Ae.log.bind(Ae),l&&Ze.set("logging_enabled",!0)):"function"==typeof v?Re=v:(Re=null,Ze.remove("logging_enabled"))},At=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];if(!0===it&&(it=!1,null===Re&&!0===Ze.get("logging_enabled")&&ze(!0)),Re){var h=Dt.apply(null,v);Re(h)}},Nt=function(v){return function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];At.apply(void 0,Q.__spread([v],l))}},_t=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];var h="FIREBASE INTERNAL ERROR: "+Dt.apply(void 0,Q.__spread(v));Ae.error(h)},He=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];var h="FIREBASE FATAL ERROR: "+Dt.apply(void 0,Q.__spread(v));throw Ae.error(h),new Error(h)},rt=function(){for(var v=[],l=0;l<arguments.length;l++)v[l]=arguments[l];var h="FIREBASE WARNING: "+Dt.apply(void 0,Q.__spread(v));Ae.warn(h)},C=function(v){return"number"==typeof v&&(v!=v||v===Number.POSITIVE_INFINITY||v===Number.NEGATIVE_INFINITY)},k="[MIN_NAME]",U="[MAX_NAME]",N=function(v,l){if(v===l)return 0;if(v===k||l===U)return-1;if(l===k||v===U)return 1;var h=Gt(v),m=Gt(l);return null!==h?null!==m?h-m==0?v.length-l.length:h-m:-1:null!==m?1:v<l?-1:1},ee=function(v,l){return v===l?0:v<l?-1:1},ae=function(v,l){if(l&&v in l)return l[v];throw new Error("Missing required key ("+v+") in object: "+Z.stringify(l))},pt=function(v){if("object"!=typeof v||null===v)return Z.stringify(v);var l=[];for(var h in v)l.push(h);l.sort();for(var m="{",S=0;S<l.length;S++)0!==S&&(m+=","),m+=Z.stringify(l[S]),m+=":",m+=pt(v[l[S]]);return m+"}"},re=function(v,l){var h=v.length;if(h<=l)return[v];for(var m=[],S=0;S<h;S+=l)m.push(v.substring(S,S+l>h?h:S+l));return m};function Pe(v,l){for(var h in v)v.hasOwnProperty(h)&&l(h,v[h])}var Be,tt,wt,tr,jn,_e,dt=function(v){Z.assert(!C(v),"Invalid JSON number");var S,R,H,z,ue,m=1023;0===v?(R=0,H=0,S=1/v==-1/0?1:0):(S=v<0,(v=Math.abs(v))>=Math.pow(2,1-m)?(R=(z=Math.min(Math.floor(Math.log(v)/Math.LN2),m))+m,H=Math.round(v*Math.pow(2,52-z)-Math.pow(2,52))):(R=0,H=Math.round(v/Math.pow(2,-1074))));var ne=[];for(ue=52;ue;ue-=1)ne.push(H%2?1:0),H=Math.floor(H/2);for(ue=11;ue;ue-=1)ne.push(R%2?1:0),R=Math.floor(R/2);ne.push(S?1:0),ne.reverse();var Le=ne.join(""),Ye="";for(ue=0;ue<64;ue+=8){var Ke=parseInt(Le.substr(ue,8),2).toString(16);1===Ke.length&&(Ke="0"+Ke),Ye+=Ke}return Ye.toLowerCase()},at=new RegExp("^-?(0*)\\d{1,10}$"),Gt=function(v){if(at.test(v)){var l=Number(v);if(l>=-2147483648&&l<=2147483647)return l}return null},St=function(v){try{v()}catch(l){setTimeout(function(){throw rt("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},on=function(v,l){var h=setTimeout(v,l);return"object"==typeof h&&h.unref&&h.unref(),h},nt=function(){function v(l,h){if(void 0===h){this.pieces_=l.split("/");for(var m=0,S=0;S<this.pieces_.length;S++)this.pieces_[S].length>0&&(this.pieces_[m]=this.pieces_[S],m++);this.pieces_.length=m,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=h}return Object.defineProperty(v,"Empty",{get:function(){return new v("")},enumerable:!1,configurable:!0}),v.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},v.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},v.prototype.popFront=function(){var l=this.pieceNum_;return l<this.pieces_.length&&l++,new v(this.pieces_,l)},v.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},v.prototype.toString=function(){for(var l="",h=this.pieceNum_;h<this.pieces_.length;h++)""!==this.pieces_[h]&&(l+="/"+this.pieces_[h]);return l||"/"},v.prototype.toUrlEncodedString=function(){for(var l="",h=this.pieceNum_;h<this.pieces_.length;h++)""!==this.pieces_[h]&&(l+="/"+encodeURIComponent(String(this.pieces_[h])));return l||"/"},v.prototype.slice=function(l){return void 0===l&&(l=0),this.pieces_.slice(this.pieceNum_+l)},v.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var l=[],h=this.pieceNum_;h<this.pieces_.length-1;h++)l.push(this.pieces_[h]);return new v(l,0)},v.prototype.child=function(l){for(var h=[],m=this.pieceNum_;m<this.pieces_.length;m++)h.push(this.pieces_[m]);if(l instanceof v)for(m=l.pieceNum_;m<l.pieces_.length;m++)h.push(l.pieces_[m]);else{var S=l.split("/");for(m=0;m<S.length;m++)S[m].length>0&&h.push(S[m])}return new v(h,0)},v.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},v.relativePath=function(l,h){var m=l.getFront(),S=h.getFront();if(null===m)return h;if(m===S)return v.relativePath(l.popFront(),h.popFront());throw new Error("INTERNAL ERROR: innerPath ("+h+") is not within outerPath ("+l+")")},v.comparePaths=function(l,h){for(var m=l.slice(),S=h.slice(),R=0;R<m.length&&R<S.length;R++){var H=N(m[R],S[R]);if(0!==H)return H}return m.length===S.length?0:m.length<S.length?-1:1},v.prototype.equals=function(l){if(this.getLength()!==l.getLength())return!1;for(var h=this.pieceNum_,m=l.pieceNum_;h<=this.pieces_.length;h++,m++)if(this.pieces_[h]!==l.pieces_[m])return!1;return!0},v.prototype.contains=function(l){var h=this.pieceNum_,m=l.pieceNum_;if(this.getLength()>l.getLength())return!1;for(;h<this.pieces_.length;){if(this.pieces_[h]!==l.pieces_[m])return!1;++h,++m}return!0},v}(),Nn=function(){function v(l,h){this.errorPrefix_=h,this.parts_=l.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var m=0;m<this.parts_.length;m++)this.byteLength_+=Z.stringLength(this.parts_[m]);this.checkValid_()}return Object.defineProperty(v,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(v,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),v.prototype.push=function(l){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(l),this.byteLength_+=Z.stringLength(l),this.checkValid_()},v.prototype.pop=function(){var l=this.parts_.pop();this.byteLength_-=Z.stringLength(l),this.parts_.length>0&&(this.byteLength_-=1)},v.prototype.checkValid_=function(){if(this.byteLength_>v.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+v.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>v.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+v.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},v.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},v}(),Vt="firebaseio.com",ir="websocket",Zn="long_polling",Kn=function(){function v(l,h,m,S,R,H,z){void 0===R&&(R=!1),void 0===H&&(H=""),void 0===z&&(z=!1),this.secure=h,this.namespace=m,this.webSocketOnly=S,this.nodeAdmin=R,this.persistenceKey=H,this.includeNamespaceInQueryParams=z,this.host=l.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=$e.get("host:"+l)||this.host}return v.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},v.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},v.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},v.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},v.prototype.updateHost=function(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&$e.set("host:"+this.host,this.internalHost))},v.prototype.connectionURL=function(l,h){var m;if(Z.assert("string"==typeof l,"typeof type must == string"),Z.assert("object"==typeof h,"typeof params must == object"),l===ir)m=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(l!==Zn)throw new Error("Unknown connection type: "+l);m=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(h.ns=this.namespace);var S=[];return Pe(h,function(R,H){S.push(R+"="+H)}),m+S.join("&")},v.prototype.toString=function(){var l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l},v.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},v}(),Rn=function(v,l){var h=_n(v),m=h.namespace;return"firebase.com"===h.domain&&He(h.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!m||"undefined"===m)&&"localhost"!==h.domain&&He("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),h.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Kn(h.host,h.secure,m,l,"ws"===h.scheme||"wss"===h.scheme,"",m!==h.subdomain),path:new nt(h.pathString)}},_n=function(v){var l="",h="",m="",S="",R="",H=!0,z="https",ue=443;if("string"==typeof v){var ne=v.indexOf("//");ne>=0&&(z=v.substring(0,ne-1),v=v.substring(ne+2));var Le=v.indexOf("/");-1===Le&&(Le=v.length);var Ye=v.indexOf("?");-1===Ye&&(Ye=v.length),l=v.substring(0,Math.min(Le,Ye)),Le<Ye&&(S=function(v){for(var l="",h=v.split("/"),m=0;m<h.length;m++)if(h[m].length>0){var S=h[m];try{S=decodeURIComponent(S.replace(/\+/g," "))}catch(R){}l+="/"+S}return l}(v.substring(Le,Ye)));var Ke=function(v){var l,h,m={};"?"===v.charAt(0)&&(v=v.substring(1));try{for(var S=Q.__values(v.split("&")),R=S.next();!R.done;R=S.next()){var H=R.value;if(0!==H.length){var z=H.split("=");2===z.length?m[decodeURIComponent(z[0])]=decodeURIComponent(z[1]):rt("Invalid query segment '"+H+"' in query '"+v+"'")}}}catch(ue){l={error:ue}}finally{try{R&&!R.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}return m}(v.substring(Math.min(v.length,Ye)));(ne=l.indexOf(":"))>=0?(H="https"===z||"wss"===z,ue=parseInt(l.substring(ne+1),10)):ne=l.length;var Et=l.slice(0,ne);if("localhost"===Et.toLowerCase())h="localhost";else if(Et.split(".").length<=2)h=Et;else{var Kt=l.indexOf(".");m=l.substring(0,Kt).toLowerCase(),h=l.substring(Kt+1),R=m}"ns"in Ke&&(R=Ke.ns)}return{host:l,port:ue,domain:h,subdomain:m,secure:H,scheme:z,pathString:S,namespace:R}},Jr=/[\[\].#$\/\u0000-\u001F\u007F]/,je=/[\[\].#$\u0000-\u001F\u007F]/,he=10485760,Fe=function(v){return"string"==typeof v&&0!==v.length&&!Jr.test(v)},Ge=function(v){return"string"==typeof v&&0!==v.length&&!je.test(v)},Ft=function(v){return null===v||"string"==typeof v||"number"==typeof v&&!C(v)||v&&"object"==typeof v&&Z.contains(v,".sv")},Pt=function(v,l,h,m,S){S&&void 0===h||Zt(Z.errorPrefix(v,l,S),h,m)},Zt=function(v,l,h){var m=h instanceof nt?new Nn(h,v):h;if(void 0===l)throw new Error(v+"contains undefined "+m.toErrorString());if("function"==typeof l)throw new Error(v+"contains a function "+m.toErrorString()+" with contents = "+l.toString());if(C(l))throw new Error(v+"contains "+l.toString()+" "+m.toErrorString());if("string"==typeof l&&l.length>he/3&&Z.stringLength(l)>he)throw new Error(v+"contains a string greater than "+he+" utf8 bytes "+m.toErrorString()+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){var S=!1,R=!1;if(Pe(l,function(H,z){if(".value"===H)S=!0;else if(".priority"!==H&&".sv"!==H&&(R=!0,!Fe(H)))throw new Error(v+" contains an invalid key ("+H+") "+m.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');m.push(H),Zt(v,z,m),m.pop()}),S&&R)throw new Error(v+' contains ".value" child '+m.toErrorString()+" in addition to actual children.")}},dn=function(v,l,h,m,S){if(!S||void 0!==h){var R=Z.errorPrefix(v,l,S);if(!h||"object"!=typeof h||Array.isArray(h))throw new Error(R+" must be an object containing the children to replace.");var H=[];Pe(h,function(z,ue){var ne=new nt(z);if(Zt(R,ue,m.child(ne)),".priority"===ne.getBack()&&!Ft(ue))throw new Error(R+"contains an invalid value for '"+ne.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");H.push(ne)}),function(v,l){var h,m;for(h=0;h<l.length;h++)for(var S=(m=l[h]).slice(),R=0;R<S.length;R++)if((".priority"!==S[R]||R!==S.length-1)&&!Fe(S[R]))throw new Error(v+"contains an invalid key ("+S[R]+") in path "+m.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');l.sort(nt.comparePaths);var H=null;for(h=0;h<l.length;h++){if(m=l[h],null!==H&&H.contains(m))throw new Error(v+"contains a path "+H.toString()+" that is ancestor of another path "+m.toString());H=m}}(R,H)}},Qn=function(v,l,h,m){if(!m||void 0!==h){if(C(h))throw new Error(Z.errorPrefix(v,l,m)+"is "+h.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ft(h))throw new Error(Z.errorPrefix(v,l,m)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},On=function(v,l,h,m){if(!m||void 0!==h)switch(h){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Z.errorPrefix(v,l,m)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},er=function(v,l,h,m){if(!(m&&void 0===h||Fe(h)))throw new Error(Z.errorPrefix(v,l,m)+'was an invalid key = "'+h+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Cn=function(v,l,h,m){if(!(m&&void 0===h||Ge(h)))throw new Error(Z.errorPrefix(v,l,m)+'was an invalid path = "'+h+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Cr=function(v,l,h,m){h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Cn(v,l,h,m)},zn=function(v,l){if(".info"===l.getFront())throw new Error(v+" failed = Can't modify data under /.info/")},sr=function(v,l,h){var m=h.path.toString();if("string"!=typeof h.repoInfo.host||0===h.repoInfo.host.length||!Fe(h.repoInfo.namespace)&&"localhost"!==h.repoInfo.host.split(":")[0]||0!==m.length&&!function(v){return v&&(v=v.replace(/^\/*\.info(\/|$)/,"/")),Ge(v)}(m))throw new Error(Z.errorPrefix(v,l,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Bi=function(v,l,h,m){if((!m||void 0!==h)&&"boolean"!=typeof h)throw new Error(Z.errorPrefix(v,l,m)+"must be a boolean.")},Zr=function(){function v(l,h){this.repo_=l,this.path_=h}return v.prototype.cancel=function(l){Z.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),Z.validateCallback("OnDisconnect.cancel",1,l,!0);var h=new Z.Deferred;return this.repo_.onDisconnectCancel(this.path_,h.wrapCallback(l)),h.promise},v.prototype.remove=function(l){Z.validateArgCount("OnDisconnect.remove",0,1,arguments.length),zn("OnDisconnect.remove",this.path_),Z.validateCallback("OnDisconnect.remove",1,l,!0);var h=new Z.Deferred;return this.repo_.onDisconnectSet(this.path_,null,h.wrapCallback(l)),h.promise},v.prototype.set=function(l,h){Z.validateArgCount("OnDisconnect.set",1,2,arguments.length),zn("OnDisconnect.set",this.path_),Pt("OnDisconnect.set",1,l,this.path_,!1),Z.validateCallback("OnDisconnect.set",2,h,!0);var m=new Z.Deferred;return this.repo_.onDisconnectSet(this.path_,l,m.wrapCallback(h)),m.promise},v.prototype.setWithPriority=function(l,h,m){Z.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),zn("OnDisconnect.setWithPriority",this.path_),Pt("OnDisconnect.setWithPriority",1,l,this.path_,!1),Qn("OnDisconnect.setWithPriority",2,h,!1),Z.validateCallback("OnDisconnect.setWithPriority",3,m,!0);var S=new Z.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,l,h,S.wrapCallback(m)),S.promise},v.prototype.update=function(l,h){if(Z.validateArgCount("OnDisconnect.update",1,2,arguments.length),zn("OnDisconnect.update",this.path_),Array.isArray(l)){for(var m={},S=0;S<l.length;++S)m[""+S]=l[S];l=m,rt("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}dn("OnDisconnect.update",1,l,this.path_,!1),Z.validateCallback("OnDisconnect.update",2,h,!0);var R=new Z.Deferred;return this.repo_.onDisconnectUpdate(this.path_,l,R.wrapCallback(h)),R.promise},v}(),oi=function(){function v(l,h){this.committed=l,this.snapshot=h}return v.prototype.toJSON=function(){return Z.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},v}(),Ti=function(){var v="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",l=0,h=[];return function(m){var S=m===l;l=m;var R,H=new Array(8);for(R=7;R>=0;R--)H[R]=v.charAt(m%64),m=Math.floor(m/64);Z.assert(0===m,"Cannot push at time == 0");var z=H.join("");if(S){for(R=11;R>=0&&63===h[R];R--)h[R]=0;h[R]++}else for(R=0;R<12;R++)h[R]=Math.floor(64*Math.random());for(R=0;R<12;R++)z+=v.charAt(h[R]);return Z.assert(20===z.length,"nextPushId: Length should be 20."),z}}(),de=function(){function v(l,h){this.name=l,this.node=h}return v.Wrap=function(l,h){return new v(l,h)},v}(),Me=function(){function v(){}return v.prototype.getCompare=function(){return this.compare.bind(this)},v.prototype.indexedValueChanged=function(l,h){var m=new de(k,l),S=new de(k,h);return 0!==this.compare(m,S)},v.prototype.minPost=function(){return de.MIN},v}(),st=function(v){function l(){return null!==v&&v.apply(this,arguments)||this}return Q.__extends(l,v),Object.defineProperty(l,"__EMPTY_NODE",{get:function(){return Be},set:function(h){Be=h},enumerable:!1,configurable:!0}),l.prototype.compare=function(h,m){return N(h.name,m.name)},l.prototype.isDefinedOn=function(h){throw Z.assertionError("KeyIndex.isDefinedOn not expected to be called.")},l.prototype.indexedValueChanged=function(h,m){return!1},l.prototype.minPost=function(){return de.MIN},l.prototype.maxPost=function(){return new de(U,Be)},l.prototype.makePost=function(h,m){return Z.assert("string"==typeof h,"KeyIndex indexValue must always be a string."),new de(h,Be)},l.prototype.toString=function(){return".key"},l}(Me),We=new st,Ut=function(v){return"number"==typeof v?"number:"+dt(v):"string:"+v},an=function(v){if(v.isLeafNode()){var l=v.val();Z.assert("string"==typeof l||"number"==typeof l||"object"==typeof l&&Z.contains(l,".sv"),"Priority must be a string or number.")}else Z.assert(v===tt||v.isEmpty(),"priority of unexpected type.");Z.assert(v===tt||v.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},rn=function(){function v(l,h){void 0===h&&(h=v.__childrenNodeConstructor.EMPTY_NODE),this.value_=l,this.priorityNode_=h,this.lazyHash_=null,Z.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),an(this.priorityNode_)}return Object.defineProperty(v,"__childrenNodeConstructor",{get:function(){return wt},set:function(l){wt=l},enumerable:!1,configurable:!0}),v.prototype.isLeafNode=function(){return!0},v.prototype.getPriority=function(){return this.priorityNode_},v.prototype.updatePriority=function(l){return new v(this.value_,l)},v.prototype.getImmediateChild=function(l){return".priority"===l?this.priorityNode_:v.__childrenNodeConstructor.EMPTY_NODE},v.prototype.getChild=function(l){return l.isEmpty()?this:".priority"===l.getFront()?this.priorityNode_:v.__childrenNodeConstructor.EMPTY_NODE},v.prototype.hasChild=function(){return!1},v.prototype.getPredecessorChildName=function(l,h){return null},v.prototype.updateImmediateChild=function(l,h){return".priority"===l?this.updatePriority(h):h.isEmpty()&&".priority"!==l?this:v.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,h).updatePriority(this.priorityNode_)},v.prototype.updateChild=function(l,h){var m=l.getFront();return null===m?h:h.isEmpty()&&".priority"!==m?this:(Z.assert(".priority"!==m||1===l.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(m,v.__childrenNodeConstructor.EMPTY_NODE.updateChild(l.popFront(),h)))},v.prototype.isEmpty=function(){return!1},v.prototype.numChildren=function(){return 0},v.prototype.forEachChild=function(l,h){return!1},v.prototype.val=function(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},v.prototype.hash=function(){if(null===this.lazyHash_){var l="";this.priorityNode_.isEmpty()||(l+="priority:"+Ut(this.priorityNode_.val())+":");var h=typeof this.value_;l+=h+":",l+="number"===h?dt(this.value_):this.value_,this.lazyHash_=fn(l)}return this.lazyHash_},v.prototype.getValue=function(){return this.value_},v.prototype.compareTo=function(l){return l===v.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof v.__childrenNodeConstructor?-1:(Z.assert(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))},v.prototype.compareToLeafNode_=function(l){var h=typeof l.value_,m=typeof this.value_,S=v.VALUE_TYPE_ORDER.indexOf(h),R=v.VALUE_TYPE_ORDER.indexOf(m);return Z.assert(S>=0,"Unknown leaf type: "+h),Z.assert(R>=0,"Unknown leaf type: "+m),S===R?"object"===m?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:R-S},v.prototype.withIndex=function(){return this},v.prototype.isIndexed=function(){return!0},v.prototype.equals=function(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))},v.VALUE_TYPE_ORDER=["object","boolean","number","string"],v}(),pe=function(v){function l(){return null!==v&&v.apply(this,arguments)||this}return Q.__extends(l,v),l.prototype.compare=function(h,m){var S=h.node.getPriority(),R=m.node.getPriority(),H=S.compareTo(R);return 0===H?N(h.name,m.name):H},l.prototype.isDefinedOn=function(h){return!h.getPriority().isEmpty()},l.prototype.indexedValueChanged=function(h,m){return!h.getPriority().equals(m.getPriority())},l.prototype.minPost=function(){return de.MIN},l.prototype.maxPost=function(){return new de(U,new rn("[PRIORITY-POST]",jn))},l.prototype.makePost=function(h,m){var S=tr(h);return new de(m,new rn("[PRIORITY-POST]",S))},l.prototype.toString=function(){return".priority"},l}(Me),fe=new pe,me=function(){function v(l,h,m,S,R){void 0===R&&(R=null),this.isReverse_=S,this.resultGenerator_=R,this.nodeStack_=[];for(var H=1;!l.isEmpty();)if(l=l,H=h?m(l.key,h):1,S&&(H*=-1),H<0)l=this.isReverse_?l.left:l.right;else{if(0===H){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}return v.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var h,l=this.nodeStack_.pop();if(h=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return h},v.prototype.hasNext=function(){return this.nodeStack_.length>0},v.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}},v}(),Ce=function(){function v(l,h,m,S,R){this.key=l,this.value=h,this.color=null!=m?m:v.RED,this.left=null!=S?S:x.EMPTY_NODE,this.right=null!=R?R:x.EMPTY_NODE}return v.prototype.copy=function(l,h,m,S,R){return new v(null!=l?l:this.key,null!=h?h:this.value,null!=m?m:this.color,null!=S?S:this.left,null!=R?R:this.right)},v.prototype.count=function(){return this.left.count()+1+this.right.count()},v.prototype.isEmpty=function(){return!1},v.prototype.inorderTraversal=function(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)},v.prototype.reverseTraversal=function(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)},v.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},v.prototype.minKey=function(){return this.min_().key},v.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},v.prototype.insert=function(l,h,m){var S=this,R=m(l,S.key);return(S=R<0?S.copy(null,null,null,S.left.insert(l,h,m),null):0===R?S.copy(null,h,null,null,null):S.copy(null,null,null,null,S.right.insert(l,h,m))).fixUp_()},v.prototype.removeMin_=function(){if(this.left.isEmpty())return x.EMPTY_NODE;var l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),(l=l.copy(null,null,null,l.left.removeMin_(),null)).fixUp_()},v.prototype.remove=function(l,h){var m,S;if(h(l,(m=this).key)<0)!m.left.isEmpty()&&!m.left.isRed_()&&!m.left.left.isRed_()&&(m=m.moveRedLeft_()),m=m.copy(null,null,null,m.left.remove(l,h),null);else{if(m.left.isRed_()&&(m=m.rotateRight_()),!m.right.isEmpty()&&!m.right.isRed_()&&!m.right.left.isRed_()&&(m=m.moveRedRight_()),0===h(l,m.key)){if(m.right.isEmpty())return x.EMPTY_NODE;S=m.right.min_(),m=m.copy(S.key,S.value,null,null,m.right.removeMin_())}m=m.copy(null,null,null,null,m.right.remove(l,h))}return m.fixUp_()},v.prototype.isRed_=function(){return this.color},v.prototype.fixUp_=function(){var l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l},v.prototype.moveRedLeft_=function(){var l=this.colorFlip_();return l.right.left.isRed_()&&(l=(l=(l=l.copy(null,null,null,null,l.right.rotateRight_())).rotateLeft_()).colorFlip_()),l},v.prototype.moveRedRight_=function(){var l=this.colorFlip_();return l.left.left.isRed_()&&(l=(l=l.rotateRight_()).colorFlip_()),l},v.prototype.rotateLeft_=function(){var l=this.copy(null,null,v.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)},v.prototype.rotateRight_=function(){var l=this.copy(null,null,v.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)},v.prototype.colorFlip_=function(){var l=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,h)},v.prototype.checkMaxDepth_=function(){var l=this.check_();return Math.pow(2,l)<=this.count()+1},v.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)},v.RED=!0,v.BLACK=!1,v}(),J=function(){function v(){}return v.prototype.copy=function(l,h,m,S,R){return this},v.prototype.insert=function(l,h,m){return new Ce(l,h,null)},v.prototype.remove=function(l,h){return this},v.prototype.count=function(){return 0},v.prototype.isEmpty=function(){return!0},v.prototype.inorderTraversal=function(l){return!1},v.prototype.reverseTraversal=function(l){return!1},v.prototype.minKey=function(){return null},v.prototype.maxKey=function(){return null},v.prototype.check_=function(){return 0},v.prototype.isRed_=function(){return!1},v}(),x=function(){function v(l,h){void 0===h&&(h=v.EMPTY_NODE),this.comparator_=l,this.root_=h}return v.prototype.insert=function(l,h){return new v(this.comparator_,this.root_.insert(l,h,this.comparator_).copy(null,null,Ce.BLACK,null,null))},v.prototype.remove=function(l){return new v(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Ce.BLACK,null,null))},v.prototype.get=function(l){for(var h,m=this.root_;!m.isEmpty();){if(0===(h=this.comparator_(l,m.key)))return m.value;h<0?m=m.left:h>0&&(m=m.right)}return null},v.prototype.getPredecessorKey=function(l){for(var h,m=this.root_,S=null;!m.isEmpty();){if(0===(h=this.comparator_(l,m.key))){if(m.left.isEmpty())return S?S.key:null;for(m=m.left;!m.right.isEmpty();)m=m.right;return m.key}h<0?m=m.left:h>0&&(S=m,m=m.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},v.prototype.isEmpty=function(){return this.root_.isEmpty()},v.prototype.count=function(){return this.root_.count()},v.prototype.minKey=function(){return this.root_.minKey()},v.prototype.maxKey=function(){return this.root_.maxKey()},v.prototype.inorderTraversal=function(l){return this.root_.inorderTraversal(l)},v.prototype.reverseTraversal=function(l){return this.root_.reverseTraversal(l)},v.prototype.getIterator=function(l){return new me(this.root_,null,this.comparator_,!1,l)},v.prototype.getIteratorFrom=function(l,h){return new me(this.root_,l,this.comparator_,!1,h)},v.prototype.getReverseIteratorFrom=function(l,h){return new me(this.root_,l,this.comparator_,!0,h)},v.prototype.getReverseIterator=function(l){return new me(this.root_,null,this.comparator_,!0,l)},v.EMPTY_NODE=new J,v}(),W=Math.log(2),se=function(){function v(l){this.count=parseInt(Math.log(l+1)/W,10),this.current_=this.count-1;var S=parseInt(Array(this.count+1).join("1"),2);this.bits_=l+1&S}return v.prototype.nextBitIsOne=function(){var l=!(this.bits_&1<<this.current_);return this.current_--,l},v}(),ye=function(v,l,h,m){v.sort(l);var S=function(ue,ne){var Ye,Ke,Le=ne-ue;if(0===Le)return null;if(1===Le)return Ye=v[ue],Ke=h?h(Ye):Ye,new Ce(Ke,Ye.node,Ce.BLACK,null,null);var Et=parseInt(Le/2,10)+ue,Kt=S(ue,Et),Yt=S(Et+1,ne);return Ye=v[Et],Ke=h?h(Ye):Ye,new Ce(Ke,Ye.node,Ce.BLACK,Kt,Yt)},z=function(ue){for(var ne=null,Le=null,Ye=v.length,Ke=function(ar,Li){var Ii=Ye-ar,yi=Ye;Ye-=ar;var tn=S(Ii+1,yi),mi=v[Ii],Bo=h?h(mi):mi;Et(new Ce(Bo,mi.node,Li,null,tn))},Et=function(ar){ne?(ne.left=ar,ne=ar):(Le=ar,ne=ar)},Kt=0;Kt<ue.count;++Kt){var Yt=ue.nextBitIsOne(),Mn=Math.pow(2,ue.count-(Kt+1));Yt?Ke(Mn,Ce.BLACK):(Ke(Mn,Ce.BLACK),Ke(Mn,Ce.RED))}return Le}(new se(v.length));return new x(m||l,z)},ke={},vt=function(){function v(l,h){this.indexes_=l,this.indexSet_=h}return Object.defineProperty(v,"Default",{get:function(){return Z.assert(ke&&fe,"ChildrenNode.ts has not been loaded"),_e=_e||new v({".priority":ke},{".priority":fe})},enumerable:!1,configurable:!0}),v.prototype.get=function(l){var h=Z.safeGet(this.indexes_,l);if(!h)throw new Error("No index defined for "+l);return h instanceof x?h:null},v.prototype.hasIndex=function(l){return Z.contains(this.indexSet_,l.toString())},v.prototype.addIndex=function(l,h){Z.assert(l!==We,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var m=[],S=!1,R=h.getIterator(de.Wrap),H=R.getNext();H;)S=S||l.isDefinedOn(H.node),m.push(H),H=R.getNext();var z;z=S?ye(m,l.getCompare()):ke;var ue=l.toString(),ne=Q.__assign({},this.indexSet_);ne[ue]=l;var Le=Q.__assign({},this.indexes_);return Le[ue]=z,new v(Le,ne)},v.prototype.addToIndexes=function(l,h){var m=this;return new v(Z.map(this.indexes_,function(R,H){var z=Z.safeGet(m.indexSet_,H);if(Z.assert(z,"Missing index implementation for "+H),R===ke){if(z.isDefinedOn(l.node)){for(var ue=[],ne=h.getIterator(de.Wrap),Le=ne.getNext();Le;)Le.name!==l.name&&ue.push(Le),Le=ne.getNext();return ue.push(l),ye(ue,z.getCompare())}return ke}var Ye=h.get(l.name),Ke=R;return Ye&&(Ke=Ke.remove(new de(l.name,Ye))),Ke.insert(l,l.node)}),this.indexSet_)},v.prototype.removeFromIndexes=function(l,h){return new v(Z.map(this.indexes_,function(S){if(S===ke)return S;var R=h.get(l.name);return R?S.remove(new de(l.name,R)):S}),this.indexSet_)},v}();function ct(v,l){return N(v.name,l.name)}function cn(v,l){return N(v,l)}var Tt,Bt=function(){function v(l,h,m){this.children_=l,this.priorityNode_=h,this.indexMap_=m,this.lazyHash_=null,this.priorityNode_&&an(this.priorityNode_),this.children_.isEmpty()&&Z.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(v,"EMPTY_NODE",{get:function(){return Tt||(Tt=new v(new x(cn),null,vt.Default))},enumerable:!1,configurable:!0}),v.prototype.isLeafNode=function(){return!1},v.prototype.getPriority=function(){return this.priorityNode_||Tt},v.prototype.updatePriority=function(l){return this.children_.isEmpty()?this:new v(this.children_,l,this.indexMap_)},v.prototype.getImmediateChild=function(l){if(".priority"===l)return this.getPriority();var h=this.children_.get(l);return null===h?Tt:h},v.prototype.getChild=function(l){var h=l.getFront();return null===h?this:this.getImmediateChild(h).getChild(l.popFront())},v.prototype.hasChild=function(l){return null!==this.children_.get(l)},v.prototype.updateImmediateChild=function(l,h){if(Z.assert(h,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(h);var m=new de(l,h),S=void 0,R=void 0;h.isEmpty()?(S=this.children_.remove(l),R=this.indexMap_.removeFromIndexes(m,this.children_)):(S=this.children_.insert(l,h),R=this.indexMap_.addToIndexes(m,this.children_));var H=S.isEmpty()?Tt:this.priorityNode_;return new v(S,H,R)},v.prototype.updateChild=function(l,h){var m=l.getFront();if(null===m)return h;Z.assert(".priority"!==l.getFront()||1===l.getLength(),".priority must be the last token in a path");var S=this.getImmediateChild(m).updateChild(l.popFront(),h);return this.updateImmediateChild(m,S)},v.prototype.isEmpty=function(){return this.children_.isEmpty()},v.prototype.numChildren=function(){return this.children_.count()},v.prototype.val=function(l){if(this.isEmpty())return null;var h={},m=0,S=0,R=!0;if(this.forEachChild(fe,function(ue,ne){h[ue]=ne.val(l),m++,R&&v.INTEGER_REGEXP_.test(ue)?S=Math.max(S,Number(ue)):R=!1}),!l&&R&&S<2*m){var H=[];for(var z in h)H[z]=h[z];return H}return l&&!this.getPriority().isEmpty()&&(h[".priority"]=this.getPriority().val()),h},v.prototype.hash=function(){if(null===this.lazyHash_){var l="";this.getPriority().isEmpty()||(l+="priority:"+Ut(this.getPriority().val())+":"),this.forEachChild(fe,function(h,m){var S=m.hash();""!==S&&(l+=":"+h+":"+S)}),this.lazyHash_=""===l?"":fn(l)}return this.lazyHash_},v.prototype.getPredecessorChildName=function(l,h,m){var S=this.resolveIndex_(m);if(S){var R=S.getPredecessorKey(new de(l,h));return R?R.name:null}return this.children_.getPredecessorKey(l)},v.prototype.getFirstChildName=function(l){var h=this.resolveIndex_(l);if(h){var m=h.minKey();return m&&m.name}return this.children_.minKey()},v.prototype.getFirstChild=function(l){var h=this.getFirstChildName(l);return h?new de(h,this.children_.get(h)):null},v.prototype.getLastChildName=function(l){var h=this.resolveIndex_(l);if(h){var m=h.maxKey();return m&&m.name}return this.children_.maxKey()},v.prototype.getLastChild=function(l){var h=this.getLastChildName(l);return h?new de(h,this.children_.get(h)):null},v.prototype.forEachChild=function(l,h){var m=this.resolveIndex_(l);return m?m.inorderTraversal(function(S){return h(S.name,S.node)}):this.children_.inorderTraversal(h)},v.prototype.getIterator=function(l){return this.getIteratorFrom(l.minPost(),l)},v.prototype.getIteratorFrom=function(l,h){var m=this.resolveIndex_(h);if(m)return m.getIteratorFrom(l,function(H){return H});for(var S=this.children_.getIteratorFrom(l.name,de.Wrap),R=S.peek();null!=R&&h.compare(R,l)<0;)S.getNext(),R=S.peek();return S},v.prototype.getReverseIterator=function(l){return this.getReverseIteratorFrom(l.maxPost(),l)},v.prototype.getReverseIteratorFrom=function(l,h){var m=this.resolveIndex_(h);if(m)return m.getReverseIteratorFrom(l,function(H){return H});for(var S=this.children_.getReverseIteratorFrom(l.name,de.Wrap),R=S.peek();null!=R&&h.compare(R,l)>0;)S.getNext(),R=S.peek();return S},v.prototype.compareTo=function(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===xn?-1:0},v.prototype.withIndex=function(l){if(l===We||this.indexMap_.hasIndex(l))return this;var h=this.indexMap_.addIndex(l,this.children_);return new v(this.children_,this.priorityNode_,h)},v.prototype.isIndexed=function(l){return l===We||this.indexMap_.hasIndex(l)},v.prototype.equals=function(l){if(l===this)return!0;if(l.isLeafNode())return!1;var h=l;if(this.getPriority().equals(h.getPriority())){if(this.children_.count()===h.children_.count()){for(var m=this.getIterator(fe),S=h.getIterator(fe),R=m.getNext(),H=S.getNext();R&&H;){if(R.name!==H.name||!R.node.equals(H.node))return!1;R=m.getNext(),H=S.getNext()}return null===R&&null===H}return!1}return!1},v.prototype.resolveIndex_=function(l){return l===We?null:this.indexMap_.get(l.toString())},v.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,v}(),cr=function(v){function l(){return v.call(this,new x(cn),Bt.EMPTY_NODE,vt.Default)||this}return Q.__extends(l,v),l.prototype.compareTo=function(h){return h===this?0:1},l.prototype.equals=function(h){return h===this},l.prototype.getPriority=function(){return this},l.prototype.getImmediateChild=function(h){return Bt.EMPTY_NODE},l.prototype.isEmpty=function(){return!1},l}(Bt),xn=new cr;function bn(v,l){if(void 0===l&&(l=null),null===v)return Bt.EMPTY_NODE;if("object"==typeof v&&".priority"in v&&(l=v[".priority"]),Z.assert(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof v&&".value"in v&&null!==v[".value"]&&(v=v[".value"]),"object"!=typeof v||".sv"in v)return new rn(v,bn(l));if(v instanceof Array){var ue=Bt.EMPTY_NODE;return Pe(v,function(ne,Le){if(Z.contains(v,ne)&&"."!==ne.substring(0,1)){var Ye=bn(Le);(Ye.isLeafNode()||!Ye.isEmpty())&&(ue=ue.updateImmediateChild(ne,Ye))}}),ue.updatePriority(bn(l))}var m=[],S=!1;if(Pe(v,function(ne,Le){if("."!==ne.substring(0,1)){var Ye=bn(Le);Ye.isEmpty()||(S=S||!Ye.getPriority().isEmpty(),m.push(new de(ne,Ye)))}}),0===m.length)return Bt.EMPTY_NODE;var H=ye(m,ct,function(ne){return ne.name},cn);if(S){var z=ye(m,fe.getCompare());return new Bt(H,bn(l),new vt({".priority":z},{".priority":fe}))}return new Bt(H,bn(l),vt.Default)}Object.defineProperties(de,{MIN:{value:new de(k,Bt.EMPTY_NODE)},MAX:{value:new de(U,xn)}}),st.__EMPTY_NODE=Bt.EMPTY_NODE,rn.__childrenNodeConstructor=Bt,function(v){tt=v}(xn),function(v){jn=v}(xn),function(v){tr=v}(bn);var Ko,xs=function(v){function l(){return null!==v&&v.apply(this,arguments)||this}return Q.__extends(l,v),l.prototype.compare=function(h,m){var S=h.node.compareTo(m.node);return 0===S?N(h.name,m.name):S},l.prototype.isDefinedOn=function(h){return!0},l.prototype.indexedValueChanged=function(h,m){return!h.equals(m)},l.prototype.minPost=function(){return de.MIN},l.prototype.maxPost=function(){return de.MAX},l.prototype.makePost=function(h,m){var S=bn(h);return new de(m,S)},l.prototype.toString=function(){return".value"},l}(Me),Lr=new xs,$o=function(v){function l(h){var m=v.call(this)||this;return m.indexPath_=h,Z.assert(!h.isEmpty()&&".priority"!==h.getFront(),"Can't create PathIndex with empty path or .priority key"),m}return Q.__extends(l,v),l.prototype.extractChild=function(h){return h.getChild(this.indexPath_)},l.prototype.isDefinedOn=function(h){return!h.getChild(this.indexPath_).isEmpty()},l.prototype.compare=function(h,m){var S=this.extractChild(h.node),R=this.extractChild(m.node),H=S.compareTo(R);return 0===H?N(h.name,m.name):H},l.prototype.makePost=function(h,m){var S=bn(h),R=Bt.EMPTY_NODE.updateChild(this.indexPath_,S);return new de(m,R)},l.prototype.maxPost=function(){var h=Bt.EMPTY_NODE.updateChild(this.indexPath_,xn);return new de(U,h)},l.prototype.toString=function(){return this.indexPath_.slice().join("/")},l}(Me),$i=function(){function v(l,h,m){this.node_=l,this.ref_=h,this.index_=m}return v.prototype.val=function(){return Z.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},v.prototype.exportVal=function(){return Z.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},v.prototype.toJSON=function(){return Z.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},v.prototype.exists=function(){return Z.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},v.prototype.child=function(l){Z.validateArgCount("DataSnapshot.child",0,1,arguments.length),l=String(l),Cn("DataSnapshot.child",1,l,!1);var h=new nt(l),m=this.ref_.child(h);return new v(this.node_.getChild(h),m,fe)},v.prototype.hasChild=function(l){Z.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),Cn("DataSnapshot.hasChild",1,l,!1);var h=new nt(l);return!this.node_.getChild(h).isEmpty()},v.prototype.getPriority=function(){return Z.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},v.prototype.forEach=function(l){var h=this;if(Z.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),Z.validateCallback("DataSnapshot.forEach",1,l,!1),this.node_.isLeafNode())return!1;var m=this.node_;return!!m.forEachChild(this.index_,function(S,R){return l(new v(R,h.ref_.child(S),fe))})},v.prototype.hasChildren=function(){return Z.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(v.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),v.prototype.numChildren=function(){return Z.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},v.prototype.getRef=function(){return Z.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(v.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),v}(),An=function(){function v(l,h,m,S){this.eventType=l,this.eventRegistration=h,this.snapshot=m,this.prevName=S}return v.prototype.getPath=function(){var l=this.snapshot.getRef();return"value"===this.eventType?l.path:l.getParent().path},v.prototype.getEventType=function(){return this.eventType},v.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},v.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Z.stringify(this.snapshot.exportVal())},v}(),pi=function(){function v(l,h,m){this.eventRegistration=l,this.error=h,this.path=m}return v.prototype.getPath=function(){return this.path},v.prototype.getEventType=function(){return"cancel"},v.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},v.prototype.toString=function(){return this.path.toString()+":cancel"},v}(),_s=function(){function v(l,h,m){this.callback_=l,this.cancelCallback_=h,this.context_=m}return v.prototype.respondsTo=function(l){return"value"===l},v.prototype.createEvent=function(l,h){var m=h.getQueryParams().getIndex();return new An("value",this,new $i(l.snapshotNode,h.getRef(),m))},v.prototype.getEventRunner=function(l){var h=this.context_;if("cancel"===l.getEventType()){Z.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var m=this.cancelCallback_;return function(){m.call(h,l.error)}}var S=this.callback_;return function(){S.call(h,l.snapshot)}},v.prototype.createCancelEvent=function(l,h){return this.cancelCallback_?new pi(this,l,h):null},v.prototype.matches=function(l){return l instanceof v&&(!l.callback_||!this.callback_||l.callback_===this.callback_&&l.context_===this.context_)},v.prototype.hasAnyCallback=function(){return null!==this.callback_},v}(),Lo=function(){function v(l,h,m){this.callbacks_=l,this.cancelCallback_=h,this.context_=m}return v.prototype.respondsTo=function(l){var h="children_added"===l?"child_added":l;return Z.contains(this.callbacks_,h="children_removed"===h?"child_removed":h)},v.prototype.createCancelEvent=function(l,h){return this.cancelCallback_?new pi(this,l,h):null},v.prototype.createEvent=function(l,h){Z.assert(null!=l.childName,"Child events should have a childName.");var m=h.getRef().child(l.childName),S=h.getQueryParams().getIndex();return new An(l.type,this,new $i(l.snapshotNode,m,S),l.prevName)},v.prototype.getEventRunner=function(l){var h=this.context_;if("cancel"===l.getEventType()){Z.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var m=this.cancelCallback_;return function(){m.call(h,l.error)}}var S=this.callbacks_[l.eventType];return function(){S.call(h,l.snapshot,l.prevName)}},v.prototype.matches=function(l){var h=this;if(l instanceof v){if(!this.callbacks_||!l.callbacks_)return!0;if(this.context_===l.context_){var m=Object.keys(l.callbacks_),S=Object.keys(this.callbacks_),R=m.length;if(R===S.length){if(1===R){var z=m[0],ue=S[0];return!(ue!==z||l.callbacks_[z]&&this.callbacks_[ue]&&l.callbacks_[z]!==this.callbacks_[ue])}return S.every(function(ne){return l.callbacks_[ne]===h.callbacks_[ne]})}}}return!1},v.prototype.hasAnyCallback=function(){return null!==this.callbacks_},v}(),ro=function(){function v(l,h,m,S){this.repo=l,this.path=h,this.queryParams_=m,this.orderByCalled_=S}return Object.defineProperty(v,"__referenceConstructor",{get:function(){return Z.assert(Ko,"Reference.ts has not been loaded"),Ko},set:function(l){Ko=l},enumerable:!1,configurable:!0}),v.validateQueryEndpoints_=function(l){var h=null,m=null;if(l.hasStart()&&(h=l.getIndexStartValue()),l.hasEnd()&&(m=l.getIndexEndValue()),l.getIndex()===We){var S="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",R="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(l.hasStart()){if(l.getIndexStartName()!==k)throw new Error(S);if("string"!=typeof h)throw new Error(R)}if(l.hasEnd()){if(l.getIndexEndName()!==U)throw new Error(S);if("string"!=typeof m)throw new Error(R)}}else if(l.getIndex()===fe){if(null!=h&&!Ft(h)||null!=m&&!Ft(m))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Z.assert(l.getIndex()instanceof $o||l.getIndex()===Lr,"unknown index type."),null!=h&&"object"==typeof h||null!=m&&"object"==typeof m)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},v.validateLimit_=function(l){if(l.hasStart()&&l.hasEnd()&&l.hasLimit()&&!l.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},v.prototype.validateNoPreviousOrderByCall_=function(l){if(!0===this.orderByCalled_)throw new Error(l+": You can't combine multiple orderBy calls.")},v.prototype.getQueryParams=function(){return this.queryParams_},v.prototype.getRef=function(){return Z.validateArgCount("Query.ref",0,0,arguments.length),new v.__referenceConstructor(this.repo,this.path)},v.prototype.on=function(l,h,m,S){Z.validateArgCount("Query.on",2,4,arguments.length),On("Query.on",1,l,!1),Z.validateCallback("Query.on",2,h,!1);var R=v.getCancelAndContextArgs_("Query.on",m,S);if("value"===l)this.onValueEvent(h,R.cancel,R.context);else{var H={};H[l]=h,this.onChildEvent(H,R.cancel,R.context)}return h},v.prototype.onValueEvent=function(l,h,m){var S=new _s(l,h||null,m||null);this.repo.addEventCallbackForQuery(this,S)},v.prototype.onChildEvent=function(l,h,m){var S=new Lo(l,h,m);this.repo.addEventCallbackForQuery(this,S)},v.prototype.off=function(l,h,m){Z.validateArgCount("Query.off",0,3,arguments.length),On("Query.off",1,l,!0),Z.validateCallback("Query.off",2,h,!0),Z.validateContextObject("Query.off",3,m,!0);var S=null,R=null;if("value"===l){var H=h||null;S=new _s(H,null,m||null)}else l&&(h&&((R={})[l]=h),S=new Lo(R,null,m||null));this.repo.removeEventCallbackForQuery(this,S)},v.prototype.once=function(l,h,m,S){var R=this;Z.validateArgCount("Query.once",1,4,arguments.length),On("Query.once",1,l,!1),Z.validateCallback("Query.once",2,h,!0);var H=v.getCancelAndContextArgs_("Query.once",m,S),z=!0,ue=new Z.Deferred;ue.promise.catch(function(){});var ne=function(Le){z&&(z=!1,R.off(l,ne),h&&h.bind(H.context)(Le),ue.resolve(Le))};return this.on(l,ne,function(Le){R.off(l,ne),H.cancel&&H.cancel.bind(H.context)(Le),ue.reject(Le)}),ue.promise},v.prototype.limitToFirst=function(l){if(Z.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new v(this.repo,this.path,this.queryParams_.limitToFirst(l),this.orderByCalled_)},v.prototype.limitToLast=function(l){if(Z.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new v(this.repo,this.path,this.queryParams_.limitToLast(l),this.orderByCalled_)},v.prototype.orderByChild=function(l){if(Z.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===l)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===l)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===l)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Cn("Query.orderByChild",1,l,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var h=new nt(l);if(h.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var m=new $o(h),S=this.queryParams_.orderBy(m);return v.validateQueryEndpoints_(S),new v(this.repo,this.path,S,!0)},v.prototype.orderByKey=function(){Z.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var l=this.queryParams_.orderBy(We);return v.validateQueryEndpoints_(l),new v(this.repo,this.path,l,!0)},v.prototype.orderByPriority=function(){Z.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var l=this.queryParams_.orderBy(fe);return v.validateQueryEndpoints_(l),new v(this.repo,this.path,l,!0)},v.prototype.orderByValue=function(){Z.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var l=this.queryParams_.orderBy(Lr);return v.validateQueryEndpoints_(l),new v(this.repo,this.path,l,!0)},v.prototype.startAt=function(l,h){void 0===l&&(l=null),Z.validateArgCount("Query.startAt",0,2,arguments.length),Pt("Query.startAt",1,l,this.path,!0),er("Query.startAt",2,h,!0);var m=this.queryParams_.startAt(l,h);if(v.validateLimit_(m),v.validateQueryEndpoints_(m),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===l&&(l=null,h=null),new v(this.repo,this.path,m,this.orderByCalled_)},v.prototype.endAt=function(l,h){void 0===l&&(l=null),Z.validateArgCount("Query.endAt",0,2,arguments.length),Pt("Query.endAt",1,l,this.path,!0),er("Query.endAt",2,h,!0);var m=this.queryParams_.endAt(l,h);if(v.validateLimit_(m),v.validateQueryEndpoints_(m),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new v(this.repo,this.path,m,this.orderByCalled_)},v.prototype.equalTo=function(l,h){if(Z.validateArgCount("Query.equalTo",1,2,arguments.length),Pt("Query.equalTo",1,l,this.path,!1),er("Query.equalTo",2,h,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(l,h).endAt(l,h)},v.prototype.toString=function(){return Z.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},v.prototype.toJSON=function(){return Z.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},v.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},v.prototype.queryIdentifier=function(){var l=this.queryObject(),h=pt(l);return"{}"===h?"default":h},v.prototype.isEqual=function(l){if(Z.validateArgCount("Query.isEqual",1,1,arguments.length),!(l instanceof v)){var h="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(h)}var m=this.repo===l.repo,S=this.path.equals(l.path),R=this.queryIdentifier()===l.queryIdentifier();return m&&S&&R},v.getCancelAndContextArgs_=function(l,h,m){var S={cancel:null,context:null};if(h&&m)S.cancel=h,Z.validateCallback(l,3,S.cancel,!0),S.context=m,Z.validateContextObject(l,4,S.context,!0);else if(h)if("object"==typeof h&&null!==h)S.context=h;else{if("function"!=typeof h)throw new Error(Z.errorPrefix(l,3,!0)+" must either be a cancel callback or a context object.");S.cancel=h}return S},Object.defineProperty(v.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),v}(),bi=function(){function v(l){this.node_=l}return v.prototype.getImmediateChild=function(l){return new v(this.node_.getImmediateChild(l))},v.prototype.node=function(){return this.node_},v}(),ws=function(){function v(l,h){this.syncTree_=l,this.path_=h}return v.prototype.getImmediateChild=function(l){var h=this.path_.child(l);return new v(this.syncTree_,h)},v.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},v}(),po=function(v,l,h){return v&&"object"==typeof v?(Z.assert(".sv"in v,"Unexpected leaf node or priority contents"),"string"==typeof v[".sv"]?Hi(v[".sv"],l,h):"object"==typeof v[".sv"]?ei(v[".sv"],l):void Z.assert(!1,"Unexpected server value: "+JSON.stringify(v,null,2))):v},Hi=function(v,l,h){if("timestamp"===v)return h.timestamp;Z.assert(!1,"Unexpected server value: "+v)},ei=function(v,l,h){v.hasOwnProperty("increment")||Z.assert(!1,"Unexpected server value: "+JSON.stringify(v,null,2));var m=v.increment;"number"!=typeof m&&Z.assert(!1,"Unexpected increment value: "+m);var S=l.node();if(Z.assert(null!=S,"Expected ChildrenNode.EMPTY_NODE for nulls"),!S.isLeafNode())return m;var H=S.getValue();return"number"!=typeof H?m:H+m},Oi=function(v,l,h,m){return Di(l,new ws(h,v),m)},Sn=function(v,l,h){return Di(v,new bi(l),h)};function Di(v,l,h){var R,m=v.getPriority().val(),S=po(m,l.getImmediateChild(".priority"),h);if(v.isLeafNode()){var H=v,z=po(H.getValue(),l,h);return z!==H.getValue()||S!==H.getPriority().val()?new rn(z,bn(S)):v}var ue=v;return R=ue,S!==ue.getPriority().val()&&(R=R.updatePriority(new rn(S))),ue.forEachChild(fe,function(ne,Le){var Ye=Di(Le,l.getImmediateChild(ne),h);Ye!==Le&&(R=R.updateImmediateChild(ne,Ye))}),R}var Fr,go,Yo=function(){function v(){this.value=null,this.children=new Map}return v.prototype.find=function(l){if(null!=this.value)return this.value.getChild(l);if(!l.isEmpty()&&this.children.size>0){var h=l.getFront();return l=l.popFront(),this.children.has(h)?this.children.get(h).find(l):null}return null},v.prototype.remember=function(l,h){if(l.isEmpty())this.value=h,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(l,h);else{var m=l.getFront();this.children.has(m)||this.children.set(m,new v);var S=this.children.get(m);l=l.popFront(),S.remember(l,h)}},v.prototype.forget=function(l){if(l.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var h=this.value;this.value=null;var m=this;return h.forEachChild(fe,function(H,z){m.remember(new nt(H),z)}),this.forget(l)}if(this.children.size>0){var S=l.getFront();return l=l.popFront(),this.children.has(S)&&this.children.get(S).forget(l)&&this.children.delete(S),0===this.children.size}return!0},v.prototype.forEachTree=function(l,h){null!==this.value?h(l,this.value):this.forEachChild(function(m,S){var R=new nt(l.toString()+"/"+m);S.forEachTree(R,h)})},v.prototype.forEachChild=function(l){this.children.forEach(function(h,m){l(m,h)})},v}(),Ir=(()=>(function(v){v[v.OVERWRITE=0]="OVERWRITE",v[v.MERGE=1]="MERGE",v[v.ACK_USER_WRITE=2]="ACK_USER_WRITE",v[v.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ir||(Ir={})),Ir))(),io=function(){function v(l,h,m,S){this.fromUser=l,this.fromServer=h,this.queryId=m,this.tagged=S,Z.assert(!S||h,"Tagged queries must be from server.")}return v.User=new v(!0,!1,null,!1),v.Server=new v(!1,!0,null,!1),v.forServerTaggedQuery=function(l){return new v(!1,!0,l,!0)},v}(),bs=function(){function v(l,h,m){this.path=l,this.affectedTree=h,this.revert=m,this.type=Ir.ACK_USER_WRITE,this.source=io.User}return v.prototype.operationForChild=function(l){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Z.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var h=this.affectedTree.subtree(new nt(l));return new v(nt.Empty,h,this.revert)}return Z.assert(this.path.getFront()===l,"operationForChild called for unrelated child."),new v(this.path.popFront(),this.affectedTree,this.revert)},v}(),kn=function(){function v(l,h){void 0===h&&(Fr||(Fr=new x(ee)),h=Fr),this.value=l,this.children=h}return v.fromObject=function(l){var h=v.Empty;return Pe(l,function(m,S){h=h.set(new nt(m),S)}),h},v.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},v.prototype.findRootMostMatchingPathAndValue=function(l,h){if(null!=this.value&&h(this.value))return{path:nt.Empty,value:this.value};if(l.isEmpty())return null;var m=l.getFront(),S=this.children.get(m);if(null!==S){var R=S.findRootMostMatchingPathAndValue(l.popFront(),h);return null!=R?{path:new nt(m).child(R.path),value:R.value}:null}return null},v.prototype.findRootMostValueAndPath=function(l){return this.findRootMostMatchingPathAndValue(l,function(){return!0})},v.prototype.subtree=function(l){if(l.isEmpty())return this;var h=l.getFront(),m=this.children.get(h);return null!==m?m.subtree(l.popFront()):v.Empty},v.prototype.set=function(l,h){if(l.isEmpty())return new v(h,this.children);var m=l.getFront(),R=(this.children.get(m)||v.Empty).set(l.popFront(),h),H=this.children.insert(m,R);return new v(this.value,H)},v.prototype.remove=function(l){if(l.isEmpty())return this.children.isEmpty()?v.Empty:new v(null,this.children);var h=l.getFront(),m=this.children.get(h);if(m){var S=m.remove(l.popFront()),R=void 0;return R=S.isEmpty()?this.children.remove(h):this.children.insert(h,S),null===this.value&&R.isEmpty()?v.Empty:new v(this.value,R)}return this},v.prototype.get=function(l){if(l.isEmpty())return this.value;var h=l.getFront(),m=this.children.get(h);return m?m.get(l.popFront()):null},v.prototype.setTree=function(l,h){if(l.isEmpty())return h;var H,m=l.getFront(),R=(this.children.get(m)||v.Empty).setTree(l.popFront(),h);return H=R.isEmpty()?this.children.remove(m):this.children.insert(m,R),new v(this.value,H)},v.prototype.fold=function(l){return this.fold_(nt.Empty,l)},v.prototype.fold_=function(l,h){var m={};return this.children.inorderTraversal(function(S,R){m[S]=R.fold_(l.child(S),h)}),h(l,this.value,m)},v.prototype.findOnPath=function(l,h){return this.findOnPath_(l,nt.Empty,h)},v.prototype.findOnPath_=function(l,h,m){var S=!!this.value&&m(h,this.value);if(S)return S;if(l.isEmpty())return null;var R=l.getFront(),H=this.children.get(R);return H?H.findOnPath_(l.popFront(),h.child(R),m):null},v.prototype.foreachOnPath=function(l,h){return this.foreachOnPath_(l,nt.Empty,h)},v.prototype.foreachOnPath_=function(l,h,m){if(l.isEmpty())return this;this.value&&m(h,this.value);var S=l.getFront(),R=this.children.get(S);return R?R.foreachOnPath_(l.popFront(),h.child(S),m):v.Empty},v.prototype.foreach=function(l){this.foreach_(nt.Empty,l)},v.prototype.foreach_=function(l,h){this.children.inorderTraversal(function(m,S){S.foreach_(l.child(m),h)}),this.value&&h(l,this.value)},v.prototype.foreachChild=function(l){this.children.inorderTraversal(function(h,m){m.value&&l(h,m.value)})},v.Empty=new v(null),v}(),Ws=function(){function v(l,h){this.source=l,this.path=h,this.type=Ir.LISTEN_COMPLETE}return v.prototype.operationForChild=function(l){return this.path.isEmpty()?new v(this.source,nt.Empty):new v(this.source,this.path.popFront())},v}(),Xo=function(){function v(l,h,m){this.source=l,this.path=h,this.snap=m,this.type=Ir.OVERWRITE}return v.prototype.operationForChild=function(l){return this.path.isEmpty()?new v(this.source,nt.Empty,this.snap.getImmediateChild(l)):new v(this.source,this.path.popFront(),this.snap)},v}(),hr=function(){function v(l,h,m){this.source=l,this.path=h,this.children=m,this.type=Ir.MERGE}return v.prototype.operationForChild=function(l){if(this.path.isEmpty()){var h=this.children.subtree(new nt(l));return h.isEmpty()?null:h.value?new Xo(this.source,nt.Empty,h.value):new v(this.source,nt.Empty,h)}return Z.assert(this.path.getFront()===l,"Can't get a merge for a child not on the path of the operation"),new v(this.source,this.path.popFront(),this.children)},v.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},v}(),oo=function(){function v(l,h,m){this.node_=l,this.fullyInitialized_=h,this.filtered_=m}return v.prototype.isFullyInitialized=function(){return this.fullyInitialized_},v.prototype.isFiltered=function(){return this.filtered_},v.prototype.isCompleteForPath=function(l){if(l.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var h=l.getFront();return this.isCompleteForChild(h)},v.prototype.isCompleteForChild=function(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)},v.prototype.getNode=function(){return this.node_},v}(),Si=function(){function v(l,h){this.eventCache_=l,this.serverCache_=h}return v.prototype.updateEventSnap=function(l,h,m){return new v(new oo(l,h,m),this.serverCache_)},v.prototype.updateServerSnap=function(l,h,m){return new v(this.eventCache_,new oo(l,h,m))},v.prototype.getEventCache=function(){return this.eventCache_},v.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},v.prototype.getServerCache=function(){return this.serverCache_},v.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},v.Empty=new v(new oo(Bt.EMPTY_NODE,!1,!1),new oo(Bt.EMPTY_NODE,!1,!1)),v}(),Fn=function(){function v(l,h,m,S,R){this.type=l,this.snapshotNode=h,this.childName=m,this.oldSnap=S,this.prevName=R}return v.valueChange=function(l){return new v(v.VALUE,l)},v.childAddedChange=function(l,h){return new v(v.CHILD_ADDED,h,l)},v.childRemovedChange=function(l,h){return new v(v.CHILD_REMOVED,h,l)},v.childChangedChange=function(l,h,m){return new v(v.CHILD_CHANGED,h,l,m)},v.childMovedChange=function(l,h){return new v(v.CHILD_MOVED,h,l)},v.CHILD_ADDED="child_added",v.CHILD_REMOVED="child_removed",v.CHILD_CHANGED="child_changed",v.CHILD_MOVED="child_moved",v.VALUE="value",v}(),Ki=function(){function v(l){this.index_=l}return v.prototype.updateChild=function(l,h,m,S,R,H){Z.assert(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");var z=l.getImmediateChild(h);return z.getChild(S).equals(m.getChild(S))&&z.isEmpty()===m.isEmpty()||(null!=H&&(m.isEmpty()?l.hasChild(h)?H.trackChildChange(Fn.childRemovedChange(h,z)):Z.assert(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):z.isEmpty()?H.trackChildChange(Fn.childAddedChange(h,m)):H.trackChildChange(Fn.childChangedChange(h,m,z))),l.isLeafNode()&&m.isEmpty())?l:l.updateImmediateChild(h,m).withIndex(this.index_)},v.prototype.updateFullNode=function(l,h,m){return null!=m&&(l.isLeafNode()||l.forEachChild(fe,function(S,R){h.hasChild(S)||m.trackChildChange(Fn.childRemovedChange(S,R))}),h.isLeafNode()||h.forEachChild(fe,function(S,R){if(l.hasChild(S)){var H=l.getImmediateChild(S);H.equals(R)||m.trackChildChange(Fn.childChangedChange(S,R,H))}else m.trackChildChange(Fn.childAddedChange(S,R))})),h.withIndex(this.index_)},v.prototype.updatePriority=function(l,h){return l.isEmpty()?Bt.EMPTY_NODE:l.updatePriority(h)},v.prototype.filtersNodes=function(){return!1},v.prototype.getIndexedFilter=function(){return this},v.prototype.getIndex=function(){return this.index_},v}(),Qi=function(){function v(){this.changeMap=new Map}return v.prototype.trackChildChange=function(l){var h=l.type,m=l.childName;Z.assert(h===Fn.CHILD_ADDED||h===Fn.CHILD_CHANGED||h===Fn.CHILD_REMOVED,"Only child changes supported for tracking"),Z.assert(".priority"!==m,"Only non-priority child changes can be tracked.");var S=this.changeMap.get(m);if(S){var R=S.type;if(h===Fn.CHILD_ADDED&&R===Fn.CHILD_REMOVED)this.changeMap.set(m,Fn.childChangedChange(m,l.snapshotNode,S.snapshotNode));else if(h===Fn.CHILD_REMOVED&&R===Fn.CHILD_ADDED)this.changeMap.delete(m);else if(h===Fn.CHILD_REMOVED&&R===Fn.CHILD_CHANGED)this.changeMap.set(m,Fn.childRemovedChange(m,S.oldSnap));else if(h===Fn.CHILD_CHANGED&&R===Fn.CHILD_ADDED)this.changeMap.set(m,Fn.childAddedChange(m,l.snapshotNode));else{if(h!==Fn.CHILD_CHANGED||R!==Fn.CHILD_CHANGED)throw Z.assertionError("Illegal combination of changes: "+l+" occurred after "+S);this.changeMap.set(m,Fn.childChangedChange(m,l.snapshotNode,S.oldSnap))}}else this.changeMap.set(m,l)},v.prototype.getChanges=function(){return Array.from(this.changeMap.values())},v}(),Gi=function(){function v(){}return v.prototype.getCompleteChild=function(l){return null},v.prototype.getChildAfterChild=function(l,h,m){return null},v}(),ls=new Gi,To=function(){function v(l,h,m){void 0===m&&(m=null),this.writes_=l,this.viewCache_=h,this.optCompleteServerCache_=m}return v.prototype.getCompleteChild=function(l){var h=this.viewCache_.getEventCache();if(h.isCompleteForChild(l))return h.getNode().getImmediateChild(l);var m=null!=this.optCompleteServerCache_?new oo(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(l,m)},v.prototype.getChildAfterChild=function(l,h,m){var S=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),R=this.writes_.calcIndexedSlice(S,h,1,m,l);return 0===R.length?null:R[0]},v}(),Jo=function(l,h){this.viewCache=l,this.changes=h},ks=function(){function v(l){this.filter_=l}return v.prototype.assertIndexed=function(l){Z.assert(l.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Z.assert(l.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},v.prototype.applyOperation=function(l,h,m,S){var H,z,R=new Qi;if(h.type===Ir.OVERWRITE){var ue=h;ue.source.fromUser?H=this.applyUserOverwrite_(l,ue.path,ue.snap,m,S,R):(Z.assert(ue.source.fromServer,"Unknown source."),z=ue.source.tagged||l.getServerCache().isFiltered()&&!ue.path.isEmpty(),H=this.applyServerOverwrite_(l,ue.path,ue.snap,m,S,z,R))}else if(h.type===Ir.MERGE){var ne=h;ne.source.fromUser?H=this.applyUserMerge_(l,ne.path,ne.children,m,S,R):(Z.assert(ne.source.fromServer,"Unknown source."),z=ne.source.tagged||l.getServerCache().isFiltered(),H=this.applyServerMerge_(l,ne.path,ne.children,m,S,z,R))}else if(h.type===Ir.ACK_USER_WRITE){var Le=h;H=Le.revert?this.revertUserWrite_(l,Le.path,m,S,R):this.ackUserWrite_(l,Le.path,Le.affectedTree,m,S,R)}else{if(h.type!==Ir.LISTEN_COMPLETE)throw Z.assertionError("Unknown operation type: "+h.type);H=this.listenComplete_(l,h.path,m,R)}var Ye=R.getChanges();return v.maybeAddValueEvent_(l,H,Ye),new Jo(H,Ye)},v.maybeAddValueEvent_=function(l,h,m){var S=h.getEventCache();if(S.isFullyInitialized()){var R=S.getNode().isLeafNode()||S.getNode().isEmpty(),H=l.getCompleteEventSnap();(m.length>0||!l.getEventCache().isFullyInitialized()||R&&!S.getNode().equals(H)||!S.getNode().getPriority().equals(H.getPriority()))&&m.push(Fn.valueChange(h.getCompleteEventSnap()))}},v.prototype.generateEventCacheAfterServerEvent_=function(l,h,m,S,R){var H=l.getEventCache();if(null!=m.shadowingWrite(h))return l;var z=void 0,ue=void 0;if(h.isEmpty())if(Z.assert(l.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),l.getServerCache().isFiltered()){var ne=l.getCompleteServerSnap(),Ye=m.calcCompleteEventChildren(ne instanceof Bt?ne:Bt.EMPTY_NODE);z=this.filter_.updateFullNode(l.getEventCache().getNode(),Ye,R)}else{var Ke=m.calcCompleteEventCache(l.getCompleteServerSnap());z=this.filter_.updateFullNode(l.getEventCache().getNode(),Ke,R)}else{var Et=h.getFront();if(".priority"===Et){Z.assert(1===h.getLength(),"Can't have a priority with additional path components");var Kt=H.getNode();ue=l.getServerCache().getNode();var Yt=m.calcEventCacheAfterServerOverwrite(h,Kt,ue);z=null!=Yt?this.filter_.updatePriority(Kt,Yt):H.getNode()}else{var Mn=h.popFront(),ar=void 0;if(H.isCompleteForChild(Et)){ue=l.getServerCache().getNode();var Li=m.calcEventCacheAfterServerOverwrite(h,H.getNode(),ue);ar=null!=Li?H.getNode().getImmediateChild(Et).updateChild(Mn,Li):H.getNode().getImmediateChild(Et)}else ar=m.calcCompleteChild(Et,l.getServerCache());z=null!=ar?this.filter_.updateChild(H.getNode(),Et,ar,Mn,S,R):H.getNode()}}return l.updateEventSnap(z,H.isFullyInitialized()||h.isEmpty(),this.filter_.filtersNodes())},v.prototype.applyServerOverwrite_=function(l,h,m,S,R,H,z){var ne,ue=l.getServerCache(),Le=H?this.filter_:this.filter_.getIndexedFilter();if(h.isEmpty())ne=Le.updateFullNode(ue.getNode(),m,null);else if(Le.filtersNodes()&&!ue.isFiltered()){var Ye=ue.getNode().updateChild(h,m);ne=Le.updateFullNode(ue.getNode(),Ye,null)}else{var Ke=h.getFront();if(!ue.isCompleteForPath(h)&&h.getLength()>1)return l;var Et=h.popFront(),Yt=ue.getNode().getImmediateChild(Ke).updateChild(Et,m);ne=".priority"===Ke?Le.updatePriority(ue.getNode(),Yt):Le.updateChild(ue.getNode(),Ke,Yt,Et,ls,null)}var Mn=l.updateServerSnap(ne,ue.isFullyInitialized()||h.isEmpty(),Le.filtersNodes()),ar=new To(S,Mn,R);return this.generateEventCacheAfterServerEvent_(Mn,h,S,ar,z)},v.prototype.applyUserOverwrite_=function(l,h,m,S,R,H){var ue,ne,z=l.getEventCache(),Le=new To(S,l,R);if(h.isEmpty())ne=this.filter_.updateFullNode(l.getEventCache().getNode(),m,H),ue=l.updateEventSnap(ne,!0,this.filter_.filtersNodes());else{var Ye=h.getFront();if(".priority"===Ye)ne=this.filter_.updatePriority(l.getEventCache().getNode(),m),ue=l.updateEventSnap(ne,z.isFullyInitialized(),z.isFiltered());else{var Ke=h.popFront(),Et=z.getNode().getImmediateChild(Ye),Kt=void 0;if(Ke.isEmpty())Kt=m;else{var Yt=Le.getCompleteChild(Ye);Kt=null!=Yt?".priority"===Ke.getBack()&&Yt.getChild(Ke.parent()).isEmpty()?Yt:Yt.updateChild(Ke,m):Bt.EMPTY_NODE}if(Et.equals(Kt))ue=l;else{var Mn=this.filter_.updateChild(z.getNode(),Ye,Kt,Ke,Le,H);ue=l.updateEventSnap(Mn,z.isFullyInitialized(),this.filter_.filtersNodes())}}}return ue},v.cacheHasChild_=function(l,h){return l.getEventCache().isCompleteForChild(h)},v.prototype.applyUserMerge_=function(l,h,m,S,R,H){var z=this,ue=l;return m.foreach(function(ne,Le){var Ye=h.child(ne);v.cacheHasChild_(l,Ye.getFront())&&(ue=z.applyUserOverwrite_(ue,Ye,Le,S,R,H))}),m.foreach(function(ne,Le){var Ye=h.child(ne);v.cacheHasChild_(l,Ye.getFront())||(ue=z.applyUserOverwrite_(ue,Ye,Le,S,R,H))}),ue},v.prototype.applyMerge_=function(l,h){return h.foreach(function(m,S){l=l.updateChild(m,S)}),l},v.prototype.applyServerMerge_=function(l,h,m,S,R,H,z){var ue=this;if(l.getServerCache().getNode().isEmpty()&&!l.getServerCache().isFullyInitialized())return l;var Le,ne=l;Le=h.isEmpty()?m:kn.Empty.setTree(h,m);var Ye=l.getServerCache().getNode();return Le.children.inorderTraversal(function(Ke,Et){if(Ye.hasChild(Ke)){var Kt=l.getServerCache().getNode().getImmediateChild(Ke),Yt=ue.applyMerge_(Kt,Et);ne=ue.applyServerOverwrite_(ne,new nt(Ke),Yt,S,R,H,z)}}),Le.children.inorderTraversal(function(Ke,Et){var Kt=!l.getServerCache().isCompleteForChild(Ke)&&null==Et.value;if(!Ye.hasChild(Ke)&&!Kt){var Yt=l.getServerCache().getNode().getImmediateChild(Ke),Mn=ue.applyMerge_(Yt,Et);ne=ue.applyServerOverwrite_(ne,new nt(Ke),Mn,S,R,H,z)}}),ne},v.prototype.ackUserWrite_=function(l,h,m,S,R,H){if(null!=S.shadowingWrite(h))return l;var z=l.getServerCache().isFiltered(),ue=l.getServerCache();if(null!=m.value){if(h.isEmpty()&&ue.isFullyInitialized()||ue.isCompleteForPath(h))return this.applyServerOverwrite_(l,h,ue.getNode().getChild(h),S,R,z,H);if(h.isEmpty()){var ne=kn.Empty;return ue.getNode().forEachChild(We,function(Ye,Ke){ne=ne.set(new nt(Ye),Ke)}),this.applyServerMerge_(l,h,ne,S,R,z,H)}return l}var Le=kn.Empty;return m.foreach(function(Ye,Ke){var Et=h.child(Ye);ue.isCompleteForPath(Et)&&(Le=Le.set(Ye,ue.getNode().getChild(Et)))}),this.applyServerMerge_(l,h,Le,S,R,z,H)},v.prototype.listenComplete_=function(l,h,m,S){var R=l.getServerCache(),H=l.updateServerSnap(R.getNode(),R.isFullyInitialized()||h.isEmpty(),R.isFiltered());return this.generateEventCacheAfterServerEvent_(H,h,m,ls,S)},v.prototype.revertUserWrite_=function(l,h,m,S,R){var H;if(null!=m.shadowingWrite(h))return l;var z=new To(m,l,S),ue=l.getEventCache().getNode(),ne=void 0;if(h.isEmpty()||".priority"===h.getFront()){var Le=void 0;if(l.getServerCache().isFullyInitialized())Le=m.calcCompleteEventCache(l.getCompleteServerSnap());else{var Ye=l.getServerCache().getNode();Z.assert(Ye instanceof Bt,"serverChildren would be complete if leaf node"),Le=m.calcCompleteEventChildren(Ye)}ne=this.filter_.updateFullNode(ue,Le=Le,R)}else{var Ke=h.getFront(),Et=m.calcCompleteChild(Ke,l.getServerCache());null==Et&&l.getServerCache().isCompleteForChild(Ke)&&(Et=ue.getImmediateChild(Ke)),(ne=null!=Et?this.filter_.updateChild(ue,Ke,Et,h.popFront(),z,R):l.getEventCache().getNode().hasChild(Ke)?this.filter_.updateChild(ue,Ke,Bt.EMPTY_NODE,h.popFront(),z,R):ue).isEmpty()&&l.getServerCache().isFullyInitialized()&&(H=m.calcCompleteEventCache(l.getCompleteServerSnap())).isLeafNode()&&(ne=this.filter_.updateFullNode(ne,H,R))}return H=l.getServerCache().isFullyInitialized()||null!=m.shadowingWrite(nt.Empty),l.updateEventSnap(ne,H,this.filter_.filtersNodes())},v}(),Ar=function(){function v(l){this.query_=l,this.index_=this.query_.getQueryParams().getIndex()}return v.prototype.generateEventsForChanges=function(l,h,m){var S=this,R=[],H=[];return l.forEach(function(z){z.type===Fn.CHILD_CHANGED&&S.index_.indexedValueChanged(z.oldSnap,z.snapshotNode)&&H.push(Fn.childMovedChange(z.childName,z.snapshotNode))}),this.generateEventsForType_(R,Fn.CHILD_REMOVED,l,m,h),this.generateEventsForType_(R,Fn.CHILD_ADDED,l,m,h),this.generateEventsForType_(R,Fn.CHILD_MOVED,H,m,h),this.generateEventsForType_(R,Fn.CHILD_CHANGED,l,m,h),this.generateEventsForType_(R,Fn.VALUE,l,m,h),R},v.prototype.generateEventsForType_=function(l,h,m,S,R){var H=this,z=m.filter(function(ue){return ue.type===h});z.sort(this.compareChanges_.bind(this)),z.forEach(function(ue){var ne=H.materializeSingleChange_(ue,R);S.forEach(function(Le){Le.respondsTo(ue.type)&&l.push(Le.createEvent(ne,H.query_))})})},v.prototype.materializeSingleChange_=function(l,h){return"value"===l.type||"child_removed"===l.type||(l.prevName=h.getPredecessorChildName(l.childName,l.snapshotNode,this.index_)),l},v.prototype.compareChanges_=function(l,h){if(null==l.childName||null==h.childName)throw Z.assertionError("Should only compare child_ events.");var m=new de(l.childName,l.snapshotNode),S=new de(h.childName,h.snapshotNode);return this.index_.compare(m,S)},v}(),Pn=function(){function v(l,h){this.query_=l,this.eventRegistrations_=[];var m=this.query_.getQueryParams(),S=new Ki(m.getIndex()),R=m.getNodeFilter();this.processor_=new ks(R);var H=h.getServerCache(),z=h.getEventCache(),ue=S.updateFullNode(Bt.EMPTY_NODE,H.getNode(),null),ne=R.updateFullNode(Bt.EMPTY_NODE,z.getNode(),null),Le=new oo(ue,H.isFullyInitialized(),S.filtersNodes()),Ye=new oo(ne,z.isFullyInitialized(),R.filtersNodes());this.viewCache_=new Si(Ye,Le),this.eventGenerator_=new Ar(this.query_)}return v.prototype.getQuery=function(){return this.query_},v.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},v.prototype.getCompleteServerCache=function(l){var h=this.viewCache_.getCompleteServerSnap();return h&&(this.query_.getQueryParams().loadsAllData()||!l.isEmpty()&&!h.getImmediateChild(l.getFront()).isEmpty())?h.getChild(l):null},v.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},v.prototype.addEventRegistration=function(l){this.eventRegistrations_.push(l)},v.prototype.removeEventRegistration=function(l,h){var m=[];if(h){Z.assert(null==l,"A cancel should cancel all event registrations.");var S=this.query_.path;this.eventRegistrations_.forEach(function(ue){var ne=ue.createCancelEvent(h=h,S);ne&&m.push(ne)})}if(l){for(var R=[],H=0;H<this.eventRegistrations_.length;++H){var z=this.eventRegistrations_[H];if(z.matches(l)){if(l.hasAnyCallback()){R=R.concat(this.eventRegistrations_.slice(H+1));break}}else R.push(z)}this.eventRegistrations_=R}else this.eventRegistrations_=[];return m},v.prototype.applyOperation=function(l,h,m){l.type===Ir.MERGE&&null!==l.source.queryId&&(Z.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Z.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var S=this.viewCache_,R=this.processor_.applyOperation(S,l,h,m);return this.processor_.assertIndexed(R.viewCache),Z.assert(R.viewCache.getServerCache().isFullyInitialized()||!S.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=R.viewCache,this.generateEventsForChanges_(R.changes,R.viewCache.getEventCache().getNode(),null)},v.prototype.getInitialEvents=function(l){var h=this.viewCache_.getEventCache(),m=[];return h.getNode().isLeafNode()||h.getNode().forEachChild(fe,function(R,H){m.push(Fn.childAddedChange(R,H))}),h.isFullyInitialized()&&m.push(Fn.valueChange(h.getNode())),this.generateEventsForChanges_(m,h.getNode(),l)},v.prototype.generateEventsForChanges_=function(l,h,m){return this.eventGenerator_.generateEventsForChanges(l,h,m?[m]:this.eventRegistrations_)},v}(),Es=function(){function v(){this.views=new Map}return Object.defineProperty(v,"__referenceConstructor",{get:function(){return Z.assert(go,"Reference.ts has not been loaded"),go},set:function(l){Z.assert(!go,"__referenceConstructor has already been defined"),go=l},enumerable:!1,configurable:!0}),v.prototype.isEmpty=function(){return 0===this.views.size},v.prototype.applyOperation=function(l,h,m){var S,R,H=l.source.queryId;if(null!==H){var z=this.views.get(H);return Z.assert(null!=z,"SyncTree gave us an op for an invalid query."),z.applyOperation(l,h,m)}var ue=[];try{for(var ne=Q.__values(this.views.values()),Le=ne.next();!Le.done;Le=ne.next())ue=ue.concat((z=Le.value).applyOperation(l,h,m))}catch(Ye){S={error:Ye}}finally{try{Le&&!Le.done&&(R=ne.return)&&R.call(ne)}finally{if(S)throw S.error}}return ue},v.prototype.addEventRegistration=function(l,h,m,S,R){var H=l.queryIdentifier(),z=this.views.get(H);if(!z){var ue=m.calcCompleteEventCache(R?S:null),ne=!1;ue?ne=!0:S instanceof Bt?(ue=m.calcCompleteEventChildren(S),ne=!1):(ue=Bt.EMPTY_NODE,ne=!1);var Le=new Si(new oo(ue,ne,!1),new oo(S,R,!1));z=new Pn(l,Le),this.views.set(H,z)}return z.addEventRegistration(h),z.getInitialEvents(h)},v.prototype.removeEventRegistration=function(l,h,m){var S,R,H=l.queryIdentifier(),z=[],ue=[],ne=this.hasCompleteView();if("default"===H)try{for(var Le=Q.__values(this.views.entries()),Ye=Le.next();!Ye.done;Ye=Le.next()){var Kt,Ke=Q.__read(Ye.value,2),Et=Ke[0];ue=ue.concat((Kt=Ke[1]).removeEventRegistration(h,m)),Kt.isEmpty()&&(this.views.delete(Et),Kt.getQuery().getQueryParams().loadsAllData()||z.push(Kt.getQuery()))}}catch(Yt){S={error:Yt}}finally{try{Ye&&!Ye.done&&(R=Le.return)&&R.call(Le)}finally{if(S)throw S.error}}else(Kt=this.views.get(H))&&(ue=ue.concat(Kt.removeEventRegistration(h,m)),Kt.isEmpty()&&(this.views.delete(H),Kt.getQuery().getQueryParams().loadsAllData()||z.push(Kt.getQuery())));return ne&&!this.hasCompleteView()&&z.push(new v.__referenceConstructor(l.repo,l.path)),{removed:z,events:ue}},v.prototype.getQueryViews=function(){var l,h,m=[];try{for(var S=Q.__values(this.views.values()),R=S.next();!R.done;R=S.next()){var H=R.value;H.getQuery().getQueryParams().loadsAllData()||m.push(H)}}catch(z){l={error:z}}finally{try{R&&!R.done&&(h=S.return)&&h.call(S)}finally{if(l)throw l.error}}return m},v.prototype.getCompleteServerCache=function(l){var h,m,S=null;try{for(var R=Q.__values(this.views.values()),H=R.next();!H.done;H=R.next())S=S||H.value.getCompleteServerCache(l)}catch(ue){h={error:ue}}finally{try{H&&!H.done&&(m=R.return)&&m.call(R)}finally{if(h)throw h.error}}return S},v.prototype.viewForQuery=function(l){if(l.getQueryParams().loadsAllData())return this.getCompleteView();var m=l.queryIdentifier();return this.views.get(m)},v.prototype.viewExistsForQuery=function(l){return null!=this.viewForQuery(l)},v.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},v.prototype.getCompleteView=function(){var l,h;try{for(var m=Q.__values(this.views.values()),S=m.next();!S.done;S=m.next()){var R=S.value;if(R.getQuery().getQueryParams().loadsAllData())return R}}catch(H){l={error:H}}finally{try{S&&!S.done&&(h=m.return)&&h.call(m)}finally{if(l)throw l.error}}return null},v}(),si=function(){function v(l){this.writeTree_=l}return v.prototype.addWrite=function(l,h){if(l.isEmpty())return new v(new kn(h));var m=this.writeTree_.findRootMostValueAndPath(l);if(null!=m){var S=m.path,R=m.value,H=nt.relativePath(S,l);return R=R.updateChild(H,h),new v(this.writeTree_.set(S,R))}var z=new kn(h);return new v(this.writeTree_.setTree(l,z))},v.prototype.addWrites=function(l,h){var m=this;return Pe(h,function(S,R){m=m.addWrite(l.child(S),R)}),m},v.prototype.removeWrite=function(l){return l.isEmpty()?v.Empty:new v(this.writeTree_.setTree(l,kn.Empty))},v.prototype.hasCompleteWrite=function(l){return null!=this.getCompleteNode(l)},v.prototype.getCompleteNode=function(l){var h=this.writeTree_.findRootMostValueAndPath(l);return null!=h?this.writeTree_.get(h.path).getChild(nt.relativePath(h.path,l)):null},v.prototype.getCompleteChildren=function(){var l=[],h=this.writeTree_.value;return null!=h?h.isLeafNode()||h.forEachChild(fe,function(m,S){l.push(new de(m,S))}):this.writeTree_.children.inorderTraversal(function(m,S){null!=S.value&&l.push(new de(m,S.value))}),l},v.prototype.childCompoundWrite=function(l){if(l.isEmpty())return this;var h=this.getCompleteNode(l);return new v(null!=h?new kn(h):this.writeTree_.subtree(l))},v.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},v.prototype.apply=function(l){return j(nt.Empty,this.writeTree_,l)},v.Empty=new v(new kn(null)),v}();function j(v,l,h){if(null!=l.value)return h.updateChild(v,l.value);var m=null;return l.children.inorderTraversal(function(S,R){".priority"===S?(Z.assert(null!==R.value,"Priority writes must always be leaf nodes"),m=R.value):h=j(v.child(S),R,h)}),!h.getChild(v).isEmpty()&&null!==m&&(h=h.updateChild(v.child(".priority"),m)),h}var L=function(){function v(){this.visibleWrites_=si.Empty,this.allWrites_=[],this.lastWriteId_=-1}return v.prototype.childWrites=function(l){return new K(l,this)},v.prototype.addOverwrite=function(l,h,m,S){Z.assert(m>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===S&&(S=!0),this.allWrites_.push({path:l,snap:h,writeId:m,visible:S}),S&&(this.visibleWrites_=this.visibleWrites_.addWrite(l,h)),this.lastWriteId_=m},v.prototype.addMerge=function(l,h,m){Z.assert(m>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:l,children:h,writeId:m,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(l,h),this.lastWriteId_=m},v.prototype.getWrite=function(l){for(var h=0;h<this.allWrites_.length;h++){var m=this.allWrites_[h];if(m.writeId===l)return m}return null},v.prototype.removeWrite=function(l){var h=this,m=this.allWrites_.findIndex(function(Le){return Le.writeId===l});Z.assert(m>=0,"removeWrite called with nonexistent writeId.");var S=this.allWrites_[m];this.allWrites_.splice(m,1);for(var R=S.visible,H=!1,z=this.allWrites_.length-1;R&&z>=0;){var ue=this.allWrites_[z];ue.visible&&(z>=m&&this.recordContainsPath_(ue,S.path)?R=!1:S.path.contains(ue.path)&&(H=!0)),z--}return!!R&&(H?(this.resetTree_(),!0):(S.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(S.path):Pe(S.children,function(Le){h.visibleWrites_=h.visibleWrites_.removeWrite(S.path.child(Le))}),!0))},v.prototype.getCompleteWriteData=function(l){return this.visibleWrites_.getCompleteNode(l)},v.prototype.calcCompleteEventCache=function(l,h,m,S){if(m||S){var ue=this.visibleWrites_.childCompoundWrite(l);return!S&&ue.isEmpty()?h:S||null!=h||ue.hasCompleteWrite(nt.Empty)?v.layerTree_(this.allWrites_,function(Ke){return(Ke.visible||S)&&(!m||!~m.indexOf(Ke.writeId))&&(Ke.path.contains(l)||l.contains(Ke.path))},l).apply(h||Bt.EMPTY_NODE):null}var R=this.visibleWrites_.getCompleteNode(l);if(null!=R)return R;var H=this.visibleWrites_.childCompoundWrite(l);return H.isEmpty()?h:null!=h||H.hasCompleteWrite(nt.Empty)?H.apply(h||Bt.EMPTY_NODE):null},v.prototype.calcCompleteEventChildren=function(l,h){var m=Bt.EMPTY_NODE,S=this.visibleWrites_.getCompleteNode(l);if(S)return S.isLeafNode()||S.forEachChild(fe,function(z,ue){m=m.updateImmediateChild(z,ue)}),m;if(h){var R=this.visibleWrites_.childCompoundWrite(l);return h.forEachChild(fe,function(z,ue){var ne=R.childCompoundWrite(new nt(z)).apply(ue);m=m.updateImmediateChild(z,ne)}),R.getCompleteChildren().forEach(function(z){m=m.updateImmediateChild(z.name,z.node)}),m}return this.visibleWrites_.childCompoundWrite(l).getCompleteChildren().forEach(function(z){m=m.updateImmediateChild(z.name,z.node)}),m},v.prototype.calcEventCacheAfterServerOverwrite=function(l,h,m,S){Z.assert(m||S,"Either existingEventSnap or existingServerSnap must exist");var R=l.child(h);if(this.visibleWrites_.hasCompleteWrite(R))return null;var H=this.visibleWrites_.childCompoundWrite(R);return H.isEmpty()?S.getChild(h):H.apply(S.getChild(h))},v.prototype.calcCompleteChild=function(l,h,m){var S=l.child(h),R=this.visibleWrites_.getCompleteNode(S);return null!=R?R:m.isCompleteForChild(h)?this.visibleWrites_.childCompoundWrite(S).apply(m.getNode().getImmediateChild(h)):null},v.prototype.shadowingWrite=function(l){return this.visibleWrites_.getCompleteNode(l)},v.prototype.calcIndexedSlice=function(l,h,m,S,R,H){var z,ue=this.visibleWrites_.childCompoundWrite(l),ne=ue.getCompleteNode(nt.Empty);if(null!=ne)z=ne;else{if(null==h)return[];z=ue.apply(h)}if((z=z.withIndex(H)).isEmpty()||z.isLeafNode())return[];for(var Le=[],Ye=H.getCompare(),Ke=R?z.getReverseIteratorFrom(m,H):z.getIteratorFrom(m,H),Et=Ke.getNext();Et&&Le.length<S;)0!==Ye(Et,m)&&Le.push(Et),Et=Ke.getNext();return Le},v.prototype.recordContainsPath_=function(l,h){if(l.snap)return l.path.contains(h);for(var m in l.children)if(l.children.hasOwnProperty(m)&&l.path.child(m).contains(h))return!0;return!1},v.prototype.resetTree_=function(){this.visibleWrites_=v.layerTree_(this.allWrites_,v.DefaultFilter_,nt.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},v.DefaultFilter_=function(l){return l.visible},v.layerTree_=function(l,h,m){for(var S=si.Empty,R=0;R<l.length;++R){var H=l[R];if(h(H)){var z=H.path,ue=void 0;if(H.snap)m.contains(z)?(ue=nt.relativePath(m,z),S=S.addWrite(ue,H.snap)):z.contains(m)&&(ue=nt.relativePath(z,m),S=S.addWrite(nt.Empty,H.snap.getChild(ue)));else{if(!H.children)throw Z.assertionError("WriteRecord should have .snap or .children");if(m.contains(z))ue=nt.relativePath(m,z),S=S.addWrites(ue,H.children);else if(z.contains(m))if((ue=nt.relativePath(z,m)).isEmpty())S=S.addWrites(nt.Empty,H.children);else{var ne=Z.safeGet(H.children,ue.getFront());if(ne){var Le=ne.getChild(ue.popFront());S=S.addWrite(nt.Empty,Le)}}}}}return S},v}(),K=function(){function v(l,h){this.treePath_=l,this.writeTree_=h}return v.prototype.calcCompleteEventCache=function(l,h,m){return this.writeTree_.calcCompleteEventCache(this.treePath_,l,h,m)},v.prototype.calcCompleteEventChildren=function(l){return this.writeTree_.calcCompleteEventChildren(this.treePath_,l)},v.prototype.calcEventCacheAfterServerOverwrite=function(l,h,m){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,l,h,m)},v.prototype.shadowingWrite=function(l){return this.writeTree_.shadowingWrite(this.treePath_.child(l))},v.prototype.calcIndexedSlice=function(l,h,m,S,R){return this.writeTree_.calcIndexedSlice(this.treePath_,l,h,m,S,R)},v.prototype.calcCompleteChild=function(l,h){return this.writeTree_.calcCompleteChild(this.treePath_,l,h)},v.prototype.child=function(l){return new v(this.treePath_.child(l),this.writeTree_)},v}(),le=function(){function v(l){this.listenProvider_=l,this.syncPointTree_=kn.Empty,this.pendingWriteTree_=new L,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return v.prototype.applyUserOverwrite=function(l,h,m,S){return this.pendingWriteTree_.addOverwrite(l,h,m,S),S?this.applyOperationToSyncPoints_(new Xo(io.User,l,h)):[]},v.prototype.applyUserMerge=function(l,h,m){this.pendingWriteTree_.addMerge(l,h,m);var S=kn.fromObject(h);return this.applyOperationToSyncPoints_(new hr(io.User,l,S))},v.prototype.ackUserWrite=function(l,h){void 0===h&&(h=!1);var m=this.pendingWriteTree_.getWrite(l);if(this.pendingWriteTree_.removeWrite(l)){var R=kn.Empty;return null!=m.snap?R=R.set(nt.Empty,!0):Pe(m.children,function(H,z){R=R.set(new nt(H),z)}),this.applyOperationToSyncPoints_(new bs(m.path,R,h))}return[]},v.prototype.applyServerOverwrite=function(l,h){return this.applyOperationToSyncPoints_(new Xo(io.Server,l,h))},v.prototype.applyServerMerge=function(l,h){var m=kn.fromObject(h);return this.applyOperationToSyncPoints_(new hr(io.Server,l,m))},v.prototype.applyListenComplete=function(l){return this.applyOperationToSyncPoints_(new Ws(io.Server,l))},v.prototype.applyTaggedQueryOverwrite=function(l,h,m){var S=this.queryKeyForTag_(m);if(null!=S){var R=v.parseQueryKey_(S),H=R.path,z=R.queryId,ue=nt.relativePath(H,l),ne=new Xo(io.forServerTaggedQuery(z),ue,h);return this.applyTaggedOperation_(H,ne)}return[]},v.prototype.applyTaggedQueryMerge=function(l,h,m){var S=this.queryKeyForTag_(m);if(S){var R=v.parseQueryKey_(S),H=R.path,z=R.queryId,ue=nt.relativePath(H,l),ne=kn.fromObject(h),Le=new hr(io.forServerTaggedQuery(z),ue,ne);return this.applyTaggedOperation_(H,Le)}return[]},v.prototype.applyTaggedListenComplete=function(l,h){var m=this.queryKeyForTag_(h);if(m){var S=v.parseQueryKey_(m),R=S.path,H=S.queryId,z=nt.relativePath(R,l),ue=new Ws(io.forServerTaggedQuery(H),z);return this.applyTaggedOperation_(R,ue)}return[]},v.prototype.addEventRegistration=function(l,h){var m=l.path,S=null,R=!1;this.syncPointTree_.foreachOnPath(m,function(Yt,Mn){var ar=nt.relativePath(Yt,m);S=S||Mn.getCompleteServerCache(ar),R=R||Mn.hasCompleteView()});var z,H=this.syncPointTree_.get(m);H?(R=R||H.hasCompleteView(),S=S||H.getCompleteServerCache(nt.Empty)):(H=new Es,this.syncPointTree_=this.syncPointTree_.set(m,H)),null!=S?z=!0:(z=!1,S=Bt.EMPTY_NODE,this.syncPointTree_.subtree(m).foreachChild(function(Yt,Mn){var ar=Mn.getCompleteServerCache(nt.Empty);ar&&(S=S.updateImmediateChild(Yt,ar))}));var ne=H.viewExistsForQuery(l);if(!ne&&!l.getQueryParams().loadsAllData()){var Le=v.makeQueryKey_(l);Z.assert(!this.queryToTagMap.has(Le),"View does not exist, but we have a tag");var Ye=v.getNextQueryTag_();this.queryToTagMap.set(Le,Ye),this.tagToQueryMap.set(Ye,Le)}var Ke=this.pendingWriteTree_.childWrites(m),Et=H.addEventRegistration(l,h,Ke,S,z);if(!ne&&!R){var Kt=H.viewForQuery(l);Et=Et.concat(this.setupListener_(l,Kt))}return Et},v.prototype.removeEventRegistration=function(l,h,m){var S=this,R=l.path,H=this.syncPointTree_.get(R),z=[];if(H&&("default"===l.queryIdentifier()||H.viewExistsForQuery(l))){var ue=H.removeEventRegistration(l,h,m);H.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(R));var ne=ue.removed;z=ue.events;var Le=-1!==ne.findIndex(function(Ii){return Ii.getQueryParams().loadsAllData()}),Ye=this.syncPointTree_.findOnPath(R,function(Ii,yi){return yi.hasCompleteView()});if(Le&&!Ye){var Ke=this.syncPointTree_.subtree(R);if(!Ke.isEmpty())for(var Et=this.collectDistinctViewsForSubTree_(Ke),Kt=0;Kt<Et.length;++Kt){var Yt=Et[Kt],Mn=Yt.getQuery(),ar=this.createListenerForView_(Yt);this.listenProvider_.startListening(v.queryForListening_(Mn),this.tagForQuery_(Mn),ar.hashFn,ar.onComplete)}}!Ye&&ne.length>0&&!m&&(Le?this.listenProvider_.stopListening(v.queryForListening_(l),null):ne.forEach(function(Ii){var yi=S.queryToTagMap.get(v.makeQueryKey_(Ii));S.listenProvider_.stopListening(v.queryForListening_(Ii),yi)})),this.removeTags_(ne)}return z},v.prototype.calcCompleteEventCache=function(l,h){var S=this.pendingWriteTree_,R=this.syncPointTree_.findOnPath(l,function(H,z){var ue=nt.relativePath(H,l),ne=z.getCompleteServerCache(ue);if(ne)return ne});return S.calcCompleteEventCache(l,R,h,!0)},v.prototype.collectDistinctViewsForSubTree_=function(l){return l.fold(function(h,m,S){if(m&&m.hasCompleteView())return[m.getCompleteView()];var H=[];return m&&(H=m.getQueryViews()),Pe(S,function(z,ue){H=H.concat(ue)}),H})},v.prototype.removeTags_=function(l){for(var h=0;h<l.length;++h){var m=l[h];if(!m.getQueryParams().loadsAllData()){var S=v.makeQueryKey_(m),R=this.queryToTagMap.get(S);this.queryToTagMap.delete(S),this.tagToQueryMap.delete(R)}}},v.queryForListening_=function(l){return l.getQueryParams().loadsAllData()&&!l.getQueryParams().isDefault()?l.getRef():l},v.prototype.setupListener_=function(l,h){var m=l.path,S=this.tagForQuery_(l),R=this.createListenerForView_(h),H=this.listenProvider_.startListening(v.queryForListening_(l),S,R.hashFn,R.onComplete),z=this.syncPointTree_.subtree(m);if(S)Z.assert(!z.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var ue=z.fold(function(Ye,Ke,Et){if(!Ye.isEmpty()&&Ke&&Ke.hasCompleteView())return[Ke.getCompleteView().getQuery()];var Kt=[];return Ke&&(Kt=Kt.concat(Ke.getQueryViews().map(function(Yt){return Yt.getQuery()}))),Pe(Et,function(Yt,Mn){Kt=Kt.concat(Mn)}),Kt}),ne=0;ne<ue.length;++ne){var Le=ue[ne];this.listenProvider_.stopListening(v.queryForListening_(Le),this.tagForQuery_(Le))}return H},v.prototype.createListenerForView_=function(l){var h=this,m=l.getQuery(),S=this.tagForQuery_(m);return{hashFn:function(){return(l.getServerCache()||Bt.EMPTY_NODE).hash()},onComplete:function(R){if("ok"===R)return S?h.applyTaggedListenComplete(m.path,S):h.applyListenComplete(m.path);var H=function(v,l){var h="Unknown Error";"too_big"===v?h="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===v?h="Client doesn't have permission to access the desired data.":"unavailable"===v&&(h="The service is unavailable");var m=new Error(v+" at "+l.path.toString()+": "+h);return m.code=v.toUpperCase(),m}(R,m);return h.removeEventRegistration(m,null,H)}}},v.makeQueryKey_=function(l){return l.path.toString()+"$"+l.queryIdentifier()},v.parseQueryKey_=function(l){var h=l.indexOf("$");return Z.assert(-1!==h&&h<l.length-1,"Bad queryKey."),{queryId:l.substr(h+1),path:new nt(l.substr(0,h))}},v.prototype.queryKeyForTag_=function(l){return this.tagToQueryMap.get(l)},v.prototype.tagForQuery_=function(l){var h=v.makeQueryKey_(l);return this.queryToTagMap.get(h)},v.getNextQueryTag_=function(){return v.nextQueryTag_++},v.prototype.applyTaggedOperation_=function(l,h){var m=this.syncPointTree_.get(l);Z.assert(m,"Missing sync point for query tag that we're tracking");var S=this.pendingWriteTree_.childWrites(l);return m.applyOperation(h,S,null)},v.prototype.applyOperationToSyncPoints_=function(l){return this.applyOperationHelper_(l,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(nt.Empty))},v.prototype.applyOperationHelper_=function(l,h,m,S){if(l.path.isEmpty())return this.applyOperationDescendantsHelper_(l,h,m,S);var R=h.get(nt.Empty);null==m&&null!=R&&(m=R.getCompleteServerCache(nt.Empty));var H=[],z=l.path.getFront(),ue=l.operationForChild(z),ne=h.children.get(z);if(ne&&ue){var Le=m?m.getImmediateChild(z):null,Ye=S.child(z);H=H.concat(this.applyOperationHelper_(ue,ne,Le,Ye))}return R&&(H=H.concat(R.applyOperation(l,S,m))),H},v.prototype.applyOperationDescendantsHelper_=function(l,h,m,S){var R=this,H=h.get(nt.Empty);null==m&&null!=H&&(m=H.getCompleteServerCache(nt.Empty));var z=[];return h.children.inorderTraversal(function(ue,ne){var Le=m?m.getImmediateChild(ue):null,Ye=S.child(ue),Ke=l.operationForChild(ue);Ke&&(z=z.concat(R.applyOperationDescendantsHelper_(Ke,ne,Le,Ye)))}),H&&(z=z.concat(H.applyOperation(l,S,m))),z},v.nextQueryTag_=1,v}(),we=function(){function v(){this.rootNode_=Bt.EMPTY_NODE}return v.prototype.getNode=function(l){return this.rootNode_.getChild(l)},v.prototype.updateSnapshot=function(l,h){this.rootNode_=this.rootNode_.updateChild(l,h)},v}(),Ne=function(){function v(){this.counters_={}}return v.prototype.incrementCounter=function(l,h){void 0===h&&(h=1),Z.contains(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=h},v.prototype.get=function(){return Z.deepCopy(this.counters_)},v}(),Qe=function(){function v(){}return v.getCollection=function(l){var h=l.toString();return this.collections_[h]||(this.collections_[h]=new Ne),this.collections_[h]},v.getOrCreateReporter=function(l,h){var m=l.toString();return this.reporters_[m]||(this.reporters_[m]=h()),this.reporters_[m]},v.collections_={},v.reporters_={},v}(),yt=function(){function v(l){this.collection_=l,this.last_=null}return v.prototype.get=function(){var l=this.collection_.get(),h=Q.__assign({},l);return this.last_&&Pe(this.last_,function(m,S){h[m]=h[m]-S}),this.last_=l,h},v}(),sn=function(){function v(l,h){this.server_=h,this.statsToReport_={},this.statsListener_=new yt(l);var m=1e4+2e4*Math.random();on(this.reportStats_.bind(this),Math.floor(m))}return v.prototype.includeStat=function(l){this.statsToReport_[l]=!0},v.prototype.reportStats_=function(){var l=this,h=this.statsListener_.get(),m={},S=!1;Pe(h,function(R,H){H>0&&Z.contains(l.statsToReport_,R)&&(m[R]=H,S=!0)}),S&&this.server_.reportStats(m),on(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},v}(),mn=function(){function v(){this.eventLists_=[],this.recursionDepth_=0}return v.prototype.queueEvents=function(l){for(var h=null,m=0;m<l.length;m++){var S=l[m],R=S.getPath();null!==h&&!R.equals(h.getPath())&&(this.eventLists_.push(h),h=null),null===h&&(h=new jr(R)),h.add(S)}h&&this.eventLists_.push(h)},v.prototype.raiseEventsAtPath=function(l,h){this.queueEvents(h),this.raiseQueuedEventsMatchingPredicate_(function(m){return m.equals(l)})},v.prototype.raiseEventsForChangedPath=function(l,h){this.queueEvents(h),this.raiseQueuedEventsMatchingPredicate_(function(m){return m.contains(l)||l.contains(m)})},v.prototype.raiseQueuedEventsMatchingPredicate_=function(l){this.recursionDepth_++;for(var h=!0,m=0;m<this.eventLists_.length;m++){var S=this.eventLists_[m];S&&(l(S.getPath())?(this.eventLists_[m].raise(),this.eventLists_[m]=null):h=!1)}h&&(this.eventLists_=[]),this.recursionDepth_--},v}(),jr=function(){function v(l){this.path_=l,this.events_=[]}return v.prototype.add=function(l){this.events_.push(l)},v.prototype.raise=function(){for(var l=0;l<this.events_.length;l++){var h=this.events_[l];if(null!==h){this.events_[l]=null;var m=h.getEventRunner();Re&&At("event: "+h.toString()),St(m)}}},v.prototype.getPath=function(){return this.path_},v}(),Vn=function(){function v(l){this.allowedEvents_=l,this.listeners_={},Z.assert(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}return v.prototype.trigger=function(l){for(var h=[],m=1;m<arguments.length;m++)h[m-1]=arguments[m];if(Array.isArray(this.listeners_[l]))for(var S=Q.__spread(this.listeners_[l]),R=0;R<S.length;R++)S[R].callback.apply(S[R].context,h)},v.prototype.on=function(l,h,m){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:h,context:m});var S=this.getInitialEvent(l);S&&h.apply(m,S)},v.prototype.off=function(l,h,m){this.validateEventType_(l);for(var S=this.listeners_[l]||[],R=0;R<S.length;R++)if(S[R].callback===h&&(!m||m===S[R].context))return void S.splice(R,1)},v.prototype.validateEventType_=function(l){Z.assert(this.allowedEvents_.find(function(h){return h===l}),"Unknown event: "+l)},v}(),wn=function(v){function l(){var m,S,h=v.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(S="visibilitychange",m="hidden"):void 0!==document.mozHidden?(S="mozvisibilitychange",m="mozHidden"):void 0!==document.msHidden?(S="msvisibilitychange",m="msHidden"):void 0!==document.webkitHidden&&(S="webkitvisibilitychange",m="webkitHidden")),h.visible_=!0,S&&document.addEventListener(S,function(){var R=!document[m];R!==h.visible_&&(h.visible_=R,h.trigger("visible",R))},!1),h}return Q.__extends(l,v),l.getInstance=function(){return new l},l.prototype.getInitialEvent=function(h){return Z.assert("visible"===h,"Unknown event type: "+h),[this.visible_]},l}(Vn),lr=function(v){function l(){var h=v.call(this,["online"])||this;return h.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!Z.isMobileCordova()&&(window.addEventListener("online",function(){h.online_||(h.online_=!0,h.trigger("online",!0))},!1),window.addEventListener("offline",function(){h.online_&&(h.online_=!1,h.trigger("online",!1))},!1)),h}return Q.__extends(l,v),l.getInstance=function(){return new l},l.prototype.getInitialEvent=function(h){return Z.assert("online"===h,"Unknown event type: "+h),[this.online_]},l.prototype.currentlyOnline=function(){return this.online_},l}(Vn),gi=function(){function v(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return v.prototype.closeAfter=function(l,h){this.closeAfterResponse=l,this.onClose=h,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},v.prototype.handleResponse=function(l,h){var m=this;this.pendingResponses[l]=h;for(var S=function(){var z=R.pendingResponses[R.currentResponseNum];delete R.pendingResponses[R.currentResponseNum];for(var ue=function(Le){z[Le]&&St(function(){m.onMessage_(z[Le])})},ne=0;ne<z.length;++ne)ue(ne);if(R.currentResponseNum===R.closeAfterResponse)return R.onClose&&(R.onClose(),R.onClose=null),"break";R.currentResponseNum++},R=this;this.pendingResponses[this.currentResponseNum]&&"break"!==S(););},v}(),Mi=function(){function v(l,h,m,S,R){this.connId=l,this.repoInfo=h,this.applicationId=m,this.transportSessionId=S,this.lastSessionId=R,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nt(l),this.stats_=Qe.getCollection(h),this.urlFn=function(H){return h.connectionURL(Zn,H)}}return v.prototype.open=function(l,h){var m=this;this.curSegmentNum=0,this.onDisconnect_=h,this.myPacketOrderer=new gi(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){m.log_("Timed out trying to connect."),m.onClosed_(),m.connectTimeoutTimer_=null},Math.floor(3e4)),function(v){if(Z.isNodeSdk()||"complete"===document.readyState)v();else{var l=!1,h=function(){document.body?l||(l=!0,v()):setTimeout(h,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",h,!1),window.addEventListener("load",h,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&h()}),window.attachEvent("onload",h))}}(function(){if(!m.isClosed_){m.scriptTagHolder=new Ci(function(){for(var H=[],z=0;z<arguments.length;z++)H[z]=arguments[z];var ue=Q.__read(H,5),ne=ue[0],Le=ue[1],Ye=ue[2];if(m.incrementIncomingBytes_(H),m.scriptTagHolder)if(m.connectTimeoutTimer_&&(clearTimeout(m.connectTimeoutTimer_),m.connectTimeoutTimer_=null),m.everConnected_=!0,"start"===ne)m.id=Le,m.password=Ye;else{if("close"!==ne)throw new Error("Unrecognized command received: "+ne);Le?(m.scriptTagHolder.sendNewPolls=!1,m.myPacketOrderer.closeAfter(Le,function(){m.onClosed_()})):m.onClosed_()}},function(){for(var H=[],z=0;z<arguments.length;z++)H[z]=arguments[z];var ue=Q.__read(H,2),ne=ue[0],Le=ue[1];m.incrementIncomingBytes_(H),m.myPacketOrderer.handleResponse(ne,Le)},function(){m.onClosed_()},m.urlFn);var S={start:"t"};S.ser=Math.floor(1e8*Math.random()),m.scriptTagHolder.uniqueCallbackIdentifier&&(S.cb=m.scriptTagHolder.uniqueCallbackIdentifier),S.v="5",m.transportSessionId&&(S.s=m.transportSessionId),m.lastSessionId&&(S.ls=m.lastSessionId),m.applicationId&&(S.p=m.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Vt)&&(S.r="f");var R=m.urlFn(S);m.log_("Connecting via long-poll to "+R),m.scriptTagHolder.addTag(R,function(){})}})},v.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},v.forceAllow=function(){v.forceAllow_=!0},v.forceDisallow=function(){v.forceDisallow_=!0},v.isAvailable=function(){return!(Z.isNodeSdk()||!v.forceAllow_&&(v.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},v.prototype.markConnectionHealthy=function(){},v.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},v.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},v.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},v.prototype.send=function(l){var h=Z.stringify(l);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);for(var m=Z.base64Encode(h),S=re(m,1840),R=0;R<S.length;R++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,S.length,S[R]),this.curSegmentNum++},v.prototype.addDisconnectPingFrame=function(l,h){if(!Z.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var m={dframe:"t"};m.id=l,m.pw=h,this.myDisconnFrame.src=this.urlFn(m),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},v.prototype.incrementIncomingBytes_=function(l){var h=Z.stringify(l).length;this.bytesReceived+=h,this.stats_.incrementCounter("bytes_received",h)},v}(),Ci=function(){function v(l,h,m,S){if(this.onDisconnect=m,this.urlFn=S,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Z.isNodeSdk())this.commandCB=l,this.onMessageCB=h;else{this.uniqueCallbackIdentifier=mt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=h,this.myIFrame=v.createIFrame_();var R="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(R='<script>document.domain="'+document.domain+'";<\/script>');var z="<html><body>"+R+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(z),this.myIFrame.doc.close()}catch(ue){At("frame writing exception"),ue.stack&&At(ue.stack),At(ue)}}}return v.createIFrame_=function(){var l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||At("No IE domain setting required")}catch(S){var m=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+m+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l},v.prototype.close=function(){var l=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==l.myIFrame&&(document.body.removeChild(l.myIFrame),l.myIFrame=null)},Math.floor(0)));var h=this.onDisconnect;h&&(this.onDisconnect=null,h())},v.prototype.startLongPoll=function(l,h){for(this.myID=l,this.myPW=h,this.alive=!0;this.newRequest_(););},v.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;for(var h=this.urlFn(l),m="",S=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+m.length<=1870;){var H=this.pendingSegs.shift();m=m+"&seg"+S+"="+H.seg+"&ts"+S+"="+H.ts+"&d"+S+"="+H.d,S++}return this.addLongPollTag_(h+=m,this.currentSerial),!0}return!1},v.prototype.enqueueSegment=function(l,h,m){this.pendingSegs.push({seg:l,ts:h,d:m}),this.alive&&this.newRequest_()},v.prototype.addLongPollTag_=function(l,h){var m=this;this.outstandingRequests.add(h);var S=function(){m.outstandingRequests.delete(h),m.newRequest_()},R=setTimeout(S,Math.floor(25e3));this.addTag(l,function(){clearTimeout(R),S()})},v.prototype.addTag=function(l,h){var m=this;Z.isNodeSdk()?this.doNodeLongPoll(l,h):setTimeout(function(){try{if(!m.sendNewPolls)return;var S=m.myIFrame.doc.createElement("script");S.type="text/javascript",S.async=!0,S.src=l,S.onload=S.onreadystatechange=function(){var R=S.readyState;(!R||"loaded"===R||"complete"===R)&&(S.onload=S.onreadystatechange=null,S.parentNode&&S.parentNode.removeChild(S),h())},S.onerror=function(){At("Long-poll script failed to load: "+l),m.sendNewPolls=!1,m.close()},m.myIFrame.doc.body.appendChild(S)}catch(R){}},Math.floor(1))},v}(),ai="",Vr=null;"undefined"!=typeof MozWebSocket?Vr=MozWebSocket:"undefined"!=typeof WebSocket&&(Vr=WebSocket);var qr=function(){function v(l,h,m,S,R){this.connId=l,this.applicationId=m,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nt(this.connId),this.stats_=Qe.getCollection(h),this.connURL=v.connectionURL_(h,S,R),this.nodeAdmin=h.nodeAdmin}return v.connectionURL_=function(l,h,m){var S={v:"5"};return!Z.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Vt)&&(S.r="f"),h&&(S.s=h),m&&(S.ls=m),l.connectionURL(ir,S)},v.prototype.open=function(l,h){var m=this;this.onDisconnect=h,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$e.set("previous_websocket_failure",!0);try{if(Z.isNodeSdk()){var R={headers:{"User-Agent":"Firebase/5/"+ai+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},H=process.env,z=0===this.connURL.indexOf("wss://")?H.HTTPS_PROXY||H.https_proxy:H.HTTP_PROXY||H.http_proxy;z&&(R.proxy={origin:z}),this.mySock=new Vr(this.connURL,[],R)}else this.mySock=new Vr(this.connURL,[],R={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(ne){this.log_("Error instantiating WebSocket.");var ue=ne.message||ne.data;return ue&&this.log_(ue),void this.onClosed_()}this.mySock.onopen=function(){m.log_("Websocket connected."),m.everConnected_=!0},this.mySock.onclose=function(){m.log_("Websocket connection was disconnected."),m.mySock=null,m.onClosed_()},this.mySock.onmessage=function(ne){m.handleIncomingFrame(ne)},this.mySock.onerror=function(ne){m.log_("WebSocket error.  Closing connection.");var Le=ne.message||ne.data;Le&&m.log_(Le),m.onClosed_()}},v.prototype.start=function(){},v.forceDisallow=function(){v.forceDisallow_=!0},v.isAvailable=function(){var l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var m=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);m&&m.length>1&&parseFloat(m[1])<4.4&&(l=!0)}return!l&&null!==Vr&&!v.forceDisallow_},v.previouslyFailed=function(){return $e.isInMemoryStorage||!0===$e.get("previous_websocket_failure")},v.prototype.markConnectionHealthy=function(){$e.remove("previous_websocket_failure")},v.prototype.appendFrame_=function(l){if(this.frames.push(l),this.frames.length===this.totalFrames){var h=this.frames.join("");this.frames=null;var m=Z.jsonEval(h);this.onMessage(m)}},v.prototype.handleNewFrameCount_=function(l){this.totalFrames=l,this.frames=[]},v.prototype.extractFrameCount_=function(l){if(Z.assert(null===this.frames,"We already have a frame buffer"),l.length<=6){var h=Number(l);if(!isNaN(h))return this.handleNewFrameCount_(h),null}return this.handleNewFrameCount_(1),l},v.prototype.handleIncomingFrame=function(l){if(null!==this.mySock){var h=l.data;if(this.bytesReceived+=h.length,this.stats_.incrementCounter("bytes_received",h.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(h);else{var m=this.extractFrameCount_(h);null!==m&&this.appendFrame_(m)}}},v.prototype.send=function(l){this.resetKeepAlive();var h=Z.stringify(l);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);var m=re(h,16384);m.length>1&&this.sendString_(String(m.length));for(var S=0;S<m.length;S++)this.sendString_(m[S])},v.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},v.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},v.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},v.prototype.resetKeepAlive=function(){var l=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){l.mySock&&l.sendString_("0"),l.resetKeepAlive()},Math.floor(45e3))},v.prototype.sendString_=function(l){try{this.mySock.send(l)}catch(h){this.log_("Exception thrown from WebSocket.send():",h.message||h.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},v.responsesRequiredToBeHealthy=2,v.healthyTimeout=3e4,v}(),Rr=function(){function v(l){this.initTransports_(l)}return Object.defineProperty(v,"ALL_TRANSPORTS",{get:function(){return[Mi,qr]},enumerable:!1,configurable:!0}),v.prototype.initTransports_=function(l){var h,m,S=qr&&qr.isAvailable(),R=S&&!qr.previouslyFailed();if(l.webSocketOnly&&(S||rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),R=!0),R)this.transports_=[qr];else{var H=this.transports_=[];try{for(var z=Q.__values(v.ALL_TRANSPORTS),ue=z.next();!ue.done;ue=z.next()){var ne=ue.value;ne&&ne.isAvailable()&&H.push(ne)}}catch(Le){h={error:Le}}finally{try{ue&&!ue.done&&(m=z.return)&&m.call(z)}finally{if(h)throw h.error}}}},v.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},v.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},v}(),na=function(){function v(l,h,m,S,R,H,z,ue){this.id=l,this.repoInfo_=h,this.applicationId_=m,this.onMessage_=S,this.onReady_=R,this.onDisconnect_=H,this.onKill_=z,this.lastSessionId=ue,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nt("c:"+this.id+":"),this.transportManager_=new Rr(h),this.log_("Connection created"),this.start_()}return v.prototype.start_=function(){var l=this,h=this.transportManager_.initialTransport();this.conn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;var m=this.connReceiver_(this.conn_),S=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){l.conn_&&l.conn_.open(m,S)},Math.floor(0));var R=h.healthyTimeout||0;R>0&&(this.healthyTimeout_=on(function(){l.healthyTimeout_=null,l.isHealthy_||(l.conn_&&l.conn_.bytesReceived>102400?(l.log_("Connection exceeded healthy timeout but has received "+l.conn_.bytesReceived+" bytes.  Marking connection healthy."),l.isHealthy_=!0,l.conn_.markConnectionHealthy()):l.conn_&&l.conn_.bytesSent>10240?l.log_("Connection exceeded healthy timeout but has sent "+l.conn_.bytesSent+" bytes.  Leaving connection alive."):(l.log_("Closing unhealthy connection after timeout."),l.close()))},Math.floor(R)))},v.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},v.prototype.disconnReceiver_=function(l){var h=this;return function(m){l===h.conn_?h.onConnectionLost_(m):l===h.secondaryConn_?(h.log_("Secondary connection lost."),h.onSecondaryConnectionLost_()):h.log_("closing an old connection")}},v.prototype.connReceiver_=function(l){var h=this;return function(m){2!==h.state_&&(l===h.rx_?h.onPrimaryMessageReceived_(m):l===h.secondaryConn_?h.onSecondaryMessageReceived_(m):h.log_("message on old connection"))}},v.prototype.sendRequest=function(l){this.sendData_({t:"d",d:l})},v.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},v.prototype.onSecondaryControl_=function(l){if("t"in l){var h=l.t;"a"===h?this.upgradeIfSecondaryHealthy_():"r"===h?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===h&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},v.prototype.onSecondaryMessageReceived_=function(l){var h=ae("t",l),m=ae("d",l);if("c"===h)this.onSecondaryControl_(m);else{if("d"!==h)throw new Error("Unknown protocol layer: "+h);this.pendingDataMessages.push(m)}},v.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},v.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},v.prototype.onPrimaryMessageReceived_=function(l){var h=ae("t",l),m=ae("d",l);"c"===h?this.onControl_(m):"d"===h&&this.onDataMessage_(m)},v.prototype.onDataMessage_=function(l){this.onPrimaryResponse_(),this.onMessage_(l)},v.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},v.prototype.onControl_=function(l){var h=ae("t",l);if("d"in l){var m=l.d;if("h"===h)this.onHandshake_(m);else if("n"===h){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var S=0;S<this.pendingDataMessages.length;++S)this.onDataMessage_(this.pendingDataMessages[S]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===h?this.onConnectionShutdown_(m):"r"===h?this.onReset_(m):"e"===h?_t("Server Error: "+m):"o"===h?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_t("Unknown control packet command: "+h)}},v.prototype.onHandshake_=function(l){var h=l.ts,m=l.v,S=l.h;this.sessionId=l.s,this.repoInfo_.updateHost(S),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,h),"5"!==m&&rt("Protocol version mismatch detected"),this.tryStartUpgrade_())},v.prototype.tryStartUpgrade_=function(){var l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)},v.prototype.startUpgrade_=function(l){var h=this;this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;var m=this.connReceiver_(this.secondaryConn_),S=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(m,S),on(function(){h.secondaryConn_&&(h.log_("Timed out trying to upgrade."),h.secondaryConn_.close())},Math.floor(6e4))},v.prototype.onReset_=function(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.updateHost(l),1===this.state_?this.close():(this.closeConnections_(),this.start_())},v.prototype.onConnectionEstablished_=function(l,h){var m=this;this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(h,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):on(function(){m.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},v.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},v.prototype.onSecondaryConnectionLost_=function(){var l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()},v.prototype.onConnectionLost_=function(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($e.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},v.prototype.onConnectionShutdown_=function(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()},v.prototype.sendData_=function(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)},v.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},v.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},v}(),tu=function(){function v(){}return v.prototype.put=function(l,h,m,S){},v.prototype.merge=function(l,h,m,S){},v.prototype.refreshAuthToken=function(l){},v.prototype.onDisconnectPut=function(l,h,m){},v.prototype.onDisconnectMerge=function(l,h,m){},v.prototype.onDisconnectCancel=function(l,h){},v.prototype.reportStats=function(l){},v}(),vo=1e3,Yn=function(v){function l(h,m,S,R,H,z,ue){var ne=v.call(this)||this;if(ne.repoInfo_=h,ne.applicationId_=m,ne.onDataUpdate_=S,ne.onConnectStatus_=R,ne.onServerInfoUpdate_=H,ne.authTokenProvider_=z,ne.authOverride_=ue,ne.id=l.nextPersistentConnectionId_++,ne.log_=Nt("p:"+ne.id+":"),ne.interruptReasons_={},ne.listens=new Map,ne.outstandingPuts_=[],ne.outstandingPutCount_=0,ne.onDisconnectRequestQueue_=[],ne.connected_=!1,ne.reconnectDelay_=vo,ne.maxReconnectDelay_=3e5,ne.securityDebugCallback_=null,ne.lastSessionId=null,ne.establishConnectionTimer_=null,ne.visible_=!1,ne.requestCBHash_={},ne.requestNumber_=0,ne.realtime_=null,ne.authToken_=null,ne.forceTokenRefresh_=!1,ne.invalidAuthTokenCount_=0,ne.firstConnection_=!0,ne.lastConnectionAttemptTime_=null,ne.lastConnectionEstablishedTime_=null,ue&&!Z.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return ne.scheduleConnect_(0),wn.getInstance().on("visible",ne.onVisible_,ne),-1===h.host.indexOf("fblocal")&&lr.getInstance().on("online",ne.onOnline_,ne),ne}return Q.__extends(l,v),l.prototype.sendRequest=function(h,m,S){var R=++this.requestNumber_,H={r:R,a:h,b:m};this.log_(Z.stringify(H)),Z.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(H),S&&(this.requestCBHash_[R]=S)},l.prototype.listen=function(h,m,S,R){var H=h.queryIdentifier(),z=h.path.toString();this.log_("Listen called for "+z+" "+H),this.listens.has(z)||this.listens.set(z,new Map),Z.assert(h.getQueryParams().isDefault()||!h.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Z.assert(!this.listens.get(z).has(H),"listen() called twice for same path/queryId.");var ue={onComplete:R,hashFn:m,query:h,tag:S};this.listens.get(z).set(H,ue),this.connected_&&this.sendListen_(ue)},l.prototype.sendListen_=function(h){var m=this,S=h.query,R=S.path.toString(),H=S.queryIdentifier();this.log_("Listen on "+R+" for "+H);var z={p:R};h.tag&&(z.q=S.queryObject(),z.t=h.tag),z.h=h.hashFn(),this.sendRequest("q",z,function(ne){var Le=ne.d,Ye=ne.s;l.warnOnListenWarnings_(Le,S),(m.listens.get(R)&&m.listens.get(R).get(H))===h&&(m.log_("listen response",ne),"ok"!==Ye&&m.removeListen_(R,H),h.onComplete&&h.onComplete(Ye,Le))})},l.warnOnListenWarnings_=function(h,m){if(h&&"object"==typeof h&&Z.contains(h,"w")){var S=Z.safeGet(h,"w");if(Array.isArray(S)&&~S.indexOf("no_index")){var R='".indexOn": "'+m.getQueryParams().getIndex().toString()+'"',H=m.path.toString();rt("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+R+" at "+H+" to your security rules for better performance.")}}},l.prototype.refreshAuthToken=function(h){this.authToken_=h,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(h)},l.prototype.reduceReconnectDelayIfAdminCredential_=function(h){(h&&40===h.length||Z.isAdmin(h))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},l.prototype.tryAuth=function(){var h=this;if(this.connected_&&this.authToken_){var m=this.authToken_,S=Z.isValidFormat(m)?"auth":"gauth",R={cred:m};null===this.authOverride_?R.noauth=!0:"object"==typeof this.authOverride_&&(R.authvar=this.authOverride_),this.sendRequest(S,R,function(H){var z=H.s,ue=H.d||"error";h.authToken_===m&&("ok"===z?h.invalidAuthTokenCount_=0:h.onAuthRevoked_(z,ue))})}},l.prototype.unlisten=function(h,m){var S=h.path.toString(),R=h.queryIdentifier();this.log_("Unlisten called for "+S+" "+R),Z.assert(h.getQueryParams().isDefault()||!h.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(S,R)&&this.connected_&&this.sendUnlisten_(S,R,h.queryObject(),m)},l.prototype.sendUnlisten_=function(h,m,S,R){this.log_("Unlisten on "+h+" for "+m);var H={p:h};R&&(H.q=S,H.t=R),this.sendRequest("n",H)},l.prototype.onDisconnectPut=function(h,m,S){this.connected_?this.sendOnDisconnect_("o",h,m,S):this.onDisconnectRequestQueue_.push({pathString:h,action:"o",data:m,onComplete:S})},l.prototype.onDisconnectMerge=function(h,m,S){this.connected_?this.sendOnDisconnect_("om",h,m,S):this.onDisconnectRequestQueue_.push({pathString:h,action:"om",data:m,onComplete:S})},l.prototype.onDisconnectCancel=function(h,m){this.connected_?this.sendOnDisconnect_("oc",h,null,m):this.onDisconnectRequestQueue_.push({pathString:h,action:"oc",data:null,onComplete:m})},l.prototype.sendOnDisconnect_=function(h,m,S,R){var H={p:m,d:S};this.log_("onDisconnect "+h,H),this.sendRequest(h,H,function(z){R&&setTimeout(function(){R(z.s,z.d)},Math.floor(0))})},l.prototype.put=function(h,m,S,R){this.putInternal("p",h,m,S,R)},l.prototype.merge=function(h,m,S,R){this.putInternal("m",h,m,S,R)},l.prototype.putInternal=function(h,m,S,R,H){var z={p:m,d:S};void 0!==H&&(z.h=H),this.outstandingPuts_.push({action:h,request:z,onComplete:R}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+m)},l.prototype.sendPut_=function(h){var m=this,S=this.outstandingPuts_[h].action,R=this.outstandingPuts_[h].request,H=this.outstandingPuts_[h].onComplete;this.outstandingPuts_[h].queued=this.connected_,this.sendRequest(S,R,function(z){m.log_(S+" response",z),delete m.outstandingPuts_[h],m.outstandingPutCount_--,0===m.outstandingPutCount_&&(m.outstandingPuts_=[]),H&&H(z.s,z.d)})},l.prototype.reportStats=function(h){var m=this;if(this.connected_){var S={c:h};this.log_("reportStats",S),this.sendRequest("s",S,function(R){"ok"!==R.s&&m.log_("reportStats","Error sending stats: "+R.d)})}},l.prototype.onDataMessage_=function(h){if("r"in h){this.log_("from server: "+Z.stringify(h));var m=h.r,S=this.requestCBHash_[m];S&&(delete this.requestCBHash_[m],S(h.b))}else{if("error"in h)throw"A server-side error has occurred: "+h.error;"a"in h&&this.onDataPush_(h.a,h.b)}},l.prototype.onDataPush_=function(h,m){this.log_("handleServerMessage",h,m),"d"===h?this.onDataUpdate_(m.p,m.d,!1,m.t):"m"===h?this.onDataUpdate_(m.p,m.d,!0,m.t):"c"===h?this.onListenRevoked_(m.p,m.q):"ac"===h?this.onAuthRevoked_(m.s,m.d):"sd"===h?this.onSecurityDebugPacket_(m):_t("Unrecognized action received from server: "+Z.stringify(h)+"\nAre you using the latest client?")},l.prototype.onReady_=function(h,m){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(h),this.lastSessionId=m,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},l.prototype.scheduleConnect_=function(h){var m=this;Z.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){m.establishConnectionTimer_=null,m.establishConnection_()},Math.floor(h))},l.prototype.onVisible_=function(h){h&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vo,this.realtime_||this.scheduleConnect_(0)),this.visible_=h},l.prototype.onOnline_=function(h){h?(this.log_("Browser went online."),this.reconnectDelay_=vo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},l.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var m=(new Date).getTime()-this.lastConnectionAttemptTime_,S=Math.max(0,this.reconnectDelay_-m);S=Math.random()*S,this.log_("Trying to reconnect in "+S+"ms"),this.scheduleConnect_(S),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},l.prototype.establishConnection_=function(){var h=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var m=this.onDataMessage_.bind(this),S=this.onReady_.bind(this),R=this.onRealtimeDisconnect_.bind(this),H=this.id+":"+l.nextConnectionId_++,z=this,ue=this.lastSessionId,ne=!1,Le=null,Ye=function(){Le?Le.close():(ne=!0,R())};this.realtime_={close:Ye,sendRequest:function(Kt){Z.assert(Le,"sendRequest call when we're not connected not allowed."),Le.sendRequest(Kt)}};var Et=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(Et).then(function(Kt){ne?At("getToken() completed but was canceled"):(At("getToken() completed. Creating connection."),z.authToken_=Kt&&Kt.accessToken,Le=new na(H,z.repoInfo_,z.applicationId_,m,S,R,function(Yt){rt(Yt+" ("+z.repoInfo_.toString()+")"),z.interrupt("server_kill")},ue))}).then(null,function(Kt){z.log_("Failed to get token: "+Kt),ne||(h.repoInfo_.nodeAdmin&&rt(Kt),Ye())})}},l.prototype.interrupt=function(h){At("Interrupting connection for reason: "+h),this.interruptReasons_[h]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},l.prototype.resume=function(h){At("Resuming connection for reason: "+h),delete this.interruptReasons_[h],Z.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=vo,this.realtime_||this.scheduleConnect_(0))},l.prototype.handleTimestamp_=function(h){var m=h-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:m})},l.prototype.cancelSentTransactions_=function(){for(var h=0;h<this.outstandingPuts_.length;h++){var m=this.outstandingPuts_[h];m&&"h"in m.request&&m.queued&&(m.onComplete&&m.onComplete("disconnect"),delete this.outstandingPuts_[h],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},l.prototype.onListenRevoked_=function(h,m){var S;S=m?m.map(function(H){return pt(H)}).join("$"):"default";var R=this.removeListen_(h,S);R&&R.onComplete&&R.onComplete("permission_denied")},l.prototype.removeListen_=function(h,m){var R,S=new nt(h).toString();if(this.listens.has(S)){var H=this.listens.get(S);R=H.get(m),H.delete(m),0===H.size&&this.listens.delete(S)}else R=void 0;return R},l.prototype.onAuthRevoked_=function(h,m){At("Auth token revoked: "+h+"/"+m),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===h||"permission_denied"===h)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},l.prototype.onSecurityDebugPacket_=function(h){this.securityDebugCallback_?this.securityDebugCallback_(h):"msg"in h&&console.log("FIREBASE: "+h.msg.replace("\n","\nFIREBASE: "))},l.prototype.restoreState_=function(){var h,m,S,R;this.tryAuth();try{for(var H=Q.__values(this.listens.values()),z=H.next();!z.done;z=H.next()){var ue=z.value;try{for(var ne=(S=void 0,Q.__values(ue.values())),Le=ne.next();!Le.done;Le=ne.next())this.sendListen_(Le.value)}catch(Kt){S={error:Kt}}finally{try{Le&&!Le.done&&(R=ne.return)&&R.call(ne)}finally{if(S)throw S.error}}}}catch(Kt){h={error:Kt}}finally{try{z&&!z.done&&(m=H.return)&&m.call(H)}finally{if(h)throw h.error}}for(var Ke=0;Ke<this.outstandingPuts_.length;Ke++)this.outstandingPuts_[Ke]&&this.sendPut_(Ke);for(;this.onDisconnectRequestQueue_.length;){var Et=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(Et.action,Et.pathString,Et.data,Et.onComplete)}},l.prototype.sendConnectStats_=function(){var h={},m="js";Z.isNodeSdk()&&(m=this.repoInfo_.nodeAdmin?"admin_node":"node"),h["sdk."+m+"."+ai.replace(/\./g,"-")]=1,Z.isMobileCordova()?h["framework.cordova"]=1:Z.isReactNative()&&(h["framework.reactnative"]=1),this.reportStats(h)},l.prototype.shouldReconnect_=function(){var h=lr.getInstance().currentlyOnline();return Z.isEmpty(this.interruptReasons_)&&h},l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l}(tu),Yi=function(v){function l(h,m,S){var R=v.call(this)||this;return R.repoInfo_=h,R.onDataUpdate_=m,R.authTokenProvider_=S,R.log_=Nt("p:rest:"),R.listens_={},R}return Q.__extends(l,v),l.prototype.reportStats=function(h){throw new Error("Method not implemented.")},l.getListenId_=function(h,m){return void 0!==m?"tag$"+m:(Z.assert(h.getQueryParams().isDefault(),"should have a tag if it's not a default query."),h.path.toString())},l.prototype.listen=function(h,m,S,R){var H=this,z=h.path.toString();this.log_("Listen called for "+z+" "+h.queryIdentifier());var ue=l.getListenId_(h,S),ne={};this.listens_[ue]=ne;var Le=h.getQueryParams().toRestQueryStringParameters();this.restRequest_(z+".json",Le,function(Ye,Ke){var Et=Ke;404===Ye&&(Et=null,Ye=null),null===Ye&&H.onDataUpdate_(z,Et,!1,S),Z.safeGet(H.listens_,ue)===ne&&R(Ye?401===Ye?"permission_denied":"rest_error:"+Ye:"ok",null)})},l.prototype.unlisten=function(h,m){var S=l.getListenId_(h,m);delete this.listens_[S]},l.prototype.refreshAuthToken=function(h){},l.prototype.restRequest_=function(h,m,S){var R=this;void 0===m&&(m={}),m.format="export",this.authTokenProvider_.getToken(!1).then(function(H){var z=H&&H.accessToken;z&&(m.auth=z);var ue=(R.repoInfo_.secure?"https://":"http://")+R.repoInfo_.host+h+"?ns="+R.repoInfo_.namespace+Z.querystring(m);R.log_("Sending REST request for "+ue);var ne=new XMLHttpRequest;ne.onreadystatechange=function(){if(S&&4===ne.readyState){R.log_("REST Response for "+ue+" received. status:",ne.status,"response:",ne.responseText);var Le=null;if(ne.status>=200&&ne.status<300){try{Le=Z.jsonEval(ne.responseText)}catch(Ye){rt("Failed to parse JSON response for "+ue+": "+ne.responseText)}S(null,Le)}else 401!==ne.status&&404!==ne.status&&rt("Got unsuccessful REST response for "+ue+" Status: "+ne.status),S(ne.status);S=null}},ne.open("GET",ue,!0),ne.send()})},l}(tu),Rt="repo_interrupt",Dr=function(){function v(l,h,m,S){var R=this;if(this.repoInfo_=l,this.app=m,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Yo,this.persistentConnection_=null,this.stats_=Qe.getCollection(l),h||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Yi(this.repoInfo_,this.onDataUpdate_.bind(this),S),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var H=m.options.databaseAuthVariableOverride;if(null!=H){if("object"!=typeof H)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Z.stringify(H)}catch(z){throw new Error("Invalid authOverride provided: "+z)}}this.persistentConnection_=new Yn(this.repoInfo_,m.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),S,H),this.server_=this.persistentConnection_}S.addTokenChangeListener(function(z){R.server_.refreshAuthToken(z)}),this.statsReporter_=Qe.getOrCreateReporter(l,function(){return new sn(R.stats_,R.server_)}),this.transactionsInit_(),this.infoData_=new we,this.infoSyncTree_=new le({startListening:function(z,ue,ne,Le){var Ye=[],Ke=R.infoData_.getNode(z.path);return Ke.isEmpty()||(Ye=R.infoSyncTree_.applyServerOverwrite(z.path,Ke),setTimeout(function(){Le("ok")},0)),Ye},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new le({startListening:function(z,ue,ne,Le){return R.server_.listen(z,ne,ue,function(Ye,Ke){var Et=Le(Ye,Ke);R.eventQueue_.raiseEventsForChangedPath(z.path,Et)}),[]},stopListening:function(z,ue){R.server_.unlisten(z,ue)}})}return v.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},v.prototype.name=function(){return this.repoInfo_.namespace},v.prototype.serverTime=function(){var h=this.infoData_.getNode(new nt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+h},v.prototype.generateServerValues=function(){return function(v){return(v=v||{}).timestamp=v.timestamp||(new Date).getTime(),v}({timestamp:this.serverTime()})},v.prototype.onDataUpdate_=function(l,h,m,S){this.dataUpdateCount++;var R=new nt(l);h=this.interceptServerDataCallback_?this.interceptServerDataCallback_(l,h):h;var H=[];if(S)if(m){var z=Z.map(h,function(Ke){return bn(Ke)});H=this.serverSyncTree_.applyTaggedQueryMerge(R,z,S)}else{var ue=bn(h);H=this.serverSyncTree_.applyTaggedQueryOverwrite(R,ue,S)}else if(m){var ne=Z.map(h,function(Ke){return bn(Ke)});H=this.serverSyncTree_.applyServerMerge(R,ne)}else{var Le=bn(h);H=this.serverSyncTree_.applyServerOverwrite(R,Le)}var Ye=R;H.length>0&&(Ye=this.rerunTransactions_(R)),this.eventQueue_.raiseEventsForChangedPath(Ye,H)},v.prototype.interceptServerData_=function(l){this.interceptServerDataCallback_=l},v.prototype.onConnectStatus_=function(l){this.updateInfo_("connected",l),!1===l&&this.runOnDisconnectEvents_()},v.prototype.onServerInfoUpdate_=function(l){var h=this;Pe(l,function(m,S){h.updateInfo_(m,S)})},v.prototype.updateInfo_=function(l,h){var m=new nt("/.info/"+l),S=bn(h);this.infoData_.updateSnapshot(m,S);var R=this.infoSyncTree_.applyServerOverwrite(m,S);this.eventQueue_.raiseEventsForChangedPath(m,R)},v.prototype.getNextWriteId_=function(){return this.nextWriteId_++},v.prototype.setWithPriority=function(l,h,m,S){var R=this;this.log_("set",{path:l.toString(),value:h,priority:m});var H=this.generateServerValues(),z=bn(h,m),ue=this.serverSyncTree_.calcCompleteEventCache(l),ne=Sn(z,ue,H),Le=this.getNextWriteId_(),Ye=this.serverSyncTree_.applyUserOverwrite(l,ne,Le,!0);this.eventQueue_.queueEvents(Ye),this.server_.put(l.toString(),z.val(!0),function(Et,Kt){var Yt="ok"===Et;Yt||rt("set at "+l+" failed: "+Et);var Mn=R.serverSyncTree_.ackUserWrite(Le,!Yt);R.eventQueue_.raiseEventsForChangedPath(l,Mn),R.callOnCompleteCallback(S,Et,Kt)});var Ke=this.abortTransactions_(l);this.rerunTransactions_(Ke),this.eventQueue_.raiseEventsForChangedPath(Ke,[])},v.prototype.update=function(l,h,m){var S=this;this.log_("update",{path:l.toString(),value:h});var R=!0,H=this.generateServerValues(),z={};if(Pe(h,function(Le,Ye){R=!1,z[Le]=Oi(l.child(Le),bn(Ye),S.serverSyncTree_,H)}),R)At("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(m,"ok");else{var ue=this.getNextWriteId_(),ne=this.serverSyncTree_.applyUserMerge(l,z,ue);this.eventQueue_.queueEvents(ne),this.server_.merge(l.toString(),h,function(Le,Ye){var Ke="ok"===Le;Ke||rt("update at "+l+" failed: "+Le);var Et=S.serverSyncTree_.ackUserWrite(ue,!Ke),Kt=Et.length>0?S.rerunTransactions_(l):l;S.eventQueue_.raiseEventsForChangedPath(Kt,Et),S.callOnCompleteCallback(m,Le,Ye)}),Pe(h,function(Le){var Ye=S.abortTransactions_(l.child(Le));S.rerunTransactions_(Ye)}),this.eventQueue_.raiseEventsForChangedPath(l,[])}},v.prototype.runOnDisconnectEvents_=function(){var l=this;this.log_("onDisconnectEvents");var h=this.generateServerValues(),m=new Yo;this.onDisconnect_.forEachTree(nt.Empty,function(R,H){var z=Oi(R,H,l.serverSyncTree_,h);m.remember(R,z)});var S=[];m.forEachTree(nt.Empty,function(R,H){S=S.concat(l.serverSyncTree_.applyServerOverwrite(R,H));var z=l.abortTransactions_(R);l.rerunTransactions_(z)}),this.onDisconnect_=new Yo,this.eventQueue_.raiseEventsForChangedPath(nt.Empty,S)},v.prototype.onDisconnectCancel=function(l,h){var m=this;this.server_.onDisconnectCancel(l.toString(),function(S,R){"ok"===S&&m.onDisconnect_.forget(l),m.callOnCompleteCallback(h,S,R)})},v.prototype.onDisconnectSet=function(l,h,m){var S=this,R=bn(h);this.server_.onDisconnectPut(l.toString(),R.val(!0),function(H,z){"ok"===H&&S.onDisconnect_.remember(l,R),S.callOnCompleteCallback(m,H,z)})},v.prototype.onDisconnectSetWithPriority=function(l,h,m,S){var R=this,H=bn(h,m);this.server_.onDisconnectPut(l.toString(),H.val(!0),function(z,ue){"ok"===z&&R.onDisconnect_.remember(l,H),R.callOnCompleteCallback(S,z,ue)})},v.prototype.onDisconnectUpdate=function(l,h,m){var S=this;if(Z.isEmpty(h))return At("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(m,"ok");this.server_.onDisconnectMerge(l.toString(),h,function(R,H){"ok"===R&&Pe(h,function(z,ue){var ne=bn(ue);S.onDisconnect_.remember(l.child(z),ne)}),S.callOnCompleteCallback(m,R,H)})},v.prototype.addEventCallbackForQuery=function(l,h){var m;m=".info"===l.path.getFront()?this.infoSyncTree_.addEventRegistration(l,h):this.serverSyncTree_.addEventRegistration(l,h),this.eventQueue_.raiseEventsAtPath(l.path,m)},v.prototype.removeEventCallbackForQuery=function(l,h){var m;m=".info"===l.path.getFront()?this.infoSyncTree_.removeEventRegistration(l,h):this.serverSyncTree_.removeEventRegistration(l,h),this.eventQueue_.raiseEventsAtPath(l.path,m)},v.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Rt)},v.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Rt)},v.prototype.stats=function(l){if(void 0===l&&(l=!1),"undefined"!=typeof console){var h;l?(this.statsListener_||(this.statsListener_=new yt(this.stats_)),h=this.statsListener_.get()):h=this.stats_.get();var m=Object.keys(h).reduce(function(S,R){return Math.max(R.length,S)},0);Pe(h,function(S,R){for(var H=S,z=S.length;z<m+2;z++)H+=" ";console.log(H+R)})}},v.prototype.statsIncrementCounter=function(l){this.stats_.incrementCounter(l),this.statsReporter_.includeStat(l)},v.prototype.log_=function(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];var m="";this.persistentConnection_&&(m=this.persistentConnection_.id+":"),At.apply(void 0,Q.__spread([m],l))},v.prototype.callOnCompleteCallback=function(l,h,m){l&&St(function(){if("ok"===h)l(null);else{var S=(h||"error").toUpperCase(),R=S;m&&(R+=": "+m);var H=new Error(R);H.code=S,l(H)}})},Object.defineProperty(v.prototype,"database",{get:function(){return this.__database||(this.__database=new qe(this))},enumerable:!1,configurable:!0}),v}(),Ls=function(){function v(l){this.indexedFilter_=new Ki(l.getIndex()),this.index_=l.getIndex(),this.startPost_=v.getStartPost_(l),this.endPost_=v.getEndPost_(l)}return v.prototype.getStartPost=function(){return this.startPost_},v.prototype.getEndPost=function(){return this.endPost_},v.prototype.matches=function(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0},v.prototype.updateChild=function(l,h,m,S,R,H){return this.matches(new de(h,m))||(m=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(l,h,m,S,R,H)},v.prototype.updateFullNode=function(l,h,m){h.isLeafNode()&&(h=Bt.EMPTY_NODE);var S=h.withIndex(this.index_);S=S.updatePriority(Bt.EMPTY_NODE);var R=this;return h.forEachChild(fe,function(H,z){R.matches(new de(H,z))||(S=S.updateImmediateChild(H,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,S,m)},v.prototype.updatePriority=function(l,h){return l},v.prototype.filtersNodes=function(){return!0},v.prototype.getIndexedFilter=function(){return this.indexedFilter_},v.prototype.getIndex=function(){return this.index_},v.getStartPost_=function(l){if(l.hasStart()){var h=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),h)}return l.getIndex().minPost()},v.getEndPost_=function(l){if(l.hasEnd()){var h=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),h)}return l.getIndex().maxPost()},v}(),qi=function(){function v(l){this.rangedFilter_=new Ls(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}return v.prototype.updateChild=function(l,h,m,S,R,H){return this.rangedFilter_.matches(new de(h,m))||(m=Bt.EMPTY_NODE),l.getImmediateChild(h).equals(m)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,h,m,S,R,H):this.fullLimitUpdateChild_(l,h,m,R,H)},v.prototype.updateFullNode=function(l,h,m){var S;if(h.isLeafNode()||h.isEmpty())S=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<h.numChildren()&&h.isIndexed(this.index_)){S=Bt.EMPTY_NODE.withIndex(this.index_);var R=void 0;R=this.reverse_?h.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):h.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var H=0;R.hasNext()&&H<this.limit_;){var z=R.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),z)<=0:this.index_.compare(z,this.rangedFilter_.getEndPost())<=0))break;S=S.updateImmediateChild(z.name,z.node),H++}}else{S=(S=h.withIndex(this.index_)).updatePriority(Bt.EMPTY_NODE);var ne=void 0,Le=void 0,Ye=void 0;if(R=void 0,this.reverse_){R=S.getReverseIterator(this.index_),ne=this.rangedFilter_.getEndPost(),Le=this.rangedFilter_.getStartPost();var Ke=this.index_.getCompare();Ye=function(Mn,ar){return Ke(ar,Mn)}}else R=S.getIterator(this.index_),ne=this.rangedFilter_.getStartPost(),Le=this.rangedFilter_.getEndPost(),Ye=this.index_.getCompare();H=0;for(var Et=!1;R.hasNext();)z=R.getNext(),!Et&&Ye(ne,z)<=0&&(Et=!0),Et&&H<this.limit_&&Ye(z,Le)<=0?H++:S=S.updateImmediateChild(z.name,Bt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,S,m)},v.prototype.updatePriority=function(l,h){return l},v.prototype.filtersNodes=function(){return!0},v.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},v.prototype.getIndex=function(){return this.index_},v.prototype.fullLimitUpdateChild_=function(l,h,m,S,R){var H;if(this.reverse_){var z=this.index_.getCompare();H=function(Li,Ii){return z(Ii,Li)}}else H=this.index_.getCompare();var ue=l;Z.assert(ue.numChildren()===this.limit_,"");var ne=new de(h,m),Le=this.reverse_?ue.getFirstChild(this.index_):ue.getLastChild(this.index_),Ye=this.rangedFilter_.matches(ne);if(ue.hasChild(h)){for(var Ke=ue.getImmediateChild(h),Et=S.getChildAfterChild(this.index_,Le,this.reverse_);null!=Et&&(Et.name===h||ue.hasChild(Et.name));)Et=S.getChildAfterChild(this.index_,Et,this.reverse_);var Kt=null==Et?1:H(Et,ne);if(Ye&&!m.isEmpty()&&Kt>=0)return null!=R&&R.trackChildChange(Fn.childChangedChange(h,m,Ke)),ue.updateImmediateChild(h,m);null!=R&&R.trackChildChange(Fn.childRemovedChange(h,Ke));var Mn=ue.updateImmediateChild(h,Bt.EMPTY_NODE);return null!=Et&&this.rangedFilter_.matches(Et)?(null!=R&&R.trackChildChange(Fn.childAddedChange(Et.name,Et.node)),Mn.updateImmediateChild(Et.name,Et.node)):Mn}return m.isEmpty()?l:Ye&&H(Le,ne)>=0?(null!=R&&(R.trackChildChange(Fn.childRemovedChange(Le.name,Le.node)),R.trackChildChange(Fn.childAddedChange(h,m))),ue.updateImmediateChild(h,m).updateImmediateChild(Le.name,Bt.EMPTY_NODE)):l},v}(),ns=function(){function v(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fe}return v.prototype.hasStart=function(){return this.startSet_},v.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===v.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},v.prototype.getIndexStartValue=function(){return Z.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},v.prototype.getIndexStartName=function(){return Z.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},v.prototype.hasEnd=function(){return this.endSet_},v.prototype.getIndexEndValue=function(){return Z.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},v.prototype.getIndexEndName=function(){return Z.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:U},v.prototype.hasLimit=function(){return this.limitSet_},v.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},v.prototype.getLimit=function(){return Z.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},v.prototype.getIndex=function(){return this.index_},v.prototype.copy_=function(){var l=new v;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l},v.prototype.limit=function(l){var h=this.copy_();return h.limitSet_=!0,h.limit_=l,h.viewFrom_="",h},v.prototype.limitToFirst=function(l){var h=this.copy_();return h.limitSet_=!0,h.limit_=l,h.viewFrom_=v.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,h},v.prototype.limitToLast=function(l){var h=this.copy_();return h.limitSet_=!0,h.limit_=l,h.viewFrom_=v.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,h},v.prototype.startAt=function(l,h){var m=this.copy_();return m.startSet_=!0,void 0===l&&(l=null),m.indexStartValue_=l,null!=h?(m.startNameSet_=!0,m.indexStartName_=h):(m.startNameSet_=!1,m.indexStartName_=""),m},v.prototype.endAt=function(l,h){var m=this.copy_();return m.endSet_=!0,void 0===l&&(l=null),m.indexEndValue_=l,void 0!==h?(m.endNameSet_=!0,m.indexEndName_=h):(m.endNameSet_=!1,m.indexEndName_=""),m},v.prototype.orderBy=function(l){var h=this.copy_();return h.index_=l,h},v.prototype.getQueryObject=function(){var l=v.WIRE_PROTOCOL_CONSTANTS_,h={};if(this.startSet_&&(h[l.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(h[l.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(h[l.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(h[l.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){h[l.LIMIT]=this.limit_;var m=this.viewFrom_;""===m&&(m=this.isViewFromLeft()?l.VIEW_FROM_LEFT:l.VIEW_FROM_RIGHT),h[l.VIEW_FROM]=m}return this.index_!==fe&&(h[l.INDEX]=this.index_.toString()),h},v.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},v.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===fe},v.prototype.getNodeFilter=function(){return this.loadsAllData()?new Ki(this.getIndex()):this.hasLimit()?new qi(this):new Ls(this)},v.prototype.toRestQueryStringParameters=function(){var m,l=v.REST_QUERY_CONSTANTS_,h={};return this.isDefault()||(this.index_===fe?m=l.PRIORITY_INDEX:this.index_===Lr?m=l.VALUE_INDEX:this.index_===We?m=l.KEY_INDEX:(Z.assert(this.index_ instanceof $o,"Unrecognized index type!"),m=this.index_.toString()),h[l.ORDER_BY]=Z.stringify(m),this.startSet_&&(h[l.START_AT]=Z.stringify(this.indexStartValue_),this.startNameSet_&&(h[l.START_AT]+=","+Z.stringify(this.indexStartName_))),this.endSet_&&(h[l.END_AT]=Z.stringify(this.indexEndValue_),this.endNameSet_&&(h[l.END_AT]+=","+Z.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?h[l.LIMIT_TO_FIRST]=this.limit_:h[l.LIMIT_TO_LAST]=this.limit_)),h},v.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},v.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},v.DEFAULT=new v,v}(),Co=function(v){function l(h,m){if(!(h instanceof Dr))throw new Error("new Reference() no longer supported - use app.database().");return v.call(this,h,m,ns.DEFAULT,!1)||this}return Q.__extends(l,v),l.prototype.getKey=function(){return Z.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},l.prototype.child=function(h){return Z.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof h?h=String(h):h instanceof nt||(null===this.path.getFront()?Cr("Reference.child",1,h,!1):Cn("Reference.child",1,h,!1)),new l(this.repo,this.path.child(h))},l.prototype.getParent=function(){Z.validateArgCount("Reference.parent",0,0,arguments.length);var h=this.path.parent();return null===h?null:new l(this.repo,h)},l.prototype.getRoot=function(){Z.validateArgCount("Reference.root",0,0,arguments.length);for(var h=this;null!==h.getParent();)h=h.getParent();return h},l.prototype.databaseProp=function(){return this.repo.database},l.prototype.set=function(h,m){Z.validateArgCount("Reference.set",1,2,arguments.length),zn("Reference.set",this.path),Pt("Reference.set",1,h,this.path,!1),Z.validateCallback("Reference.set",2,m,!0);var S=new Z.Deferred;return this.repo.setWithPriority(this.path,h,null,S.wrapCallback(m)),S.promise},l.prototype.update=function(h,m){if(Z.validateArgCount("Reference.update",1,2,arguments.length),zn("Reference.update",this.path),Array.isArray(h)){for(var S={},R=0;R<h.length;++R)S[""+R]=h[R];h=S,rt("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}dn("Reference.update",1,h,this.path,!1),Z.validateCallback("Reference.update",2,m,!0);var H=new Z.Deferred;return this.repo.update(this.path,h,H.wrapCallback(m)),H.promise},l.prototype.setWithPriority=function(h,m,S){if(Z.validateArgCount("Reference.setWithPriority",2,3,arguments.length),zn("Reference.setWithPriority",this.path),Pt("Reference.setWithPriority",1,h,this.path,!1),Qn("Reference.setWithPriority",2,m,!1),Z.validateCallback("Reference.setWithPriority",3,S,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var R=new Z.Deferred;return this.repo.setWithPriority(this.path,h,m,R.wrapCallback(S)),R.promise},l.prototype.remove=function(h){return Z.validateArgCount("Reference.remove",0,1,arguments.length),zn("Reference.remove",this.path),Z.validateCallback("Reference.remove",1,h,!0),this.set(null,h)},l.prototype.transaction=function(h,m,S){if(Z.validateArgCount("Reference.transaction",1,3,arguments.length),zn("Reference.transaction",this.path),Z.validateCallback("Reference.transaction",1,h,!1),Z.validateCallback("Reference.transaction",2,m,!0),Bi("Reference.transaction",3,S,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===S&&(S=!0);var R=new Z.Deferred;"function"==typeof m&&R.promise.catch(function(){});var H=function(z,ue,ne){z?R.reject(z):R.resolve(new oi(ue,ne)),"function"==typeof m&&m(z,ue,ne)};return this.repo.startTransaction(this.path,h,H,S),R.promise},l.prototype.setPriority=function(h,m){Z.validateArgCount("Reference.setPriority",1,2,arguments.length),zn("Reference.setPriority",this.path),Qn("Reference.setPriority",1,h,!1),Z.validateCallback("Reference.setPriority",2,m,!0);var S=new Z.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),h,null,S.wrapCallback(m)),S.promise},l.prototype.push=function(h,m){Z.validateArgCount("Reference.push",0,2,arguments.length),zn("Reference.push",this.path),Pt("Reference.push",1,h,this.path,!0),Z.validateCallback("Reference.push",2,m,!0);var ue,S=this.repo.serverTime(),R=Ti(S),H=this.child(R),z=this.child(R);return ue=null!=h?H.set(h,m).then(function(){return z}):Promise.resolve(z),H.then=ue.then.bind(ue),H.catch=ue.then.bind(ue,void 0),"function"==typeof m&&ue.catch(function(){}),H},l.prototype.onDisconnect=function(){return zn("Reference.onDisconnect",this.path),new Zr(this.repo,this.path)},Object.defineProperty(l.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),l}(ro);ro.__referenceConstructor=Co,Es.__referenceConstructor=Co;var nu=function(){this.children={},this.childCount=0,this.value=null},Is=function(){function v(l,h,m){void 0===l&&(l=""),void 0===h&&(h=null),void 0===m&&(m=new nu),this.name_=l,this.parent_=h,this.node_=m}return v.prototype.subTree=function(l){for(var h=l instanceof nt?l:new nt(l),m=this,S=h.getFront();null!==S;)m=new v(S,m,Z.safeGet(m.node_.children,S)||new nu),S=(h=h.popFront()).getFront();return m},v.prototype.getValue=function(){return this.node_.value},v.prototype.setValue=function(l){Z.assert(void 0!==l,"Cannot set value to undefined"),this.node_.value=l,this.updateParents_()},v.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},v.prototype.hasChildren=function(){return this.node_.childCount>0},v.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},v.prototype.forEachChild=function(l){var h=this;Pe(this.node_.children,function(m,S){l(new v(m,h,S))})},v.prototype.forEachDescendant=function(l,h,m){h&&!m&&l(this),this.forEachChild(function(S){S.forEachDescendant(l,!0,m)}),h&&m&&l(this)},v.prototype.forEachAncestor=function(l,h){for(var m=h?this:this.parent();null!==m;){if(l(m))return!0;m=m.parent()}return!1},v.prototype.forEachImmediateDescendantWithValue=function(l){this.forEachChild(function(h){null!==h.getValue()?l(h):h.forEachImmediateDescendantWithValue(l)})},v.prototype.path=function(){return new nt(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},v.prototype.name=function(){return this.name_},v.prototype.parent=function(){return this.parent_},v.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},v.prototype.updateChild_=function(l,h){var m=h.isEmpty(),S=Z.contains(this.node_.children,l);m&&S?(delete this.node_.children[l],this.node_.childCount--,this.updateParents_()):!m&&!S&&(this.node_.children[l]=h.node_,this.node_.childCount++,this.updateParents_())},v}(),ui=(()=>(function(v){v[v.RUN=0]="RUN",v[v.SENT=1]="SENT",v[v.COMPLETED=2]="COMPLETED",v[v.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",v[v.NEEDS_ABORT=4]="NEEDS_ABORT"}(ui||(ui={})),ui))();Dr.MAX_TRANSACTION_RETRIES_=25,Dr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Is},Dr.prototype.startTransaction=function(v,l,h,m){this.log_("transaction on "+v);var S=function(){},R=new Co(this,v);R.on("value",S);var z={path:v,update:l,onComplete:h,status:null,order:mt(),applyLocally:m,retryCount:0,unwatcher:function(){R.off("value",S)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ue=this.getLatestState_(v);z.currentInputSnapshot=ue;var ne=z.update(ue.val());if(void 0===ne){if(z.unwatcher(),z.currentOutputSnapshotRaw=null,z.currentOutputSnapshotResolved=null,z.onComplete){var Le=new $i(z.currentInputSnapshot,new Co(this,z.path),fe);z.onComplete(null,!1,Le)}}else{Zt("transaction failed: Data returned ",ne,z.path),z.status=ui.RUN;var Ye=this.transactionQueueTree_.subTree(v),Ke=Ye.getValue()||[];Ke.push(z),Ye.setValue(Ke);var Et=void 0;"object"==typeof ne&&null!==ne&&Z.contains(ne,".priority")?(Et=Z.safeGet(ne,".priority"),Z.assert(Ft(Et),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Et=(this.serverSyncTree_.calcCompleteEventCache(v)||Bt.EMPTY_NODE).getPriority().val(),Et=Et;var Yt=this.generateServerValues(),Mn=bn(ne,Et),ar=Sn(Mn,ue,Yt);z.currentOutputSnapshotRaw=Mn,z.currentOutputSnapshotResolved=ar,z.currentWriteId=this.getNextWriteId_();var Li=this.serverSyncTree_.applyUserOverwrite(v,ar,z.currentWriteId,z.applyLocally);this.eventQueue_.raiseEventsForChangedPath(v,Li),this.sendReadyTransactions_()}},Dr.prototype.getLatestState_=function(v,l){return this.serverSyncTree_.calcCompleteEventCache(v,l)||Bt.EMPTY_NODE},Dr.prototype.sendReadyTransactions_=function(v){var l=this;if(void 0===v&&(v=this.transactionQueueTree_),v||this.pruneCompletedTransactionsBelowNode_(v),null!==v.getValue()){var h=this.buildTransactionQueue_(v);Z.assert(h.length>0,"Sending zero length transaction queue"),h.every(function(S){return S.status===ui.RUN})&&this.sendTransactionQueue_(v.path(),h)}else v.hasChildren()&&v.forEachChild(function(S){l.sendReadyTransactions_(S)})},Dr.prototype.sendTransactionQueue_=function(v,l){for(var h=this,m=l.map(function(Ke){return Ke.currentWriteId}),S=this.getLatestState_(v,m),R=S,H=S.hash(),z=0;z<l.length;z++){var ue=l[z];Z.assert(ue.status===ui.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),ue.status=ui.SENT,ue.retryCount++;var ne=nt.relativePath(v,ue.path);R=R.updateChild(ne,ue.currentOutputSnapshotRaw)}var Le=R.val(!0),Ye=v;this.server_.put(Ye.toString(),Le,function(Ke){h.log_("transaction put response",{path:Ye.toString(),status:Ke});var Et=[];if("ok"===Ke){for(var Kt=[],Yt=0;Yt<l.length;Yt++){if(l[Yt].status=ui.COMPLETED,Et=Et.concat(h.serverSyncTree_.ackUserWrite(l[Yt].currentWriteId)),l[Yt].onComplete){var Mn=l[Yt].currentOutputSnapshotResolved,ar=new Co(h,l[Yt].path),Li=new $i(Mn,ar,fe);Kt.push(l[Yt].onComplete.bind(null,null,!0,Li))}l[Yt].unwatcher()}for(h.pruneCompletedTransactionsBelowNode_(h.transactionQueueTree_.subTree(v)),h.sendReadyTransactions_(),h.eventQueue_.raiseEventsForChangedPath(v,Et),Yt=0;Yt<Kt.length;Yt++)St(Kt[Yt])}else{if("datastale"===Ke)for(Yt=0;Yt<l.length;Yt++)l[Yt].status=l[Yt].status===ui.SENT_NEEDS_ABORT?ui.NEEDS_ABORT:ui.RUN;else for(rt("transaction at "+Ye.toString()+" failed: "+Ke),Yt=0;Yt<l.length;Yt++)l[Yt].status=ui.NEEDS_ABORT,l[Yt].abortReason=Ke;h.rerunTransactions_(v)}},H)},Dr.prototype.rerunTransactions_=function(v){var l=this.getAncestorTransactionNode_(v),h=l.path(),m=this.buildTransactionQueue_(l);return this.rerunTransactionQueue_(m,h),h},Dr.prototype.rerunTransactionQueue_=function(v,l){if(0!==v.length){for(var h=[],m=[],R=v.filter(function(tn){return tn.status===ui.RUN}).map(function(tn){return tn.currentWriteId}),H=0;H<v.length;H++){var z=v[H],ue=nt.relativePath(l,z.path),ne=!1,Le=void 0;if(Z.assert(null!==ue,"rerunTransactionsUnderNode_: relativePath should not be null."),z.status===ui.NEEDS_ABORT)ne=!0,Le=z.abortReason,m=m.concat(this.serverSyncTree_.ackUserWrite(z.currentWriteId,!0));else if(z.status===ui.RUN)if(z.retryCount>=Dr.MAX_TRANSACTION_RETRIES_)ne=!0,Le="maxretry",m=m.concat(this.serverSyncTree_.ackUserWrite(z.currentWriteId,!0));else{var Ye=this.getLatestState_(z.path,R);z.currentInputSnapshot=Ye;var Ke=v[H].update(Ye.val());if(void 0!==Ke){Zt("transaction failed: Data returned ",Ke,z.path);var Et=bn(Ke);"object"==typeof Ke&&null!=Ke&&Z.contains(Ke,".priority")||(Et=Et.updatePriority(Ye.getPriority()));var Yt=z.currentWriteId,Mn=this.generateServerValues(),ar=Sn(Et,Ye,Mn);z.currentOutputSnapshotRaw=Et,z.currentOutputSnapshotResolved=ar,z.currentWriteId=this.getNextWriteId_(),R.splice(R.indexOf(Yt),1),m=(m=m.concat(this.serverSyncTree_.applyUserOverwrite(z.path,ar,z.currentWriteId,z.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(Yt,!0))}else ne=!0,Le="nodata",m=m.concat(this.serverSyncTree_.ackUserWrite(z.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(l,m),m=[],ne&&(v[H].status=ui.COMPLETED,setTimeout(v[H].unwatcher,Math.floor(0)),v[H].onComplete))if("nodata"===Le){var Li=new Co(this,v[H].path),yi=new $i(v[H].currentInputSnapshot,Li,fe);h.push(v[H].onComplete.bind(null,null,!1,yi))}else h.push(v[H].onComplete.bind(null,new Error(Le),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),H=0;H<h.length;H++)St(h[H]);this.sendReadyTransactions_()}},Dr.prototype.getAncestorTransactionNode_=function(v){var l,h=this.transactionQueueTree_;for(l=v.getFront();null!==l&&null===h.getValue();)h=h.subTree(l),l=(v=v.popFront()).getFront();return h},Dr.prototype.buildTransactionQueue_=function(v){var l=[];return this.aggregateTransactionQueuesForNode_(v,l),l.sort(function(h,m){return h.order-m.order}),l},Dr.prototype.aggregateTransactionQueuesForNode_=function(v,l){var h=this,m=v.getValue();if(null!==m)for(var S=0;S<m.length;S++)l.push(m[S]);v.forEachChild(function(R){h.aggregateTransactionQueuesForNode_(R,l)})},Dr.prototype.pruneCompletedTransactionsBelowNode_=function(v){var l=this,h=v.getValue();if(h){for(var m=0,S=0;S<h.length;S++)h[S].status!==ui.COMPLETED&&(h[m]=h[S],m++);h.length=m,v.setValue(h.length>0?h:null)}v.forEachChild(function(R){l.pruneCompletedTransactionsBelowNode_(R)})},Dr.prototype.abortTransactions_=function(v){var l=this,h=this.getAncestorTransactionNode_(v).path(),m=this.transactionQueueTree_.subTree(v);return m.forEachAncestor(function(S){l.abortTransactionsOnNode_(S)}),this.abortTransactionsOnNode_(m),m.forEachDescendant(function(S){l.abortTransactionsOnNode_(S)}),h},Dr.prototype.abortTransactionsOnNode_=function(v){var l=v.getValue();if(null!==l){for(var h=[],m=[],S=-1,R=0;R<l.length;R++)l[R].status!==ui.SENT_NEEDS_ABORT&&(l[R].status===ui.SENT?(Z.assert(S===R-1,"All SENT items should be at beginning of queue."),S=R,l[R].status=ui.SENT_NEEDS_ABORT,l[R].abortReason="set"):(Z.assert(l[R].status===ui.RUN,"Unexpected transaction status in abort"),l[R].unwatcher(),m=m.concat(this.serverSyncTree_.ackUserWrite(l[R].currentWriteId,!0)),l[R].onComplete&&h.push(l[R].onComplete.bind(null,new Error("set"),!1,null))));for(-1===S?v.setValue(null):l.length=S+1,this.eventQueue_.raiseEventsForChangedPath(v.path(),m),R=0;R<h.length;R++)St(h[R])}};var oe,y=function(){function v(l,h){var m=this;this.app_=l,this.authProvider_=h,this.auth_=null,this.auth_=h.getImmediate({optional:!0}),this.auth_||h.get().then(function(S){return m.auth_=S})}return v.prototype.getToken=function(l){return this.auth_?this.auth_.getToken(l).catch(function(h){return h&&"auth/token-not-initialized"===h.code?(At("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(h)}):Promise.resolve(null)},v.prototype.addTokenChangeListener=function(l){this.auth_?this.auth_.addAuthTokenListener(l):(setTimeout(function(){return l(null)},0),this.authProvider_.get().then(function(h){return h.addAuthTokenListener(l)}))},v.prototype.removeTokenChangeListener=function(l){this.authProvider_.get().then(function(h){return h.removeAuthTokenListener(l)})},v.prototype.notifyForInvalidToken=function(){var l='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';rt(l+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},v}(),P=function(){function v(){}return v.prototype.getToken=function(l){return Promise.resolve({accessToken:v.EMULATOR_AUTH_TOKEN})},v.prototype.addTokenChangeListener=function(l){l(v.EMULATOR_AUTH_TOKEN)},v.prototype.removeTokenChangeListener=function(l){},v.prototype.notifyForInvalidToken=function(){},v.EMULATOR_AUTH_TOKEN="owner",v}(),Te=function(){function v(){this.repos_={},this.useRestClient_=!1}return v.getInstance=function(){return oe||(oe=new v),oe},v.prototype.interrupt=function(){var l,h,m,S;try{for(var R=Q.__values(Object.keys(this.repos_)),H=R.next();!H.done;H=R.next()){var z=H.value;try{for(var ue=(m=void 0,Q.__values(Object.keys(this.repos_[z]))),ne=ue.next();!ne.done;ne=ue.next())this.repos_[z][ne.value].interrupt()}catch(Ye){m={error:Ye}}finally{try{ne&&!ne.done&&(S=ue.return)&&S.call(ue)}finally{if(m)throw m.error}}}}catch(Ye){l={error:Ye}}finally{try{H&&!H.done&&(h=R.return)&&h.call(R)}finally{if(l)throw l.error}}},v.prototype.resume=function(){var l,h,m,S;try{for(var R=Q.__values(Object.keys(this.repos_)),H=R.next();!H.done;H=R.next()){var z=H.value;try{for(var ue=(m=void 0,Q.__values(Object.keys(this.repos_[z]))),ne=ue.next();!ne.done;ne=ue.next())this.repos_[z][ne.value].resume()}catch(Ye){m={error:Ye}}finally{try{ne&&!ne.done&&(S=ue.return)&&S.call(ue)}finally{if(m)throw m.error}}}}catch(Ye){l={error:Ye}}finally{try{H&&!H.done&&(h=R.return)&&h.call(R)}finally{if(l)throw l.error}}},v.prototype.databaseFromApp=function(l,h,m,S){var R=m||l.options.databaseURL;void 0===R&&(l.options.projectId||He("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),At("Using default host for project ",l.options.projectId),R=l.options.projectId+"-default-rtdb.firebaseio.com");var ue,H=Rn(R,S),z=H.repoInfo,ne=void 0;"undefined"!=typeof process&&(ne=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ne?(ue=!0,z=(H=Rn(R="http://"+ne+"?ns="+z.namespace,S)).repoInfo):ue=!H.repoInfo.secure;var Le=S&&ue?new P:new y(l,h);return sr("Invalid Firebase Database URL",1,H),H.path.isEmpty()||He("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(z,l,Le).database},v.prototype.deleteRepo=function(l){var h=Z.safeGet(this.repos_,l.app.name);(!h||Z.safeGet(h,l.repoInfo_.toURLString())!==l)&&He("Database "+l.app.name+"("+l.repoInfo_+") has already been deleted."),l.interrupt(),delete h[l.repoInfo_.toURLString()]},v.prototype.createRepo=function(l,h,m){var S=Z.safeGet(this.repos_,h.name);S||(this.repos_[h.name]=S={});var R=Z.safeGet(S,l.toURLString());return R&&He("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),R=new Dr(l,this.useRestClient_,h,m),S[l.toURLString()]=R,R},v.prototype.forceRestClient=function(l){this.useRestClient_=l},v}(),qe=function(){function v(l){this.repo_=l,l instanceof Dr||He("Don't call new Database() directly - please use firebase.database()."),this.root_=new Co(l,nt.Empty),this.INTERNAL=new Xt(this)}return Object.defineProperty(v.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),v.prototype.ref=function(l){return this.checkDeleted_("ref"),Z.validateArgCount("database.ref",0,1,arguments.length),l instanceof Co?this.refFromURL(l.toString()):void 0!==l?this.root_.child(l):this.root_},v.prototype.refFromURL=function(l){var h="database.refFromURL";this.checkDeleted_(h),Z.validateArgCount(h,1,1,arguments.length);var m=Rn(l,this.repo_.repoInfo_.nodeAdmin);sr(h,1,m);var S=m.repoInfo;return S.host!==this.repo_.repoInfo_.host&&He(h+": Host name does not match the current database: (found "+S.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(m.path.toString())},v.prototype.checkDeleted_=function(l){null===this.repo_&&He("Cannot call "+l+" on a deleted database.")},v.prototype.goOffline=function(){Z.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},v.prototype.goOnline=function(){Z.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},v.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(l){return{".sv":{increment:l}}}},v}(),Xt=function(){function v(l){this.database=l}return v.prototype.delete=function(){return Q.__awaiter(this,void 0,void 0,function(){return Q.__generator(this,function(l){return this.database.checkDeleted_("delete"),Te.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},v}(),fi=Object.freeze({__proto__:null,forceLongPolling:function(){qr.forceDisallow(),Mi.forceAllow()},forceWebSockets:function(){Mi.forceDisallow()},isWebSocketsAvailable:function(){return qr.isAvailable()},setSecurityDebugCallback:function(v,l){v.repo.persistentConnection_.securityDebugCallback_=l},stats:function(v,l){v.repo.stats(l)},statsIncrementCounter:function(v,l){v.repo.statsIncrementCounter(l)},dataUpdateCount:function(v){return v.repo.dataUpdateCount},interceptServerData:function(v,l){return v.repo.interceptServerData_(l)}}),ru=Yn;Yn.prototype.simpleListen=function(v,l){this.sendRequest("q",{p:v},l)},Yn.prototype.echo=function(v,l){this.sendRequest("echo",{d:v},l)};var Da=Object.freeze({__proto__:null,DataConnection:ru,RealTimeConnection:na,hijackHash:function(v){var l=Yn.prototype.put;return Yn.prototype.put=function(h,m,S,R){void 0!==R&&(R=v()),l.call(this,h,m,S,R)},function(){Yn.prototype.put=l}},ConnectionTarget:Kn,queryIdentifier:function(v){return v.queryIdentifier()},forceRestClient:function(v){Te.getInstance().forceRestClient(v)}}),ra=qe.ServerValue;function Ts(v){!function(v){ai=v}(v.SDK_VERSION);var l=v.INTERNAL.registerComponent(new Xe.Component("database",function(h,m){var S=h.getProvider("app").getImmediate(),R=h.getProvider("auth-internal");return Te.getInstance().databaseFromApp(S,R,m)},"PUBLIC").setServiceProps({Reference:Co,Query:ro,Database:qe,DataSnapshot:$i,enableLogging:ze,INTERNAL:fi,ServerValue:ra,TEST_ACCESS:Da}).setMultipleInstances(!0));v.registerVersion("@firebase/database","0.6.13"),Z.isNodeSdk()&&(br.exports=l)}Ts(Ot.default),ot.DataSnapshot=$i,ot.Database=qe,ot.OnDisconnect=Zr,ot.Query=ro,ot.Reference=Co,ot.ServerValue=ra,ot.enableLogging=ze,ot.registerDatabase=Ts},684:(br,ot,lt)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var a,$=lt(704),Q=lt(2),Z=lt(433),kt=lt(488),Xe=lt(691),In=lt(544),ln=(a=Q)&&"object"==typeof a&&"default"in a?a:{default:a},ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},te=function(a){function i(s,f){var p=this;return(p=a.call(this,f)||this).code=s,p.message=f,p.name="FirebaseError",p.toString=function(){return p.name+": [code="+p.code+"]: "+p.message},p}return $.__extends(i,a),i}(Error),$e=new Z.Logger("@firebase/firestore");function Ze(){return $e.logLevel}function Ae(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if($e.logLevel<=Z.LogLevel.DEBUG){var f=i.map(Dt);$e.debug.apply($e,$.__spreadArrays(["Firestore (7.24.0): "+a],f))}}function mt(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if($e.logLevel<=Z.LogLevel.ERROR){var f=i.map(Dt);$e.error.apply($e,$.__spreadArrays(["Firestore (7.24.0): "+a],f))}}function fn(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if($e.logLevel<=Z.LogLevel.WARN){var f=i.map(Dt);$e.warn.apply($e,$.__spreadArrays(["Firestore (7.24.0): "+a],f))}}function Dt(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch(s){return a}}function Re(a){void 0===a&&(a="Unexpected state");var i="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+a;throw mt(i),new Error(i)}function it(a,i){a||Re()}function ze(a,i){return a}function At(a){var i=0;for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&i++;return i}function Nt(a,i){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&i(s,a[s])}function _t(a){for(var i in a)if(Object.prototype.hasOwnProperty.call(a,i))return!1;return!0}var He=function(){function a(i,s,f){void 0===s?s=0:s>i.length&&Re(),void 0===f?f=i.length-s:f>i.length-s&&Re(),this.segments=i,this.offset=s,this.t=f}return Object.defineProperty(a.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return 0===a.i(this,i)},a.prototype.child=function(i){var s=this.segments.slice(this.offset,this.limit());return i instanceof a?i.forEach(function(f){s.push(f)}):s.push(i),this.o(s)},a.prototype.limit=function(){return this.offset+this.length},a.prototype.u=function(i){return this.o(this.segments,this.offset+(i=void 0===i?1:i),this.length-i)},a.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},a.prototype.l=function(){return this.segments[this.offset]},a.prototype._=function(){return this.get(this.length-1)},a.prototype.get=function(i){return this.segments[this.offset+i]},a.prototype.m=function(){return 0===this.length},a.prototype.T=function(i){if(i.length<this.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==i.get(s))return!1;return!0},a.prototype.I=function(i){if(this.length+1!==i.length)return!1;for(var s=0;s<this.length;s++)if(this.get(s)!==i.get(s))return!1;return!0},a.prototype.forEach=function(i){for(var s=this.offset,f=this.limit();s<f;s++)i(this.segments[s])},a.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},a.i=function(i,s){for(var f=Math.min(i.length,s.length),p=0;p<f;p++){var _=i.get(p),I=s.get(p);if(_<I)return-1;if(_>I)return 1}return i.length<s.length?-1:i.length>s.length?1:0},a}(),rt=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.prototype.o=function(s,f,p){return new i(s,f,p)},i.prototype.R=function(){return this.A().join("/")},i.prototype.toString=function(){return this.R()},i.g=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];for(var p=[],_=0,I=s;_<I.length;_++){var O=I[_];if(O.indexOf("//")>=0)throw new te(ge.INVALID_ARGUMENT,"Invalid segment ("+O+"). Paths must not contain // in them.");p.push.apply(p,O.split("/").filter(function(V){return V.length>0}))}return new i(p)},i.P=function(){return new i([])},i}(He),D=/^[_a-zA-Z][_a-zA-Z0-9]*$/,C=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.prototype.o=function(s,f,p){return new i(s,f,p)},i.V=function(s){return D.test(s)},i.prototype.R=function(){return this.A().map(function(s){return s=s.replace("\\","\\\\").replace("`","\\`"),i.V(s)||(s="`"+s+"`"),s}).join(".")},i.prototype.toString=function(){return this.R()},i.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},i.v=function(){return new i(["__name__"])},i.S=function(s){for(var f=[],p="",_=0,I=function(){if(0===p.length)throw new te(ge.INVALID_ARGUMENT,"Invalid field path ("+s+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");f.push(p),p=""},O=!1;_<s.length;){var V=s[_];if("\\"===V){if(_+1===s.length)throw new te(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+s);var X=s[_+1];if("\\"!==X&&"."!==X&&"`"!==X)throw new te(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);p+=X,_+=2}else"`"===V?(O=!O,_++):"."!==V||O?(p+=V,_++):(I(),_++)}if(I(),O)throw new te(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new i(f)},i.P=function(){return new i([])},i}(He),E=function(){function a(i){this.path=i}return a.D=function(i){return new a(rt.g(i))},a.C=function(i){return new a(rt.g(i).u(5))},a.prototype.N=function(i){return this.path.length>=2&&this.path.get(this.path.length-2)===i},a.prototype.isEqual=function(i){return null!==i&&0===rt.i(this.path,i.path)},a.prototype.toString=function(){return this.path.toString()},a.i=function(i,s){return rt.i(i.path,s.path)},a.F=function(i){return i.length%2==0},a.$=function(i){return new a(new rt(i.slice()))},a}();function k(a,i){if(0!==i.length)throw new te(ge.INVALID_ARGUMENT,"Function "+a+"() does not support arguments, but was called with "+Nn(i.length,"argument")+".")}function U(a,i,s){if(i.length!==s)throw new te(ge.INVALID_ARGUMENT,"Function "+a+"() requires "+Nn(s,"argument")+", but was called with "+Nn(i.length,"argument")+".")}function N(a,i,s){if(i.length<s)throw new te(ge.INVALID_ARGUMENT,"Function "+a+"() requires at least "+Nn(s,"argument")+", but was called with "+Nn(i.length,"argument")+".")}function ee(a,i,s,f){if(i.length<s||i.length>f)throw new te(ge.INVALID_ARGUMENT,"Function "+a+"() requires between "+s+" and "+f+" arguments, but was called with "+Nn(i.length,"argument")+".")}function ae(a,i,s,f){De(a,i,nt(s)+" argument",f)}function pt(a,i,s,f){void 0!==f&&ae(a,i,s,f)}function re(a,i,s,f){De(a,i,s+" option",f)}function Pe(a,i,s,f){void 0!==f&&re(a,i,s,f)}function dt(a,i,s,f,p){void 0!==f&&function(_,I,O,V,X){for(var ce=[],Ee=0,Ie=X;Ee<Ie.length;Ee++){var Ue=Ie[Ee];if(Ue===V)return;ce.push(at(Ue))}var Je=at(V);throw new te(ge.INVALID_ARGUMENT,"Invalid value "+Je+" provided to function "+_+'() for option "'+O+'". Acceptable values: '+ce.join(", "))}(a,0,s,f,p)}function Se(a,i,s,f){if(!i.some(function(p){return p===f}))throw new te(ge.INVALID_ARGUMENT,"Invalid value "+at(f)+" provided to function "+a+"() for its "+nt(s)+" argument. Acceptable values: "+i.join(", "));return f}function De(a,i,s,f){if(!("object"===i?Ve(f):"non-empty string"===i?"string"==typeof f&&""!==f:typeof f===i)){var p=at(f);throw new te(ge.INVALID_ARGUMENT,"Function "+a+"() requires its "+s+" to be of type "+i+", but it was: "+p)}}function Ve(a){return"object"==typeof a&&null!==a&&(Object.getPrototypeOf(a)===Object.prototype||null===Object.getPrototypeOf(a))}function at(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=a.substring(0,20)+"..."),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";var i=function(s){if(s.constructor){var f=/function\s+([^\s(]+)\s*\(/.exec(s.constructor.toString());if(f&&f.length>1)return f[1]}return null}(a);return i?"a custom "+i+" object":"an object"}return"function"==typeof a?"a function":Re()}function Gt(a,i,s){if(void 0===s)throw new te(ge.INVALID_ARGUMENT,"Function "+a+"() requires a valid "+nt(i)+" argument, but it was undefined.")}function St(a,i,s){Nt(i,function(f,p){if(s.indexOf(f)<0)throw new te(ge.INVALID_ARGUMENT,"Unknown option '"+f+"' passed to function "+a+"(). Available options: "+s.join(", "))})}function Wt(a,i,s,f){var p=at(f);return new te(ge.INVALID_ARGUMENT,"Function "+a+"() requires its "+nt(s)+" argument to be a "+i+", but it was: "+p)}function on(a,i,s){if(s<=0)throw new te(ge.INVALID_ARGUMENT,"Function "+a+"() requires its "+nt(i)+" argument to be a positive number, but it was: "+s+".")}function nt(a){switch(a){case 1:return"first";case 2:return"second";case 3:return"third";default:return a+"th"}}function Nn(a,i){return a+" "+i+(1===a?"":"s")}function vr(a){var i="undefined"!=typeof self&&(self.crypto||self.msCrypto),s=new Uint8Array(a);if(i&&"function"==typeof i.getRandomValues)i.getRandomValues(s);else for(var f=0;f<a;f++)s[f]=Math.floor(256*Math.random());return s}var nn=function(){function a(){}return a.k=function(){for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/i.length)*i.length,f="";f.length<20;)for(var p=vr(40),_=0;_<p.length;++_)f.length<20&&p[_]<s&&(f+=i.charAt(p[_]%i.length));return f},a}();function Lt(a,i){return a<i?-1:a>i?1:0}function un(a,i,s){return a.length===i.length&&a.every(function(f,p){return s(f,i[p])})}function vn(a){return a+"\0"}var Vt=function(){function a(i){this.M=i}return a.fromBase64String=function(i){return new a(atob(i))},a.fromUint8Array=function(i){return new a(function(s){for(var f="",p=0;p<s.length;++p)f+=String.fromCharCode(s[p]);return f}(i))},a.prototype.toBase64=function(){return btoa(this.M)},a.prototype.toUint8Array=function(){return function(i){for(var s=new Uint8Array(i.length),f=0;f<i.length;f++)s[f]=i.charCodeAt(f);return s}(this.M)},a.prototype.O=function(){return 2*this.M.length},a.prototype.L=function(i){return Lt(this.M,i.M)},a.prototype.isEqual=function(i){return this.M===i.M},a}();Vt.B=new Vt("");var yn=function(){function a(i){this.q=i}return a.fromBase64String=function(i){try{return new a(Vt.fromBase64String(i))}catch(s){throw new te(ge.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+s)}},a.fromUint8Array=function(i){return new a(Vt.fromUint8Array(i))},a.prototype.toBase64=function(){return this.q.toBase64()},a.prototype.toUint8Array=function(){return this.q.toUint8Array()},a.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},a.prototype.isEqual=function(i){return this.q.isEqual(i.q)},a}();function Jn(){if("undefined"==typeof Uint8Array)throw new te(ge.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ir(){if("undefined"==typeof atob)throw new te(ge.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Zn=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.fromBase64String=function(s){U("Blob.fromBase64String",arguments,1),ae("Blob.fromBase64String","string",1,s),ir();try{return new i(Vt.fromBase64String(s))}catch(f){throw new te(ge.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+f)}},i.fromUint8Array=function(s){if(U("Blob.fromUint8Array",arguments,1),Jn(),!(s instanceof Uint8Array))throw Wt("Blob.fromUint8Array","Uint8Array",1,s);return new i(Vt.fromUint8Array(s))},i.prototype.toBase64=function(){return U("Blob.toBase64",arguments,0),ir(),a.prototype.toBase64.call(this)},i.prototype.toUint8Array=function(){return U("Blob.toUint8Array",arguments,0),Jn(),a.prototype.toUint8Array.call(this)},i.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},i}(yn),Kn=function(a,i,s,f,p,_){this.U=a,this.persistenceKey=i,this.host=s,this.ssl=f,this.forceLongPolling=p,this.W=_},Pr=function(){function a(i,s){this.projectId=i,this.database=s||"(default)"}return Object.defineProperty(a.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return i instanceof a&&i.projectId===this.projectId&&i.database===this.database},a.prototype.L=function(i){return Lt(this.projectId,i.projectId)||Lt(this.database,i.database)},a}(),or=function(){function a(i,s){this.K=i,this.G=s,this.H={}}return a.prototype.get=function(i){var s=this.K(i),f=this.H[s];if(void 0!==f)for(var p=0,_=f;p<_.length;p++){var I=_[p],V=I[1];if(this.G(I[0],i))return V}},a.prototype.has=function(i){return void 0!==this.get(i)},a.prototype.set=function(i,s){var f=this.K(i),p=this.H[f];if(void 0!==p){for(var _=0;_<p.length;_++)if(this.G(p[_][0],i))return void(p[_]=[i,s]);p.push([i,s])}else this.H[f]=[[i,s]]},a.prototype.delete=function(i){var s=this.K(i),f=this.H[s];if(void 0===f)return!1;for(var p=0;p<f.length;p++)if(this.G(f[p][0],i))return 1===f.length?delete this.H[s]:f.splice(p,1),!0;return!1},a.prototype.forEach=function(i){Nt(this.H,function(s,f){for(var p=0,_=f;p<_.length;p++){var I=_[p];i(I[0],I[1])}})},a.prototype.m=function(){return _t(this.H)},a}(),Rn=function(){function a(i,s){if(this.seconds=i,this.nanoseconds=s,s<0)throw new te(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new te(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(i<-62135596800)throw new te(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i);if(i>=253402300800)throw new te(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}return a.now=function(){return a.fromMillis(Date.now())},a.fromDate=function(i){return a.fromMillis(i.getTime())},a.fromMillis=function(i){var s=Math.floor(i/1e3);return new a(s,1e6*(i-1e3*s))},a.prototype.toDate=function(){return new Date(this.toMillis())},a.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},a.prototype.Y=function(i){return this.seconds===i.seconds?Lt(this.nanoseconds,i.nanoseconds):Lt(this.seconds,i.seconds)},a.prototype.isEqual=function(i){return i.seconds===this.seconds&&i.nanoseconds===this.nanoseconds},a.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},a.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},a.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},a}(),_n=function(){function a(i){this.timestamp=i}return a.J=function(i){return new a(i)},a.min=function(){return new a(new Rn(0,0))},a.prototype.L=function(i){return this.timestamp.Y(i.timestamp)},a.prototype.isEqual=function(i){return this.timestamp.isEqual(i.timestamp)},a.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},a.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},a.prototype.Z=function(){return this.timestamp},a}();function Jr(a){return null==a}function je(a){return 0===a&&1/a==-1/0}function he(a){return"number"==typeof a&&Number.isInteger(a)&&!je(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}var Fe=function(a,i,s,f,p,_,I){void 0===i&&(i=null),void 0===s&&(s=[]),void 0===f&&(f=[]),void 0===p&&(p=null),void 0===_&&(_=null),void 0===I&&(I=null),this.path=a,this.collectionGroup=i,this.orderBy=s,this.filters=f,this.limit=p,this.startAt=_,this.endAt=I,this.tt=null};function Ge(a,i,s,f,p,_,I){return void 0===i&&(i=null),void 0===s&&(s=[]),void 0===f&&(f=[]),void 0===p&&(p=null),void 0===_&&(_=null),void 0===I&&(I=null),new Fe(a,i,s,f,p,_,I)}function xe(a){var i=ze(a);if(null===i.tt){var s=i.path.R();null!==i.collectionGroup&&(s+="|cg:"+i.collectionGroup),s+="|f:",s+=i.filters.map(function(f){return(p=f).field.R()+p.op.toString()+cn(p.value);var p}).join(","),s+="|ob:",s+=i.orderBy.map(function(f){return(p=f).field.R()+p.dir;var p}).join(","),Jr(i.limit)||(s+="|l:",s+=i.limit),i.startAt&&(s+="|lb:",s+=So(i.startAt)),i.endAt&&(s+="|ub:",s+=So(i.endAt)),i.tt=s}return i.tt}function Ft(a,i){if(a.limit!==i.limit||a.orderBy.length!==i.orderBy.length)return!1;for(var s=0;s<a.orderBy.length;s++)if(!$s(a.orderBy[s],i.orderBy[s]))return!1;if(a.filters.length!==i.filters.length)return!1;for(var f=0;f<a.filters.length;f++)if((p=a.filters[f]).op!==(_=i.filters[f]).op||!p.field.isEqual(_.field)||!_e(p.value,_.value))return!1;var p,_;return a.collectionGroup===i.collectionGroup&&!!a.path.isEqual(i.path)&&!!yo(a.startAt,i.startAt)&&yo(a.endAt,i.endAt)}function Pt(a){return E.F(a.path)&&null===a.collectionGroup&&0===a.filters.length}var Zt,$t,dn=function(){function a(i,s,f,p,_,I,O){void 0===_&&(_=_n.min()),void 0===I&&(I=_n.min()),void 0===O&&(O=Vt.B),this.target=i,this.targetId=s,this.et=f,this.sequenceNumber=p,this.nt=_,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=O}return a.prototype.st=function(i){return new a(this.target,this.targetId,this.et,i,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},a.prototype.it=function(i,s){return new a(this.target,this.targetId,this.et,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,i)},a.prototype.rt=function(i){return new a(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,i,this.resumeToken)},a}(),Qn=function(a){this.count=a};function On(a){switch(a){default:return Re();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function er(a){if(void 0===a)return mt("GRPC error has no .code"),ge.UNKNOWN;switch(a){case Zt.OK:return ge.OK;case Zt.CANCELLED:return ge.CANCELLED;case Zt.UNKNOWN:return ge.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ge.INTERNAL;case Zt.UNAVAILABLE:return ge.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ge.NOT_FOUND;case Zt.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Zt.ABORTED:return ge.ABORTED;case Zt.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Zt.DATA_LOSS:return ge.DATA_LOSS;default:return Re()}}($t=Zt||(Zt={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";var Cn=function(){function a(i,s){this.i=i,this.root=s||zn.EMPTY}return a.prototype.ot=function(i,s){return new a(this.i,this.root.ot(i,s,this.i).copy(null,null,zn.at,null,null))},a.prototype.remove=function(i){return new a(this.i,this.root.remove(i,this.i).copy(null,null,zn.at,null,null))},a.prototype.get=function(i){for(var s=this.root;!s.m();){var f=this.i(i,s.key);if(0===f)return s.value;f<0?s=s.left:f>0&&(s=s.right)}return null},a.prototype.indexOf=function(i){for(var s=0,f=this.root;!f.m();){var p=this.i(i,f.key);if(0===p)return s+f.left.size;p<0?f=f.left:(s+=f.left.size+1,f=f.right)}return-1},a.prototype.m=function(){return this.root.m()},Object.defineProperty(a.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),a.prototype.ct=function(){return this.root.ct()},a.prototype.ut=function(){return this.root.ut()},a.prototype.ht=function(i){return this.root.ht(i)},a.prototype.forEach=function(i){this.ht(function(s,f){return i(s,f),!1})},a.prototype.toString=function(){var i=[];return this.ht(function(s,f){return i.push(s+":"+f),!1}),"{"+i.join(", ")+"}"},a.prototype.lt=function(i){return this.root.lt(i)},a.prototype._t=function(){return new Cr(this.root,null,this.i,!1)},a.prototype.ft=function(i){return new Cr(this.root,i,this.i,!1)},a.prototype.dt=function(){return new Cr(this.root,null,this.i,!0)},a.prototype.wt=function(i){return new Cr(this.root,i,this.i,!0)},a}(),Cr=function(){function a(i,s,f,p){this.Tt=p,this.Et=[];for(var _=1;!i.m();)if(_=s?f(i.key,s):1,p&&(_*=-1),_<0)i=this.Tt?i.left:i.right;else{if(0===_){this.Et.push(i);break}this.Et.push(i),i=this.Tt?i.right:i.left}}return a.prototype.It=function(){var i=this.Et.pop(),s={key:i.key,value:i.value};if(this.Tt)for(i=i.left;!i.m();)this.Et.push(i),i=i.right;else for(i=i.right;!i.m();)this.Et.push(i),i=i.left;return s},a.prototype.At=function(){return this.Et.length>0},a.prototype.Rt=function(){if(0===this.Et.length)return null;var i=this.Et[this.Et.length-1];return{key:i.key,value:i.value}},a}(),zn=function(){function a(i,s,f,p,_){this.key=i,this.value=s,this.color=null!=f?f:a.RED,this.left=null!=p?p:a.EMPTY,this.right=null!=_?_:a.EMPTY,this.size=this.left.size+1+this.right.size}return a.prototype.copy=function(i,s,f,p,_){return new a(null!=i?i:this.key,null!=s?s:this.value,null!=f?f:this.color,null!=p?p:this.left,null!=_?_:this.right)},a.prototype.m=function(){return!1},a.prototype.ht=function(i){return this.left.ht(i)||i(this.key,this.value)||this.right.ht(i)},a.prototype.lt=function(i){return this.right.lt(i)||i(this.key,this.value)||this.left.lt(i)},a.prototype.min=function(){return this.left.m()?this:this.left.min()},a.prototype.ct=function(){return this.min().key},a.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},a.prototype.ot=function(i,s,f){var p=this,_=f(i,p.key);return(p=_<0?p.copy(null,null,null,p.left.ot(i,s,f),null):0===_?p.copy(null,s,null,null,null):p.copy(null,null,null,null,p.right.ot(i,s,f))).gt()},a.prototype.Pt=function(){if(this.left.m())return a.EMPTY;var i=this;return i.left.yt()||i.left.left.yt()||(i=i.Vt()),(i=i.copy(null,null,null,i.left.Pt(),null)).gt()},a.prototype.remove=function(i,s){var f,p=this;if(s(i,p.key)<0)p.left.m()||p.left.yt()||p.left.left.yt()||(p=p.Vt()),p=p.copy(null,null,null,p.left.remove(i,s),null);else{if(p.left.yt()&&(p=p.bt()),p.right.m()||p.right.yt()||p.right.left.yt()||(p=p.vt()),0===s(i,p.key)){if(p.right.m())return a.EMPTY;f=p.right.min(),p=p.copy(f.key,f.value,null,null,p.right.Pt())}p=p.copy(null,null,null,null,p.right.remove(i,s))}return p.gt()},a.prototype.yt=function(){return this.color},a.prototype.gt=function(){var i=this;return i.right.yt()&&!i.left.yt()&&(i=i.St()),i.left.yt()&&i.left.left.yt()&&(i=i.bt()),i.left.yt()&&i.right.yt()&&(i=i.Dt()),i},a.prototype.Vt=function(){var i=this.Dt();return i.right.left.yt()&&(i=(i=(i=i.copy(null,null,null,null,i.right.bt())).St()).Dt()),i},a.prototype.vt=function(){var i=this.Dt();return i.left.left.yt()&&(i=(i=i.bt()).Dt()),i},a.prototype.St=function(){var i=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)},a.prototype.bt=function(){var i=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)},a.prototype.Dt=function(){var i=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,s)},a.prototype.Ct=function(){var i=this.Nt();return Math.pow(2,i)<=this.size+1},a.prototype.Nt=function(){if(this.yt()&&this.left.yt()||this.right.yt())throw Re();var i=this.left.Nt();if(i!==this.right.Nt())throw Re();return i+(this.yt()?0:1)},a}();zn.EMPTY=null,zn.RED=!0,zn.at=!1,zn.EMPTY=new(function(){function a(){this.size=0}return Object.defineProperty(a.prototype,"key",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"value",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"color",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"left",{get:function(){throw Re()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"right",{get:function(){throw Re()},enumerable:!1,configurable:!0}),a.prototype.copy=function(i,s,f,p,_){return this},a.prototype.ot=function(i,s,f){return new zn(i,s)},a.prototype.remove=function(i,s){return this},a.prototype.m=function(){return!0},a.prototype.ht=function(i){return!1},a.prototype.lt=function(i){return!1},a.prototype.ct=function(){return null},a.prototype.ut=function(){return null},a.prototype.yt=function(){return!1},a.prototype.Ct=function(){return!0},a.prototype.Nt=function(){return 0},a}());var sr=function(){function a(i){this.i=i,this.data=new Cn(this.i)}return a.prototype.has=function(i){return null!==this.data.get(i)},a.prototype.first=function(){return this.data.ct()},a.prototype.last=function(){return this.data.ut()},Object.defineProperty(a.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),a.prototype.indexOf=function(i){return this.data.indexOf(i)},a.prototype.forEach=function(i){this.data.ht(function(s,f){return i(s),!1})},a.prototype.Ft=function(i,s){for(var f=this.data.ft(i[0]);f.At();){var p=f.It();if(this.i(p.key,i[1])>=0)return;s(p.key)}},a.prototype.xt=function(i,s){var f;for(f=void 0!==s?this.data.ft(s):this.data._t();f.At();)if(!i(f.It().key))return},a.prototype.$t=function(i){var s=this.data.ft(i);return s.At()?s.It().key:null},a.prototype._t=function(){return new Bi(this.data._t())},a.prototype.ft=function(i){return new Bi(this.data.ft(i))},a.prototype.add=function(i){return this.copy(this.data.remove(i).ot(i,!0))},a.prototype.delete=function(i){return this.has(i)?this.copy(this.data.remove(i)):this},a.prototype.m=function(){return this.data.m()},a.prototype.kt=function(i){var s=this;return s.size<i.size&&(s=i,i=this),i.forEach(function(f){s=s.add(f)}),s},a.prototype.isEqual=function(i){if(!(i instanceof a)||this.size!==i.size)return!1;for(var s=this.data._t(),f=i.data._t();s.At();){var p=s.It().key,_=f.It().key;if(0!==this.i(p,_))return!1}return!0},a.prototype.A=function(){var i=[];return this.forEach(function(s){i.push(s)}),i},a.prototype.toString=function(){var i=[];return this.forEach(function(s){return i.push(s)}),"SortedSet("+i.toString()+")"},a.prototype.copy=function(i){var s=new a(this.i);return s.data=i,s},a}(),Bi=function(){function a(i){this.Mt=i}return a.prototype.It=function(){return this.Mt.It().key},a.prototype.At=function(){return this.Mt.At()},a}(),Zr=new Cn(E.i);function oi(){return Zr}function Ti(){return oi()}var de=new Cn(E.i);function Me(){return de}var Be=new Cn(E.i),st=new sr(E.i);function We(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];for(var s=st,f=0,p=a;f<p.length;f++){var _=p[f];s=s.add(_)}return s}var tt=new sr(Lt);function It(){return tt}var Ut=function(){function a(i){this.i=i?function(s,f){return i(s,f)||E.i(s.key,f.key)}:function(s,f){return E.i(s.key,f.key)},this.Ot=Me(),this.Lt=new Cn(this.i)}return a.Bt=function(i){return new a(i.i)},a.prototype.has=function(i){return null!=this.Ot.get(i)},a.prototype.get=function(i){return this.Ot.get(i)},a.prototype.first=function(){return this.Lt.ct()},a.prototype.last=function(){return this.Lt.ut()},a.prototype.m=function(){return this.Lt.m()},a.prototype.indexOf=function(i){var s=this.Ot.get(i);return s?this.Lt.indexOf(s):-1},Object.defineProperty(a.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),a.prototype.forEach=function(i){this.Lt.ht(function(s,f){return i(s),!1})},a.prototype.add=function(i){var s=this.delete(i.key);return s.copy(s.Ot.ot(i.key,i),s.Lt.ot(i,null))},a.prototype.delete=function(i){var s=this.get(i);return s?this.copy(this.Ot.remove(i),this.Lt.remove(s)):this},a.prototype.isEqual=function(i){if(!(i instanceof a)||this.size!==i.size)return!1;for(var s=this.Lt._t(),f=i.Lt._t();s.At();){var p=s.It().key,_=f.It().key;if(!p.isEqual(_))return!1}return!0},a.prototype.toString=function(){var i=[];return this.forEach(function(s){i.push(s.toString())}),0===i.length?"DocumentSet ()":"DocumentSet (\n  "+i.join("  \n")+"\n)"},a.prototype.copy=function(i,s){var f=new a;return f.i=this.i,f.Ot=i,f.Lt=s,f},a}(),an=function(){function a(){this.qt=new Cn(E.i)}return a.prototype.track=function(i){var s=i.doc.key,f=this.qt.get(s);f?0!==i.type&&3===f.type?this.qt=this.qt.ot(s,i):3===i.type&&1!==f.type?this.qt=this.qt.ot(s,{type:f.type,doc:i.doc}):2===i.type&&2===f.type?this.qt=this.qt.ot(s,{type:2,doc:i.doc}):2===i.type&&0===f.type?this.qt=this.qt.ot(s,{type:0,doc:i.doc}):1===i.type&&0===f.type?this.qt=this.qt.remove(s):1===i.type&&2===f.type?this.qt=this.qt.ot(s,{type:1,doc:f.doc}):0===i.type&&1===f.type?this.qt=this.qt.ot(s,{type:2,doc:i.doc}):Re():this.qt=this.qt.ot(s,i)},a.prototype.Ut=function(){var i=[];return this.qt.ht(function(s,f){i.push(f)}),i},a}(),wt=function(){function a(i,s,f,p,_,I,O,V){this.query=i,this.docs=s,this.Qt=f,this.docChanges=p,this.Wt=_,this.fromCache=I,this.jt=O,this.Kt=V}return a.Gt=function(i,s,f,p){var _=[];return s.forEach(function(I){_.push({type:0,doc:I})}),new a(i,s,Ut.Bt(s),_,f,p,!0,!1)},Object.defineProperty(a.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){if(!(this.fromCache===i.fromCache&&this.jt===i.jt&&this.Wt.isEqual(i.Wt)&&vi(this.query,i.query)&&this.docs.isEqual(i.docs)&&this.Qt.isEqual(i.Qt)))return!1;var s=this.docChanges,f=i.docChanges;if(s.length!==f.length)return!1;for(var p=0;p<s.length;p++)if(s[p].type!==f[p].type||!s[p].doc.isEqual(f[p].doc))return!1;return!0},a}(),rn=function(){function a(i,s,f,p,_){this.nt=i,this.zt=s,this.Ht=f,this.Yt=p,this.Jt=_}return a.Xt=function(i,s){var f=new Map;return f.set(i,tr.Zt(i,s)),new a(_n.min(),f,It(),oi(),We())},a}(),tr=function(){function a(i,s,f,p,_){this.resumeToken=i,this.te=s,this.ee=f,this.ne=p,this.se=_}return a.Zt=function(i,s){return new a(Vt.B,s,We(),We(),We())},a}(),jn=function(a,i,s,f){this.ie=a,this.removedTargetIds=i,this.key=s,this.re=f},Bn=function(a,i){this.targetId=a,this.oe=i},zr=function(a,i,s,f){void 0===s&&(s=Vt.B),void 0===f&&(f=null),this.state=a,this.targetIds=i,this.resumeToken=s,this.cause=f},pe=function(){function a(){this.ae=0,this.ce=Ce(),this.ue=Vt.B,this.he=!1,this.le=!0}return Object.defineProperty(a.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),a.prototype.de=function(i){i.O()>0&&(this.le=!0,this.ue=i)},a.prototype.we=function(){var i=We(),s=We(),f=We();return this.ce.forEach(function(p,_){switch(_){case 0:i=i.add(p);break;case 2:s=s.add(p);break;case 1:f=f.add(p);break;default:Re()}}),new tr(this.ue,this.he,i,s,f)},a.prototype.me=function(){this.le=!1,this.ce=Ce()},a.prototype.Te=function(i,s){this.le=!0,this.ce=this.ce.ot(i,s)},a.prototype.Ee=function(i){this.le=!0,this.ce=this.ce.remove(i)},a.prototype.Ie=function(){this.ae+=1},a.prototype.Ae=function(){this.ae-=1},a.prototype.Re=function(){this.le=!0,this.he=!0},a}(),fe=function(){function a(i){this.ge=i,this.Pe=new Map,this.ye=oi(),this.Ve=me(),this.pe=new sr(Lt)}return a.prototype.be=function(i){for(var s=0,f=i.ie;s<f.length;s++){var p=f[s];i.re instanceof fr?this.ve(p,i.re):i.re instanceof Er&&this.Se(p,i.key,i.re)}for(var _=0,I=i.removedTargetIds;_<I.length;_++)this.Se(I[_],i.key,i.re)},a.prototype.De=function(i){var s=this;this.Ce(i,function(f){var p=s.Ne(f);switch(i.state){case 0:s.Fe(f)&&p.de(i.resumeToken);break;case 1:p.Ae(),p._e||p.me(),p.de(i.resumeToken);break;case 2:p.Ae(),p._e||s.removeTarget(f);break;case 3:s.Fe(f)&&(p.Re(),p.de(i.resumeToken));break;case 4:s.Fe(f)&&(s.xe(f),p.de(i.resumeToken));break;default:Re()}})},a.prototype.Ce=function(i,s){var f=this;i.targetIds.length>0?i.targetIds.forEach(s):this.Pe.forEach(function(p,_){f.Fe(_)&&s(_)})},a.prototype.$e=function(i){var s=i.targetId,f=i.oe.count,p=this.ke(s);if(p){var _=p.target;if(Pt(_))if(0===f){var I=new E(_.path);this.Se(s,I,new Er(I,_n.min()))}else it(1===f);else this.Me(s)!==f&&(this.xe(s),this.pe=this.pe.add(s))}},a.prototype.Oe=function(i){var s=this,f=new Map;this.Pe.forEach(function(I,O){var V=s.ke(O);if(V){if(I.te&&Pt(V.target)){var X=new E(V.target.path);null!==s.ye.get(X)||s.Le(O,X)||s.Se(O,X,new Er(X,i))}I.fe&&(f.set(O,I.we()),I.me())}});var p=We();this.Ve.forEach(function(I,O){var V=!0;O.xt(function(X){var ce=s.ke(X);return!ce||2===ce.et||(V=!1,!1)}),V&&(p=p.add(I))});var _=new rn(i,f,this.pe,this.ye,p);return this.ye=oi(),this.Ve=me(),this.pe=new sr(Lt),_},a.prototype.ve=function(i,s){if(this.Fe(i)){var f=this.Le(i,s.key)?2:0;this.Ne(i).Te(s.key,f),this.ye=this.ye.ot(s.key,s),this.Ve=this.Ve.ot(s.key,this.Be(s.key).add(i))}},a.prototype.Se=function(i,s,f){if(this.Fe(i)){var p=this.Ne(i);this.Le(i,s)?p.Te(s,1):p.Ee(s),this.Ve=this.Ve.ot(s,this.Be(s).delete(i)),f&&(this.ye=this.ye.ot(s,f))}},a.prototype.removeTarget=function(i){this.Pe.delete(i)},a.prototype.Me=function(i){var s=this.Ne(i).we();return this.ge.qe(i).size+s.ee.size-s.se.size},a.prototype.Ie=function(i){this.Ne(i).Ie()},a.prototype.Ne=function(i){var s=this.Pe.get(i);return s||(s=new pe,this.Pe.set(i,s)),s},a.prototype.Be=function(i){var s=this.Ve.get(i);return s||(s=new sr(Lt),this.Ve=this.Ve.ot(i,s)),s},a.prototype.Fe=function(i){var s=null!==this.ke(i);return s||Ae("WatchChangeAggregator","Detected inactive target",i),s},a.prototype.ke=function(i){var s=this.Pe.get(i);return s&&s._e?null:this.ge.Ue(i)},a.prototype.xe=function(i){var s=this;this.Pe.set(i,new pe),this.ge.qe(i).forEach(function(f){s.Se(i,f,null)})},a.prototype.Le=function(i,s){return this.ge.qe(i).has(s)},a}();function me(){return new Cn(E.i)}function Ce(){return new Cn(E.i)}function J(a){var i,s;return"server_timestamp"===(null===(s=((null===(i=null==a?void 0:a.mapValue)||void 0===i?void 0:i.fields)||{}).__type__)||void 0===s?void 0:s.stringValue)}function x(a){var i=a.mapValue.fields.__previous_value__;return J(i)?x(i):i}function W(a){var i=Bt(a.mapValue.fields.__local_write_time__.timestampValue);return new Rn(i.seconds,i.nanos)}var se=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ye(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?J(a)?4:10:Re()}function _e(a,i){var p,s=ye(a);if(s!==ye(i))return!1;switch(s){case 0:return!0;case 1:return a.booleanValue===i.booleanValue;case 4:return W(a).isEqual(W(i));case 3:return function(f,p){if("string"==typeof f.timestampValue&&"string"==typeof p.timestampValue&&f.timestampValue.length===p.timestampValue.length)return f.timestampValue===p.timestampValue;var _=Bt(f.timestampValue),I=Bt(p.timestampValue);return _.seconds===I.seconds&&_.nanos===I.nanos}(a,i);case 5:return a.stringValue===i.stringValue;case 6:return p=i,xn(a.bytesValue).isEqual(xn(p.bytesValue));case 7:return a.referenceValue===i.referenceValue;case 8:return function(f,p){return cr(f.geoPointValue.latitude)===cr(p.geoPointValue.latitude)&&cr(f.geoPointValue.longitude)===cr(p.geoPointValue.longitude)}(a,i);case 2:return function(f,p){if("integerValue"in f&&"integerValue"in p)return cr(f.integerValue)===cr(p.integerValue);if("doubleValue"in f&&"doubleValue"in p){var _=cr(f.doubleValue),I=cr(p.doubleValue);return _===I?je(_)===je(I):isNaN(_)&&isNaN(I)}return!1}(a,i);case 9:return un(a.arrayValue.values||[],i.arrayValue.values||[],_e);case 10:return function(f,p){var _=f.mapValue.fields||{},I=p.mapValue.fields||{};if(At(_)!==At(I))return!1;for(var O in _)if(_.hasOwnProperty(O)&&(void 0===I[O]||!_e(_[O],I[O])))return!1;return!0}(a,i);default:return Re()}}function ke(a,i){return void 0!==(a.values||[]).find(function(s){return _e(s,i)})}function vt(a,i){var p,_,I,O,s=ye(a),f=ye(i);if(s!==f)return Lt(s,f);switch(s){case 0:return 0;case 1:return Lt(a.booleanValue,i.booleanValue);case 2:return _=i,(I=cr((p=a).integerValue||p.doubleValue))<(O=cr(_.integerValue||_.doubleValue))?-1:I>O?1:I===O?0:isNaN(I)?isNaN(O)?0:-1:1;case 3:return ct(a.timestampValue,i.timestampValue);case 4:return ct(W(a),W(i));case 5:return Lt(a.stringValue,i.stringValue);case 6:return function(p,_){var I=xn(p),O=xn(_);return I.L(O)}(a.bytesValue,i.bytesValue);case 7:return function(p,_){for(var I=p.split("/"),O=_.split("/"),V=0;V<I.length&&V<O.length;V++){var X=Lt(I[V],O[V]);if(0!==X)return X}return Lt(I.length,O.length)}(a.referenceValue,i.referenceValue);case 8:return function(p,_){var I=Lt(cr(p.latitude),cr(_.latitude));return 0!==I?I:Lt(cr(p.longitude),cr(_.longitude))}(a.geoPointValue,i.geoPointValue);case 9:return function(p,_){for(var I=p.values||[],O=_.values||[],V=0;V<I.length&&V<O.length;++V){var X=vt(I[V],O[V]);if(X)return X}return Lt(I.length,O.length)}(a.arrayValue,i.arrayValue);case 10:return function(p,_){var I=p.fields||{},O=Object.keys(I),V=_.fields||{},X=Object.keys(V);O.sort(),X.sort();for(var ce=0;ce<O.length&&ce<X.length;++ce){var Ee=Lt(O[ce],X[ce]);if(0!==Ee)return Ee;var Ie=vt(I[O[ce]],V[X[ce]]);if(0!==Ie)return Ie}return Lt(O.length,X.length)}(a.mapValue,i.mapValue);default:throw Re()}}function ct(a,i){if("string"==typeof a&&"string"==typeof i&&a.length===i.length)return Lt(a,i);var s=Bt(a),f=Bt(i),p=Lt(s.seconds,f.seconds);return 0!==p?p:Lt(s.nanos,f.nanos)}function cn(a){return Tt(a)}function Tt(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?"time("+(p=Bt(a.timestampValue)).seconds+","+p.nanos+")":"stringValue"in a?a.stringValue:"bytesValue"in a?xn(a.bytesValue).toBase64():"referenceValue"in a?E.C(a.referenceValue).toString():"geoPointValue"in a?"geo("+(i=a.geoPointValue).latitude+","+i.longitude+")":"arrayValue"in a?function(f){for(var p="[",_=!0,I=0,O=f.values||[];I<O.length;I++)_?_=!1:p+=",",p+=Tt(O[I]);return p+"]"}(a.arrayValue):"mapValue"in a?function(f){for(var p="{",_=!0,I=0,O=Object.keys(f.fields||{}).sort();I<O.length;I++){var V=O[I];_?_=!1:p+=",",p+=V+":"+Tt(f.fields[V])}return p+"}"}(a.mapValue):Re();var p,i}function Bt(a){if(it(!!a),"string"==typeof a){var i=0,s=se.exec(a);if(it(!!s),s[1]){var f=s[1];f=(f+"000000000").substr(0,9),i=Number(f)}var p=new Date(a);return{seconds:Math.floor(p.getTime()/1e3),nanos:i}}return{seconds:cr(a.seconds),nanos:cr(a.nanos)}}function cr(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function xn(a){return"string"==typeof a?Vt.fromBase64String(a):Vt.fromUint8Array(a)}function pn(a,i){return{referenceValue:"projects/"+a.projectId+"/databases/"+a.database+"/documents/"+i.path.R()}}function bn(a){return!!a&&"integerValue"in a}function xs(a){return!!a&&"arrayValue"in a}function Lr(a){return!!a&&"nullValue"in a}function $o(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function $i(a){return!!a&&"mapValue"in a}var An={asc:"ASCENDING",desc:"DESCENDING"},pi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_s=function(a,i){this.U=a,this.Qe=i};function Lo(a){return{integerValue:""+a}}function Ko(a,i){if(a.Qe){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:je(i)?"-0":i}}function ro(a,i){return he(i)?Lo(i):Ko(a,i)}function bi(a,i){return a.Qe?new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+i.nanoseconds).slice(-9)+"Z":{seconds:""+i.seconds,nanos:i.nanoseconds}}function ws(a,i){return a.Qe?i.toBase64():i.toUint8Array()}function Qo(a,i){return bi(a,i.Z())}function po(a){return it(!!a),_n.J((s=Bt(a),new Rn(s.seconds,s.nanos)));var s}function Hi(a,i){return(s=a,new rt(["projects",s.projectId,"databases",s.database])).child("documents").child(i).R();var s}function ei(a){var i=rt.g(a);return it(ks(i)),i}function Oi(a,i){return Hi(a.U,i.path)}function Sn(a,i){var s=ei(i);return it(s.get(1)===a.U.projectId),it(!s.get(3)&&!a.U.database||s.get(3)===a.U.database),new E(io(s))}function Di(a,i){return Hi(a.U,i)}function Yo(a){var i=ei(a);return 4===i.length?rt.P():io(i)}function Ir(a){return new rt(["projects",a.U.projectId,"databases",a.U.database]).R()}function io(a){return it(a.length>4&&"documents"===a.get(4)),a.u(5)}function bs(a,i,s){return{name:Oi(a,i),fields:s.proto.mapValue.fields}}function Fr(a,i){var s,p;if(i instanceof Nr)s={update:bs(a,i.key,i.value)};else if(i instanceof Pi)s={delete:Oi(a,i.key)};else if(i instanceof nr)s={update:bs(a,i.key,i.data),updateMask:Jo(i.We)};else if(i instanceof hi)s={transform:{document:Oi(a,i.key),fieldTransforms:i.fieldTransforms.map(function(f){return function(p,_){var I=_.transform;if(I instanceof si)return{fieldPath:_.field.R(),setToServerValue:"REQUEST_TIME"};if(I instanceof j)return{fieldPath:_.field.R(),appendMissingElements:{values:I.elements}};if(I instanceof K)return{fieldPath:_.field.R(),removeAllFromArray:{values:I.elements}};if(I instanceof we)return{fieldPath:_.field.R(),increment:I.je};throw Re()}(0,f)})}};else{if(!(i instanceof fs))return Re();s={verify:Oi(a,i.key)}}return i.Ge.Ke||(s.currentDocument=void 0!==(p=i.Ge).updateTime?{updateTime:Qo(a,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:Re()),s}function jt(a,i){var ce,s=i.currentDocument?void 0!==(ce=i.currentDocument).updateTime?qt.updateTime(po(ce.updateTime)):void 0!==ce.exists?qt.exists(ce.exists):qt.ze():qt.ze();if(i.update){var f=Sn(a,i.update.name),p=new Zo({mapValue:{fields:i.update.fields}});if(i.updateMask){var _=function(ce){return new yt((ce.fieldPaths||[]).map(function(Ie){return C.S(Ie)}))}(i.updateMask);return new nr(f,p,_,s)}return new Nr(f,p,s)}if(i.delete){var I=Sn(a,i.delete);return new Pi(I,s)}if(i.transform){var O=Sn(a,i.transform.document),V=i.transform.fieldTransforms.map(function(ce){return function(Ee,Ie){var Ue=null;"setToServerValue"in Ie?(it("REQUEST_TIME"===Ie.setToServerValue),Ue=new si):"appendMissingElements"in Ie?Ue=new j(Ie.appendMissingElements.values||[]):"removeAllFromArray"in Ie?Ue=new K(Ie.removeAllFromArray.values||[]):"increment"in Ie?Ue=new we(Ee,Ie.increment):Re();var Jt=C.S(Ie.fieldPath);return new ft(Jt,Ue)}(a,ce)});return it(!0===s.exists),new hi(O,V)}if(i.verify){var X=Sn(a,i.verify);return new fs(X,s)}return Re()}function kn(a,i){return{documents:[Di(a,i.path)]}}function Ws(a,i){var s={structuredQuery:{}},f=i.path;null!==i.collectionGroup?(s.parent=Di(a,f),s.structuredQuery.from=[{collectionId:i.collectionGroup,allDescendants:!0}]):(s.parent=Di(a,f.h()),s.structuredQuery.from=[{collectionId:f._()}]);var p=function(O){if(0!==O.length){var V=O.map(function(X){return function(ce){if("=="===ce.op){if($o(ce.value))return{unaryFilter:{field:Qi(ce.field),op:"IS_NAN"}};if(Lr(ce.value))return{unaryFilter:{field:Qi(ce.field),op:"IS_NULL"}}}else if("!="===ce.op){if($o(ce.value))return{unaryFilter:{field:Qi(ce.field),op:"IS_NOT_NAN"}};if(Lr(ce.value))return{unaryFilter:{field:Qi(ce.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(ce.field),op:Ki(ce.op),value:ce.value}}}(X)});return 1===V.length?V[0]:{compositeFilter:{op:"AND",filters:V}}}}(i.filters);p&&(s.structuredQuery.where=p);var _=function(O){if(0!==O.length)return O.map(function(V){return{field:Qi((X=V).field),direction:Fn(X.dir)};var X})}(i.orderBy);_&&(s.structuredQuery.orderBy=_);var V,I=(V=i.limit,a.Qe||Jr(V)?V:{value:V});return null!==I&&(s.structuredQuery.limit=I),i.startAt&&(s.structuredQuery.startAt=oo(i.startAt)),i.endAt&&(s.structuredQuery.endAt=oo(i.endAt)),s}function Xo(a){var i=Yo(a.parent),s=a.structuredQuery,f=s.from?s.from.length:0,p=null;if(f>0){it(1===f);var _=s.from[0];_.allDescendants?p=_.collectionId:i=i.child(_.collectionId)}var I=[];s.where&&(I=hr(s.where));var O=[];s.orderBy&&(O=s.orderBy.map(function(Ee){return new lo(Gi((Ie=Ee).field),function(Ue){switch(Ue){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ie.direction));var Ie}));var Ee,Ie,V=null;s.limit&&(V=Jr(Ie="object"==typeof(Ee=s.limit)?Ee.value:Ee)?null:Ie);var X=null;s.startAt&&(X=Si(s.startAt));var ce=null;return s.endAt&&(ce=Si(s.endAt)),qr(jo(i,p,O,I,V,"F",X,ce))}function hr(a){return a?void 0!==a.unaryFilter?[To(a)]:void 0!==a.fieldFilter?[ls(a)]:void 0!==a.compositeFilter?a.compositeFilter.filters.map(function(i){return hr(i)}).reduce(function(i,s){return i.concat(s)}):Re():[]}function oo(a){return{before:a.before,values:a.position}}function Si(a){return new vo(a.values||[],!!a.before)}function Fn(a){return An[a]}function Ki(a){return pi[a]}function Qi(a){return{fieldPath:a.R()}}function Gi(a){return C.S(a.fieldPath)}function ls(a){return Mr.create(Gi(a.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Re()}}(a.fieldFilter.op),a.fieldFilter.value)}function To(a){switch(a.unaryFilter.op){case"IS_NAN":var i=Gi(a.unaryFilter.field);return Mr.create(i,"==",{doubleValue:NaN});case"IS_NULL":var s=Gi(a.unaryFilter.field);return Mr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var f=Gi(a.unaryFilter.field);return Mr.create(f,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var p=Gi(a.unaryFilter.field);return Mr.create(p,"!=",{nullValue:"NULL_VALUE"});default:return Re()}}function Jo(a){var i=[];return a.fields.forEach(function(s){return i.push(s.R())}),{fieldPaths:i}}function ks(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}var Ar=function(){this.He=void 0};function Pn(a,i,s){return a instanceof si?(_={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(f=s).seconds,nanos:f.nanoseconds}}}},(p=i)&&(_.fields.__previous_value__=p),{mapValue:_}):a instanceof j?L(a,i):a instanceof K?le(a,i):function(f,p){var _=Es(f,p),I=Ne(_)+Ne(f.je);return bn(_)&&bn(f.je)?Lo(I):Ko(f.serializer,I)}(a,i);var f,p,_}function go(a,i,s){return a instanceof j?L(a,i):a instanceof K?le(a,i):s}function Es(a,i){return a instanceof we?bn(s=i)||(f=s)&&"doubleValue"in f?i:{integerValue:0}:null;var f,s}var si=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i}(Ar),j=function(a){function i(s){var f=this;return(f=a.call(this)||this).elements=s,f}return $.__extends(i,a),i}(Ar);function L(a,i){for(var s=Qe(i),f=function(I){s.some(function(O){return _e(O,I)})||s.push(I)},p=0,_=a.elements;p<_.length;p++)f(_[p]);return{arrayValue:{values:s}}}var K=function(a){function i(s){var f=this;return(f=a.call(this)||this).elements=s,f}return $.__extends(i,a),i}(Ar);function le(a,i){for(var s=Qe(i),f=function(I){s=s.filter(function(O){return!_e(O,I)})},p=0,_=a.elements;p<_.length;p++)f(_[p]);return{arrayValue:{values:s}}}var we=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).serializer=s,p.je=f,p}return $.__extends(i,a),i}(Ar);function Ne(a){return cr(a.integerValue||a.doubleValue)}function Qe(a){return xs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}var yt=function(){function a(i){this.fields=i,i.sort(C.i)}return a.prototype.Ye=function(i){for(var s=0,f=this.fields;s<f.length;s++)if(f[s].T(i))return!0;return!1},a.prototype.isEqual=function(i){return un(this.fields,i.fields,function(s,f){return s.isEqual(f)})},a}(),ft=function(a,i){this.field=a,this.transform=i},xt=function(a,i){this.version=a,this.transformResults=i},qt=function(){function a(i,s){this.updateTime=i,this.exists=s}return a.ze=function(){return new a},a.exists=function(i){return new a(void 0,i)},a.updateTime=function(i){return new a(i)},Object.defineProperty(a.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return this.exists===i.exists&&(this.updateTime?!!i.updateTime&&this.updateTime.isEqual(i.updateTime):!i.updateTime)},a}();function sn(a,i){return void 0!==a.updateTime?i instanceof fr&&i.version.isEqual(a.updateTime):void 0===a.exists||a.exists===i instanceof fr}var mn=function(){};function jr(a,i,s){return a instanceof Nr?new fr((f=a).key,s.version,f.value,{hasCommittedMutations:!0}):a instanceof nr?function(f,p,_){if(!sn(f.Ge,p))return new Tr(f.key,_.version);var I=$r(f,p);return new fr(f.key,_.version,I,{hasCommittedMutations:!0})}(a,i,s):a instanceof hi?function(f,p,_){if(it(null!=_.transformResults),!sn(f.Ge,p))return new Tr(f.key,_.version);var I=Fo(0,p),O=function(ce,Ee,Ie){var Ue=[];it(ce.length===Ie.length);for(var Je=0;Je<Ie.length;Je++){var ut=ce[Je],Jt=ut.transform,en=null;Ee instanceof fr&&(en=Ee.field(ut.field)),Ue.push(go(Jt,en,Ie[Je]))}return Ue}(f.fieldTransforms,p,_.transformResults),V=_.version,X=Gr(f,I.data(),O);return new fr(f.key,V,X,{hasCommittedMutations:!0})}(a,i,s):function(f,p,_){return new Er(f.key,_.version,{hasCommittedMutations:!0})}(a,0,s);var f}function Vn(a,i,s,f){return a instanceof Nr?function(p,_){if(!sn(p.Ge,_))return _;var I=gi(_);return new fr(p.key,I,p.value,{Je:!0})}(a,i):a instanceof nr?function(p,_){if(!sn(p.Ge,_))return _;var I=gi(_),O=$r(p,_);return new fr(p.key,I,O,{Je:!0})}(a,i):a instanceof hi?function(p,_,I,O){if(!sn(p.Ge,_))return _;var V=Fo(0,_),X=function(Ee,Ie,Ue,Je){for(var ut=[],Jt=0,en=Ee;Jt<en.length;Jt++){var Tn=en[Jt],Gn=Tn.transform,mr=null;Ue instanceof fr&&(mr=Ue.field(Tn.field)),null===mr&&Je instanceof fr&&(mr=Je.field(Tn.field)),ut.push(Pn(Gn,mr,Ie))}return ut}(p.fieldTransforms,I,_,O),ce=Gr(p,V.data(),X);return new fr(p.key,V.version,ce,{Je:!0})}(a,i,f,s):sn((p=a).Ge,_=i)?new Er(p.key,_n.min()):_;var p,_}function wn(a,i){return a instanceof hi?function(s,f){for(var p=null,_=0,I=s.fieldTransforms;_<I.length;_++){var O=I[_],V=f instanceof fr?f.field(O.field):void 0,X=Es(O.transform,V||null);null!=X&&(p=null==p?(new es).set(O.field,X):p.set(O.field,X))}return p?p.Xe():null}(a,i):null}function lr(a,i){return a.type===i.type&&!!a.key.isEqual(i.key)&&!!a.Ge.isEqual(i.Ge)&&(0===a.type?a.value.isEqual(i.value):1===a.type?a.data.isEqual(i.data)&&a.We.isEqual(i.We):2!==a.type||un(a.fieldTransforms,a.fieldTransforms,function(s,f){return(p=s).field.isEqual((_=f).field)&&(O=_.transform,(I=p.transform)instanceof j&&O instanceof j||I instanceof K&&O instanceof K?un(I.elements,O.elements,_e):I instanceof we&&O instanceof we?_e(I.je,O.je):I instanceof si&&O instanceof si);var p,_,I,O}))}function gi(a){return a instanceof fr?a.version:_n.min()}var Nr=function(a){function i(s,f,p){var _=this;return(_=a.call(this)||this).key=s,_.value=f,_.Ge=p,_.type=0,_}return $.__extends(i,a),i}(mn),nr=function(a){function i(s,f,p,_){var I=this;return(I=a.call(this)||this).key=s,I.data=f,I.We=p,I.Ge=_,I.type=1,I}return $.__extends(i,a),i}(mn);function $r(a,i){return s=a,f=i instanceof fr?i.data():Zo.empty(),p=new es(f),s.We.fields.forEach(function(_){if(!_.m()){var I=s.data.field(_);null!==I?p.set(_,I):p.delete(_)}}),p.Xe();var s,f,p}var hi=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).key=s,p.fieldTransforms=f,p.type=2,p.Ge=qt.exists(!0),p}return $.__extends(i,a),i}(mn);function Fo(a,i){return i}function Gr(a,i,s){for(var f=new es(i),p=0;p<a.fieldTransforms.length;p++)f.set(a.fieldTransforms[p].field,s[p]);return f.Xe()}var Pi=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).key=s,p.Ge=f,p.type=3,p}return $.__extends(i,a),i}(mn),fs=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).key=s,p.Ge=f,p.type=4,p}return $.__extends(i,a),i}(mn),Zo=function(){function a(i){this.proto=i}return a.empty=function(){return new a({mapValue:{}})},a.prototype.field=function(i){if(i.m())return this.proto;for(var s=this.proto,f=0;f<i.length-1;++f)if(!s.mapValue.fields||!$i(s=s.mapValue.fields[i.get(f)]))return null;return(s=(s.mapValue.fields||{})[i._()])||null},a.prototype.isEqual=function(i){return _e(this.proto,i.proto)},a}(),es=function(){function a(i){void 0===i&&(i=Zo.empty()),this.Ze=i,this.tn=new Map}return a.prototype.set=function(i,s){return this.en(i,s),this},a.prototype.delete=function(i){return this.en(i,null),this},a.prototype.en=function(i,s){for(var f=this.tn,p=0;p<i.length-1;++p){var _=i.get(p),I=f.get(_);I instanceof Map?f=I:I&&10===ye(I)?(I=new Map(Object.entries(I.mapValue.fields||{})),f.set(_,I),f=I):(I=new Map,f.set(_,I),f=I)}f.set(i._(),s)},a.prototype.Xe=function(){var i=this.nn(C.P(),this.tn);return null!=i?new Zo(i):this.Ze},a.prototype.nn=function(i,s){var f=this,p=!1,_=this.Ze.field(i),I=$i(_)?Object.assign({},_.mapValue.fields):{};return s.forEach(function(O,V){if(O instanceof Map){var X=f.nn(i.child(V),O);null!=X&&(I[V]=X,p=!0)}else null!==O?(I[V]=O,p=!0):I.hasOwnProperty(V)&&(delete I[V],p=!0)}),p?{mapValue:{fields:I}}:null},a}();function zs(a){var i=[];return Nt(a.fields||{},function(s,f){var p=new C([s]);if($i(f)){var _=zs(f.mapValue).fields;if(0===_.length)i.push(p);else for(var I=0,O=_;I<O.length;I++)i.push(p.child(O[I]))}else i.push(p)}),new yt(i)}var ti=function(a,i){this.key=a,this.version=i},fr=function(a){function i(s,f,p,_){var I=this;return(I=a.call(this,s,f)||this).sn=p,I.Je=!!_.Je,I.hasCommittedMutations=!!_.hasCommittedMutations,I}return $.__extends(i,a),i.prototype.field=function(s){return this.sn.field(s)},i.prototype.data=function(){return this.sn},i.prototype.rn=function(){return this.sn.proto},i.prototype.isEqual=function(s){return s instanceof i&&this.key.isEqual(s.key)&&this.version.isEqual(s.version)&&this.Je===s.Je&&this.hasCommittedMutations===s.hasCommittedMutations&&this.sn.isEqual(s.sn)},i.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),i}(ti),Er=function(a){function i(s,f,p){var _=this;return(_=a.call(this,s,f)||this).hasCommittedMutations=!(!p||!p.hasCommittedMutations),_}return $.__extends(i,a),i.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(s){return s instanceof i&&s.hasCommittedMutations===this.hasCommittedMutations&&s.version.isEqual(this.version)&&s.key.isEqual(this.key)},i}(ti),Tr=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(i.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),i.prototype.isEqual=function(s){return s instanceof i&&s.version.isEqual(this.version)&&s.key.isEqual(this.key)},i}(ti),Kr=function(a,i,s,f,p,_,I,O){void 0===i&&(i=null),void 0===s&&(s=[]),void 0===f&&(f=[]),void 0===p&&(p=null),void 0===_&&(_="F"),void 0===I&&(I=null),void 0===O&&(O=null),this.path=a,this.collectionGroup=i,this.on=s,this.filters=f,this.limit=p,this.an=_,this.startAt=I,this.endAt=O,this.cn=null,this.un=null};function jo(a,i,s,f,p,_,I,O){return new Kr(a,i,s,f,p,_,I,O)}function Mi(a){return new Kr(a)}function Ci(a){return!Jr(a.limit)&&"F"===a.an}function ai(a){return!Jr(a.limit)&&"L"===a.an}function zt(a){return a.on.length>0?a.on[0].field:null}function Hn(a){for(var i=0,s=a.filters;i<s.length;i++){var f=s[i];if(f.hn())return f.field}return null}function yr(a){return null!==a.collectionGroup}function Vr(a){var i=ze(a);if(null===i.cn){i.cn=[];var s=Hn(i),f=zt(i);if(null!==s&&null===f)s.p()||i.cn.push(new lo(s)),i.cn.push(new lo(C.v(),"asc"));else{for(var p=!1,_=0,I=i.on;_<I.length;_++){var O=I[_];i.cn.push(O),O.field.p()&&(p=!0)}if(!p){var V=i.on.length>0?i.on[i.on.length-1].dir:"asc";i.cn.push(new lo(C.v(),V))}}}return i.cn}function qr(a){var i=ze(a);if(!i.un)if("F"===i.an)i.un=Ge(i.path,i.collectionGroup,Vr(i),i.filters,i.limit,i.startAt,i.endAt);else{for(var s=[],f=0,p=Vr(i);f<p.length;f++){var _=p[f];s.push(new lo(_.field,"desc"===_.dir?"asc":"desc"))}var O=i.endAt?new vo(i.endAt.position,!i.endAt.before):null,V=i.startAt?new vo(i.startAt.position,!i.startAt.before):null;i.un=Ge(i.path,i.collectionGroup,s,i.filters,i.limit,O,V)}return i.un}function Rr(a,i,s){return new Kr(a.path,a.collectionGroup,a.on.slice(),a.filters.slice(),i,s,a.startAt,a.endAt)}function ts(a,i){return new Kr(a.path,a.collectionGroup,a.on.slice(),a.filters.slice(),a.limit,a.an,i,a.endAt)}function ni(a,i){return new Kr(a.path,a.collectionGroup,a.on.slice(),a.filters.slice(),a.limit,a.an,a.startAt,i)}function vi(a,i){return Ft(qr(a),qr(i))&&a.an===i.an}function Do(a){return xe(qr(a))+"|lt:"+a.an}function En(a){return"Query(target="+(s=(i=qr(a)).path.R(),null!==i.collectionGroup&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=", filters: ["+i.filters.map(function(f){return(p=f).field.R()+" "+p.op+" "+cn(p.value);var p}).join(", ")+"]"),Jr(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=", orderBy: ["+i.orderBy.map(function(f){return(p=f).field.R()+" ("+p.dir+")";var p}).join(", ")+"]"),i.startAt&&(s+=", startAt: "+So(i.startAt)),i.endAt&&(s+=", endAt: "+So(i.endAt)),"Target("+s+"); limitType=")+a.an+")";var i,s}function so(a,i){return p=(f=i).key.path,(null!==(s=a).collectionGroup?f.key.N(s.collectionGroup)&&s.path.T(p):E.F(s.path)?s.path.isEqual(p):s.path.I(p))&&function(s,f){for(var p=0,_=s.on;p<_.length;p++){var I=_[p];if(!I.field.p()&&null===f.field(I.field))return!1}return!0}(a,i)&&function(s,f){for(var p=0,_=s.filters;p<_.length;p++)if(!_[p].matches(f))return!1;return!0}(a,i)&&function(s,f){return!(s.startAt&&!co(s.startAt,Vr(s),f)||s.endAt&&co(s.endAt,Vr(s),f))}(a,i);var s,f,p}function Ur(a){return function(i,s){for(var f=!1,p=0,_=Vr(a);p<_.length;p++){var I=_[p],O=Wr(I,i,s);if(0!==O)return O;f=f||I.field.p()}return 0}}var Mr=function(a){function i(s,f,p){var _=this;return(_=a.call(this)||this).field=s,_.op=f,_.value=p,_}return $.__extends(i,a),i.create=function(s,f,p){if(s.p())return"in"===f||"not-in"===f?this.ln(s,f,p):new li(s,f,p);if(Lr(p)){if("=="!==f&&"!="!==f)throw new te(ge.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new i(s,f,p)}if($o(p)){if("=="!==f&&"!="!==f)throw new te(ge.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new i(s,f,p)}return"array-contains"===f?new uo(s,p):"in"===f?new xr(s,p):"not-in"===f?new na(s,p):"array-contains-any"===f?new tu(s,p):new i(s,f,p)},i.ln=function(s,f,p){return"in"===f?new Ei(s,p):new Vo(s,p)},i.prototype.matches=function(s){var f=s.field(this.field);return"!="===this.op?null!==f&&this._n(vt(f,this.value)):null!==f&&ye(this.value)===ye(f)&&this._n(vt(f,this.value))},i.prototype._n=function(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return 0===s;case"!=":return 0!==s;case">":return s>0;case">=":return s>=0;default:return Re()}},i.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},i}(function(){}),li=function(a){function i(s,f,p){var _=this;return(_=a.call(this,s,f,p)||this).key=E.C(p.referenceValue),_}return $.__extends(i,a),i.prototype.matches=function(s){var f=E.i(s.key,this.key);return this._n(f)},i}(Mr),Ei=function(a){function i(s,f){var p=this;return(p=a.call(this,s,"in",f)||this).keys=ao(0,f),p}return $.__extends(i,a),i.prototype.matches=function(s){return this.keys.some(function(f){return f.isEqual(s.key)})},i}(Mr),Vo=function(a){function i(s,f){var p=this;return(p=a.call(this,s,"not-in",f)||this).keys=ao(0,f),p}return $.__extends(i,a),i.prototype.matches=function(s){return!this.keys.some(function(f){return f.isEqual(s.key)})},i}(Mr);function ao(a,i){var s;return((null===(s=i.arrayValue)||void 0===s?void 0:s.values)||[]).map(function(f){return E.C(f.referenceValue)})}var uo=function(a){function i(s,f){return a.call(this,s,"array-contains",f)||this}return $.__extends(i,a),i.prototype.matches=function(s){var f=s.field(this.field);return xs(f)&&ke(f.arrayValue,this.value)},i}(Mr),xr=function(a){function i(s,f){return a.call(this,s,"in",f)||this}return $.__extends(i,a),i.prototype.matches=function(s){var f=s.field(this.field);return null!==f&&ke(this.value.arrayValue,f)},i}(Mr),na=function(a){function i(s,f){return a.call(this,s,"not-in",f)||this}return $.__extends(i,a),i.prototype.matches=function(s){if(ke(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var f=s.field(this.field);return null!==f&&!ke(this.value.arrayValue,f)},i}(Mr),tu=function(a){function i(s,f){return a.call(this,s,"array-contains-any",f)||this}return $.__extends(i,a),i.prototype.matches=function(s){var f=this,p=s.field(this.field);return!(!xs(p)||!p.arrayValue.values)&&p.arrayValue.values.some(function(_){return ke(f.value.arrayValue,_)})},i}(Mr),vo=function(a,i){this.position=a,this.before=i};function So(a){return(a.before?"b":"a")+":"+a.position.map(function(i){return cn(i)}).join(",")}function co(a,i,s){for(var f=0,p=0;p<a.position.length;p++){var _=i[p],I=a.position[p];if(f=_.field.p()?E.i(E.C(I.referenceValue),s.key):vt(I,s.field(_.field)),"desc"===_.dir&&(f*=-1),0!==f)break}return a.before?f<=0:f<0}function yo(a,i){if(null===a)return null===i;if(null===i||a.before!==i.before||a.position.length!==i.position.length)return!1;for(var s=0;s<a.position.length;s++)if(!_e(a.position[s],i.position[s]))return!1;return!0}var lo=function(a,i){void 0===i&&(i="asc"),this.field=a,this.dir=i};function Wr(a,i,s){var p,I,O,V,f=a.field.p()?E.i(i.key,s.key):(I=s,O=i.field(p=a.field),V=I.field(p),null!==O&&null!==V?vt(O,V):Re());switch(a.dir){case"asc":return f;case"desc":return-1*f;default:return Re()}}function $s(a,i){return a.dir===i.dir&&a.field.isEqual(i.field)}var Yn=function(){var a=this;this.promise=new Promise(function(i,s){a.resolve=i,a.reject=s})},Yi=function(){function a(i,s,f,p,_){void 0===f&&(f=1e3),void 0===p&&(p=1.5),void 0===_&&(_=6e4),this.fn=i,this.dn=s,this.wn=f,this.mn=p,this.Tn=_,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return a.prototype.reset=function(){this.En=0},a.prototype.Rn=function(){this.En=this.Tn},a.prototype.gn=function(i){var s=this;this.cancel();var f=Math.floor(this.En+this.Pn()),p=Math.max(0,Date.now()-this.An),_=Math.max(0,f-p);_>0&&Ae("ExponentialBackoff","Backing off for "+_+" ms (base delay: "+this.En+" ms, delay with jitter: "+f+" ms, last attempt: "+p+" ms ago)"),this.In=this.fn.yn(this.dn,_,function(){return s.An=Date.now(),i()}),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},a.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},a.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},a.prototype.Pn=function(){return(Math.random()-.5)*this.En},a}(),Rt=function(){function a(i){var s=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,i(function(f){s.Sn=!0,s.result=f,s.bn&&s.bn(f)},function(f){s.Sn=!0,s.error=f,s.vn&&s.vn(f)})}return a.prototype.catch=function(i){return this.next(void 0,i)},a.prototype.next=function(i,s){var f=this;return this.Dn&&Re(),this.Dn=!0,this.Sn?this.error?this.Cn(s,this.error):this.Nn(i,this.result):new a(function(p,_){f.bn=function(I){f.Nn(i,I).next(p,_)},f.vn=function(I){f.Cn(s,I).next(p,_)}})},a.prototype.Fn=function(){var i=this;return new Promise(function(s,f){i.next(s,f)})},a.prototype.xn=function(i){try{var s=i();return s instanceof a?s:a.resolve(s)}catch(f){return a.reject(f)}},a.prototype.Nn=function(i,s){return i?this.xn(function(){return i(s)}):a.resolve(s)},a.prototype.Cn=function(i,s){return i?this.xn(function(){return i(s)}):a.reject(s)},a.resolve=function(i){return new a(function(s,f){s(i)})},a.reject=function(i){return new a(function(s,f){f(i)})},a.$n=function(i){return new a(function(s,f){var p=0,_=0,I=!1;i.forEach(function(O){++p,O.next(function(){++_,I&&_===p&&s()},function(V){return f(V)})}),I=!0,_===p&&s()})},a.kn=function(i){for(var s=a.resolve(!1),f=function(I){s=s.next(function(O){return O?a.resolve(O):I()})},p=0,_=i;p<_.length;p++)f(_[p]);return s},a.forEach=function(i,s){var f=this,p=[];return i.forEach(function(_,I){p.push(s.call(f,_,I))}),this.$n(p)},a}(),Dr=function(){function a(i,s,f){this.name=i,this.version=s,this.Mn=f,12.2===a.On(kt.getUA())&&mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return a.delete=function(i){return Ae("SimpleDb","Removing database:",i),Is(window.indexedDB.deleteDatabase(i)).Fn()},a.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(a.Bn())return!0;var i=kt.getUA(),s=a.On(i),f=0<s&&s<10,p=a.qn(i),_=0<p&&p<4.5;return!(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0||i.indexOf("Edge/")>0||f||_)},a.Bn=function(){var i;return"undefined"!=typeof process&&"YES"===(null===(i=process.env)||void 0===i?void 0:i.Un)},a.Qn=function(i,s){return i.store(s)},a.On=function(i){var s=i.match(/i(?:phone|pad|pod) os ([\d_]+)/i),f=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(f)},a.qn=function(i){var s=i.match(/Android ([\d.]+)/i),f=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(f)},a.prototype.Wn=function(i){return $.__awaiter(this,void 0,void 0,function(){var s,f=this;return $.__generator(this,function(p){switch(p.label){case 0:return this.db?[3,2]:(Ae("SimpleDb","Opening database:",this.name),s=this,[4,new Promise(function(_,I){var O=indexedDB.open(f.name,f.version);O.onsuccess=function(V){_(V.target.result)},O.onblocked=function(){I(new qi(i,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},O.onerror=function(V){var X=V.target.error;I("VersionError"===X.name?new te(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new qi(i,X))},O.onupgradeneeded=function(V){Ae("SimpleDb",'Database "'+f.name+'" requires upgrade from version:',V.oldVersion),f.Mn.createOrUpgrade(V.target.result,O.transaction,V.oldVersion,f.version).next(function(){Ae("SimpleDb","Database upgrade to version "+f.version+" complete")})}})]);case 1:s.db=p.sent(),p.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(_){return f.jn(_)}),this.db)]}})})},a.prototype.Kn=function(i){this.jn=i,this.db&&(this.db.onversionchange=function(s){return i(s)})},a.prototype.runTransaction=function(i,s,f,p){return $.__awaiter(this,void 0,void 0,function(){var _,I,O,V,X;return $.__generator(this,function(ce){switch(ce.label){case 0:_="readonly"===s,I=0,O=function(){var Ee,Ie,Ue,Je,ut;return $.__generator(this,function(Jt){switch(Jt.label){case 0:++I,Jt.label=1;case 1:return Jt.trys.push([1,4,,5]),[4,V.Wn(i)];case 2:return V.db=Jt.sent(),Ee=Co.open(V.db,i,_?"readonly":"readwrite",f),Ie=p(Ee).catch(function(en){return Ee.abort(en),Rt.reject(en)}).Fn(),Ue={},Ie.catch(function(){}),[4,Ee.Gn];case 3:return[2,(Ue.value=(Jt.sent(),Ie),Ue)];case 4:return Ae("SimpleDb","Transaction failed with error:",(Je=Jt.sent()).message,"Retrying:",ut="FirebaseError"!==Je.name&&I<3),V.close(),ut?[3,5]:[2,{value:Promise.reject(Je)}];case 5:return[2]}})},V=this,ce.label=1;case 1:return[5,O()];case 2:if("object"==typeof(X=ce.sent()))return[2,X.value];ce.label=3;case 3:return[3,1];case 4:return[2]}})})},a.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},a}(),Ls=function(){function a(i){this.zn=i,this.Hn=!1,this.Yn=null}return Object.defineProperty(a.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cursor",{set:function(i){this.zn=i},enumerable:!1,configurable:!0}),a.prototype.done=function(){this.Hn=!0},a.prototype.Xn=function(i){this.Yn=i},a.prototype.delete=function(){return Is(this.zn.delete())},a}(),qi=function(a){function i(s,f){var p=this;return(p=a.call(this,ge.UNAVAILABLE,"IndexedDB transaction '"+s+"' failed: "+f)||this).name="IndexedDbTransactionError",p}return $.__extends(i,a),i}(te);function ns(a){return"IndexedDbTransactionError"===a.name}var Co=function(){function a(i,s){var f=this;this.action=i,this.transaction=s,this.aborted=!1,this.Zn=new Yn,this.transaction.oncomplete=function(){f.Zn.resolve()},this.transaction.onabort=function(){s.error?f.Zn.reject(new qi(i,s.error)):f.Zn.resolve()},this.transaction.onerror=function(p){var _=y(p.target.error);f.Zn.reject(new qi(i,_))}}return a.open=function(i,s,f,p){try{return new a(s,i.transaction(p,f))}catch(_){throw new qi(s,_)}},Object.defineProperty(a.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),a.prototype.abort=function(i){i&&this.Zn.reject(i),this.aborted||(Ae("SimpleDb","Aborting transaction:",i?i.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},a.prototype.store=function(i){var s=this.transaction.objectStore(i);return new nu(s)},a}(),nu=function(){function a(i){this.store=i}return a.prototype.put=function(i,s){var f;return void 0!==s?(Ae("SimpleDb","PUT",this.store.name,i,s),f=this.store.put(s,i)):(Ae("SimpleDb","PUT",this.store.name,"<auto-key>",i),f=this.store.put(i)),Is(f)},a.prototype.add=function(i){return Ae("SimpleDb","ADD",this.store.name,i,i),Is(this.store.add(i))},a.prototype.get=function(i){var s=this;return Is(this.store.get(i)).next(function(f){return void 0===f&&(f=null),Ae("SimpleDb","GET",s.store.name,i,f),f})},a.prototype.delete=function(i){return Ae("SimpleDb","DELETE",this.store.name,i),Is(this.store.delete(i))},a.prototype.count=function(){return Ae("SimpleDb","COUNT",this.store.name),Is(this.store.count())},a.prototype.ts=function(i,s){var f=this.cursor(this.options(i,s)),p=[];return this.es(f,function(_,I){p.push(I)}).next(function(){return p})},a.prototype.ns=function(i,s){Ae("SimpleDb","DELETE ALL",this.store.name);var f=this.options(i,s);f.ss=!1;var p=this.cursor(f);return this.es(p,function(_,I,O){return O.delete()})},a.prototype.rs=function(i,s){var f;s?f=i:(f={},s=i);var p=this.cursor(f);return this.es(p,s)},a.prototype.os=function(i){var s=this.cursor({});return new Rt(function(f,p){s.onerror=function(_){var I=y(_.target.error);p(I)},s.onsuccess=function(_){var I=_.target.result;I?i(I.primaryKey,I.value).next(function(O){O?I.continue():f()}):f()}})},a.prototype.es=function(i,s){var f=[];return new Rt(function(p,_){i.onerror=function(I){_(I.target.error)},i.onsuccess=function(I){var O=I.target.result;if(O){var V=new Ls(O),X=s(O.primaryKey,O.value,V);if(X instanceof Rt){var ce=X.catch(function(Ee){return V.done(),Rt.reject(Ee)});f.push(ce)}V.Sn?p():null===V.Jn?O.continue():O.continue(V.Jn)}else p()}}).next(function(){return Rt.$n(f)})},a.prototype.options=function(i,s){var f=void 0;return void 0!==i&&("string"==typeof i?f=i:s=i),{index:f,range:s}},a.prototype.cursor=function(i){var s="next";if(i.reverse&&(s="prev"),i.index){var f=this.store.index(i.index);return i.ss?f.openKeyCursor(i.range,s):f.openCursor(i.range,s)}return this.store.openCursor(i.range,s)},a}();function Is(a){return new Rt(function(i,s){a.onsuccess=function(f){i(f.target.result)},a.onerror=function(f){var p=y(f.target.error);s(p)}})}var ui=!1;function y(a){var i=Dr.On(kt.getUA());if(i>=12.2&&i<13){var s="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(s)>=0){var f=new te("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+s+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ui||(ui=!0,setTimeout(function(){throw f},0)),f}}return a}function P(){return"undefined"!=typeof window?window:null}function B(){return"undefined"!=typeof document?document:null}var oe=function(){function a(i,s,f,p,_){this.cs=i,this.dn=s,this.us=f,this.op=p,this.hs=_,this.ls=new Yn,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch(function(I){})}return a._s=function(i,s,f,p,_){var I=new a(i,s,Date.now()+f,p,_);return I.start(f),I},a.prototype.start=function(i){var s=this;this.fs=setTimeout(function(){return s.ds()},i)},a.prototype.pn=function(){return this.ds()},a.prototype.cancel=function(i){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new te(ge.CANCELLED,"Operation cancelled"+(i?": "+i:""))))},a.prototype.ds=function(){var i=this;this.cs.ws(function(){return null!==i.fs?(i.clearTimeout(),i.op().then(function(s){return i.ls.resolve(s)})):Promise.resolve()})},a.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},a}(),Te=function(){function a(){var i=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new Yi(this,"async_queue_retry"),this.Vs=function(){var f=B();f&&Ae("AsyncQueue","Visibility state changed to  ",f.visibilityState),i.ys.Vn()};var s=B();s&&"function"==typeof s.addEventListener&&s.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(a.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),a.prototype.ws=function(i){this.enqueue(i)},a.prototype.bs=function(i){this.vs(),this.Ss(i)},a.prototype.Ds=function(){if(!this.Is){this.Is=!0;var i=B();i&&"function"==typeof i.removeEventListener&&i.removeEventListener("visibilitychange",this.Vs)}},a.prototype.enqueue=function(i){return this.vs(),this.Is?new Promise(function(s){}):this.Ss(i)},a.prototype.Cs=function(i){var s=this;this.ws(function(){return s.Es.push(i),s.Ns()})},a.prototype.Ns=function(){return $.__awaiter(this,void 0,void 0,function(){var i,s=this;return $.__generator(this,function(f){switch(f.label){case 0:if(0===this.Es.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return f.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!ns(i=f.sent()))throw i;return Ae("AsyncQueue","Operation failed with retryable error: "+i),[3,4];case 4:this.Es.length>0&&this.ys.gn(function(){return s.Ns()}),f.label=5;case 5:return[2]}})})},a.prototype.Ss=function(i){var s=this,f=this.Ts.then(function(){return s.gs=!0,i().catch(function(p){throw s.Rs=p,s.gs=!1,mt("INTERNAL UNHANDLED ERROR: ",(I=(_=p).message||"",_.stack&&(I=_.stack.includes(_.message)?_.stack:_.message+"\n"+_.stack),I)),p;var _,I}).then(function(p){return s.gs=!1,p})});return this.Ts=f,f},a.prototype.yn=function(i,s,f){var p=this;this.vs(),this.Ps.indexOf(i)>-1&&(s=0);var _=oe._s(this,i,s,f,function(I){return p.Fs(I)});return this.As.push(_),_},a.prototype.vs=function(){this.Rs&&Re()},a.prototype.xs=function(){},a.prototype.$s=function(){return $.__awaiter(this,void 0,void 0,function(){var i;return $.__generator(this,function(s){switch(s.label){case 0:return[4,i=this.Ts];case 1:s.sent(),s.label=2;case 2:if(i!==this.Ts)return[3,0];s.label=3;case 3:return[2]}})})},a.prototype.ks=function(i){for(var s=0,f=this.As;s<f.length;s++)if(f[s].dn===i)return!0;return!1},a.prototype.Ms=function(i){var s=this;return this.$s().then(function(){s.As.sort(function(I,O){return I.us-O.us});for(var f=0,p=s.As;f<p.length;f++){var _=p[f];if(_.pn(),"all"!==i&&_.dn===i)break}return s.$s()})},a.prototype.Os=function(i){this.Ps.push(i)},a.prototype.Fs=function(i){var s=this.As.indexOf(i);this.As.splice(s,1)},a}();function qe(a,i){if(mt("AsyncQueue",i+": "+a),ns(a))return new te(ge.UNAVAILABLE,i+": "+a);throw a}var Xt=function(){this.Ls=void 0,this.listeners=[]},dr=function(){this.Bs=new or(function(a){return Do(a)},vi),this.onlineState="Unknown",this.qs=new Set};function rr(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f,p,_,I,O,V;return $.__generator(this,function(X){switch(X.label){case 0:if(s=ze(a),p=!1,(_=s.Bs.get(f=i.query))||(p=!0,_=new Xt),!p)return[3,4];X.label=1;case 1:return X.trys.push([1,3,,4]),I=_,[4,s.Us(f)];case 2:return I.Ls=X.sent(),[3,4];case 3:return O=X.sent(),V=qe(O,"Initialization of query '"+En(i.query)+"' failed"),[2,void i.onError(V)];case 4:return s.Bs.set(f,_),_.listeners.push(i),i.Qs(s.onlineState),_.Ls&&i.Ws(_.Ls)&&Ks(s),[2]}})})}function xi(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f,p,_,I;return $.__generator(this,function(O){return s=ze(a),p=!1,(_=s.Bs.get(f=i.query))&&(I=_.listeners.indexOf(i))>=0&&(_.listeners.splice(I,1),p=0===_.listeners.length),p?[2,(s.Bs.delete(f),s.js(f))]:[2]})})}function mo(a,i){for(var s=ze(a),f=!1,p=0,_=i;p<_.length;p++){var I=_[p],V=s.Bs.get(I.query);if(V){for(var X=0,ce=V.listeners;X<ce.length;X++)ce[X].Ws(I)&&(f=!0);V.Ls=I}}f&&Ks(s)}function Uo(a,i,s){var f=ze(a),p=f.Bs.get(i);if(p)for(var _=0,I=p.listeners;_<I.length;_++)I[_].onError(s);f.Bs.delete(i)}function Ks(a){a.qs.forEach(function(i){i.next()})}var hs=function(){function a(i,s,f){this.query=i,this.Ks=s,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=f||{}}return a.prototype.Ws=function(i){if(!this.options.includeMetadataChanges){for(var s=[],f=0,p=i.docChanges;f<p.length;f++){var _=p[f];3!==_.type&&s.push(_)}i=new wt(i.query,i.docs,i.Qt,s,i.Wt,i.fromCache,i.jt,!0)}var I=!1;return this.Gs?this.Hs(i)&&(this.Ks.next(i),I=!0):this.Ys(i,this.onlineState)&&(this.Js(i),I=!0),this.zs=i,I},a.prototype.onError=function(i){this.Ks.error(i)},a.prototype.Qs=function(i){this.onlineState=i;var s=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,i)&&(this.Js(this.zs),s=!0),s},a.prototype.Ys=function(i,s){return!i.fromCache||!(this.options.Xs&&"Offline"!==s||i.docs.m()&&"Offline"!==s)},a.prototype.Hs=function(i){return i.docChanges.length>0||!!(i.jt||this.zs&&this.zs.hasPendingWrites!==i.hasPendingWrites)&&!0===this.options.includeMetadataChanges},a.prototype.Js=function(i){i=wt.Gt(i.query,i.docs,i.Wt,i.fromCache),this.Gs=!0,this.Ks.next(i)},a}(),Br=function(){function a(i){this.uid=i}return a.prototype.Zs=function(){return null!=this.uid},a.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},a.prototype.isEqual=function(i){return i.uid===this.uid},a}();Br.UNAUTHENTICATED=new Br(null),Br.ei=new Br("google-credentials-uid"),Br.ni=new Br("first-party-uid");var fi=function(){function a(i,s){var f=this;this.previousValue=i,s&&(s.si=function(p){return f.ii(p)},this.ri=function(p){return s.oi(p)})}return a.prototype.ii=function(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue},a.prototype.next=function(){var i=++this.previousValue;return this.ri&&this.ri(i),i},a}();function ru(a,i){return"firestore_clients_"+a+"_"+i}function Ul(a,i,s){var f="firestore_mutations_"+a+"_"+s;return i.Zs()&&(f+="_"+i.uid),f}function ds(a,i){return"firestore_targets_"+a+"_"+i}fi.ai=-1;var gc=function(){function a(i,s,f,p){this.user=i,this.batchId=s,this.state=f,this.error=p}return a.ci=function(i,s,f){var p=JSON.parse(f),_="object"==typeof p&&-1!==["pending","acknowledged","rejected"].indexOf(p.state)&&(void 0===p.error||"object"==typeof p.error),I=void 0;return _&&p.error&&(_="string"==typeof p.error.message&&"string"==typeof p.error.code)&&(I=new te(p.error.code,p.error.message)),_?new a(i,s,p.state,I):(mt("SharedClientState","Failed to parse mutation state for ID '"+s+"': "+f),null)},a.prototype.ui=function(){var i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)},a}(),ps=function(){function a(i,s,f){this.targetId=i,this.state=s,this.error=f}return a.ci=function(i,s){var f=JSON.parse(s),p="object"==typeof f&&-1!==["not-current","current","rejected"].indexOf(f.state)&&(void 0===f.error||"object"==typeof f.error),_=void 0;return p&&f.error&&(p="string"==typeof f.error.message&&"string"==typeof f.error.code)&&(_=new te(f.error.code,f.error.message)),p?new a(i,f.state,_):(mt("SharedClientState","Failed to parse target state for ID '"+i+"': "+s),null)},a.prototype.ui=function(){var i={state:this.state,updateTimeMs:Date.now()};return this.error&&(i.error={code:this.error.code,message:this.error.message}),JSON.stringify(i)},a}(),Mu=function(){function a(i,s){this.clientId=i,this.activeTargetIds=s}return a.ci=function(i,s){for(var f=JSON.parse(s),p="object"==typeof f&&f.activeTargetIds instanceof Array,_=It(),I=0;p&&I<f.activeTargetIds.length;++I)p=he(f.activeTargetIds[I]),_=_.add(f.activeTargetIds[I]);return p?new a(i,_):(mt("SharedClientState","Failed to parse client data for instance '"+i+"': "+s),null)},a}(),Da=function(){function a(i,s){this.clientId=i,this.onlineState=s}return a.ci=function(i){var s=JSON.parse(i);return"object"==typeof s&&-1!==["Unknown","Online","Offline"].indexOf(s.onlineState)&&"string"==typeof s.clientId?new a(s.clientId,s.onlineState):(mt("SharedClientState","Failed to parse online state: "+i),null)},a}(),ki=function(){function a(){this.activeTargetIds=It()}return a.prototype.hi=function(i){this.activeTargetIds=this.activeTargetIds.add(i)},a.prototype.li=function(i){this.activeTargetIds=this.activeTargetIds.delete(i)},a.prototype.ui=function(){var i={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(i)},a}(),Qr=function(){function a(i,s,f,p,_){this.window=i,this.fn=s,this.persistenceKey=f,this._i=p,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new Cn(Lt),this.Ei=!1,this.Ii=[];var I=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=_,this.Ai=ru(this.persistenceKey,this._i),this.Ri="firestore_sequence_number_"+this.persistenceKey,this.Ti=this.Ti.ot(this._i,new ki),this.gi=new RegExp("^firestore_clients_"+I+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+I+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+I+"_(\\d+)$"),this.Vi="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.wi)}return a.Ln=function(i){return!(!i||!i.localStorage)},a.prototype.start=function(){return $.__awaiter(this,void 0,void 0,function(){var i,s,f,p,_,I,O,V,X,ce,Ie=this;return $.__generator(this,function(Ue){switch(Ue.label){case 0:return[4,this.fi.pi()];case 1:for(i=Ue.sent(),s=0,f=i;s<f.length;s++)(p=f[s])!==this._i&&(_=this.getItem(ru(this.persistenceKey,p)))&&(I=Mu.ci(p,_))&&(this.Ti=this.Ti.ot(I.clientId,I));for(this.bi(),(O=this.storage.getItem(this.Vi))&&(V=this.vi(O))&&this.Si(V),X=0,ce=this.Ii;X<ce.length;X++)this.mi(ce[X]);return this.Ii=[],this.window.addEventListener("unload",function(){return Ie.Di()}),this.Ei=!0,[2]}})})},a.prototype.oi=function(i){this.setItem(this.Ri,JSON.stringify(i))},a.prototype.Ci=function(){return this.Ni(this.Ti)},a.prototype.Fi=function(i){var s=!1;return this.Ti.forEach(function(f,p){p.activeTargetIds.has(i)&&(s=!0)}),s},a.prototype.xi=function(i){this.$i(i,"pending")},a.prototype.ki=function(i,s,f){this.$i(i,s,f),this.Mi(i)},a.prototype.Oi=function(i){var s="not-current";if(this.Fi(i)){var f=this.storage.getItem(ds(this.persistenceKey,i));if(f){var p=ps.ci(i,f);p&&(s=p.state)}}return this.Li.hi(i),this.bi(),s},a.prototype.Bi=function(i){this.Li.li(i),this.bi()},a.prototype.qi=function(i){return this.Li.activeTargetIds.has(i)},a.prototype.Ui=function(i){this.removeItem(ds(this.persistenceKey,i))},a.prototype.Qi=function(i,s,f){this.Wi(i,s,f)},a.prototype.ji=function(i,s,f){var p=this;s.forEach(function(_){p.Mi(_)}),this.currentUser=i,f.forEach(function(_){p.xi(_)})},a.prototype.Ki=function(i){this.Gi(i)},a.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},a.prototype.getItem=function(i){var s=this.storage.getItem(i);return Ae("SharedClientState","READ",i,s),s},a.prototype.setItem=function(i,s){Ae("SharedClientState","SET",i,s),this.storage.setItem(i,s)},a.prototype.removeItem=function(i){Ae("SharedClientState","REMOVE",i),this.storage.removeItem(i)},a.prototype.mi=function(i){var s=this,f=i;if(f.storageArea===this.storage){if(Ae("SharedClientState","EVENT",f.key,f.newValue),f.key===this.Ai)return void mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs(function(){return $.__awaiter(s,void 0,void 0,function(){var p,_,I,O,V,X;return $.__generator(this,function(ce){if(this.Ei){if(null!==f.key)if(this.gi.test(f.key)){if(null==f.newValue)return p=this.zi(f.key),[2,this.Hi(p,null)];if(_=this.Yi(f.key,f.newValue))return[2,this.Hi(_.clientId,_)]}else if(this.Pi.test(f.key)){if(null!==f.newValue&&(I=this.Ji(f.key,f.newValue)))return[2,this.Xi(I)]}else if(this.yi.test(f.key)){if(null!==f.newValue&&(O=this.Zi(f.key,f.newValue)))return[2,this.tr(O)]}else if(f.key===this.Vi){if(null!==f.newValue&&(V=this.vi(f.newValue)))return[2,this.Si(V)]}else f.key===this.Ri&&(X=function(Ee){var Ie=fi.ai;if(null!=Ee)try{var Ue=JSON.parse(Ee);it("number"==typeof Ue),Ie=Ue}catch(Je){mt("SharedClientState","Failed to read sequence number from WebStorage",Je)}return Ie}(f.newValue))!==fi.ai&&this.si(X)}else this.Ii.push(f);return[2]})})})}},Object.defineProperty(a.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),a.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},a.prototype.$i=function(i,s,f){var p=new gc(this.currentUser,i,s,f),_=Ul(this.persistenceKey,this.currentUser,i);this.setItem(_,p.ui())},a.prototype.Mi=function(i){var s=Ul(this.persistenceKey,this.currentUser,i);this.removeItem(s)},a.prototype.Gi=function(i){this.storage.setItem(this.Vi,JSON.stringify({clientId:this._i,onlineState:i}))},a.prototype.Wi=function(i,s,f){var p=ds(this.persistenceKey,i),_=new ps(i,s,f);this.setItem(p,_.ui())},a.prototype.zi=function(i){var s=this.gi.exec(i);return s?s[1]:null},a.prototype.Yi=function(i,s){var f=this.zi(i);return Mu.ci(f,s)},a.prototype.Ji=function(i,s){var f=this.Pi.exec(i),p=Number(f[1]);return gc.ci(new Br(void 0!==f[2]?f[2]:null),p,s)},a.prototype.Zi=function(i,s){var f=this.yi.exec(i),p=Number(f[1]);return ps.ci(p,s)},a.prototype.vi=function(i){return Da.ci(i)},a.prototype.Xi=function(i){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(s){return i.user.uid===this.currentUser.uid?[2,this.fi.er(i.batchId,i.state,i.error)]:(Ae("SharedClientState","Ignoring mutation for non-active user "+i.user.uid),[2])})})},a.prototype.tr=function(i){return this.fi.nr(i.targetId,i.state,i.error)},a.prototype.Hi=function(i,s){var f=this,p=s?this.Ti.ot(i,s):this.Ti.remove(i),_=this.Ni(this.Ti),I=this.Ni(p),O=[],V=[];return I.forEach(function(X){_.has(X)||O.push(X)}),_.forEach(function(X){I.has(X)||V.push(X)}),this.fi.sr(O,V).then(function(){f.Ti=p})},a.prototype.Si=function(i){this.Ti.get(i.clientId)&&this.di(i.onlineState)},a.prototype.Ni=function(i){var s=It();return i.forEach(function(f,p){s=s.kt(p.activeTargetIds)}),s},a}(),ra=function(){function a(){this.ir=new ki,this.rr={},this.di=null,this.si=null}return a.prototype.xi=function(i){},a.prototype.ki=function(i,s,f){},a.prototype.Oi=function(i){return this.ir.hi(i),this.rr[i]||"not-current"},a.prototype.Qi=function(i,s,f){this.rr[i]=s},a.prototype.Bi=function(i){this.ir.li(i)},a.prototype.qi=function(i){return this.ir.activeTargetIds.has(i)},a.prototype.Ui=function(i){delete this.rr[i]},a.prototype.Ci=function(){return this.ir.activeTargetIds},a.prototype.Fi=function(i){return this.ir.activeTargetIds.has(i)},a.prototype.start=function(){return this.ir=new ki,Promise.resolve()},a.prototype.ji=function(i,s,f){},a.prototype.Ki=function(i){},a.prototype.Di=function(){},a.prototype.oi=function(i){},a}(),Ts=function(){function a(i,s,f,p){this.batchId=i,this.ar=s,this.baseMutations=f,this.mutations=p}return a.prototype.cr=function(i,s,f){for(var p=f.ur,_=0;_<this.mutations.length;_++){var I=this.mutations[_];I.key.isEqual(i)&&(s=jr(I,s,p[_]))}return s},a.prototype.hr=function(i,s){for(var f=0,p=this.baseMutations;f<p.length;f++){var _=p[f];_.key.isEqual(i)&&(s=Vn(_,s,s,this.ar))}for(var I=s,O=0,V=this.mutations;O<V.length;O++){var X=V[O];X.key.isEqual(i)&&(s=Vn(X,s,I,this.ar))}return s},a.prototype.lr=function(i){var s=this,f=i;return this.mutations.forEach(function(p){var _=s.hr(p.key,i.get(p.key));_&&(f=f.ot(p.key,_))}),f},a.prototype.keys=function(){return this.mutations.reduce(function(i,s){return i.add(s.key)},We())},a.prototype.isEqual=function(i){return this.batchId===i.batchId&&un(this.mutations,i.mutations,function(s,f){return lr(s,f)})&&un(this.baseMutations,i.baseMutations,function(s,f){return lr(s,f)})},a}(),v=function(){function a(i,s,f,p){this.batch=i,this._r=s,this.ur=f,this.dr=p}return a.from=function(i,s,f){it(i.mutations.length===f.length);for(var p=Be,_=i.mutations,I=0;I<_.length;I++)p=p.ot(_[I].key,f[I].version);return new a(i,s,f,p)},a}(),l=function(){function a(){this.wr=new or(function(i){return i.toString()},function(i,s){return i.isEqual(s)}),this.mr=!1}return Object.defineProperty(a.prototype,"readTime",{get:function(){return this.Tr},set:function(i){this.Tr=i},enumerable:!1,configurable:!0}),a.prototype.Er=function(i,s){this.Ir(),this.readTime=s,this.wr.set(i.key,i)},a.prototype.Ar=function(i,s){this.Ir(),s&&(this.readTime=s),this.wr.set(i,null)},a.prototype.Rr=function(i,s){this.Ir();var f=this.wr.get(s);return void 0!==f?Rt.resolve(f):this.gr(i,s)},a.prototype.getEntries=function(i,s){return this.Pr(i,s)},a.prototype.apply=function(i){return this.Ir(),this.mr=!0,this.yr(i)},a.prototype.Ir=function(){},a}(),h="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",m=function(){function a(){this.Vr=[]}return a.prototype.pr=function(i){this.Vr.push(i)},a.prototype.br=function(){this.Vr.forEach(function(i){return i()})},a}(),S=function(){function a(i,s,f){this.vr=i,this.Sr=s,this.Dr=f}return a.prototype.Cr=function(i,s){var f=this;return this.Sr.Nr(i,s).next(function(p){return f.Fr(i,s,p)})},a.prototype.Fr=function(i,s,f){return this.vr.Rr(i,s).next(function(p){for(var _=0,I=f;_<I.length;_++)p=I[_].hr(s,p);return p})},a.prototype.$r=function(i,s,f){var p=Ti();return s.forEach(function(_,I){for(var O=0,V=f;O<V.length;O++)I=V[O].hr(_,I);p=p.ot(_,I)}),p},a.prototype.kr=function(i,s){var f=this;return this.vr.getEntries(i,s).next(function(p){return f.Mr(i,p)})},a.prototype.Mr=function(i,s){var f=this;return this.Sr.Or(i,s).next(function(p){var _=f.$r(i,s,p),I=oi();return _.forEach(function(O,V){V||(V=new Er(O,_n.min())),I=I.ot(O,V)}),I})},a.prototype.Lr=function(i,s,f){return E.F((p=s).path)&&null===p.collectionGroup&&0===p.filters.length?this.Br(i,s.path):yr(s)?this.qr(i,s,f):this.Ur(i,s,f);var p},a.prototype.Br=function(i,s){return this.Cr(i,new E(s)).next(function(f){var p=Me();return f instanceof fr&&(p=p.ot(f.key,f)),p})},a.prototype.qr=function(i,s,f){var p=this,_=s.collectionGroup,I=Me();return this.Dr.Qr(i,_).next(function(O){return Rt.forEach(O,function(V){var ce,Ee,X=(ce=s,Ee=V.child(_),new Kr(Ee,null,ce.on.slice(),ce.filters.slice(),ce.limit,ce.an,ce.startAt,ce.endAt));return p.Ur(i,X,f).next(function(ce){ce.forEach(function(Ee,Ie){I=I.ot(Ee,Ie)})})}).next(function(){return I})})},a.prototype.Ur=function(i,s,f){var p,_,I=this;return this.vr.Lr(i,s,f).next(function(O){return p=O,I.Sr.Wr(i,s)}).next(function(O){return I.jr(i,_=O,p).next(function(V){p=V;for(var X=0,ce=_;X<ce.length;X++)for(var Ee=ce[X],Ie=0,Ue=Ee.mutations;Ie<Ue.length;Ie++){var Je=Ue[Ie],ut=Je.key,Jt=p.get(ut),en=Vn(Je,Jt,Jt,Ee.ar);p=en instanceof fr?p.ot(ut,en):p.remove(ut)}})}).next(function(){return p.forEach(function(O,V){so(s,V)||(p=p.remove(O))}),p})},a.prototype.jr=function(i,s,f){for(var p=We(),_=0,I=s;_<I.length;_++)for(var O=0,V=I[_].mutations;O<V.length;O++){var X=V[O];X instanceof nr&&null===f.get(X.key)&&(p=p.add(X.key))}var ce=f;return this.vr.getEntries(i,p).next(function(Ee){return Ee.forEach(function(Ie,Ue){null!==Ue&&Ue instanceof fr&&(ce=ce.ot(Ie,Ue))}),ce})},a}(),R=function(){function a(i,s,f,p){this.targetId=i,this.fromCache=s,this.Kr=f,this.Gr=p}return a.zr=function(i,s){for(var f=We(),p=We(),_=0,I=s.docChanges;_<I.length;_++){var O=I[_];switch(O.type){case 0:f=f.add(O.doc.key);break;case 1:p=p.add(O.doc.key)}}return new a(i,s.fromCache,f,p)},a}();function H(a,i){var f=a[1],_=i[1],I=Lt(a[0],i[0]);return 0===I?Lt(f,_):I}var z=function(){function a(i){this.Hr=i,this.buffer=new sr(H),this.Yr=0}return a.prototype.Jr=function(){return++this.Yr},a.prototype.Xr=function(i){var s=[i,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(s);else{var f=this.buffer.last();H(s,f)<0&&(this.buffer=this.buffer.delete(f).add(s))}},Object.defineProperty(a.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),a}(),ue={Zr:!1,eo:0,no:0,so:0},ne=function(){function a(i,s,f){this.io=i,this.ro=s,this.oo=f}return a.ao=function(i){return new a(i,a.co,a.uo)},a}();ne.ho=-1,ne.lo=1048576,ne._o=41943040,ne.co=10,ne.uo=1e3,ne.fo=new ne(ne._o,ne.co,ne.uo),ne.do=new ne(ne.ho,0,0);var Le=function(){function a(i,s){this.wo=i,this.cs=s,this.mo=!1,this.To=null}return a.prototype.start=function(i){this.wo.params.io!==ne.ho&&this.Eo(i)},a.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(a.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),a.prototype.Eo=function(i){var s=this,f=this.mo?3e5:6e4;Ae("LruGarbageCollector","Garbage collection scheduled in "+f+"ms"),this.To=this.cs.yn("lru_garbage_collection",f,function(){return $.__awaiter(s,void 0,void 0,function(){var p;return $.__generator(this,function(_){switch(_.label){case 0:this.To=null,this.mo=!0,_.label=1;case 1:return _.trys.push([1,3,,7]),[4,i.Io(this.wo)];case 2:return _.sent(),[3,7];case 3:return ns(p=_.sent())?(Ae("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",p),[3,6]):[3,4];case 4:return[4,js(p)];case 5:_.sent(),_.label=6;case 6:return[3,7];case 7:return[4,this.Eo(i)];case 8:return _.sent(),[2]}})})})},a}(),Ye=function(){function a(i,s){this.Ao=i,this.params=s}return a.prototype.Ro=function(i,s){return this.Ao.Po(i).next(function(f){return Math.floor(s/100*f)})},a.prototype.yo=function(i,s){var f=this;if(0===s)return Rt.resolve(fi.ai);var p=new z(s);return this.Ao.Ce(i,function(_){return p.Xr(_.sequenceNumber)}).next(function(){return f.Ao.Vo(i,function(_){return p.Xr(_)})}).next(function(){return p.maxValue})},a.prototype.po=function(i,s,f){return this.Ao.po(i,s,f)},a.prototype.bo=function(i,s){return this.Ao.bo(i,s)},a.prototype.vo=function(i,s){var f=this;return this.params.io===ne.ho?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(ue)):this.So(i).next(function(p){return p<f.params.io?(Ae("LruGarbageCollector","Garbage collection skipped; Cache size "+p+" is lower than threshold "+f.params.io),ue):f.Do(i,s)})},a.prototype.So=function(i){return this.Ao.So(i)},a.prototype.Do=function(i,s){var f,p,_,I,O,V,X,ce=this,Ee=Date.now();return this.Ro(i,this.params.ro).next(function(Ie){return Ie>ce.params.oo?(Ae("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+ce.params.oo+" from "+Ie),p=ce.params.oo):p=Ie,I=Date.now(),ce.yo(i,p)}).next(function(Ie){return f=Ie,O=Date.now(),ce.po(i,f,s)}).next(function(Ie){return _=Ie,V=Date.now(),ce.bo(i,f)}).next(function(Ie){return X=Date.now(),Ze()<=Z.LogLevel.DEBUG&&Ae("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(I-Ee)+"ms\n\tDetermined least recently used "+p+" in "+(O-I)+"ms\n\tRemoved "+_+" targets in "+(V-O)+"ms\n\tRemoved "+Ie+" documents in "+(X-V)+"ms\nTotal Duration: "+(X-Ee)+"ms"),Rt.resolve({Zr:!0,eo:p,no:_,so:Ie})})},a}();function Ke(a){for(var i="",s=0;s<a.length;s++)i.length>0&&(i=Kt(i)),i=Et(a.get(s),i);return Kt(i)}function Et(a,i){for(var s=i,f=a.length,p=0;p<f;p++){var _=a.charAt(p);switch(_){case"\0":s+="\x01\x10";break;case"\x01":s+="\x01\x11";break;default:s+=_}}return s}function Kt(a){return a+"\x01\x01"}function Yt(a){var i=a.length;if(it(i>=2),2===i)return it("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),rt.P();for(var s=i-2,f=[],p="",_=0;_<i;){var I=a.indexOf("\x01",_);switch((I<0||I>s)&&Re(),a.charAt(I+1)){case"\x01":var O=a.substring(_,I),V=void 0;0===p.length?V=O:(V=p+=O,p=""),f.push(V);break;case"\x10":p+=a.substring(_,I),p+="\0";break;case"\x11":p+=a.substring(_,I+1);break;default:Re()}_=I+2}return new rt(f)}var Mn=function(a){this.Co=a};function ar(a,i){if(i.document)return V=!!i.hasCommittedMutations,X=Sn(a.Co,(O=i.document).name),ce=po(O.updateTime),Ee=new Zo({mapValue:{fields:O.fields}}),new fr(X,ce,Ee,{hasCommittedMutations:!!V});var O,V,X,ce,Ee;if(i.noDocument){var s=E.$(i.noDocument.path),f=mi(i.noDocument.readTime);return new Er(s,f,{hasCommittedMutations:!!i.hasCommittedMutations})}if(i.unknownDocument){var p=E.$(i.unknownDocument.path),_=mi(i.unknownDocument.version);return new Tr(p,_)}return Re()}function Li(a,i,s){var Ie,Ue,f=Ii(s),p=i.key.path.h().A();if(i instanceof fr){var _={name:Oi(Ie=a.Co,(Ue=i).key),fields:Ue.rn().mapValue.fields,updateTime:bi(Ie,Ue.version.Z())};return new pr(null,null,_,i.hasCommittedMutations,f,p)}if(i instanceof Er){var O=i.key.path.A(),V=tn(i.version),X=i.hasCommittedMutations;return new pr(null,new el(O,V),null,X,f,p)}if(i instanceof Tr){var ce=i.key.path.A(),Ee=tn(i.version);return new pr(new tl(ce,Ee),null,null,!0,f,p)}return Re()}function Ii(a){var i=a.Z();return[i.seconds,i.nanoseconds]}function yi(a){var i=new Rn(a[0],a[1]);return _n.J(i)}function tn(a){var i=a.Z();return new Qs(i.seconds,i.nanoseconds)}function mi(a){var i=new Rn(a.seconds,a.nanoseconds);return _n.J(i)}function Bo(a,i){var s=(i.baseMutations||[]).map(function(_){return jt(a.Co,_)}),f=i.mutations.map(function(_){return jt(a.Co,_)}),p=Rn.fromMillis(i.localWriteTimeMs);return new Ts(i.batchId,p,s,f)}function Ds(a){var i,s,f=mi(a.readTime),p=void 0!==a.lastLimboFreeSnapshotVersion?mi(a.lastLimboFreeSnapshotVersion):_n.min();return void 0!==a.query.documents?(it(1===(s=a.query).documents.length),i=qr(Mi(Yo(s.documents[0])))):i=Xo(a.query),new dn(i,a.targetId,0,a.lastListenSequenceNumber,f,p,Vt.fromBase64String(a.resumeToken))}function Bl(a,i){var s,f=tn(i.nt),p=tn(i.lastLimboFreeSnapshotVersion);s=Pt(i.target)?kn(a.Co,i.target):Ws(a.Co,i.target);var _=i.resumeToken.toBase64();return new No(i.targetId,xe(i.target),f,_,i.sequenceNumber,p,s)}var vc=function(){function a(i,s,f,p){this.userId=i,this.serializer=s,this.Dr=f,this.No=p,this.Fo={}}return a.xo=function(i,s,f,p){return it(""!==i.uid),new a(i.Zs()?i.uid:"",s,f,p)},a.prototype.$o=function(i){var s=!0,f=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ia(i).rs({index:_i.userMutationsIndex,range:f},function(p,_,I){s=!1,I.done()}).next(function(){return s})},a.prototype.ko=function(i,s,f,p){var _=this,I=Sa(i),O=ia(i);return O.add({}).next(function(V){it("number"==typeof V);for(var X=new Ts(V,s,f,p),ce=function(en,Tn,Gn){var mr=Gn.baseMutations.map(function(wi){return Fr(en.Co,wi)}),ri=Gn.mutations.map(function(wi){return Fr(en.Co,wi)});return new _i(Tn,Gn.batchId,Gn.ar.toMillis(),mr,ri)}(_.serializer,_.userId,X),Ee=[],Ie=new sr(function(en,Tn){return Lt(en.R(),Tn.R())}),Ue=0,Je=p;Ue<Je.length;Ue++){var ut=Je[Ue],Jt=_o.key(_.userId,ut.key.path,V);Ie=Ie.add(ut.key.path.h()),Ee.push(O.put(ce)),Ee.push(I.put(Jt,_o.PLACEHOLDER))}return Ie.forEach(function(en){Ee.push(_.Dr.Mo(i,en))}),i.pr(function(){_.Fo[V]=X.keys()}),Rt.$n(Ee).next(function(){return X})})},a.prototype.Oo=function(i,s){var f=this;return ia(i).get(s).next(function(p){return p?(it(p.userId===f.userId),Bo(f.serializer,p)):null})},a.prototype.Lo=function(i,s){var f=this;return this.Fo[s]?Rt.resolve(this.Fo[s]):this.Oo(i,s).next(function(p){if(p){var _=p.keys();return f.Fo[s]=_,_}return null})},a.prototype.Bo=function(i,s){var f=this,p=s+1,_=IDBKeyRange.lowerBound([this.userId,p]),I=null;return ia(i).rs({index:_i.userMutationsIndex,range:_},function(O,V,X){V.userId===f.userId&&(it(V.batchId>=p),I=Bo(f.serializer,V)),X.done()}).next(function(){return I})},a.prototype.qo=function(i){var s=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),f=-1;return ia(i).rs({index:_i.userMutationsIndex,range:s,reverse:!0},function(p,_,I){f=_.batchId,I.done()}).next(function(){return f})},a.prototype.Uo=function(i){var s=this,f=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ia(i).ts(_i.userMutationsIndex,f).next(function(p){return p.map(function(_){return Bo(s.serializer,_)})})},a.prototype.Nr=function(i,s){var f=this,p=_o.prefixForPath(this.userId,s.path),_=IDBKeyRange.lowerBound(p),I=[];return Sa(i).rs({range:_},function(O,V,X){var ce=O[0],Ie=O[2],Ue=Yt(O[1]);if(ce===f.userId&&s.path.isEqual(Ue))return ia(i).get(Ie).next(function(Je){if(!Je)throw Re();it(Je.userId===f.userId),I.push(Bo(f.serializer,Je))});X.done()}).next(function(){return I})},a.prototype.Or=function(i,s){var f=this,p=new sr(Lt),_=[];return s.forEach(function(I){var O=_o.prefixForPath(f.userId,I.path),V=IDBKeyRange.lowerBound(O),X=Sa(i).rs({range:V},function(ce,Ee,Ie){var Ue=ce[0],ut=ce[2],Jt=Yt(ce[1]);Ue===f.userId&&I.path.isEqual(Jt)?p=p.add(ut):Ie.done()});_.push(X)}),Rt.$n(_).next(function(){return f.Qo(i,p)})},a.prototype.Wr=function(i,s){var f=this,p=s.path,_=p.length+1,I=_o.prefixForPath(this.userId,p),O=IDBKeyRange.lowerBound(I),V=new sr(Lt);return Sa(i).rs({range:O},function(X,ce,Ee){var Ie=X[0],Je=X[2],ut=Yt(X[1]);Ie===f.userId&&p.T(ut)?ut.length===_&&(V=V.add(Je)):Ee.done()}).next(function(){return f.Qo(i,V)})},a.prototype.Qo=function(i,s){var f=this,p=[],_=[];return s.forEach(function(I){_.push(ia(i).get(I).next(function(O){if(null===O)throw Re();it(O.userId===f.userId),p.push(Bo(f.serializer,O))}))}),Rt.$n(_).next(function(){return p})},a.prototype.Wo=function(i,s){var f=this;return Hl(i.jo,this.userId,s).next(function(p){return i.pr(function(){f.Ko(s.batchId)}),Rt.forEach(p,function(_){return f.No.Go(i,_)})})},a.prototype.Ko=function(i){delete this.Fo[i]},a.prototype.zo=function(i){var s=this;return this.$o(i).next(function(f){if(!f)return Rt.resolve();var p=IDBKeyRange.lowerBound(_o.prefixForUser(s.userId)),_=[];return Sa(i).rs({range:p},function(I,O,V){if(I[0]===s.userId){var X=Yt(I[1]);_.push(X)}else V.done()}).next(function(){it(0===_.length)})})},a.prototype.Ho=function(i,s){return Ln(i,this.userId,s)},a.prototype.Yo=function(i){var s=this;return Xc(i).get(this.userId).next(function(f){return f||new Fs(s.userId,-1,"")})},a}();function Ln(a,i,s){var f=_o.prefixForPath(i,s.path),p=f[1],_=IDBKeyRange.lowerBound(f),I=!1;return Sa(a).rs({range:_,ss:!0},function(O,V,X){O[0]===i&&O[1]===p&&(I=!0),X.done()}).next(function(){return I})}function Hl(a,i,s){var f=a.store(_i.store),p=a.store(_o.store),_=[],I=IDBKeyRange.only(s.batchId),O=0,V=f.rs({range:I},function(Je,ut,Jt){return O++,Jt.delete()});_.push(V.next(function(){it(1===O)}));for(var X=[],ce=0,Ee=s.mutations;ce<Ee.length;ce++){var Ie=Ee[ce],Ue=_o.key(i,Ie.key.path,s.batchId);_.push(p.delete(Ue)),X.push(Ie.key)}return Rt.$n(_).next(function(){return X})}function ia(a){return rs.Qn(a,_i.store)}function Sa(a){return rs.Qn(a,_o.store)}function Xc(a){return rs.Qn(a,Fs.store)}var Jc=function(){function a(i,s){this.serializer=i,this.Dr=s}return a.prototype.Er=function(i,s,f){return bt(i).put(ur(s),f)},a.prototype.Ar=function(i,s){var f=bt(i),p=ur(s);return f.delete(p)},a.prototype.updateMetadata=function(i,s){var f=this;return this.getMetadata(i).next(function(p){return p.byteSize+=s,f.Jo(i,p)})},a.prototype.Rr=function(i,s){var f=this;return bt(i).get(ur(s)).next(function(p){return f.Xo(p)})},a.prototype.Zo=function(i,s){var f=this;return bt(i).get(ur(s)).next(function(p){var _=f.Xo(p);return _?{ta:_,size:Ca(p)}:null})},a.prototype.getEntries=function(i,s){var f=this,p=Ti();return this.ea(i,s,function(_,I){var O=f.Xo(I);p=p.ot(_,O)}).next(function(){return p})},a.prototype.na=function(i,s){var f=this,p=Ti(),_=new Cn(E.i);return this.ea(i,s,function(I,O){var V=f.Xo(O);V?(p=p.ot(I,V),_=_.ot(I,Ca(O))):(p=p.ot(I,null),_=_.ot(I,0))}).next(function(){return{sa:p,ia:_}})},a.prototype.ea=function(i,s,f){if(s.m())return Rt.resolve();var p=IDBKeyRange.bound(s.first().path.A(),s.last().path.A()),_=s._t(),I=_.It();return bt(i).rs({range:p},function(O,V,X){for(var ce=E.$(O);I&&E.i(I,ce)<0;)f(I,null),I=_.It();I&&I.isEqual(ce)&&(f(I,V),I=_.At()?_.It():null),I?X.Xn(I.path.A()):X.done()}).next(function(){for(;I;)f(I,null),I=_.At()?_.It():null})},a.prototype.Lr=function(i,s,f){var p=this,_=Me(),I=s.path.length+1,O={};if(f.isEqual(_n.min())){var V=s.path.A();O.range=IDBKeyRange.lowerBound(V)}else{var X=s.path.A(),ce=Ii(f);O.range=IDBKeyRange.lowerBound([X,ce],!0),O.index=pr.collectionReadTimeIndex}return bt(i).rs(O,function(Ee,Ie,Ue){if(Ee.length===I){var Je=ar(p.serializer,Ie);s.path.T(Je.key.path)?Je instanceof fr&&so(s,Je)&&(_=_.ot(Je.key,Je)):Ue.done()}}).next(function(){return _})},a.prototype.ra=function(i){return new yc(this,!!i&&i.oa)},a.prototype.aa=function(i){return this.getMetadata(i).next(function(s){return s.byteSize})},a.prototype.getMetadata=function(i){return Mf(i).get(Ji.key).next(function(s){return it(!!s),s})},a.prototype.Jo=function(i,s){return Mf(i).put(Ji.key,s)},a.prototype.Xo=function(i){if(i){var s=ar(this.serializer,i);return s instanceof Er&&s.version.isEqual(_n.min())?null:s}return null},a}(),yc=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).ca=s,p.oa=f,p.ua=new or(function(_){return _.toString()},function(_,I){return _.isEqual(I)}),p}return $.__extends(i,a),i.prototype.yr=function(s){var f=this,p=[],_=0,I=new sr(function(O,V){return Lt(O.R(),V.R())});return this.wr.forEach(function(O,V){var X=f.ua.get(O);if(V){var ce=Li(f.ca.serializer,V,f.readTime);I=I.add(O.path.h());var Ee=Ca(ce);_+=Ee-X,p.push(f.ca.Er(s,O,ce))}else if(_-=X,f.oa){var Ie=Li(f.ca.serializer,new Er(O,_n.min()),f.readTime);p.push(f.ca.Er(s,O,Ie))}else p.push(f.ca.Ar(s,O))}),I.forEach(function(O){p.push(f.ca.Dr.Mo(s,O))}),p.push(this.ca.updateMetadata(s,_)),Rt.$n(p)},i.prototype.gr=function(s,f){var p=this;return this.ca.Zo(s,f).next(function(_){return null===_?(p.ua.set(f,0),null):(p.ua.set(f,_.size),_.ta)})},i.prototype.Pr=function(s,f){var p=this;return this.ca.na(s,f).next(function(_){var I=_.sa;return _.ia.forEach(function(O,V){p.ua.set(O,V)}),I})},i}(l);function Mf(a){return rs.Qn(a,Ji.store)}function bt(a){return rs.Qn(a,pr.store)}function ur(a){return a.path.A()}function Ca(a){var i;if(a.document)i=a.document;else if(a.unknownDocument)i=a.unknownDocument;else{if(!a.noDocument)throw Re();i=a.noDocument}return JSON.stringify(i).length}var Xi=function(){function a(){this.ha=new Zc}return a.prototype.Mo=function(i,s){return this.ha.add(s),Rt.resolve()},a.prototype.Qr=function(i,s){return Rt.resolve(this.ha.getEntries(s))},a}(),Zc=function(){function a(){this.index={}}return a.prototype.add=function(i){var s=i._(),f=i.h(),p=this.index[s]||new sr(rt.i),_=!p.has(f);return this.index[s]=p.add(f),_},a.prototype.has=function(i){var s=i._(),f=i.h(),p=this.index[s];return p&&p.has(f)},a.prototype.getEntries=function(i){return(this.index[i]||new sr(rt.i)).A()},a}(),mc=function(){function a(i){this.serializer=i}return a.prototype.createOrUpgrade=function(i,s,f,p){var _=this;it(f<p&&f>=0&&p<=10);var V,I=new Co("createOrUpgrade",s);f<1&&p>=1&&(i.createObjectStore(Ao.store),(V=i).createObjectStore(Fs.store,{keyPath:Fs.keyPath}),V.createObjectStore(_i.store,{keyPath:_i.keyPath,autoIncrement:!0}).createIndex(_i.userMutationsIndex,_i.userMutationsKeyPath,{unique:!0}),V.createObjectStore(_o.store),Gl(i),function(V){V.createObjectStore(pr.store)}(i));var O=Rt.resolve();return f<3&&p>=3&&(0!==f&&(function(V){V.deleteObjectStore(Ai.store),V.deleteObjectStore(No.store),V.deleteObjectStore(Fi.store)}(i),Gl(i)),O=O.next(function(){return function(V){var X=V.store(Fi.store),ce=new Fi(0,0,_n.min().Z(),0);return X.put(Fi.key,ce)}(I)})),f<4&&p>=4&&(0!==f&&(O=O.next(function(){return function(V,X){return X.store(_i.store).ts().next(function(ce){V.deleteObjectStore(_i.store),V.createObjectStore(_i.store,{keyPath:_i.keyPath,autoIncrement:!0}).createIndex(_i.userMutationsIndex,_i.userMutationsKeyPath,{unique:!0});var Ee=X.store(_i.store),Ie=ce.map(function(Ue){return Ee.put(Ue)});return Rt.$n(Ie)})}(i,I)})),O=O.next(function(){!function(V){V.createObjectStore(oa.store,{keyPath:oa.keyPath})}(i)})),f<5&&p>=5&&(O=O.next(function(){return _.removeAcknowledgedMutations(I)})),f<6&&p>=6&&(O=O.next(function(){return function(V){V.createObjectStore(Ji.store)}(i),_.addDocumentGlobal(I)})),f<7&&p>=7&&(O=O.next(function(){return _.ensureSequenceNumbers(I)})),f<8&&p>=8&&(O=O.next(function(){return _.createCollectionParentIndex(i,I)})),f<9&&p>=9&&(O=O.next(function(){(function(V){V.objectStoreNames.contains("remoteDocumentChanges")&&V.deleteObjectStore("remoteDocumentChanges")})(i),function(V){var X=V.objectStore(pr.store);X.createIndex(pr.readTimeIndex,pr.readTimeIndexPath,{unique:!1}),X.createIndex(pr.collectionReadTimeIndex,pr.collectionReadTimeIndexPath,{unique:!1})}(s)})),f<10&&p>=10&&(O=O.next(function(){return _.rewriteCanonicalIds(I)})),O},a.prototype.addDocumentGlobal=function(i){var s=0;return i.store(pr.store).rs(function(f,p){s+=Ca(p)}).next(function(){var f=new Ji(s);return i.store(Ji.store).put(Ji.key,f)})},a.prototype.removeAcknowledgedMutations=function(i){var s=this,f=i.store(Fs.store),p=i.store(_i.store);return f.ts().next(function(_){return Rt.forEach(_,function(I){var O=IDBKeyRange.bound([I.userId,-1],[I.userId,I.lastAcknowledgedBatchId]);return p.ts(_i.userMutationsIndex,O).next(function(V){return Rt.forEach(V,function(X){it(X.userId===I.userId);var ce=Bo(s.serializer,X);return Hl(i,I.userId,ce).next(function(){})})})})})},a.prototype.ensureSequenceNumbers=function(i){var s=i.store(Ai.store),f=i.store(pr.store);return i.store(Fi.store).get(Fi.key).next(function(p){var _=[];return f.rs(function(I,O){var V=new rt(I),X=[0,Ke(V)];_.push(s.get(X).next(function(ce){return ce?Rt.resolve():s.put(new Ai(0,Ke(V),p.highestListenSequenceNumber))}))}).next(function(){return Rt.$n(_)})})},a.prototype.createCollectionParentIndex=function(i,s){i.createObjectStore(Aa.store,{keyPath:Aa.keyPath});var f=s.store(Aa.store),p=new Zc,_=function(I){if(p.add(I)){var O=I._(),V=I.h();return f.put({collectionId:O,parent:Ke(V)})}};return s.store(pr.store).rs({ss:!0},function(I,O){var V=new rt(I);return _(V.h())}).next(function(){return s.store(_o.store).rs({ss:!0},function(I,O){var X=Yt(I[1]);return _(X.h())})})},a.prototype.rewriteCanonicalIds=function(i){var s=this,f=i.store(No.store);return f.rs(function(p,_){var I=Ds(_),O=Bl(s.serializer,I);return f.put(O)})},a}(),Qs=function(a,i){this.seconds=a,this.nanoseconds=i},Ao=function(a,i,s){this.ownerId=a,this.allowTabSynchronization=i,this.leaseTimestampMs=s};Ao.store="owner",Ao.key="owner";var Fs=function(a,i,s){this.userId=a,this.lastAcknowledgedBatchId=i,this.lastStreamToken=s};Fs.store="mutationQueues",Fs.keyPath="userId";var _i=function(a,i,s,f,p){this.userId=a,this.batchId=i,this.localWriteTimeMs=s,this.baseMutations=f,this.mutations=p};_i.store="mutations",_i.keyPath="batchId",_i.userMutationsIndex="userMutationsIndex",_i.userMutationsKeyPath=["userId","batchId"];var _o=function(){function a(){}return a.prefixForUser=function(i){return[i]},a.prefixForPath=function(i,s){return[i,Ke(s)]},a.key=function(i,s,f){return[i,Ke(s),f]},a}();_o.store="documentMutations",_o.PLACEHOLDER=new _o;var el=function(a,i){this.path=a,this.readTime=i},tl=function(a,i){this.path=a,this.version=i},pr=function(a,i,s,f,p,_){this.unknownDocument=a,this.noDocument=i,this.document=s,this.hasCommittedMutations=f,this.readTime=p,this.parentPath=_};pr.store="remoteDocuments",pr.readTimeIndex="readTimeIndex",pr.readTimeIndexPath="readTime",pr.collectionReadTimeIndex="collectionReadTimeIndex",pr.collectionReadTimeIndexPath=["parentPath","readTime"];var Ji=function(a){this.byteSize=a};Ji.store="remoteDocumentGlobal",Ji.key="remoteDocumentGlobalKey";var No=function(a,i,s,f,p,_,I){this.targetId=a,this.canonicalId=i,this.readTime=s,this.resumeToken=f,this.lastListenSequenceNumber=p,this.lastLimboFreeSnapshotVersion=_,this.query=I};No.store="targets",No.keyPath="targetId",No.queryTargetsIndexName="queryTargetsIndex",No.queryTargetsKeyPath=["canonicalId","targetId"];var Ai=function(a,i,s){this.targetId=a,this.path=i,this.sequenceNumber=s};Ai.store="targetDocuments",Ai.keyPath=["targetId","path"],Ai.documentTargetsIndex="documentTargetsIndex",Ai.documentTargetsKeyPath=["path","targetId"];var Fi=function(a,i,s,f){this.highestTargetId=a,this.highestListenSequenceNumber=i,this.lastRemoteSnapshotVersion=s,this.targetCount=f};Fi.key="targetGlobalKey",Fi.store="targetGlobal";var Aa=function(a,i){this.collectionId=a,this.parent=i};function Gl(a){a.createObjectStore(Ai.store,{keyPath:Ai.keyPath}).createIndex(Ai.documentTargetsIndex,Ai.documentTargetsKeyPath,{unique:!0}),a.createObjectStore(No.store,{keyPath:No.keyPath}).createIndex(No.queryTargetsIndexName,No.queryTargetsKeyPath,{unique:!0}),a.createObjectStore(Fi.store)}Aa.store="collectionParents",Aa.keyPath=["collectionId","parent"];var oa=function(a,i,s,f){this.clientId=a,this.updateTimeMs=i,this.networkEnabled=s,this.inForeground=f};oa.store="clientMetadata",oa.keyPath="clientId";var xf=$.__spreadArrays($.__spreadArrays($.__spreadArrays([Fs.store,_i.store,_o.store,pr.store,No.store,Ao.store,Fi.store,Ai.store],[oa.store]),[Ji.store]),[Aa.store]),xu=function(){function a(){this.la=new Zc}return a.prototype.Mo=function(i,s){var f=this;if(!this.la.has(s)){var p=s._(),_=s.h();i.pr(function(){f.la.add(s)});var I={collectionId:p,parent:Ke(_)};return _c(i).put(I)}return Rt.resolve()},a.prototype.Qr=function(i,s){var f=[],p=IDBKeyRange.bound([s,""],[vn(s),""],!1,!0);return _c(i).ts(p).next(function(_){for(var I=0,O=_;I<O.length;I++){var V=O[I];if(V.collectionId!==s)break;f.push(Yt(V.parent))}return f})},a}();function _c(a){return rs.Qn(a,Aa.store)}var ku=function(){function a(i){this._a=i}return a.prototype.next=function(){return this._a+=2,this._a},a.fa=function(){return new a(0)},a.da=function(){return new a(-1)},a}(),wc=function(){function a(i,s){this.No=i,this.serializer=s}return a.prototype.wa=function(i){var s=this;return this.ma(i).next(function(f){var p=new ku(f.highestTargetId);return f.highestTargetId=p.next(),s.Ta(i,f).next(function(){return f.highestTargetId})})},a.prototype.Ea=function(i){return this.ma(i).next(function(s){return _n.J(new Rn(s.lastRemoteSnapshotVersion.seconds,s.lastRemoteSnapshotVersion.nanoseconds))})},a.prototype.Ia=function(i){return this.ma(i).next(function(s){return s.highestListenSequenceNumber})},a.prototype.Aa=function(i,s,f){var p=this;return this.ma(i).next(function(_){return _.highestListenSequenceNumber=s,f&&(_.lastRemoteSnapshotVersion=f.Z()),s>_.highestListenSequenceNumber&&(_.highestListenSequenceNumber=s),p.Ta(i,_)})},a.prototype.Ra=function(i,s){var f=this;return this.ga(i,s).next(function(){return f.ma(i).next(function(p){return p.targetCount+=1,f.Pa(s,p),f.Ta(i,p)})})},a.prototype.ya=function(i,s){return this.ga(i,s)},a.prototype.Va=function(i,s){var f=this;return this.pa(i,s.targetId).next(function(){return iu(i).delete(s.targetId)}).next(function(){return f.ma(i)}).next(function(p){return it(p.targetCount>0),p.targetCount-=1,f.Ta(i,p)})},a.prototype.po=function(i,s,f){var p=this,_=0,I=[];return iu(i).rs(function(O,V){var X=Ds(V);X.sequenceNumber<=s&&null===f.get(X.targetId)&&(_++,I.push(p.Va(i,X)))}).next(function(){return Rt.$n(I)}).next(function(){return _})},a.prototype.Ce=function(i,s){return iu(i).rs(function(f,p){var _=Ds(p);s(_)})},a.prototype.ma=function(i){return ql(i).get(Fi.key).next(function(s){return it(null!==s),s})},a.prototype.Ta=function(i,s){return ql(i).put(Fi.key,s)},a.prototype.ga=function(i,s){return iu(i).put(Bl(this.serializer,s))},a.prototype.Pa=function(i,s){var f=!1;return i.targetId>s.highestTargetId&&(s.highestTargetId=i.targetId,f=!0),i.sequenceNumber>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=i.sequenceNumber,f=!0),f},a.prototype.ba=function(i){return this.ma(i).next(function(s){return s.targetCount})},a.prototype.va=function(i,s){var f=xe(s),p=IDBKeyRange.bound([f,Number.NEGATIVE_INFINITY],[f,Number.POSITIVE_INFINITY]),_=null;return iu(i).rs({range:p,index:No.queryTargetsIndexName},function(I,O,V){var X=Ds(O);Ft(s,X.target)&&(_=X,V.done())}).next(function(){return _})},a.prototype.Sa=function(i,s,f){var p=this,_=[],I=Ss(i);return s.forEach(function(O){var V=Ke(O.path);_.push(I.put(new Ai(f,V))),_.push(p.No.Da(i,f,O))}),Rt.$n(_)},a.prototype.Ca=function(i,s,f){var p=this,_=Ss(i);return Rt.forEach(s,function(I){var O=Ke(I.path);return Rt.$n([_.delete([f,O]),p.No.Na(i,f,I)])})},a.prototype.pa=function(i,s){var f=Ss(i),p=IDBKeyRange.bound([s],[s+1],!1,!0);return f.delete(p)},a.prototype.Fa=function(i,s){var f=IDBKeyRange.bound([s],[s+1],!1,!0),p=Ss(i),_=We();return p.rs({range:f,ss:!0},function(I,O,V){var X=Yt(I[1]),ce=new E(X);_=_.add(ce)}).next(function(){return _})},a.prototype.Ho=function(i,s){var f=Ke(s.path),p=IDBKeyRange.bound([f],[vn(f)],!1,!0),_=0;return Ss(i).rs({index:Ai.documentTargetsIndex,ss:!0,range:p},function(I,O,V){0!==I[0]&&(_++,V.done())}).next(function(){return _>0})},a.prototype.Ue=function(i,s){return iu(i).get(s).next(function(f){return f?Ds(f):null})},a}();function iu(a){return rs.Qn(a,No.store)}function ql(a){return rs.Qn(a,Fi.store)}function Ss(a){return rs.Qn(a,Ai.store)}var bc="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ec=function(a){function i(s,f){var p=this;return(p=a.call(this)||this).jo=s,p.xa=f,p}return $.__extends(i,a),i}(m),rs=function(){function a(i,s,f,p,_,I,O,V,X,ce){if(this.allowTabSynchronization=i,this.persistenceKey=s,this.clientId=f,this.fn=_,this.window=I,this.document=O,this.$a=X,this.ka=ce,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(Ee){return Promise.resolve()},!a.Ln())throw new te(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new Ic(this,p),this.Wa=s+"main",this.serializer=new Mn(V),this.ja=new Dr(this.Wa,10,new mc(this.serializer)),this.Ka=new wc(this.No,this.serializer),this.Dr=new xu,this.vr=new Jc(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===ce&&mt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return a.Qn=function(i,s){if(i instanceof Ec)return Dr.Qn(i.jo,s);throw Re()},a.prototype.start=function(){var i=this;return this.za().then(function(){if(!i.isPrimary&&!i.allowTabSynchronization)throw new te(ge.FAILED_PRECONDITION,bc);return i.Ha(),i.Ya(),i.Ja(),i.runTransaction("getHighestListenSequenceNumber","readonly",function(s){return i.Ka.Ia(s)})}).then(function(s){i.Ma=new fi(s,i.$a)}).then(function(){i.Oa=!0}).catch(function(s){return i.ja&&i.ja.close(),Promise.reject(s)})},a.prototype.Xa=function(i){var s=this;return this.Qa=function(f){return $.__awaiter(s,void 0,void 0,function(){return $.__generator(this,function(p){return this.Ei?[2,i(f)]:[2]})})},i(this.isPrimary)},a.prototype.Za=function(i){var s=this;this.ja.Kn(function(f){return $.__awaiter(s,void 0,void 0,function(){return $.__generator(this,function(p){switch(p.label){case 0:return null===f.newVersion?[4,i()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2]}})})})},a.prototype.tc=function(i){var s=this;this.networkEnabled!==i&&(this.networkEnabled=i,this.fn.ws(function(){return $.__awaiter(s,void 0,void 0,function(){return $.__generator(this,function(f){switch(f.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:f.sent(),f.label=2;case 2:return[2]}})})}))},a.prototype.za=function(){var i=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(s){return ou(s).put(new oa(i.clientId,Date.now(),i.networkEnabled,i.inForeground)).next(function(){if(i.isPrimary)return i.ec(s).next(function(f){f||(i.isPrimary=!1,i.fn.Cs(function(){return i.Qa(!1)}))})}).next(function(){return i.nc(s)}).next(function(f){return i.isPrimary&&!f?i.sc(s).next(function(){return!1}):!!f&&i.ic(s).next(function(){return!0})})}).catch(function(s){if(ns(s))return Ae("IndexedDbPersistence","Failed to extend owner lease: ",s),i.isPrimary;if(!i.allowTabSynchronization)throw s;return Ae("IndexedDbPersistence","Releasing owner lease after error during lease refresh",s),!1}).then(function(s){i.isPrimary!==s&&i.fn.Cs(function(){return i.Qa(s)}),i.isPrimary=s})},a.prototype.ec=function(i){var s=this;return sa(i).get(Ao.key).next(function(f){return Rt.resolve(s.rc(f))})},a.prototype.oc=function(i){return ou(i).delete(this.clientId)},a.prototype.ac=function(){return $.__awaiter(this,void 0,void 0,function(){var i,s,f,_=this;return $.__generator(this,function(I){switch(I.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(O){var V=a.Qn(O,oa.store);return V.ts().next(function(X){var ce=_.uc(X,18e5),Ee=X.filter(function(Ie){return-1===ce.indexOf(Ie)});return Rt.forEach(Ee,function(Ie){return V.delete(Ie.clientId)}).next(function(){return Ee})})}).catch(function(){return[]})]);case 1:if(i=I.sent(),this.Ga)for(s=0,f=i;s<f.length;s++)this.Ga.removeItem(this.hc(f[s].clientId));I.label=2;case 2:return[2]}})})},a.prototype.Ja=function(){var i=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,function(){return i.za().then(function(){return i.ac()}).then(function(){return i.Ja()})})},a.prototype.rc=function(i){return!!i&&i.ownerId===this.clientId},a.prototype.nc=function(i){var s=this;return this.ka?Rt.resolve(!0):sa(i).get(Ao.key).next(function(f){if(null!==f&&s.cc(f.leaseTimestampMs,5e3)&&!s.lc(f.ownerId)){if(s.rc(f)&&s.networkEnabled)return!0;if(!s.rc(f)){if(!f.allowTabSynchronization)throw new te(ge.FAILED_PRECONDITION,bc);return!1}}return!(!s.networkEnabled||!s.inForeground)||ou(i).ts().next(function(p){return void 0===s.uc(p,5e3).find(function(_){return!(s.clientId===_.clientId||!(!s.networkEnabled&&_.networkEnabled||!s.inForeground&&_.inForeground&&s.networkEnabled===_.networkEnabled))})})}).next(function(f){return s.isPrimary!==f&&Ae("IndexedDbPersistence","Client "+(f?"is":"is not")+" eligible for a primary lease."),f})},a.prototype.Di=function(){return $.__awaiter(this,void 0,void 0,function(){var i=this;return $.__generator(this,function(s){switch(s.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[Ao.store,oa.store],function(f){var p=new Ec(f,fi.ai);return i.sc(p).next(function(){return i.oc(p)})})];case 1:return s.sent(),this.ja.close(),this.wc(),[2]}})})},a.prototype.uc=function(i,s){var f=this;return i.filter(function(p){return f.cc(p.updateTimeMs,s)&&!f.lc(p.clientId)})},a.prototype.pi=function(){var i=this;return this.runTransaction("getActiveClients","readonly",function(s){return ou(s).ts().next(function(f){return i.uc(f,18e5).map(function(p){return p.clientId})})})},Object.defineProperty(a.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),a.prototype.mc=function(i){return vc.xo(i,this.serializer,this.Dr,this.No)},a.prototype.Tc=function(){return this.Ka},a.prototype.Ec=function(){return this.vr},a.prototype.Ic=function(){return this.Dr},a.prototype.runTransaction=function(i,s,f){var _,p=this;return Ae("IndexedDbPersistence","Starting transaction:",i),this.ja.runTransaction(i,"readonly"===s?"readonly":"readwrite",xf,function(O){return _=new Ec(O,p.Ma?p.Ma.next():fi.ai),"readwrite-primary"===s?p.ec(_).next(function(V){return!!V||p.nc(_)}).next(function(V){if(!V)throw mt("Failed to obtain primary lease for action '"+i+"'."),p.isPrimary=!1,p.fn.Cs(function(){return p.Qa(!1)}),new te(ge.FAILED_PRECONDITION,h);return f(_)}).next(function(V){return p.ic(_).next(function(){return V})}):p.Ac(_).next(function(){return f(_)})}).then(function(O){return _.br(),O})},a.prototype.Ac=function(i){var s=this;return sa(i).get(Ao.key).next(function(f){if(null!==f&&s.cc(f.leaseTimestampMs,5e3)&&!s.lc(f.ownerId)&&!s.rc(f)&&!(s.ka||s.allowTabSynchronization&&f.allowTabSynchronization))throw new te(ge.FAILED_PRECONDITION,bc)})},a.prototype.ic=function(i){var s=new Ao(this.clientId,this.allowTabSynchronization,Date.now());return sa(i).put(Ao.key,s)},a.Ln=function(){return Dr.Ln()},a.prototype.sc=function(i){var s=this,f=sa(i);return f.get(Ao.key).next(function(p){return s.rc(p)?(Ae("IndexedDbPersistence","Releasing primary lease."),f.delete(Ao.key)):Rt.resolve()})},a.prototype.cc=function(i,s){var f=Date.now();return!(i<f-s||i>f&&(mt("Detected an update time that is in the future: "+i+" > "+f),1))},a.prototype.Ha=function(){var i=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){i.fn.ws(function(){return i.inForeground="visible"===i.document.visibilityState,i.za()})},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},a.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},a.prototype.Ya=function(){var i,s=this;"function"==typeof(null===(i=this.window)||void 0===i?void 0:i.addEventListener)&&(this.La=function(){s._c(),s.fn.ws(function(){return s.Di()})},this.window.addEventListener("unload",this.La))},a.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},a.prototype.lc=function(i){var s;try{var f=null!==(null===(s=this.Ga)||void 0===s?void 0:s.getItem(this.hc(i)));return Ae("IndexedDbPersistence","Client '"+i+"' "+(f?"is":"is not")+" zombied in LocalStorage"),f}catch(p){return mt("IndexedDbPersistence","Failed to get zombied client id.",p),!1}},a.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(i){mt("Failed to set zombie client id.",i)}},a.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(i){}},a.prototype.hc=function(i){return"firestore_zombie_"+this.persistenceKey+"_"+i},a}();function sa(a){return rs.Qn(a,Ao.store)}function ou(a){return rs.Qn(a,oa.store)}var Ic=function(){function a(i,s){this.db=i,this.wo=new Ye(this,s)}return a.prototype.Po=function(i){var s=this.Rc(i);return this.db.Tc().ba(i).next(function(f){return s.next(function(p){return f+p})})},a.prototype.Rc=function(i){var s=0;return this.Vo(i,function(f){s++}).next(function(){return s})},a.prototype.Ce=function(i,s){return this.db.Tc().Ce(i,s)},a.prototype.Vo=function(i,s){return this.gc(i,function(f,p){return s(p)})},a.prototype.Da=function(i,s,f){return nl(i,f)},a.prototype.Na=function(i,s,f){return nl(i,f)},a.prototype.po=function(i,s,f){return this.db.Tc().po(i,s,f)},a.prototype.Go=function(i,s){return nl(i,s)},a.prototype.Pc=function(i,s){return p=s,_=!1,Xc(f=i).os(function(I){return Ln(f,I,p).next(function(O){return O&&(_=!0),Rt.resolve(!O)})}).next(function(){return _});var f,p,_},a.prototype.bo=function(i,s){var f=this,p=this.db.Ec().ra(),_=[],I=0;return this.gc(i,function(O,V){if(V<=s){var X=f.Pc(i,O).next(function(ce){if(!ce)return I++,p.Rr(i,O).next(function(){return p.Ar(O),Ss(i).delete([0,Ke(O.path)])})});_.push(X)}}).next(function(){return Rt.$n(_)}).next(function(){return p.apply(i)}).next(function(){return I})},a.prototype.removeTarget=function(i,s){var f=s.st(i.xa);return this.db.Tc().ya(i,f)},a.prototype.yc=function(i,s){return nl(i,s)},a.prototype.gc=function(i,s){var f,p=Ss(i),_=fi.ai;return p.rs({index:Ai.documentTargetsIndex},function(I,O){var X=O.path,ce=O.sequenceNumber;0===I[0]?(_!==fi.ai&&s(new E(Yt(f)),_),_=ce,f=X):_=fi.ai}).next(function(){_!==fi.ai&&s(new E(Yt(f)),_)})},a.prototype.So=function(i){return this.db.Ec().aa(i)},a}();function nl(a,i){return Ss(a).put((f=a.xa,new Ai(0,Ke(i.path),f)));var f}function wo(a,i){var s=a.projectId;return a.j||(s+="."+a.database),"firestore/"+i+"/"+s+"/"}var Na=function(){function a(i,s,f){this.persistence=i,this.Vc=s,this.bc=new Cn(Lt),this.vc=new or(function(p){return xe(p)},Ft),this.Sc=_n.min(),this.Sr=i.mc(f),this.Dc=i.Ec(),this.Ka=i.Tc(),this.Cc=new S(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return a.prototype.Io=function(i){var s=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(f){return i.vo(f,s.bc)})},a}();function di(a,i){var s=ze(a);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(f){var I,O,V,X,ce,Ee,Ie,p=i.batch.keys(),_=s.Dc.ra({oa:!0});return(I=s,O=f,V=i,X=_,ce=V.batch,Ee=ce.keys(),Ie=Rt.resolve(),Ee.forEach(function(Ue){Ie=Ie.next(function(){return X.Rr(O,Ue)}).next(function(Je){var ut=Je,Jt=V.dr.get(Ue);it(null!==Jt),(!ut||ut.version.L(Jt)<0)&&(ut=ce.cr(Ue,ut,V))&&X.Er(ut,V._r)})}),Ie.next(function(){return I.Sr.Wo(O,ce)})).next(function(){return _.apply(f)}).next(function(){return s.Sr.zo(f)}).next(function(){return s.Cc.kr(f,p)})})}function Tc(a){var i=ze(a);return i.persistence.runTransaction("Get last remote snapshot version","readonly",function(s){return i.Ka.Ea(s)})}function kf(a,i){var s=ze(a),f=i.nt,p=s.bc;return s.persistence.runTransaction("Apply remote event","readwrite-primary",function(_){var I=s.Dc.ra({oa:!0});p=s.bc;var O=[];i.zt.forEach(function(Ee,Ie){var Jt,en,Tn,Ue=p.get(Ie);if(Ue){O.push(s.Ka.Ca(_,Ee.se,Ie).next(function(){return s.Ka.Sa(_,Ee.ee,Ie)}));var Je=Ee.resumeToken;if(Je.O()>0){var ut=Ue.it(Je,f).st(_.xa);p=p.ot(Ie,ut),Jt=Ue,Tn=Ee,it((en=ut).resumeToken.O()>0),(0===Jt.resumeToken.O()||en.nt.X()-Jt.nt.X()>=3e8||Tn.ee.size+Tn.ne.size+Tn.se.size>0)&&O.push(s.Ka.ya(_,ut))}}});var V=oi(),X=We();if(i.Yt.forEach(function(Ee,Ie){X=X.add(Ee)}),O.push(I.getEntries(_,X).next(function(Ee){i.Yt.forEach(function(Ie,Ue){var Je=Ee.get(Ie);Ue instanceof Er&&Ue.version.isEqual(_n.min())?(I.Ar(Ie,f),V=V.ot(Ie,Ue)):null==Je||Ue.version.L(Je.version)>0||0===Ue.version.L(Je.version)&&Je.hasPendingWrites?(I.Er(Ue,f),V=V.ot(Ie,Ue)):Ae("LocalStore","Ignoring outdated watch update for ",Ie,". Current version:",Je.version," Watch version:",Ue.version),i.Jt.has(Ie)&&O.push(s.persistence.No.yc(_,Ie))})})),!f.isEqual(_n.min())){var ce=s.Ka.Ea(_).next(function(Ee){return s.Ka.Aa(_,_.xa,f)});O.push(ce)}return Rt.$n(O).next(function(){return I.apply(_)}).next(function(){return s.Cc.Mr(_,V)})}).then(function(_){return s.bc=p,_})}function Lf(a,i){var s=ze(a);return s.persistence.runTransaction("Get next mutation batch","readonly",function(f){return void 0===i&&(i=-1),s.Sr.Bo(f,i)})}function su(a,i){var s=ze(a);return s.persistence.runTransaction("Allocate target","readwrite",function(f){var p;return s.Ka.va(f,i).next(function(_){return _?Rt.resolve(p=_):s.Ka.wa(f).next(function(I){return p=new dn(i,I,0,f.xa),s.Ka.Ra(f,p).next(function(){return p})})})}).then(function(f){var p=s.bc.get(f.targetId);return(null===p||f.nt.L(p.nt)>0)&&(s.bc=s.bc.ot(f.targetId,f),s.vc.set(i,f.targetId)),f})}function Ra(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p,_,I;return $.__generator(this,function(O){switch(O.label){case 0:f=ze(a),p=f.bc.get(i),_=s?"readwrite":"readwrite-primary",O.label=1;case 1:return O.trys.push([1,4,,5]),s?[3,3]:[4,f.persistence.runTransaction("Release target",_,function(V){return f.persistence.No.removeTarget(V,p)})];case 2:O.sent(),O.label=3;case 3:return[3,5];case 4:if(!ns(I=O.sent()))throw I;return Ae("LocalStore","Failed to update sequence numbers for target "+i+": "+I),[3,5];case 5:return f.bc=f.bc.remove(i),f.vc.delete(p.target),[2]}})})}function Lu(a,i,s){var f=ze(a),p=_n.min(),_=We();return f.persistence.runTransaction("Execute query","readonly",function(I){return(O=f,V=I,X=qr(i),ce=ze(O),Ee=ce.vc.get(X),void 0!==Ee?Rt.resolve(ce.bc.get(Ee)):ce.Ka.va(V,X)).next(function(O){if(O)return p=O.lastLimboFreeSnapshotVersion,f.Ka.Fa(I,O.targetId).next(function(V){_=V})}).next(function(){return f.Vc.Lr(I,i,s?p:_n.min(),s?_:We())}).next(function(O){return{documents:O,Fc:_}});var O,V,X,ce,Ee})}function Fu(a,i){var s=ze(a),f=ze(s.Ka),p=s.bc.get(i);return p?Promise.resolve(p.target):s.persistence.runTransaction("Get target data","readonly",function(_){return f.Ue(_,i).next(function(I){return I?I.target:null})})}function ju(a){var i=ze(a);return i.persistence.runTransaction("Get new document changes","readonly",function(s){return p=s,_=i.Sc,I=ze(i.Dc),O=oi(),V=Ii(_),X=bt(p),ce=IDBKeyRange.lowerBound(V,!0),X.rs({index:pr.readTimeIndex,range:ce},function(Ee,Ie){var Ue=ar(I.serializer,Ie);O=O.ot(Ue.key,Ue),V=Ie.readTime}).next(function(){return{xc:O,readTime:yi(V)}});var p,_,I,O,V,X,ce}).then(function(s){var f=s.xc;return i.Sc=s.readTime,f})}function Dc(a){return $.__awaiter(this,void 0,void 0,function(){var i;return $.__generator(this,function(s){return[2,(i=ze(a)).persistence.runTransaction("Synchronize last document change read time","readonly",function(f){return _=bt(f),I=_n.min(),_.rs({index:pr.readTimeIndex,reverse:!0},function(O,V,X){V.readTime&&(I=yi(V.readTime)),X.done()}).next(function(){return I});var _,I}).then(function(f){i.Sc=f})]})})}function js(a){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(i){if(a.code!==ge.FAILED_PRECONDITION||a.message!==h)throw a;return Ae("LocalStore","Unexpectedly lost primary lease"),[2]})})}var gs=function(){function a(){this.$c=new sr(Zi.kc),this.Mc=new sr(Zi.Oc)}return a.prototype.m=function(){return this.$c.m()},a.prototype.Da=function(i,s){var f=new Zi(i,s);this.$c=this.$c.add(f),this.Mc=this.Mc.add(f)},a.prototype.Lc=function(i,s){var f=this;i.forEach(function(p){return f.Da(p,s)})},a.prototype.Na=function(i,s){this.Bc(new Zi(i,s))},a.prototype.qc=function(i,s){var f=this;i.forEach(function(p){return f.Na(p,s)})},a.prototype.Uc=function(i){var s=this,f=new E(new rt([])),p=new Zi(f,i),_=new Zi(f,i+1),I=[];return this.Mc.Ft([p,_],function(O){s.Bc(O),I.push(O.key)}),I},a.prototype.Qc=function(){var i=this;this.$c.forEach(function(s){return i.Bc(s)})},a.prototype.Bc=function(i){this.$c=this.$c.delete(i),this.Mc=this.Mc.delete(i)},a.prototype.Wc=function(i){var s=new E(new rt([])),f=new Zi(s,i),p=new Zi(s,i+1),_=We();return this.Mc.Ft([f,p],function(I){_=_.add(I.key)}),_},a.prototype.Ho=function(i){var s=new Zi(i,0),f=this.$c.$t(s);return null!==f&&i.isEqual(f.key)},a}(),Zi=function(){function a(i,s){this.key=i,this.jc=s}return a.kc=function(i,s){return E.i(i.key,s.key)||Lt(i.jc,s.jc)},a.Oc=function(i,s){return Lt(i.jc,s.jc)||E.i(i.key,s.key)},a}(),aa=function(a,i){this.user=i,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+a},au=function(){function a(){this.Gc=null}return a.prototype.getToken=function(){return Promise.resolve(null)},a.prototype.zc=function(){},a.prototype.Hc=function(i){this.Gc=i,i(Br.UNAUTHENTICATED)},a.prototype.Yc=function(){this.Gc=null},a}(),Ff=function(){function a(i){var s=this;this.Jc=null,this.currentUser=Br.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){s.Zc++,s.currentUser=s.tu(),s.Xc=!0,s.Gc&&s.Gc(s.currentUser)},this.Zc=0,this.auth=i.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),i.get().then(function(f){s.auth=f,s.Jc&&s.auth.addAuthTokenListener(s.Jc)},function(){}))}return a.prototype.getToken=function(){var i=this,s=this.Zc,f=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(f).then(function(p){return i.Zc!==s?(Ae("FirebaseCredentialsProvider","getToken aborted due to token change."),i.getToken()):p?(it("string"==typeof p.accessToken),new aa(p.accessToken,i.currentUser)):null}):Promise.resolve(null)},a.prototype.zc=function(){this.forceRefresh=!0},a.prototype.Hc=function(i){this.Gc=i,this.Xc&&i(this.currentUser)},a.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},a.prototype.tu=function(){var i=this.auth&&this.auth.getUid();return it(null===i||"string"==typeof i),new Br(i)},a}(),jf=function(){function a(i,s){this.eu=i,this.nu=s,this.type="FirstParty",this.user=Br.ni}return Object.defineProperty(a.prototype,"Kc",{get:function(){var i={"X-Goog-AuthUser":this.nu},s=this.eu.auth.getAuthHeaderValueForFirstParty([]);return s&&(i.Authorization=s),i},enumerable:!1,configurable:!0}),a}(),Oa=function(){function a(i,s){this.eu=i,this.nu=s}return a.prototype.getToken=function(){return Promise.resolve(new jf(this.eu,this.nu))},a.prototype.Hc=function(i){i(Br.ni)},a.prototype.Yc=function(){},a.prototype.zc=function(){},a}(),Pa=function(){function a(i,s,f,p,_,I){this.fn=i,this.su=f,this.iu=p,this.ru=_,this.listener=I,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new Yi(i,s)}return a.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},a.prototype.uu=function(){return 2===this.state},a.prototype.start=function(){3!==this.state?this.auth():this.hu()},a.prototype.stop=function(){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(i){switch(i.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},a.prototype.lu=function(){this.state=0,this.ys.reset()},a.prototype._u=function(){var i=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,function(){return i.fu()}))},a.prototype.du=function(i){this.wu(),this.stream.send(i)},a.prototype.fu=function(){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(i){return this.uu()?[2,this.close(0)]:[2]})})},a.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},a.prototype.close=function(i,s){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(f){switch(f.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==i?this.ys.reset():s&&s.code===ge.RESOURCE_EXHAUSTED?(mt(s.toString()),mt("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):s&&s.code===ge.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=i,[4,this.listener.Tu(s)];case 1:return f.sent(),[2]}})})},a.prototype.mu=function(){},a.prototype.auth=function(){var i=this;this.state=1;var s=this.Eu(this.ou),f=this.ou;this.ru.getToken().then(function(p){i.ou===f&&i.Iu(p)},function(p){s(function(){var _=new te(ge.UNKNOWN,"Fetching auth token failed: "+p.message);return i.Au(_)})})},a.prototype.Iu=function(i){var s=this,f=this.Eu(this.ou);this.stream=this.Ru(i),this.stream.gu(function(){f(function(){return s.state=2,s.listener.gu()})}),this.stream.Tu(function(p){f(function(){return s.Au(p)})}),this.stream.onMessage(function(p){f(function(){return s.onMessage(p)})})},a.prototype.hu=function(){var i=this;this.state=4,this.ys.gn(function(){return $.__awaiter(i,void 0,void 0,function(){return $.__generator(this,function(s){return this.state=0,this.start(),[2]})})})},a.prototype.Au=function(i){return Ae("PersistentStream","close with error: "+i),this.stream=null,this.close(3,i)},a.prototype.Eu=function(i){var s=this;return function(f){s.fn.ws(function(){return s.ou===i?f():(Ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},a}(),rl=function(a){function i(s,f,p,_,I){var O=this;return(O=a.call(this,s,"listen_stream_connection_backoff","listen_stream_idle",f,p,I)||this).serializer=_,O}return $.__extends(i,a),i.prototype.Ru=function(s){return this.iu.Pu("Listen",s)},i.prototype.onMessage=function(s){this.ys.reset();var f=function(_,I){var O,Bs;if("targetChange"in I){var V="NO_CHANGE"===(Bs=I.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Bs?1:"REMOVE"===Bs?2:"CURRENT"===Bs?3:"RESET"===Bs?4:Re(),X=I.targetChange.targetIds||[],ce=function(Bs,$a){return Bs.Qe?(it(void 0===$a||"string"==typeof $a),Vt.fromBase64String($a||"")):(it(void 0===$a||$a instanceof Uint8Array),Vt.fromUint8Array($a||new Uint8Array))}(_,I.targetChange.resumeToken),Ee=I.targetChange.cause,Ie=Ee&&function(Bs){var $a=void 0===Bs.code?ge.UNKNOWN:er(Bs.code);return new te($a,Bs.message||"")}(Ee);O=new zr(V,X,ce,Ie||null)}else if("documentChange"in I){var Ue=I.documentChange,Je=Sn(_,Ue.document.name),ut=po(Ue.document.updateTime),Jt=new Zo({mapValue:{fields:Ue.document.fields}}),en=new fr(Je,ut,Jt,{});O=new jn(Ue.targetIds||[],Ue.removedTargetIds||[],en.key,en)}else if("documentDelete"in I){var mr=I.documentDelete,ri=Sn(_,mr.document),wi=mr.readTime?po(mr.readTime):_n.min(),ya=new Er(ri,wi);O=new jn([],mr.removedTargetIds||[],ya.key,ya)}else if("documentRemove"in I){var ma=I.documentRemove,za=Sn(_,ma.document);O=new jn([],ma.removedTargetIds||[],za,null)}else{if(!("filter"in I))return Re();var Lc=I.filter,nf=new Qn(Lc.count||0);O=new Bn(Lc.targetId,nf)}return O}(this.serializer,s),p=function(_){if(!("targetChange"in _))return _n.min();var I=_.targetChange;return I.targetIds&&I.targetIds.length?_n.min():I.readTime?po(I.readTime):_n.min()}(s);return this.listener.yu(f,p)},i.prototype.Vu=function(s){var _,I,O,V,f={};f.database=Ir(this.serializer),f.addTarget=(_=this.serializer,(O=Pt(V=(I=s).target)?{documents:kn(_,V)}:{query:Ws(_,V)}).targetId=I.targetId,I.resumeToken.O()>0&&(O.resumeToken=ws(_,I.resumeToken)),O);var p=function(_,I){var O=function(V,X){switch(X){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Re()}}(0,I.et);return null==O?null:{"goog-listen-tags":O}}(0,s);p&&(f.labels=p),this.du(f)},i.prototype.pu=function(s){var f={};f.database=Ir(this.serializer),f.removeTarget=s,this.du(f)},i}(Pa),Vu=function(a){function i(s,f,p,_,I){var O=this;return(O=a.call(this,s,"write_stream_connection_backoff","write_stream_idle",f,p,I)||this).serializer=_,O.bu=!1,O}return $.__extends(i,a),Object.defineProperty(i.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,a.prototype.start.call(this)},i.prototype.mu=function(){this.bu&&this.Su([])},i.prototype.Ru=function(s){return this.iu.Pu("Write",s)},i.prototype.onMessage=function(s){if(it(!!s.streamToken),this.lastStreamToken=s.streamToken,this.bu){this.ys.reset();var f=(I=s.commitTime,(_=s.writeResults)&&_.length>0?(it(void 0!==I),_.map(function(O){return function(V,X){var ce=po(V.updateTime?V.updateTime:X);ce.isEqual(_n.min())&&(ce=po(X));var Ee=null;return V.transformResults&&V.transformResults.length>0&&(Ee=V.transformResults),new xt(ce,Ee)}(O,I)})):[]),p=po(s.commitTime);return this.listener.Du(p,f)}var _,I;return it(!s.writeResults||0===s.writeResults.length),this.bu=!0,this.listener.Cu()},i.prototype.Nu=function(){var s={};s.database=Ir(this.serializer),this.du(s)},i.prototype.Su=function(s){var f=this,p={streamToken:this.lastStreamToken,writes:s.map(function(_){return Fr(f.serializer,_)})};this.du(p)},i}(Pa),Sc=function(a){function i(s,f,p){var _=this;return(_=a.call(this)||this).credentials=s,_.iu=f,_.serializer=p,_.Fu=!1,_}return $.__extends(i,a),i.prototype.xu=function(){if(this.Fu)throw new te(ge.FAILED_PRECONDITION,"The client has already been terminated.")},i.prototype.$u=function(s,f,p){var _=this;return this.xu(),this.credentials.getToken().then(function(I){return _.iu.$u(s,f,p,I)}).catch(function(I){throw I.code===ge.UNAUTHENTICATED&&_.credentials.zc(),I})},i.prototype.ku=function(s,f,p){var _=this;return this.xu(),this.credentials.getToken().then(function(I){return _.iu.ku(s,f,p,I)}).catch(function(I){throw I.code===ge.UNAUTHENTICATED&&_.credentials.zc(),I})},i.prototype.terminate=function(){this.Fu=!1},i}(function(){}),Uu=function(){function a(i,s){this.cs=i,this.di=s,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return a.prototype.Bu=function(){var i=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,function(){return i.Ou=null,i.Uu("Backend didn't respond within 10 seconds."),i.qu("Offline"),Promise.resolve()}))},a.prototype.Qu=function(i){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+i.toString()),this.qu("Offline")))},a.prototype.set=function(i){this.Wu(),this.Mu=0,"Online"===i&&(this.Lu=!1),this.qu(i)},a.prototype.qu=function(i){i!==this.state&&(this.state=i,this.di(i))},a.prototype.Uu=function(i){var s="Could not reach Cloud Firestore backend. "+i+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(mt(s),this.Lu=!1):Ae("OnlineStateTracker",s)},a.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},a}(),Bu=function(a,i,s,f,p){var _=this;this.ju=a,this.Ku=i,this.cs=s,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=p,this.Xu.Zu(function(I){s.ws(function(){return $.__awaiter(_,void 0,void 0,function(){return $.__generator(this,function(O){switch(O.label){case 0:return bo(this)?(Ae("RemoteStore","Restarting streams for network reachability change."),[4,function(V){return $.__awaiter(this,void 0,void 0,function(){var X;return $.__generator(this,function(ce){switch(ce.label){case 0:return(X=ze(V)).Yu.add(4),[4,Ro(X)];case 1:return ce.sent(),X.th.set("Unknown"),X.Yu.delete(4),[4,Hu(X)];case 2:return ce.sent(),[2]}})})}(this)]):[3,2];case 1:O.sent(),O.label=2;case 2:return[2]}})})})}),this.th=new Uu(s,f)};function Hu(a){return $.__awaiter(this,void 0,void 0,function(){var i,s;return $.__generator(this,function(f){switch(f.label){case 0:if(!bo(a))return[3,4];i=0,s=a.Ju,f.label=1;case 1:return i<s.length?[4,(0,s[i])(!0)]:[3,4];case 2:f.sent(),f.label=3;case 3:return i++,[3,1];case 4:return[2]}})})}function Ro(a){return $.__awaiter(this,void 0,void 0,function(){var i,s;return $.__generator(this,function(f){switch(f.label){case 0:i=0,s=a.Ju,f.label=1;case 1:return i<s.length?[4,(0,s[i])(!1)]:[3,4];case 2:f.sent(),f.label=3;case 3:return i++,[3,1];case 4:return[2]}})})}function uu(a){return $.__awaiter(this,void 0,void 0,function(){var i;return $.__generator(this,function(s){switch(s.label){case 0:return i=ze(a),Ae("RemoteStore","RemoteStore shutting down."),i.Yu.add(5),[4,Ro(i)];case 1:return s.sent(),i.Xu.Di(),i.th.set("Unknown"),[2]}})})}function Cc(a,i){var s=ze(a);s.Hu.has(i.targetId)||(s.Hu.set(i.targetId,i),Gu(s)?os(s):La(s).uu()&&ua(s,i))}function Cs(a,i){var s=ze(a),f=La(s);s.Hu.delete(i),f.uu()&&is(s,i),0===s.Hu.size&&(f.uu()?f._u():bo(s)&&s.th.set("Unknown"))}function ua(a,i){a.eh.Ie(i.targetId),La(a).Vu(i)}function is(a,i){a.eh.Ie(i),La(a).pu(i)}function os(a){a.eh=new fe({qe:function(i){return a.Gu.qe(i)},Ue:function(i){return a.Hu.get(i)||null}}),La(a).start(),a.th.Bu()}function Gu(a){return bo(a)&&!La(a).cu()&&a.Hu.size>0}function bo(a){return 0===ze(a).Yu.size}function Vf(a){a.eh=void 0}function Ma(a){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(i){return a.Hu.forEach(function(s,f){ua(a,s)}),[2]})})}function Wl(a,i){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(s){return Vf(a),Gu(a)?(a.th.Qu(i),os(a)):a.th.set("Unknown"),[2]})})}function qu(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p,_;return $.__generator(this,function(I){switch(I.label){case 0:if(a.th.set("Online"),!(i instanceof zr&&2===i.state&&i.cause))return[3,6];I.label=1;case 1:return I.trys.push([1,3,,5]),[4,function(O,V){return $.__awaiter(this,void 0,void 0,function(){var X,ce,Ee,Ie;return $.__generator(this,function(Ue){switch(Ue.label){case 0:X=V.cause,ce=0,Ee=V.targetIds,Ue.label=1;case 1:return ce<Ee.length?O.Hu.has(Ie=Ee[ce])?[4,O.Gu.nh(Ie,X)]:[3,3]:[3,5];case 2:Ue.sent(),O.Hu.delete(Ie),O.eh.removeTarget(Ie),Ue.label=3;case 3:Ue.label=4;case 4:return ce++,[3,1];case 5:return[2]}})})}(a,i)];case 2:return I.sent(),[3,5];case 3:return f=I.sent(),Ae("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),f),[4,Ac(a,f)];case 4:return I.sent(),[3,5];case 5:return[3,13];case 6:if(i instanceof jn?a.eh.be(i):i instanceof Bn?a.eh.$e(i):a.eh.De(i),s.isEqual(_n.min()))return[3,13];I.label=7;case 7:return I.trys.push([7,11,,13]),[4,Tc(a.ju)];case 8:return p=I.sent(),s.L(p)>=0?[4,(O=a,V=s,X=O.eh.Oe(V),X.zt.forEach(function(ce,Ee){if(ce.resumeToken.O()>0){var Ie=O.Hu.get(Ee);Ie&&O.Hu.set(Ee,Ie.it(ce.resumeToken,V))}}),X.Ht.forEach(function(ce){var Ee=O.Hu.get(ce);if(Ee){O.Hu.set(ce,Ee.it(Vt.B,Ee.nt)),is(O,ce);var Ie=new dn(Ee.target,ce,1,Ee.sequenceNumber);ua(O,Ie)}}),O.Gu.sh(X))]:[3,10];case 9:I.sent(),I.label=10;case 10:return[3,13];case 11:return Ae("RemoteStore","Failed to raise snapshot:",_=I.sent()),[4,Ac(a,_)];case 12:return I.sent(),[3,13];case 13:return[2]}var O,V,X})})}function Ac(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f=this;return $.__generator(this,function(p){switch(p.label){case 0:if(!ns(i))throw i;return a.Yu.add(1),[4,Ro(a)];case 1:return p.sent(),a.th.set("Offline"),s||(s=function(){return Tc(a.ju)}),a.cs.Cs(function(){return $.__awaiter(f,void 0,void 0,function(){return $.__generator(this,function(_){switch(_.label){case 0:return Ae("RemoteStore","Retrying IndexedDB access"),[4,s()];case 1:return _.sent(),a.Yu.delete(1),[4,Hu(a)];case 2:return _.sent(),[2]}})})}),[2]}})})}function vs(a,i){return i().catch(function(s){return Ac(a,s,i)})}function xa(a){return $.__awaiter(this,void 0,void 0,function(){var i,s,f,p,_;return $.__generator(this,function(I){switch(I.label){case 0:i=ze(a),s=Ys(i),f=i.zu.length>0?i.zu[i.zu.length-1].batchId:-1,I.label=1;case 1:if(!(bo(O=i)&&O.zu.length<10))return[3,7];I.label=2;case 2:return I.trys.push([2,4,,6]),[4,Lf(i.ju,f)];case 3:return null===(p=I.sent())?(0===i.zu.length&&s._u(),[3,7]):(f=p.batchId,function(O,V){O.zu.push(V);var X=Ys(O);X.uu()&&X.vu&&X.Su(V.mutations)}(i,p),[3,6]);case 4:return _=I.sent(),[4,Ac(i,_)];case 5:return I.sent(),[3,6];case 6:return[3,1];case 7:return Ho(i)&&Wu(i),[2]}var O})})}function Ho(a){return bo(a)&&!Ys(a).cu()&&a.zu.length>0}function Wu(a){Ys(a).start()}function zu(a){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(i){return Ys(a).Nu(),[2]})})}function ka(a){return $.__awaiter(this,void 0,void 0,function(){var i,s,f;return $.__generator(this,function(_){for(i=Ys(a),s=0,f=a.zu;s<f.length;s++)i.Su(f[s].mutations);return[2]})})}function Uf(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p;return $.__generator(this,function(_){switch(_.label){case 0:return f=a.zu.shift(),p=v.from(f,i,s),[4,vs(a,function(){return a.Gu.ih(p)})];case 1:return _.sent(),[4,xa(a)];case 2:return _.sent(),[2]}})})}function $u(a,i){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(s){switch(s.label){case 0:return i&&Ys(a).vu?[4,function(f,p){return $.__awaiter(this,void 0,void 0,function(){var _,I;return $.__generator(this,function(O){switch(O.label){case 0:return On(I=p.code)&&I!==ge.ABORTED?(_=f.zu.shift(),Ys(f).lu(),[4,vs(f,function(){return f.Gu.rh(_.batchId,p)})]):[3,3];case 1:return O.sent(),[4,xa(f)];case 2:O.sent(),O.label=3;case 3:return[2]}})})}(a,i)]:[3,2];case 1:s.sent(),s.label=2;case 2:return Ho(a)&&Wu(a),[2]}})})}function As(a,i){return $.__awaiter(this,void 0,void 0,function(){var s;return $.__generator(this,function(p){switch(p.label){case 0:return s=ze(a),i?(s.Yu.delete(2),[4,Hu(s)]):[3,2];case 1:return p.sent(),[3,5];case 2:return i?[3,4]:(s.Yu.add(2),[4,Ro(s)]);case 3:p.sent(),s.th.set("Unknown"),p.label=4;case 4:p.label=5;case 5:return[2]}})})}function La(a){var s,f,p,_,i=this;return a.oh||(a.oh=(s=a.Ku,f=a.cs,p={gu:Ma.bind(null,a),Tu:Wl.bind(null,a),yu:qu.bind(null,a)},(_=ze(s)).xu(),new rl(f,_.iu,_.credentials,_.serializer,p)),a.Ju.push(function(s){return $.__awaiter(i,void 0,void 0,function(){return $.__generator(this,function(f){switch(f.label){case 0:return s?(a.oh.lu(),Gu(a)?os(a):a.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,a.oh.stop()];case 2:f.sent(),Vf(a),f.label=3;case 3:return[2]}})})})),a.oh}function Ys(a){var s,f,p,_,i=this;return a.ah||(a.ah=(s=a.Ku,f=a.cs,p={gu:zu.bind(null,a),Tu:$u.bind(null,a),Cu:ka.bind(null,a),Du:Uf.bind(null,a)},(_=ze(s)).xu(),new Vu(f,_.iu,_.credentials,_.serializer,p)),a.Ju.push(function(s){return $.__awaiter(i,void 0,void 0,function(){return $.__generator(this,function(f){switch(f.label){case 0:return s?(a.ah.lu(),[4,xa(a)]):[3,2];case 1:return f.sent(),[3,4];case 2:return[4,a.ah.stop()];case 3:f.sent(),a.zu.length>0&&(Ae("RemoteStore","Stopping write stream with "+a.zu.length+" pending writes"),a.zu=[]),f.label=4;case 4:return[2]}})})})),a.ah}var il=function(a){this.key=a},Go=function(a){this.key=a},cu=function(){function a(i,s){this.query=i,this.uh=s,this.hh=null,this.te=!1,this.lh=We(),this.Wt=We(),this._h=Ur(i),this.fh=new Ut(this._h)}return Object.defineProperty(a.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),a.prototype.wh=function(i,s){var f=this,p=s?s.mh:new an,_=s?s.fh:this.fh,I=s?s.Wt:this.Wt,O=_,V=!1,X=Ci(this.query)&&_.size===this.query.limit?_.last():null,ce=ai(this.query)&&_.size===this.query.limit?_.first():null;if(i.ht(function(Ie,Ue){var Je=_.get(Ie),ut=Ue instanceof fr?Ue:null;ut&&(ut=so(f.query,ut)?ut:null);var Jt=!!Je&&f.Wt.has(Je.key),en=!!ut&&(ut.Je||f.Wt.has(ut.key)&&ut.hasCommittedMutations),Tn=!1;Je&&ut?Je.data().isEqual(ut.data())?Jt!==en&&(p.track({type:3,doc:ut}),Tn=!0):f.Th(Je,ut)||(p.track({type:2,doc:ut}),Tn=!0,(X&&f._h(ut,X)>0||ce&&f._h(ut,ce)<0)&&(V=!0)):!Je&&ut?(p.track({type:0,doc:ut}),Tn=!0):Je&&!ut&&(p.track({type:1,doc:Je}),Tn=!0,(X||ce)&&(V=!0)),Tn&&(ut?(O=O.add(ut),I=en?I.add(Ie):I.delete(Ie)):(O=O.delete(Ie),I=I.delete(Ie)))}),Ci(this.query)||ai(this.query))for(;O.size>this.query.limit;){var Ee=Ci(this.query)?O.last():O.first();O=O.delete(Ee.key),I=I.delete(Ee.key),p.track({type:1,doc:Ee})}return{fh:O,mh:p,Eh:V,Wt:I}},a.prototype.Th=function(i,s){return i.Je&&s.hasCommittedMutations&&!s.Je},a.prototype.yr=function(i,s,f){var p=this,_=this.fh;this.fh=i.fh,this.Wt=i.Wt;var I=i.mh.Ut();I.sort(function(ce,Ee){return Ue=Ee.type,(Je=function(ut){switch(ut){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re()}})(ce.type)-Je(Ue)||p._h(ce.doc,Ee.doc);var Ue,Je}),this.Ih(f);var O=s?this.Ah():[],V=0===this.lh.size&&this.te?1:0,X=V!==this.hh;return this.hh=V,0!==I.length||X?{snapshot:new wt(this.query,i.fh,_,I,i.Wt,0===V,X,!1),Rh:O}:{Rh:O}},a.prototype.Qs=function(i){return this.te&&"Offline"===i?(this.te=!1,this.yr({fh:this.fh,mh:new an,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},a.prototype.gh=function(i){return!this.uh.has(i)&&!!this.fh.has(i)&&!this.fh.get(i).Je},a.prototype.Ih=function(i){var s=this;i&&(i.ee.forEach(function(f){return s.uh=s.uh.add(f)}),i.ne.forEach(function(f){}),i.se.forEach(function(f){return s.uh=s.uh.delete(f)}),this.te=i.te)},a.prototype.Ah=function(){var i=this;if(!this.te)return[];var s=this.lh;this.lh=We(),this.fh.forEach(function(p){i.gh(p.key)&&(i.lh=i.lh.add(p.key))});var f=[];return s.forEach(function(p){i.lh.has(p)||f.push(new Go(p))}),this.lh.forEach(function(p){s.has(p)||f.push(new il(p))}),f},a.prototype.Ph=function(i){this.uh=i.Fc,this.lh=We();var s=this.wh(i.documents);return this.yr(s,!0)},a.prototype.yh=function(){return wt.Gt(this.query,this.fh,this.Wt,0===this.hh)},a}(),od=function(a,i,s){this.query=a,this.targetId=i,this.view=s},ol=function(a){this.key=a,this.Vh=!1},Bf=function(){function a(i,s,f,p,_,I){this.ju=i,this.ph=s,this.bh=f,this.Sh=p,this.currentUser=_,this.Dh=I,this.Ch={},this.Nh=new or(function(O){return Do(O)},vi),this.Fh=new Map,this.xh=[],this.$h=new Cn(E.i),this.kh=new Map,this.Mh=new gs,this.Oh={},this.Lh=new Map,this.Bh=ku.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(a.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),a}();function Fa(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,p,_,I,O;return $.__generator(this,function(V){switch(V.label){case 0:return s=Nc(a),(_=s.Nh.get(i))?(s.Sh.Oi(_.targetId),p=_.view.yh(),[3,4]):[3,1];case 1:return[4,su(s.ju,qr(i))];case 2:return I=V.sent(),O=s.Sh.Oi(I.targetId),[4,lu(s,i,I.targetId,"current"===O)];case 3:p=V.sent(),s.Uh&&Cc(s.ph,I),V.label=4;case 4:return[2,p]}})})}function lu(a,i,s,f){return $.__awaiter(this,void 0,void 0,function(){var p,_,I,O,V,X;return $.__generator(this,function(ce){switch(ce.label){case 0:return a.Qh=function(Ee,Ie,Ue){return function(Je,ut,Jt,en){return $.__awaiter(this,void 0,void 0,function(){var Tn,Gn,mr;return $.__generator(this,function(ri){switch(ri.label){case 0:return(Tn=ut.view.wh(Jt)).Eh?[4,Lu(Je.ju,ut.query,!1).then(function(wi){return ut.view.wh(wi.documents,Tn)})]:[3,2];case 1:Tn=ri.sent(),ri.label=2;case 2:return Gn=en&&en.zt.get(ut.targetId),mr=ut.view.yr(Tn,Je.Uh,Gn),[2,(Hr(Je,ut.targetId,mr.Rh),mr.snapshot)]}})})}(a,Ee,Ie,Ue)},[4,Lu(a.ju,i,!0)];case 1:return p=ce.sent(),_=new cu(i,p.Fc),I=_.wh(p.documents),O=tr.Zt(s,f&&"Offline"!==a.onlineState),V=_.yr(I,a.Uh,O),Hr(a,s,V.Rh),X=new od(i,s,_),[2,(a.Nh.set(i,X),a.Fh.has(s)?a.Fh.get(s).push(i):a.Fh.set(s,[i]),V.snapshot)]}})})}function Ku(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f,p;return $.__generator(this,function(_){switch(_.label){case 0:return s=ze(a),f=s.Nh.get(i),(p=s.Fh.get(f.targetId)).length>1?[2,(s.Fh.set(f.targetId,p.filter(function(I){return!vi(I,i)})),void s.Nh.delete(i))]:s.Uh?(s.Sh.Bi(f.targetId),s.Sh.Fi(f.targetId)?[3,2]:[4,Ra(s.ju,f.targetId,!1).then(function(){s.Sh.Ui(f.targetId),Cs(s.ph,f.targetId),fu(s,f.targetId)}).catch(js)]):[3,3];case 1:_.sent(),_.label=2;case 2:return[3,5];case 3:return fu(s,f.targetId),[4,Ra(s.ju,f.targetId,!0)];case 4:_.sent(),_.label=5;case 5:return[2]}})})}function ja(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f;return $.__generator(this,function(p){switch(p.label){case 0:s=ze(a),p.label=1;case 1:return p.trys.push([1,4,,6]),[4,kf(s.ju,i)];case 2:return f=p.sent(),i.zt.forEach(function(_,I){var O=s.kh.get(I);O&&(it(_.ee.size+_.ne.size+_.se.size<=1),_.ee.size>0?O.Vh=!0:_.ne.size>0?it(O.Vh):_.se.size>0&&(it(O.Vh),O.Vh=!1))}),[4,hu(s,f,i)];case 3:return p.sent(),[3,6];case 4:return[4,js(p.sent())];case 5:return p.sent(),[3,6];case 6:return[2]}})})}function Va(a,i,s){var f=ze(a);if(f.Uh&&0===s||!f.Uh&&1===s){var p=[];f.Nh.forEach(function(_,I){var O=I.view.Qs(i);O.snapshot&&p.push(O.snapshot)}),function(_,I){var O=ze(_);O.onlineState=I;var V=!1;O.Bs.forEach(function(X,ce){for(var Ee=0,Ie=ce.listeners;Ee<Ie.length;Ee++)Ie[Ee].Qs(I)&&(V=!0)}),V&&Ks(O)}(f.bh,i),p.length&&f.Ch.yu(p),f.onlineState=i,f.Uh&&f.Sh.Ki(i)}}function Ua(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p,_,I,O,V;return $.__generator(this,function(X){switch(X.label){case 0:return(f=ze(a)).Sh.Qi(i,"rejected",s),p=f.kh.get(i),(_=p&&p.key)?(I=(I=new Cn(E.i)).ot(_,new Er(_,_n.min())),O=We().add(_),V=new rn(_n.min(),new Map,new sr(Lt),I,O),[4,ja(f,V)]):[3,2];case 1:return X.sent(),f.$h=f.$h.remove(_),f.kh.delete(i),Yu(f),[3,4];case 2:return[4,Ra(f.ju,i,!1).then(function(){return fu(f,i,s)}).catch(js)];case 3:X.sent(),X.label=4;case 4:return[2]}})})}function ca(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f,p;return $.__generator(this,function(_){switch(_.label){case 0:s=ze(a),f=i.batch.batchId,_.label=1;case 1:return _.trys.push([1,4,,6]),[4,di(s.ju,i)];case 2:return p=_.sent(),la(s,f,null),Ba(s,f),s.Sh.ki(f,"acknowledged"),[4,hu(s,p)];case 3:return _.sent(),[3,6];case 4:return[4,js(_.sent())];case 5:return _.sent(),[3,6];case 6:return[2]}})})}function Qu(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p;return $.__generator(this,function(_){switch(_.label){case 0:f=ze(a),_.label=1;case 1:return _.trys.push([1,4,,6]),[4,(I=f.ju,O=i,V=ze(I),V.persistence.runTransaction("Reject batch","readwrite-primary",function(X){var ce;return V.Sr.Oo(X,O).next(function(Ee){return it(null!==Ee),ce=Ee.keys(),V.Sr.Wo(X,Ee)}).next(function(){return V.Sr.zo(X)}).next(function(){return V.Cc.kr(X,ce)})}))];case 2:return p=_.sent(),la(f,i,s),Ba(f,i),f.Sh.ki(i,"rejected",s),[4,hu(f,p)];case 3:return _.sent(),[3,6];case 4:return[4,js(_.sent())];case 5:return _.sent(),[3,6];case 6:return[2]}var I,O,V})})}function Ba(a,i){(a.Lh.get(i)||[]).forEach(function(s){s.resolve()}),a.Lh.delete(i)}function la(a,i,s){var f=ze(a),p=f.Oh[f.currentUser.ti()];if(p){var _=p.get(i);_&&(s?_.reject(s):_.resolve(),p=p.remove(i)),f.Oh[f.currentUser.ti()]=p}}function fu(a,i,s){void 0===s&&(s=null),a.Sh.Bi(i);for(var f=0,p=a.Fh.get(i);f<p.length;f++){var _=p[f];a.Nh.delete(_),s&&a.Ch.Wh(_,s)}a.Fh.delete(i),a.Uh&&a.Mh.Uc(i).forEach(function(I){a.Mh.Ho(I)||sl(a,I)})}function sl(a,i){var s=a.$h.get(i);null!==s&&(Cs(a.ph,s),a.$h=a.$h.remove(i),a.kh.delete(s),Yu(a))}function Hr(a,i,s){for(var f=0,p=s;f<p.length;f++){var _=p[f];_ instanceof il?(a.Mh.Da(_.key,i),Hf(a,_)):_ instanceof Go?(Ae("SyncEngine","Document no longer in limbo: "+_.key),a.Mh.Na(_.key,i),a.Mh.Ho(_.key)||sl(a,_.key)):Re()}}function Hf(a,i){var s=i.key;a.$h.get(s)||(Ae("SyncEngine","New document in limbo: "+s),a.xh.push(s),Yu(a))}function Yu(a){for(;a.xh.length>0&&a.$h.size<a.Dh;){var i=a.xh.shift(),s=a.Bh.next();a.kh.set(s,new ol(i)),a.$h=a.$h.ot(i,s),Cc(a.ph,new dn(qr(Mi(i.path)),s,2,fi.ai))}}function hu(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p,_,I;return $.__generator(this,function(O){switch(O.label){case 0:return f=ze(a),p=[],_=[],I=[],f.Nh.m()?[3,3]:(f.Nh.forEach(function(V,X){I.push(f.Qh(X,i,s).then(function(ce){if(ce){f.Uh&&f.Sh.Qi(X.targetId,ce.fromCache?"not-current":"current"),p.push(ce);var Ee=R.zr(X.targetId,ce);_.push(Ee)}}))}),[4,Promise.all(I)]);case 1:return O.sent(),f.Ch.yu(p),[4,function(V,X){return $.__awaiter(this,void 0,void 0,function(){var ce,Ee,Ie,Ue,Je,ut,Jt,Tn;return $.__generator(this,function(Gn){switch(Gn.label){case 0:ce=ze(V),Gn.label=1;case 1:return Gn.trys.push([1,3,,4]),[4,ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(mr){return Rt.forEach(X,function(ri){return Rt.forEach(ri.Kr,function(wi){return ce.persistence.No.Da(mr,ri.targetId,wi)}).next(function(){return Rt.forEach(ri.Gr,function(wi){return ce.persistence.No.Na(mr,ri.targetId,wi)})})})})];case 2:return Gn.sent(),[3,4];case 3:if(!ns(Ee=Gn.sent()))throw Ee;return Ae("LocalStore","Failed to update sequence numbers: "+Ee),[3,4];case 4:for(Ie=0,Ue=X;Ie<Ue.length;Ie++)ut=(Je=Ue[Ie]).targetId,Je.fromCache||(Jt=ce.bc.get(ut),Tn=Jt.rt(Jt.nt),ce.bc=ce.bc.ot(ut,Tn));return[2]}})})}(f.ju,_)];case 2:O.sent(),O.label=3;case 3:return[2]}})})}function Gf(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f;return $.__generator(this,function(p){switch(p.label){case 0:return(s=ze(a)).currentUser.isEqual(i)?[3,3]:(Ae("SyncEngine","User change. New user:",i.ti()),[4,function(_,I){return $.__awaiter(this,void 0,void 0,function(){var O,V,X,ce;return $.__generator(this,function(Ee){switch(Ee.label){case 0:return O=ze(_),V=O.Sr,X=O.Cc,[4,O.persistence.runTransaction("Handle user change","readonly",function(Ie){var Ue;return O.Sr.Uo(Ie).next(function(Je){return Ue=Je,V=O.persistence.mc(I),X=new S(O.Dc,V,O.persistence.Ic()),V.Uo(Ie)}).next(function(Je){for(var ut=[],Jt=[],en=We(),Tn=0,Gn=Ue;Tn<Gn.length;Tn++){var mr=Gn[Tn];ut.push(mr.batchId);for(var ri=0,wi=mr.mutations;ri<wi.length;ri++)en=en.add(wi[ri].key)}for(var qn=0,ma=Je;qn<ma.length;qn++){var za=ma[qn];Jt.push(za.batchId);for(var vl=0,Lc=za.mutations;vl<Lc.length;vl++)en=en.add(Lc[vl].key)}return X.kr(Ie,en).next(function(nf){return{jh:nf,Kh:ut,Gh:Jt}})})})];case 1:return ce=Ee.sent(),[2,(O.Sr=V,O.Cc=X,O.Vc.Nc(O.Cc),ce)]}})})}(s.ju,i)]);case 1:return f=p.sent(),s.currentUser=i,(_=s).Lh.forEach(function(O){O.forEach(function(V){V.reject(new te(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),_.Lh.clear(),s.Sh.ji(i,f.Kh,f.Gh),[4,hu(s,f.jh)];case 2:p.sent(),p.label=3;case 3:return[2]}var _})})}function Lp(a,i){var s=ze(a),f=s.kh.get(i);if(f&&f.Vh)return We().add(f.key);var p=We(),_=s.Fh.get(i);if(!_)return p;for(var I=0,O=_;I<O.length;I++){var X=s.Nh.get(O[I]);p=p.kt(X.view.dh)}return p}function Fp(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f,p;return $.__generator(this,function(_){switch(_.label){case 0:return[4,Lu((s=ze(a)).ju,i.query,!0)];case 1:return f=_.sent(),p=i.view.Ph(f),[2,(s.Uh&&Hr(s,i.targetId,p.Rh),p)]}})})}function sd(a,i,s,f){return $.__awaiter(this,void 0,void 0,function(){var p,_;return $.__generator(this,function(I){switch(I.label){case 0:return[4,(O=(p=ze(a)).ju,V=i,X=ze(O),ce=ze(X.Sr),X.persistence.runTransaction("Lookup mutation documents","readonly",function(Ee){return ce.Lo(Ee,V).next(function(Ie){return Ie?X.Cc.kr(Ee,Ie):Rt.resolve(null)})}))];case 1:return null===(_=I.sent())?[3,6]:"pending"!==s?[3,3]:[4,xa(p.ph)];case 2:return I.sent(),[3,4];case 3:"acknowledged"===s||"rejected"===s?(la(p,i,f||null),Ba(p,i),function(O,V){ze(ze(O).Sr).Ko(V)}(p.ju,i)):Re(),I.label=4;case 4:return[4,hu(p,_)];case 5:return I.sent(),[3,7];case 6:Ae("SyncEngine","Cannot apply mutation batch with id: "+i),I.label=7;case 7:return[2]}var O,V,X,ce})})}function du(a,i){return $.__awaiter(this,void 0,void 0,function(){var s,f,p,_,I,V,X;return $.__generator(this,function(ce){switch(ce.label){case 0:return Nc(s=ze(a)),qo(s),!0!==i||!0===s.qh?[3,3]:(f=s.Sh.Ci(),[4,al(s,f.A())]);case 1:return p=ce.sent(),s.qh=!0,[4,As(s.ph,!0)];case 2:for(ce.sent(),_=0,I=p;_<I.length;_++)Cc(s.ph,I[_]);return[3,7];case 3:return!1!==i||!1===s.qh?[3,7]:(V=[],X=Promise.resolve(),s.Fh.forEach(function(Ee,Ie){s.Sh.qi(Ie)?V.push(Ie):X=X.then(function(){return fu(s,Ie),Ra(s.ju,Ie,!0)}),Cs(s.ph,Ie)}),[4,X]);case 4:return ce.sent(),[4,al(s,V)];case 5:return ce.sent(),(Ie=ze(s)).kh.forEach(function(Ue,Je){Cs(Ie.ph,Je)}),Ie.Mh.Qc(),Ie.kh=new Map,Ie.$h=new Cn(E.i),s.qh=!1,[4,As(s.ph,!1)];case 6:ce.sent(),ce.label=7;case 7:return[2]}var Ie})})}function al(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p,_,I,O,V,X,ce,Ee,Ie,Je,ut,Jt;return $.__generator(this,function(en){switch(en.label){case 0:f=ze(a),p=[],_=[],I=0,O=i,en.label=1;case 1:return I<O.length?(X=void 0,(ce=f.Fh.get(V=O[I]))&&0!==ce.length?[4,su(f.ju,qr(ce[0]))]:[3,7]):[3,13];case 2:X=en.sent(),Ee=0,Ie=ce,en.label=3;case 3:return Ee<Ie.length?(Je=f.Nh.get(Ie[Ee]),[4,Fp(f,Je)]):[3,6];case 4:(ut=en.sent()).snapshot&&_.push(ut.snapshot),en.label=5;case 5:return Ee++,[3,3];case 6:return[3,11];case 7:return[4,Fu(f.ju,V)];case 8:return Jt=en.sent(),[4,su(f.ju,Jt)];case 9:return X=en.sent(),[4,lu(f,Ni(Jt),V,!1)];case 10:en.sent(),en.label=11;case 11:p.push(X),en.label=12;case 12:return I++,[3,1];case 13:return[2,(f.Ch.yu(_),p)]}})})}function Ni(a){return jo(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function ss(a){var i=ze(a);return ze(ze(i.ju).persistence).pi()}function Ha(a,i,s,f){return $.__awaiter(this,void 0,void 0,function(){var p,_,I;return $.__generator(this,function(O){switch(O.label){case 0:return(p=ze(a)).qh?(Ae("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!p.Fh.has(i))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ju(p.ju)];case 3:return _=O.sent(),I=rn.Xt(i,"current"===s),[4,hu(p,_,I)];case 4:return O.sent(),[3,8];case 5:return[4,Ra(p.ju,i,!0)];case 6:return O.sent(),fu(p,i,f),[3,8];case 7:Re(),O.label=8;case 8:return[2]}})})}function qf(a,i,s){return $.__awaiter(this,void 0,void 0,function(){var f,p,_,I,O,V,X,ce,Ee;return $.__generator(this,function(Ue){switch(Ue.label){case 0:if(!(f=Nc(a)).qh)return[3,10];p=0,_=i,Ue.label=1;case 1:return p<_.length?f.Fh.has(I=_[p])?(Ae("SyncEngine","Adding an already active target "+I),[3,5]):[4,Fu(f.ju,I)]:[3,6];case 2:return O=Ue.sent(),[4,su(f.ju,O)];case 3:return V=Ue.sent(),[4,lu(f,Ni(O),V.targetId,!1)];case 4:Ue.sent(),Cc(f.ph,V),Ue.label=5;case 5:return p++,[3,1];case 6:X=function(Je){return $.__generator(this,function(ut){switch(ut.label){case 0:return f.Fh.has(Je)?[4,Ra(f.ju,Je,!1).then(function(){Cs(f.ph,Je),fu(f,Je)}).catch(js)]:[3,2];case 1:ut.sent(),ut.label=2;case 2:return[2]}})},ce=0,Ee=s,Ue.label=7;case 7:return ce<Ee.length?[5,X(Ee[ce])]:[3,10];case 8:Ue.sent(),Ue.label=9;case 9:return ce++,[3,7];case 10:return[2]}})})}function Nc(a){var i=ze(a);return i.ph.Gu.sh=ja.bind(null,i),i.ph.Gu.qe=Lp.bind(null,i),i.ph.Gu.nh=Ua.bind(null,i),i.Ch.yu=mo.bind(null,i.bh),i.Ch.Wh=Uo.bind(null,i.bh),i}function qo(a){var i=ze(a);return i.ph.Gu.ih=ca.bind(null,i),i.ph.Gu.rh=Qu.bind(null,i),i}var as=function(){function a(){}return a.prototype.Nc=function(i){this.zh=i},a.prototype.Lr=function(i,s,f,p){var I,_=this;return 0===(I=s).filters.length&&null===I.limit&&null==I.startAt&&null==I.endAt&&(0===I.on.length||1===I.on.length&&I.on[0].field.p())||f.isEqual(_n.min())?this.Hh(i,s):this.zh.kr(i,p).next(function(I){var O=_.Yh(s,I);return(Ci(s)||ai(s))&&_.Eh(s.an,O,p,f)?_.Hh(i,s):(Ze()<=Z.LogLevel.DEBUG&&Ae("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",f.toString(),En(s)),_.zh.Lr(i,s,f).next(function(V){return O.forEach(function(X){V=V.ot(X.key,X)}),V}))})},a.prototype.Yh=function(i,s){var f=new sr(Ur(i));return s.forEach(function(p,_){_ instanceof fr&&so(i,_)&&(f=f.add(_))}),f},a.prototype.Eh=function(i,s,f,p){if(f.size!==s.size)return!0;var _="F"===i?s.last():s.first();return!!_&&(_.hasPendingWrites||_.version.L(p)>0)},a.prototype.Hh=function(i,s){return Ze()<=Z.LogLevel.DEBUG&&Ae("IndexFreeQueryEngine","Using full collection scan to execute query:",En(s)),this.zh.Lr(i,s,_n.min())},a}(),Xu=function(){function a(i,s){this.Dr=i,this.No=s,this.Sr=[],this.Jh=1,this.Xh=new sr(Zi.kc)}return a.prototype.$o=function(i){return Rt.resolve(0===this.Sr.length)},a.prototype.ko=function(i,s,f,p){var _=this.Jh;this.Jh++;var I=new Ts(_,s,f,p);this.Sr.push(I);for(var O=0,V=p;O<V.length;O++){var X=V[O];this.Xh=this.Xh.add(new Zi(X.key,_)),this.Dr.Mo(i,X.key.path.h())}return Rt.resolve(I)},a.prototype.Oo=function(i,s){return Rt.resolve(this.Zh(s))},a.prototype.Bo=function(i,s){var p=this.tl(s+1),_=p<0?0:p;return Rt.resolve(this.Sr.length>_?this.Sr[_]:null)},a.prototype.qo=function(){return Rt.resolve(0===this.Sr.length?-1:this.Jh-1)},a.prototype.Uo=function(i){return Rt.resolve(this.Sr.slice())},a.prototype.Nr=function(i,s){var f=this,p=new Zi(s,0),_=new Zi(s,Number.POSITIVE_INFINITY),I=[];return this.Xh.Ft([p,_],function(O){var V=f.Zh(O.jc);I.push(V)}),Rt.resolve(I)},a.prototype.Or=function(i,s){var f=this,p=new sr(Lt);return s.forEach(function(_){var I=new Zi(_,0),O=new Zi(_,Number.POSITIVE_INFINITY);f.Xh.Ft([I,O],function(V){p=p.add(V.jc)})}),Rt.resolve(this.el(p))},a.prototype.Wr=function(i,s){var f=s.path,p=f.length+1,_=f;E.F(_)||(_=_.child(""));var I=new Zi(new E(_),0),O=new sr(Lt);return this.Xh.xt(function(V){var X=V.key.path;return!!f.T(X)&&(X.length===p&&(O=O.add(V.jc)),!0)},I),Rt.resolve(this.el(O))},a.prototype.el=function(i){var s=this,f=[];return i.forEach(function(p){var _=s.Zh(p);null!==_&&f.push(_)}),f},a.prototype.Wo=function(i,s){var f=this;it(0===this.nl(s.batchId,"removed")),this.Sr.shift();var p=this.Xh;return Rt.forEach(s.mutations,function(_){var I=new Zi(_.key,s.batchId);return p=p.delete(I),f.No.Go(i,_.key)}).next(function(){f.Xh=p})},a.prototype.Ko=function(i){},a.prototype.Ho=function(i,s){var f=new Zi(s,0),p=this.Xh.$t(f);return Rt.resolve(s.isEqual(p&&p.key))},a.prototype.zo=function(i){return Rt.resolve()},a.prototype.nl=function(i,s){return this.tl(i)},a.prototype.tl=function(i){return 0===this.Sr.length?0:i-this.Sr[0].batchId},a.prototype.Zh=function(i){var s=this.tl(i);return s<0||s>=this.Sr.length?null:this.Sr[s]},a}(),Ga=function(){function a(i,s){this.Dr=i,this.sl=s,this.docs=new Cn(E.i),this.size=0}return a.prototype.Er=function(i,s,f){var p=s.key,_=this.docs.get(p),I=_?_.size:0,O=this.sl(s);return this.docs=this.docs.ot(p,{ta:s,size:O,readTime:f}),this.size+=O-I,this.Dr.Mo(i,p.path.h())},a.prototype.Ar=function(i){var s=this.docs.get(i);s&&(this.docs=this.docs.remove(i),this.size-=s.size)},a.prototype.Rr=function(i,s){var f=this.docs.get(s);return Rt.resolve(f?f.ta:null)},a.prototype.getEntries=function(i,s){var f=this,p=Ti();return s.forEach(function(_){var I=f.docs.get(_);p=p.ot(_,I?I.ta:null)}),Rt.resolve(p)},a.prototype.Lr=function(i,s,f){for(var p=Me(),_=new E(s.path.child("")),I=this.docs.ft(_);I.At();){var O=I.It(),X=O.value,ce=X.ta,Ee=X.readTime;if(!s.path.T(O.key.path))break;Ee.L(f)<=0||ce instanceof fr&&so(s,ce)&&(p=p.ot(ce.key,ce))}return Rt.resolve(p)},a.prototype.il=function(i,s){return Rt.forEach(this.docs,function(f){return s(f)})},a.prototype.ra=function(i){return new Ju(this)},a.prototype.aa=function(i){return Rt.resolve(this.size)},a}(),Ju=function(a){function i(s){var f=this;return(f=a.call(this)||this).ca=s,f}return $.__extends(i,a),i.prototype.yr=function(s){var f=this,p=[];return this.wr.forEach(function(_,I){I?p.push(f.ca.Er(s,I,f.readTime)):f.ca.Ar(_)}),Rt.$n(p)},i.prototype.gr=function(s,f){return this.ca.Rr(s,f)},i.prototype.Pr=function(s,f){return this.ca.getEntries(s,f)},i}(l),Wf=function(){function a(i){this.persistence=i,this.rl=new or(function(s){return xe(s)},Ft),this.lastRemoteSnapshotVersion=_n.min(),this.highestTargetId=0,this.ol=0,this.al=new gs,this.targetCount=0,this.cl=ku.fa()}return a.prototype.Ce=function(i,s){return this.rl.forEach(function(f,p){return s(p)}),Rt.resolve()},a.prototype.Ea=function(i){return Rt.resolve(this.lastRemoteSnapshotVersion)},a.prototype.Ia=function(i){return Rt.resolve(this.ol)},a.prototype.wa=function(i){return this.highestTargetId=this.cl.next(),Rt.resolve(this.highestTargetId)},a.prototype.Aa=function(i,s,f){return f&&(this.lastRemoteSnapshotVersion=f),s>this.ol&&(this.ol=s),Rt.resolve()},a.prototype.ga=function(i){this.rl.set(i.target,i);var s=i.targetId;s>this.highestTargetId&&(this.cl=new ku(s),this.highestTargetId=s),i.sequenceNumber>this.ol&&(this.ol=i.sequenceNumber)},a.prototype.Ra=function(i,s){return this.ga(s),this.targetCount+=1,Rt.resolve()},a.prototype.ya=function(i,s){return this.ga(s),Rt.resolve()},a.prototype.Va=function(i,s){return this.rl.delete(s.target),this.al.Uc(s.targetId),this.targetCount-=1,Rt.resolve()},a.prototype.po=function(i,s,f){var p=this,_=0,I=[];return this.rl.forEach(function(O,V){V.sequenceNumber<=s&&null===f.get(V.targetId)&&(p.rl.delete(O),I.push(p.pa(i,V.targetId)),_++)}),Rt.$n(I).next(function(){return _})},a.prototype.ba=function(i){return Rt.resolve(this.targetCount)},a.prototype.va=function(i,s){var f=this.rl.get(s)||null;return Rt.resolve(f)},a.prototype.Sa=function(i,s,f){return this.al.Lc(s,f),Rt.resolve()},a.prototype.Ca=function(i,s,f){this.al.qc(s,f);var p=this.persistence.No,_=[];return p&&s.forEach(function(I){_.push(p.Go(i,I))}),Rt.$n(_)},a.prototype.pa=function(i,s){return this.al.Uc(s),Rt.resolve()},a.prototype.Fa=function(i,s){var f=this.al.Wc(s);return Rt.resolve(f)},a.prototype.Ho=function(i,s){return Rt.resolve(this.al.Ho(s))},a}(),ad=function(){function a(i){var s=this;this.ul={},this.Ma=new fi(0),this.Oa=!1,this.Oa=!0,this.No=i(this),this.Ka=new Wf(this),this.Dr=new Xi,this.vr=new Ga(this.Dr,function(_){return s.No.hl(_)})}return a.prototype.start=function(){return Promise.resolve()},a.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(a.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),a.prototype.Za=function(){},a.prototype.tc=function(){},a.prototype.Ic=function(){return this.Dr},a.prototype.mc=function(i){var s=this.ul[i.ti()];return s||(s=new Xu(this.Dr,this.No),this.ul[i.ti()]=s),s},a.prototype.Tc=function(){return this.Ka},a.prototype.Ec=function(){return this.vr},a.prototype.runTransaction=function(i,s,f){var p=this;Ae("MemoryPersistence","Starting transaction:",i);var _=new ud(this.Ma.next());return this.No.ll(),f(_).next(function(I){return p.No._l(_).next(function(){return I})}).Fn().then(function(I){return _.br(),I})},a.prototype.fl=function(i,s){return Rt.kn(Object.values(this.ul).map(function(f){return function(){return f.Ho(i,s)}}))},a}(),ud=function(a){function i(s){var f=this;return(f=a.call(this)||this).xa=s,f}return $.__extends(i,a),i}(m),jp=function(){function a(i){this.persistence=i,this.dl=new gs,this.wl=null}return a.ml=function(i){return new a(i)},Object.defineProperty(a.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw Re()},enumerable:!1,configurable:!0}),a.prototype.Da=function(i,s,f){return this.dl.Da(f,s),this.Tl.delete(f.toString()),Rt.resolve()},a.prototype.Na=function(i,s,f){return this.dl.Na(f,s),this.Tl.add(f.toString()),Rt.resolve()},a.prototype.Go=function(i,s){return this.Tl.add(s.toString()),Rt.resolve()},a.prototype.removeTarget=function(i,s){var f=this;this.dl.Uc(s.targetId).forEach(function(_){return f.Tl.add(_.toString())});var p=this.persistence.Tc();return p.Fa(i,s.targetId).next(function(_){_.forEach(function(I){return f.Tl.add(I.toString())})}).next(function(){return p.Va(i,s)})},a.prototype.ll=function(){this.wl=new Set},a.prototype._l=function(i){var s=this,f=this.persistence.Ec().ra();return Rt.forEach(this.Tl,function(p){var _=E.D(p);return s.El(i,_).next(function(I){I||f.Ar(_)})}).next(function(){return s.wl=null,f.apply(i)})},a.prototype.yc=function(i,s){var f=this;return this.El(i,s).next(function(p){p?f.Tl.delete(s.toString()):f.Tl.add(s.toString())})},a.prototype.hl=function(i){return 0},a.prototype.El=function(i,s){var f=this;return Rt.kn([function(){return Rt.resolve(f.dl.Ho(s))},function(){return f.persistence.Tc().Ho(i,s)},function(){return f.persistence.fl(i,s)}])},a}(),Vp=function(){function a(i){this.Il=i.Il,this.Al=i.Al}return a.prototype.gu=function(i){this.Rl=i},a.prototype.Tu=function(i){this.gl=i},a.prototype.onMessage=function(i){this.Pl=i},a.prototype.close=function(){this.Al()},a.prototype.send=function(i){this.Il(i)},a.prototype.yl=function(){this.Rl()},a.prototype.Vl=function(i){this.gl(i)},a.prototype.pl=function(i){this.Pl(i)},a}(),zl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},us=function(a){function i(s){var f=this;return(f=a.call(this,s)||this).forceLongPolling=s.forceLongPolling,f.W=s.W,f}return $.__extends(i,a),i.prototype.Nl=function(s,f,p,_){return new Promise(function(I,O){var V=new Xe.XhrIo;V.listenOnce(Xe.EventType.COMPLETE,function(){try{switch(V.getLastErrorCode()){case Xe.ErrorCode.NO_ERROR:var ce=V.getResponseJson();Ae("Connection","XHR received:",JSON.stringify(ce)),I(ce);break;case Xe.ErrorCode.TIMEOUT:Ae("Connection",'RPC "'+s+'" timed out'),O(new te(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Xe.ErrorCode.HTTP_ERROR:var Ee=V.getStatus();if(Ae("Connection",'RPC "'+s+'" failed with status:',Ee,"response text:",V.getResponseText()),Ee>0){var Ie=V.getResponseJson().error;if(Ie&&Ie.status&&Ie.message){var Ue=(ut=Ie.status.toLowerCase().replace("_","-"),Object.values(ge).indexOf(ut)>=0?ut:ge.UNKNOWN);O(new te(Ue,Ie.message))}else O(new te(ge.UNKNOWN,"Server responded with status "+V.getStatus()))}else O(new te(ge.UNAVAILABLE,"Connection failed."));break;default:Re()}}finally{Ae("Connection",'RPC "'+s+'" completed.')}var ut});var X=JSON.stringify(_);V.send(f,"POST",X,p,15)})},i.prototype.Pu=function(s,f){var p=[this.vl,"/","google.firestore.v1.Firestore","/",s,"/channel"],_=Xe.createWebChannelTransport(),I={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(I.initMessageHeaders,f),kt.isMobileCordova()||kt.isReactNative()||kt.isElectron()||kt.isIE()||kt.isUWP()||kt.isBrowserExtension()||(I.httpHeadersOverwriteParam="$httpHeaders");var O=p.join("");Ae("Connection","Creating WebChannel: "+O,I);var V=_.createWebChannel(O,I),X=!1,ce=!1,Ee=new Vp({Il:function(Ue){ce?Ae("Connection","Not sending because WebChannel is closed:",Ue):(X||(Ae("Connection","Opening WebChannel transport."),V.open(),X=!0),Ae("Connection","WebChannel sending:",Ue),V.send(Ue))},Al:function(){return V.close()}}),Ie=function(Ue,Je){V.listen(Ue,function(ut){try{Je(ut)}catch(Jt){setTimeout(function(){throw Jt},0)}})};return Ie(Xe.WebChannel.EventType.OPEN,function(){ce||Ae("Connection","WebChannel transport opened.")}),Ie(Xe.WebChannel.EventType.CLOSE,function(){ce||(ce=!0,Ae("Connection","WebChannel transport closed"),Ee.Vl())}),Ie(Xe.WebChannel.EventType.ERROR,function(Ue){ce||(ce=!0,fn("Connection","WebChannel transport errored:",Ue),Ee.Vl(new te(ge.UNAVAILABLE,"The operation could not be completed")))}),Ie(Xe.WebChannel.EventType.MESSAGE,function(Ue){var Je;if(!ce){var ut=Ue.data[0];it(!!ut);var en=ut.error||(null===(Je=ut[0])||void 0===Je?void 0:Je.error);if(en){Ae("Connection","WebChannel received error:",en);var Tn=en.status,Gn=function(ri){var wi=Zt[ri];if(void 0!==wi)return er(wi)}(Tn),mr=en.message;void 0===Gn&&(Gn=ge.INTERNAL,mr="Unknown error status: "+Tn+" with message "+en.message),ce=!0,Ee.Vl(new te(Gn,mr)),V.close()}else Ae("Connection","WebChannel received:",ut),Ee.pl(ut)}}),setTimeout(function(){Ee.yl()},0),Ee},i}(function(){function a(i){this.bl=i,this.U=i.U,this.vl=(i.ssl?"https":"http")+"://"+i.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return a.prototype.$u=function(i,s,f,p){var _=this.Dl(i,s);Ae("RestConnection","Sending: ",_,f);var I={};return this.Cl(I,p),this.Nl(i,_,I,f).then(function(O){return Ae("RestConnection","Received: ",O),O},function(O){throw fn("RestConnection",i+" failed with error: ",O,"url: ",_,"request:",f),O})},a.prototype.ku=function(i,s,f,p){return this.$u(i,s,f,p)},a.prototype.Cl=function(i,s){if(i["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",i["Content-Type"]="text/plain",s)for(var f in s.Kc)s.Kc.hasOwnProperty(f)&&(i[f]=s.Kc[f])},a.prototype.Dl=function(i,s){return this.vl+"/v1/"+s+":"+zl[i]},a}()),Rc=function(){function a(){var i=this;this.Fl=function(){return i.xl()},this.$l=function(){return i.kl()},this.Ml=[],this.Ol()}return a.prototype.Zu=function(i){this.Ml.push(i)},a.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},a.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},a.prototype.xl=function(){Ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var i=0,s=this.Ml;i<s.length;i++)(0,s[i])(0)},a.prototype.kl=function(){Ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var i=0,s=this.Ml;i<s.length;i++)(0,s[i])(1)},a.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},a}(),fa=function(){function a(){}return a.prototype.Zu=function(i){},a.prototype.Di=function(){},a}();function $l(a){return new _s(a,!0)}var pu="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",gu=function(){function a(){}return a.prototype.initialize=function(i){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(s){switch(s.label){case 0:return this.Sh=this.Ll(i),this.persistence=this.Bl(i),[4,this.persistence.start()];case 1:return s.sent(),this.ql=this.Ul(i),this.ju=this.Ql(i),[2]}})})},a.prototype.Ul=function(i){return null},a.prototype.Ql=function(i){return s=this.persistence,f=new as,new Na(s,f,i.Wl);var s,f},a.prototype.Bl=function(i){if(i.persistenceSettings.jl)throw new te(ge.FAILED_PRECONDITION,pu);return new ad(jp.ml)},a.prototype.Ll=function(i){return new ra},a.prototype.terminate=function(){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(i){switch(i.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return i.sent(),[4,this.persistence.Di()];case 2:return i.sent(),[2]}})})},a.prototype.clearPersistence=function(i,s){throw new te(ge.FAILED_PRECONDITION,pu)},a}(),cd=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.prototype.initialize=function(s){return $.__awaiter(this,void 0,void 0,function(){var f,p=this;return $.__generator(this,function(_){switch(_.label){case 0:return[4,a.prototype.initialize.call(this,s)];case 1:return _.sent(),f=this.Kl.fi,this.Sh instanceof Qr?(this.Sh.fi={er:sd.bind(null,f),nr:Ha.bind(null,f),sr:qf.bind(null,f),pi:ss.bind(null,f)},[4,this.Sh.start()]):[3,3];case 2:_.sent(),_.label=3;case 3:return[4,this.persistence.Xa(function(I){return $.__awaiter(p,void 0,void 0,function(){return $.__generator(this,function(O){switch(O.label){case 0:return[4,du(this.Kl.fi,I)];case 1:return O.sent(),this.ql&&(I&&!this.ql.Ei?this.ql.start(this.ju):I||this.ql.stop()),[2]}})})})];case 4:return _.sent(),[2]}})})},i.prototype.Ll=function(s){if(s.persistenceSettings.jl&&s.persistenceSettings.synchronizeTabs){var f=P();if(!Qr.Ln(f))throw new te(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var p=wo(s.bl.U,s.bl.persistenceKey);return new Qr(f,s.cs,p,s.clientId,s.Wl)}return new ra},i}(function(a){function i(s){var f=this;return(f=a.call(this)||this).Kl=s,f}return $.__extends(i,a),i.prototype.initialize=function(s){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(f){switch(f.label){case 0:return[4,a.prototype.initialize.call(this,s)];case 1:return f.sent(),[4,Dc(this.ju)];case 2:return f.sent(),[4,this.Kl.initialize(this,s)];case 3:return f.sent(),[4,qo(this.Kl.fi)];case 4:return f.sent(),[4,xa(this.Kl.ph)];case 5:return f.sent(),[2]}})})},i.prototype.Ul=function(s){return new Le(this.persistence.No.wo,s.cs)},i.prototype.Bl=function(s){var f=wo(s.bl.U,s.bl.persistenceKey),p=$l(s.bl.U);return new rs(s.persistenceSettings.synchronizeTabs,f,s.clientId,ne.ao(s.persistenceSettings.cacheSizeBytes),s.cs,P(),B(),p,this.Sh,s.persistenceSettings.ka)},i.prototype.Ll=function(s){return new ra},i.prototype.clearPersistence=function(s,f){return function(p){return $.__awaiter(this,void 0,void 0,function(){return $.__generator(this,function(I){switch(I.label){case 0:return Dr.Ln()?[4,Dr.delete(p+"main")]:[2,Promise.resolve()];case 1:return I.sent(),[2]}})})}(wo(s,f))},i}(gu)),Ns=function(){function a(){}return a.prototype.initialize=function(i,s){return $.__awaiter(this,void 0,void 0,function(){var f=this;return $.__generator(this,function(p){switch(p.label){case 0:return this.ju?[3,2]:(this.ju=i.ju,this.Sh=i.Sh,this.Ku=this.Gl(s),this.ph=this.zl(s),this.bh=this.Hl(s),this.fi=this.Yl(s),this.Sh.di=function(_){return Va(f.fi,_,1)},this.ph.Gu.Jl=Gf.bind(null,this.fi),[4,As(this.ph,this.fi.Uh)]);case 1:p.sent(),p.label=2;case 2:return[2]}})})},a.prototype.Hl=function(i){return new dr},a.prototype.Gl=function(i){var f=$l(i.bl.U),p=new us(i.bl);return new Sc(i.credentials,p,f)},a.prototype.zl=function(i){var s,f,p,_,I,O=this;return s=this.ju,f=this.Ku,p=i.cs,_=function(V){return Va(O.fi,V,0)},I=Rc.Ln()?new Rc:new fa,new Bu(s,f,p,_,I)},a.prototype.Yl=function(i){return V=!i.persistenceSettings.jl||!i.persistenceSettings.synchronizeTabs,X=new Bf(this.ju,this.ph,this.bh,this.Sh,i.Wl,i.Dh),V&&(X.qh=!0),X;var V,X},a.prototype.terminate=function(){return uu(this.ph)},a}(),Xs=function(){function a(i){this.observer=i,this.muted=!1}return a.prototype.next=function(i){this.observer.next&&this.Xl(this.observer.next,i)},a.prototype.error=function(i){this.observer.error?this.Xl(this.observer.error,i):console.error("Uncaught Error in snapshot listener:",i)},a.prototype.Zl=function(){this.muted=!0},a.prototype.Xl=function(i,s){var f=this;this.muted||setTimeout(function(){f.muted||i(s)},0)},a}(),vu=function(a){!function(s,f,p,_){if(!(f instanceof Array)||f.length<1)throw new te(ge.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Nn(1,"element")+".")}(0,a);for(var i=0;i<a.length;++i)if(ae("FieldPath","string",i,a[i]),0===a[i].length)throw new te(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new C(a)},Vs=function(a){function i(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];return a.call(this,s)||this}return $.__extends(i,a),i.documentId=function(){return new i(C.v().R())},i.prototype.isEqual=function(s){if(!(s instanceof i))throw Wt("isEqual","FieldPath",1,s);return this.t_.isEqual(s.t_)},i}(vu),Kl=new RegExp("[~\\*/\\[\\]]"),Rs=function(a){this.e_=a},Oc=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.prototype.n_=function(s){if(2!==s.s_)throw s.i_(1===s.s_?this.e_+"() can only appear at the top level of your update data":this.e_+"() cannot be used with set() unless you pass {merge:true}");return s.We.push(s.path),null},i.prototype.isEqual=function(s){return s instanceof i},i}(Rs);function yu(a,i,s){return new tc({s_:3,r_:i.settings.r_,methodName:a.e_,o_:s},i.U,i.serializer,i.ignoreUndefinedProperties)}var Zu=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.prototype.n_=function(s){return new ft(s.path,new si)},i.prototype.isEqual=function(s){return s instanceof i},i}(Rs),qa=function(a){function i(s,f){var p=this;return(p=a.call(this,s)||this).a_=f,p}return $.__extends(i,a),i.prototype.n_=function(s){var f=yu(this,s,!0),p=this.a_.map(function(I){return _u(I,f)}),_=new j(p);return new ft(s.path,_)},i.prototype.isEqual=function(s){return this===s},i}(Rs),zf=function(a){function i(s,f){var p=this;return(p=a.call(this,s)||this).a_=f,p}return $.__extends(i,a),i.prototype.n_=function(s){var f=yu(this,s,!0),p=this.a_.map(function(I){return _u(I,f)}),_=new K(p);return new ft(s.path,_)},i.prototype.isEqual=function(s){return this===s},i}(Rs),ul=function(a){function i(s,f){var p=this;return(p=a.call(this,s)||this).c_=f,p}return $.__extends(i,a),i.prototype.n_=function(s){var f=new we(s.serializer,ro(s.serializer,this.c_));return new ft(s.path,f)},i.prototype.isEqual=function(s){return this===s},i}(Rs),ec=function(){function a(i,s){if(U("GeoPoint",arguments,2),ae("GeoPoint","number",1,i),ae("GeoPoint","number",2,s),!isFinite(i)||i<-90||i>90)throw new te(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(s)||s<-180||s>180)throw new te(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this.u_=i,this.h_=s}return Object.defineProperty(a.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){return this.u_===i.u_&&this.h_===i.h_},a.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},a.prototype.Y=function(i){return Lt(this.u_,i.u_)||Lt(this.h_,i.h_)},a}(),Pc=function(a){this.l_=a},ld=/^__.*__$/,Os=function(a,i,s){this.__=a,this.f_=i,this.d_=s},$f=function(){function a(i,s,f){this.data=i,this.We=s,this.fieldTransforms=f}return a.prototype.w_=function(i,s){var f=[];return f.push(null!==this.We?new nr(i,this.data,this.We,s):new Nr(i,this.data,s)),this.fieldTransforms.length>0&&f.push(new hi(i,this.fieldTransforms)),f},a}(),Kf=function(){function a(i,s,f){this.data=i,this.We=s,this.fieldTransforms=f}return a.prototype.w_=function(i,s){var f=[new nr(i,this.data,this.We,s)];return this.fieldTransforms.length>0&&f.push(new hi(i,this.fieldTransforms)),f},a}();function Yr(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re()}}var tc=function(){function a(i,s,f,p,_,I){this.settings=i,this.U=s,this.serializer=f,this.ignoreUndefinedProperties=p,void 0===_&&this.m_(),this.fieldTransforms=_||[],this.We=I||[]}return Object.defineProperty(a.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),a.prototype.T_=function(i){return new a(Object.assign(Object.assign({},this.settings),i),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},a.prototype.E_=function(i){var s,f=null===(s=this.path)||void 0===s?void 0:s.child(i),p=this.T_({path:f,o_:!1});return p.I_(i),p},a.prototype.A_=function(i){var s,f=null===(s=this.path)||void 0===s?void 0:s.child(i),p=this.T_({path:f,o_:!1});return p.m_(),p},a.prototype.R_=function(i){return this.T_({path:void 0,o_:!0})},a.prototype.i_=function(i){return xc(i,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},a.prototype.contains=function(i){return void 0!==this.We.find(function(s){return i.T(s)})||void 0!==this.fieldTransforms.find(function(s){return i.T(s.field)})},a.prototype.m_=function(){if(this.path)for(var i=0;i<this.path.length;i++)this.I_(this.path.get(i))},a.prototype.I_=function(i){if(0===i.length)throw this.i_("Document fields must not be empty");if(Yr(this.s_)&&ld.test(i))throw this.i_('Document fields cannot begin and end with "__"')},a}(),Js=function(){function a(i,s,f){this.U=i,this.ignoreUndefinedProperties=s,this.serializer=f||$l(i)}return a.prototype.P_=function(i,s,f,p){return void 0===p&&(p=!1),new tc({s_:i,methodName:s,r_:f,path:C.P(),o_:!1,g_:p},this.U,this.serializer,this.ignoreUndefinedProperties)},a}();function mu(a,i,s,f,p,_){void 0===_&&(_={});var I=a.P_(_.merge||_.mergeFields?2:0,i,s,p);ha("Data must be an object, but it was:",I,f);var O,V,X=Mc(f,I);if(_.merge)O=new yt(I.We),V=I.fieldTransforms;else if(_.mergeFields){for(var ce=[],Ee=0,Ie=_.mergeFields;Ee<Ie.length;Ee++){var Ue=Ie[Ee],Je=void 0;if(Ue instanceof vu)Je=Ue.t_;else{if("string"!=typeof Ue)throw Re();Je=cl(i,Ue,s)}if(!I.contains(Je))throw new te(ge.INVALID_ARGUMENT,"Field '"+Je+"' is specified in your field mask but missing from your input data.");ll(ce,Je)||ce.push(Je)}O=new yt(ce),V=I.fieldTransforms.filter(function(ut){return O.Ye(ut.field)})}else O=null,V=I.fieldTransforms;return new $f(new Zo(X),O,V)}function Eo(a,i,s,f){var p=a.P_(1,i,s);ha("Data must be an object, but it was:",p,f);var _=[],I=new es;Nt(f,function(V,X){var ce=cl(i,V,s),Ee=p.A_(ce);if(X instanceof Oc||X instanceof Pc&&X.l_ instanceof Oc)_.push(ce);else{var Ie=_u(X,Ee);null!=Ie&&(_.push(ce),I.set(ce,Ie))}});var O=new yt(_);return new Kf(I.Xe(),O,p.fieldTransforms)}function Ql(a,i,s,f,p,_){var I=a.P_(1,i,s),O=[Us(i,f,s)],V=[p];if(_.length%2!=0)throw new te(ge.INVALID_ARGUMENT,"Function "+i+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var X=0;X<_.length;X+=2)O.push(Us(i,_[X])),V.push(_[X+1]);for(var ce=[],Ee=new es,Ie=O.length-1;Ie>=0;--Ie)if(!ll(ce,O[Ie])){var Ue=O[Ie],Je=V[Ie],ut=I.A_(Ue);if(Je instanceof Oc||Je instanceof Pc&&Je.l_ instanceof Oc)ce.push(Ue);else{var Jt=_u(Je,ut);null!=Jt&&(ce.push(Ue),Ee.set(Ue,Jt))}}var en=new yt(ce);return new Kf(Ee.Xe(),en,I.fieldTransforms)}function Qf(a,i,s,f){return void 0===f&&(f=!1),_u(s,a.P_(f?4:3,i))}function _u(a,i){if(a instanceof Pc&&(a=a.l_),Wa(a))return ha("Unsupported field value:",i,a),Mc(a,i);if(a instanceof Rs)return function(s,f){if(!Yr(f.s_))throw f.i_(s.e_+"() can only be used with update() and set()");if(!f.path)throw f.i_(s.e_+"() is not currently supported inside arrays");var p=s.n_(f);p&&f.fieldTransforms.push(p)}(a,i),null;if(i.path&&i.We.push(i.path),a instanceof Array){if(i.settings.o_&&4!==i.s_)throw i.i_("Nested arrays are not supported");return function(s,f){for(var p=[],_=0,I=0,O=s;I<O.length;I++){var V=_u(O[I],f.R_(_));null==V&&(V={nullValue:"NULL_VALUE"}),p.push(V),_++}return{arrayValue:{values:p}}}(a,i)}return function(s,f){if(null===s)return{nullValue:"NULL_VALUE"};if("number"==typeof s)return ro(f.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){var p=Rn.fromDate(s);return{timestampValue:bi(f.serializer,p)}}if(s instanceof Rn){var _=new Rn(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:bi(f.serializer,_)}}if(s instanceof ec)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yn)return{bytesValue:ws(f.serializer,s.q)};if(s instanceof Os){var I=f.U,O=s.__;if(!O.isEqual(I))throw f.i_("Document reference is for database "+O.projectId+"/"+O.database+" but should be for database "+I.projectId+"/"+I.database);return{referenceValue:Hi(s.__||f.U,s.f_.path)}}if(void 0===s&&f.ignoreUndefinedProperties)return null;throw f.i_("Unsupported field value: "+at(s))}(a,i)}function Mc(a,i){var s={};return _t(a)?i.path&&i.path.length>0&&i.We.push(i.path):Nt(a,function(f,p){var _=_u(p,i.E_(f));null!=_&&(s[f]=_)}),{mapValue:{fields:s}}}function Wa(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Rn||a instanceof ec||a instanceof yn||a instanceof Os||a instanceof Rs)}function ha(a,i,s){if(!Wa(s)||!Ve(s)){var f=at(s);throw i.i_("an object"===f?a+" a custom object":a+" "+f)}}function Us(a,i,s){if(i instanceof vu)return i.t_;if("string"==typeof i)return cl(a,i);throw xc("Field path arguments must be of type string or FieldPath.",a,!1,void 0,s)}function cl(a,i,s){try{return function(p){if(p.search(Kl)>=0)throw new te(ge.INVALID_ARGUMENT,"Invalid field path ("+p+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Vs.bind.apply(Vs,$.__spreadArrays([void 0],p.split("."))))}catch(_){throw new te(ge.INVALID_ARGUMENT,"Invalid field path ("+p+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(i).t_}catch(p){throw xc((f=p)instanceof Error?f.message:f.toString(),a,!1,void 0,s)}var f}function xc(a,i,s,f,p){var _=f&&!f.m(),I=void 0!==p,O="Function "+i+"() called with invalid data";s&&(O+=" (via `toFirestore()`)");var V="";return(_||I)&&(V+=" (found",_&&(V+=" in field "+f),I&&(V+=" in document "+p),V+=")"),new te(ge.INVALID_ARGUMENT,(O+=". ")+a+V)}function ll(a,i){return a.some(function(s){return s.isEqual(i)})}var kc=function(){function a(i){this.Ku=i,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return a.prototype.v_=function(i){return $.__awaiter(this,void 0,void 0,function(){var s,f=this;return $.__generator(this,function(p){switch(p.label){case 0:if(this.S_(),this.mutations.length>0)throw new te(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(_,I){return $.__awaiter(this,void 0,void 0,function(){var O,V,X,ce,Ee,Ie;return $.__generator(this,function(Ue){switch(Ue.label){case 0:return O=ze(_),V=Ir(O.serializer)+"/documents",X={documents:I.map(function(Je){return Oi(O.serializer,Je)})},[4,O.ku("BatchGetDocuments",V,X)];case 1:return ce=Ue.sent(),Ee=new Map,ce.forEach(function(Je){var Jt,en,ut=(Jt=O.serializer,"found"in(en=Je)?function(Tn,Gn){it(!!Gn.found);var mr=Sn(Tn,Gn.found.name),ri=po(Gn.found.updateTime),wi=new Zo({mapValue:{fields:Gn.found.fields}});return new fr(mr,ri,wi,{})}(Jt,en):"missing"in en?function(Tn,Gn){it(!!Gn.missing),it(!!Gn.readTime);var mr=Sn(Tn,Gn.missing),ri=po(Gn.readTime);return new Er(mr,ri)}(Jt,en):Re());Ee.set(ut.key.toString(),ut)}),Ie=[],[2,(I.forEach(function(Je){var ut=Ee.get(Je.toString());it(!!ut),Ie.push(ut)}),Ie)]}})})}(this.Ku,i)];case 1:return[2,((s=p.sent()).forEach(function(_){_ instanceof Er||_ instanceof fr?f.D_(_):Re()}),s)]}})})},a.prototype.set=function(i,s){this.write(s.w_(i,this.Ge(i))),this.b_.add(i.toString())},a.prototype.update=function(i,s){try{this.write(s.w_(i,this.C_(i)))}catch(f){this.p_=f}this.b_.add(i.toString())},a.prototype.delete=function(i){this.write([new Pi(i,this.Ge(i))]),this.b_.add(i.toString())},a.prototype.commit=function(){return $.__awaiter(this,void 0,void 0,function(){var i,s=this;return $.__generator(this,function(f){switch(f.label){case 0:if(this.S_(),this.p_)throw this.p_;return i=this.y_,this.mutations.forEach(function(p){i.delete(p.key.toString())}),i.forEach(function(p,_){var I=E.D(_);s.mutations.push(new fs(I,s.Ge(I)))}),[4,function(p,_){return $.__awaiter(this,void 0,void 0,function(){var I,O,V;return $.__generator(this,function(X){switch(X.label){case 0:return I=ze(p),O=Ir(I.serializer)+"/documents",V={writes:_.map(function(ce){return Fr(I.serializer,ce)})},[4,I.$u("Commit",O,V)];case 1:return X.sent(),[2]}})})}(this.Ku,this.mutations)];case 1:return f.sent(),this.V_=!0,[2]}})})},a.prototype.D_=function(i){var s;if(i instanceof fr)s=i.version;else{if(!(i instanceof Er))throw Re();s=_n.min()}var f=this.y_.get(i.key.toString());if(f){if(!s.isEqual(f))throw new te(ge.ABORTED,"Document version changed between two reads.")}else this.y_.set(i.key.toString(),s)},a.prototype.Ge=function(i){var s=this.y_.get(i.toString());return!this.b_.has(i.toString())&&s?qt.updateTime(s):qt.ze()},a.prototype.C_=function(i){var s=this.y_.get(i.toString());if(!this.b_.has(i.toString())&&s){if(s.isEqual(_n.min()))throw new te(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qt.updateTime(s)}return qt.exists(!0)},a.prototype.write=function(i){this.S_(),this.mutations=this.mutations.concat(i)},a.prototype.S_=function(){},a}(),Yf=function(){function a(i,s,f,p){this.cs=i,this.Ku=s,this.updateFunction=f,this.ls=p,this.N_=5,this.ys=new Yi(this.cs,"transaction_retry")}return a.prototype.run=function(){this.F_()},a.prototype.F_=function(){var i=this;this.ys.gn(function(){return $.__awaiter(i,void 0,void 0,function(){var s,f,p=this;return $.__generator(this,function(_){return s=new kc(this.Ku),(f=this.x_(s))&&f.then(function(I){p.cs.ws(function(){return s.commit().then(function(){p.ls.resolve(I)}).catch(function(O){p.k_(O)})})}).catch(function(I){p.k_(I)}),[2]})})})},a.prototype.x_=function(i){try{var s=this.updateFunction(i);return!Jr(s)&&s.catch&&s.then?s:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(f){return this.ls.reject(f),null}},a.prototype.k_=function(i){var s=this;this.N_>0&&this.M_(i)?(this.N_-=1,this.cs.ws(function(){return s.F_(),Promise.resolve()})):this.ls.reject(i)},a.prototype.M_=function(i){if("FirebaseError"===i.name){var s=i.code;return"aborted"===s||"failed-precondition"===s||!On(s)}return!1},a}(),fd=function(){function a(i,s){this.credentials=i,this.cs=s,this.clientId=nn.k(),this.O_=new Yn}return a.prototype.start=function(i,s,f,p){var _=this;this.L_(),this.bl=i;var I=new Yn,O=!1;return this.credentials.Hc(function(V){if(!O)return O=!0,Ae("FirestoreClient","Initializing. user=",V.uid),_.B_(s,f,p,V,I).then(_.O_.resolve,_.O_.reject);_.cs.Cs(function(){return function(X,ce){return $.__awaiter(this,void 0,void 0,function(){var Ee,Ie;return $.__generator(this,function(Ue){switch(Ue.label){case 0:return(Ee=ze(X)).cs.xs(),Ae("RemoteStore","RemoteStore received new credentials"),Ie=bo(Ee),Ee.Yu.add(3),[4,Ro(Ee)];case 1:return Ue.sent(),Ie&&Ee.th.set("Unknown"),[4,Ee.Gu.Jl(ce)];case 2:return Ue.sent(),Ee.Yu.delete(3),[4,Hu(Ee)];case 3:return Ue.sent(),[2]}})})}(_.ph,V)})}),this.cs.ws(function(){return _.O_.promise}),I.promise},a.prototype.enableNetwork=function(){var i=this;return this.L_(),this.cs.enqueue(function(){return i.persistence.tc(!0),(f=ze(i.ph)).Yu.delete(0),Hu(f);var f})},a.prototype.B_=function(i,s,f,p,_){return $.__awaiter(this,void 0,void 0,function(){var I,O,V=this;return $.__generator(this,function(X){switch(X.label){case 0:return X.trys.push([0,3,,4]),[4,i.initialize(I={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:p,Dh:100,persistenceSettings:f})];case 1:return X.sent(),[4,s.initialize(i,I)];case 2:return X.sent(),this.persistence=i.persistence,this.Sh=i.Sh,this.ju=i.ju,this.ql=i.ql,this.Ku=s.Ku,this.ph=s.ph,this.fi=s.fi,this.q_=s.bh,this.q_.Us=Fa.bind(null,this.fi),this.q_.js=Ku.bind(null,this.fi),this.persistence.Za(function(){return $.__awaiter(V,void 0,void 0,function(){return $.__generator(this,function(ce){switch(ce.label){case 0:return[4,this.terminate()];case 1:return ce.sent(),[2]}})})}),_.resolve(),[3,4];case 3:if(O=X.sent(),_.reject(O),!this.U_(O))throw O;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+O),this.B_(new gu,new Ns,{jl:!1},p,_))];case 4:return[2]}})})},a.prototype.U_=function(i){return"FirebaseError"===i.name?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code},a.prototype.L_=function(){if(this.cs.ps)throw new te(ge.FAILED_PRECONDITION,"The client has already been terminated.")},a.prototype.disableNetwork=function(){var i=this;return this.L_(),this.cs.enqueue(function(){return i.persistence.tc(!1),function(s){return $.__awaiter(this,void 0,void 0,function(){var f;return $.__generator(this,function(p){switch(p.label){case 0:return(f=ze(s)).Yu.add(0),[4,Ro(f)];case 1:return p.sent(),f.th.set("Offline"),[2]}})})}(i.ph)})},a.prototype.terminate=function(){var i=this;this.cs.Ds();var s=new Yn;return this.cs.bs(function(){return $.__awaiter(i,void 0,void 0,function(){var f,p;return $.__generator(this,function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,uu(this.ph)];case 1:return _.sent(),[4,this.Sh.Di()];case 2:return _.sent(),[4,this.persistence.Di()];case 3:return _.sent(),this.credentials.Yc(),s.resolve(),[3,5];case 4:return f=_.sent(),p=qe(f,"Failed to shutdown persistence"),s.reject(p),[3,5];case 5:return[2]}})})}),s.promise},a.prototype.waitForPendingWrites=function(){var i=this;this.L_();var s=new Yn;return this.cs.ws(function(){return function(f,p){return $.__awaiter(this,void 0,void 0,function(){var _,I,O,V,X;return $.__generator(this,function(ce){switch(ce.label){case 0:bo((_=ze(f)).ph)||Ae("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,(Ee=_.ju,Ie=ze(Ee),Ie.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(Ue){return Ie.Sr.qo(Ue)}))];case 2:return-1===(I=ce.sent())?[2,void p.resolve()]:((O=_.Lh.get(I)||[]).push(p),_.Lh.set(I,O),[3,4]);case 3:return V=ce.sent(),X=qe(V,"Initialization of waitForPendingWrites() operation failed"),p.reject(X),[3,4];case 4:return[2]}var Ee,Ie})})}(i.fi,s)}),s.promise},a.prototype.listen=function(i,s,f){var p=this;this.L_();var _=new Xs(f),I=new hs(i,_,s);return this.cs.ws(function(){return rr(p.q_,I)}),function(){_.Zl(),p.cs.ws(function(){return xi(p.q_,I)})}},a.prototype.Q_=function(i){return $.__awaiter(this,void 0,void 0,function(){var s,f=this;return $.__generator(this,function(p){switch(p.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return p.sent(),s=new Yn,[2,(this.cs.ws(function(){return function(_,I,O){return $.__awaiter(this,void 0,void 0,function(){var V,X,ce;return $.__generator(this,function(Ee){switch(Ee.label){case 0:return Ee.trys.push([0,2,,3]),[4,(Ie=_,Ue=I,Je=ze(Ie),Je.persistence.runTransaction("read document","readonly",function(ut){return Je.Cc.Cr(ut,Ue)}))];case 1:return(V=Ee.sent())instanceof fr?O.resolve(V):V instanceof Er?O.resolve(null):O.reject(new te(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return X=Ee.sent(),ce=qe(X,"Failed to get document '"+I+" from cache"),O.reject(ce),[3,3];case 3:return[2]}var Ie,Ue,Je})})}(f.ju,i,s)}),s.promise)]}})})},a.prototype.W_=function(i,s){return void 0===s&&(s={}),$.__awaiter(this,void 0,void 0,function(){var f,p=this;return $.__generator(this,function(_){switch(_.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return _.sent(),f=new Yn,[2,(this.cs.ws(function(){return I=p.q_,O=p.cs,V=i,X=s,ce=f,Ee=new Xs({next:function(Ue){O.ws(function(){return xi(I,Ie)});var Je=Ue.docs.has(V);!Je&&Ue.fromCache?ce.reject(new te(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):Je&&Ue.fromCache&&X&&"server"===X.source?ce.reject(new te(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ce.resolve(Ue)},error:function(Ue){return ce.reject(Ue)}}),Ie=new hs(Mi(V.path),Ee,{includeMetadataChanges:!0,Xs:!0}),rr(I,Ie);var I,O,V,X,ce,Ee,Ie}),f.promise)]}})})},a.prototype.j_=function(i){return $.__awaiter(this,void 0,void 0,function(){var s,f=this;return $.__generator(this,function(p){switch(p.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return p.sent(),s=new Yn,[2,(this.cs.ws(function(){return function(_,I,O){return $.__awaiter(this,void 0,void 0,function(){var V,X,ce,Ee,Ie,Ue;return $.__generator(this,function(Je){switch(Je.label){case 0:return Je.trys.push([0,2,,3]),[4,Lu(_,I,!0)];case 1:return V=Je.sent(),X=new cu(I,V.Fc),ce=X.wh(V.documents),Ee=X.yr(ce,!1),O.resolve(Ee.snapshot),[3,3];case 2:return Ie=Je.sent(),Ue=qe(Ie,"Failed to execute query '"+I+" against cache"),O.reject(Ue),[3,3];case 3:return[2]}})})}(f.ju,i,s)}),s.promise)]}})})},a.prototype.K_=function(i,s){return void 0===s&&(s={}),$.__awaiter(this,void 0,void 0,function(){var f,p=this;return $.__generator(this,function(_){switch(_.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return _.sent(),f=new Yn,[2,(this.cs.ws(function(){return I=p.q_,O=p.cs,V=i,X=s,ce=f,Ee=new Xs({next:function(Ue){O.ws(function(){return xi(I,Ie)}),Ue.fromCache&&"server"===X.source?ce.reject(new te(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ce.resolve(Ue)},error:function(Ue){return ce.reject(Ue)}}),Ie=new hs(V,Ee,{includeMetadataChanges:!0,Xs:!0}),rr(I,Ie);var I,O,V,X,ce,Ee,Ie}),f.promise)]}})})},a.prototype.write=function(i){var s=this;this.L_();var f=new Yn;return this.cs.ws(function(){return function(p,_,I){return $.__awaiter(this,void 0,void 0,function(){var O,V,X,ce;return $.__generator(this,function(Ee){switch(Ee.label){case 0:O=qo(p),Ee.label=1;case 1:return Ee.trys.push([1,5,,6]),[4,(Ie=O.ju,Ue=_,ut=ze(Ie),Jt=Rn.now(),en=Ue.reduce(function(Tn,Gn){return Tn.add(Gn.key)},We()),ut.persistence.runTransaction("Locally write mutations","readwrite",function(Tn){return ut.Cc.kr(Tn,en).next(function(Gn){Je=Gn;for(var mr=[],ri=0,wi=Ue;ri<wi.length;ri++){var ya=wi[ri],qn=wn(ya,Je.get(ya.key));null!=qn&&mr.push(new nr(ya.key,qn,zs(qn.proto.mapValue),qt.exists(!0)))}return ut.Sr.ko(Tn,Jt,mr,Ue)})}).then(function(Tn){var Gn=Tn.lr(Je);return{batchId:Tn.batchId,wr:Gn}}))];case 2:return V=Ee.sent(),O.Sh.xi(V.batchId),function(Ie,Ue,Je){var ut=Ie.Oh[Ie.currentUser.ti()];ut||(ut=new Cn(Lt)),ut=ut.ot(Ue,Je),Ie.Oh[Ie.currentUser.ti()]=ut}(O,V.batchId,I),[4,hu(O,V.wr)];case 3:return Ee.sent(),[4,xa(O.ph)];case 4:return Ee.sent(),[3,6];case 5:return X=Ee.sent(),ce=qe(X,"Failed to persist write"),I.reject(ce),[3,6];case 6:return[2]}var Ie,Ue,Je,ut,Jt,en})})}(s.fi,i,f)}),f.promise},a.prototype.U=function(){return this.bl.U},a.prototype.G_=function(i){var s=this;this.L_();var f=new Xs(i);return this.cs.ws(function(){return $.__awaiter(s,void 0,void 0,function(){return $.__generator(this,function(p){return[2,(_=this.q_,I=f,ze(_).qs.add(I),void I.next())];var _,I})})}),function(){f.Zl(),s.cs.ws(function(){return $.__awaiter(s,void 0,void 0,function(){return $.__generator(this,function(p){return[2,(_=this.q_,I=f,void ze(_).qs.delete(I))];var _,I})})})}},Object.defineProperty(a.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),a.prototype.transaction=function(i){var s=this;this.L_();var f=new Yn;return this.cs.ws(function(){return new Yf(s.cs,s.Ku,i,f).run(),Promise.resolve()}),f.promise},a}();function nc(a){return function(i,s){if("object"!=typeof i||null===i)return!1;for(var f=i,p=0,_=["next","error","complete"];p<_.length;p++){var I=_[p];if(I in f&&"function"==typeof f[I])return!0}return!1}(a)}var ys=function(){function a(i,s,f,p,_){this.U=i,this.timestampsInSnapshots=s,this.H_=f,this.Y_=p,this.J_=_}return a.prototype.X_=function(i){switch(ye(i)){case 0:return null;case 1:return i.booleanValue;case 2:return cr(i.integerValue||i.doubleValue);case 3:return this.Z_(i.timestampValue);case 4:return this.tf(i);case 5:return i.stringValue;case 6:return this.J_(xn(i.bytesValue));case 7:return this.ef(i.referenceValue);case 8:return this.nf(i.geoPointValue);case 9:return this.sf(i.arrayValue);case 10:return this.if(i.mapValue);default:throw Re()}},a.prototype.if=function(i){var s=this,f={};return Nt(i.fields||{},function(p,_){f[p]=s.X_(_)}),f},a.prototype.nf=function(i){return new ec(cr(i.latitude),cr(i.longitude))},a.prototype.sf=function(i){var s=this;return(i.values||[]).map(function(f){return s.X_(f)})},a.prototype.tf=function(i){switch(this.H_){case"previous":var s=x(i);return null==s?null:this.X_(s);case"estimate":return this.Z_(W(i));default:return null}},a.prototype.Z_=function(i){var s=Bt(i),f=new Rn(s.seconds,s.nanos);return this.timestampsInSnapshots?f:f.toDate()},a.prototype.ef=function(i){var s=rt.g(i);it(ks(s));var f=new Pr(s.get(1),s.get(3)),p=new E(s.u(5));return f.isEqual(this.U)||mt("Document "+p+" contains a document reference within a different database ("+f.projectId+"/"+f.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(p)},a}(),wu=ne.ho,Xf=function(){function a(i){var s,f,p,_,I;if(void 0===i.host){if(void 0!==i.ssl)throw new te(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else re("settings","non-empty string","host",i.host),this.host=i.host,Pe("settings","boolean","ssl",i.ssl),this.ssl=null===(s=i.ssl)||void 0===s||s;if(St("settings",i,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),Pe("settings","object","credentials",i.credentials),this.credentials=i.credentials,Pe("settings","boolean","timestampsInSnapshots",i.timestampsInSnapshots),Pe("settings","boolean","ignoreUndefinedProperties",i.ignoreUndefinedProperties),!0===i.timestampsInSnapshots?mt("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===i.timestampsInSnapshots&&mt("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(f=i.timestampsInSnapshots)||void 0===f||f,this.ignoreUndefinedProperties=null!==(p=i.ignoreUndefinedProperties)&&void 0!==p&&p,Pe("settings","number","cacheSizeBytes",i.cacheSizeBytes),void 0===i.cacheSizeBytes)this.cacheSizeBytes=ne._o;else{if(i.cacheSizeBytes!==wu&&i.cacheSizeBytes<ne.lo)throw new te(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ne.lo);this.cacheSizeBytes=i.cacheSizeBytes}Pe("settings","boolean","experimentalForceLongPolling",i.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(_=i.experimentalForceLongPolling)&&void 0!==_&&_,Pe("settings","boolean","experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(I=i.experimentalAutoDetectLongPolling)&&void 0!==I&&I,function(O,V,X,ce){if(!0===V&&!0===ce)throw new te(ge.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,i.experimentalForceLongPolling,0,i.experimentalAutoDetectLongPolling)}return a.prototype.isEqual=function(i){return this.host===i.host&&this.ssl===i.ssl&&this.timestampsInSnapshots===i.timestampsInSnapshots&&this.credentials===i.credentials&&this.cacheSizeBytes===i.cacheSizeBytes&&this.experimentalForceLongPolling===i.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===i.ignoreUndefinedProperties},a}(),Jf=function(){function a(i,s,f,p){var _=this;if(void 0===f&&(f=new gu),void 0===p&&(p=new Ns),this.rf=f,this.af=p,this.cf=null,this.uf=new Te,this.INTERNAL={delete:function(){return $.__awaiter(_,void 0,void 0,function(){return $.__generator(this,function(V){switch(V.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return V.sent(),[2]}})})}},"object"==typeof i.options){var I=i;this.cf=I,this.__=a._f(I),this.ff=I.name,this.df=new Ff(s)}else{var O=i;if(!O.projectId)throw new te(ge.INVALID_ARGUMENT,"Must provide projectId");this.__=new Pr(O.projectId,O.database),this.ff="[DEFAULT]",this.df=new au}this.wf=new Xf({})}return Object.defineProperty(a.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new Js(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),a.prototype.settings=function(i){U("Firestore.settings",arguments,1),ae("Firestore.settings","object",1,i),i.merge&&delete(i=Object.assign(Object.assign({},this.wf),i)).merge;var s=new Xf(i);if(this.lf&&!this.wf.isEqual(s))throw new te(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=s,void 0!==s.credentials&&(this.df=function(f){if(!f)return new au;switch(f.type){case"gapi":var p=f.client;return it(!("object"!=typeof p||null===p||!p.auth||!p.auth.getAuthHeaderValueForFirstParty)),new Oa(p,f.sessionIndex||"0");case"provider":return f.client;default:throw new te(ge.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(s.credentials))},a.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},a.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},a.prototype.enablePersistence=function(i){var s,f;if(this.lf)throw new te(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var p=!1,_=!1;if(i&&(void 0!==i.experimentalTabSynchronization&&mt("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),p=null!==(f=null!==(s=i.synchronizeTabs)&&void 0!==s?s:i.experimentalTabSynchronization)&&void 0!==f&&f,_=!!i.experimentalForceOwningTab&&i.experimentalForceOwningTab,p&&_))throw new te(ge.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:p,ka:_})},a.prototype.clearPersistence=function(){return $.__awaiter(this,void 0,void 0,function(){var i,s=this;return $.__generator(this,function(f){if(void 0!==this.lf&&!this.lf.z_)throw new te(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return i=new Yn,[2,(this.uf.bs(function(){return $.__awaiter(s,void 0,void 0,function(){var p;return $.__generator(this,function(_){switch(_.label){case 0:return _.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return _.sent(),i.resolve(),[3,3];case 2:return p=_.sent(),i.reject(p),[3,3];case 3:return[2]}})})}),i.promise)]})})},a.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(a.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),a.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},a.prototype.onSnapshotsInSync=function(i){return this.hf(),nc(i)?this.lf.G_(i):(ae("Firestore.onSnapshotsInSync","function",1,i),this.lf.G_({next:i}))},a.prototype.hf=function(){return this.lf||this.Ef(new gu,new Ns,{jl:!1}),this.lf},a.prototype.Af=function(){return new Kn(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},a.prototype.Ef=function(i,s,f){var p=this.Af();return this.lf=new fd(this.df,this.uf),this.lf.start(p,i,s,f)},a._f=function(i){if(!Object.prototype.hasOwnProperty.call(i.options,"projectId"))throw new te(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var f=i.options.projectId;if(!f||"string"!=typeof f)throw new te(ge.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new Pr(f)},Object.defineProperty(a.prototype,"app",{get:function(){if(!this.cf)throw new te(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),a.prototype.collection=function(i){return U("Firestore.collection",arguments,1),ae("Firestore.collection","non-empty string",1,i),this.hf(),new Tu(rt.g(i),this,null)},a.prototype.doc=function(i){return U("Firestore.doc",arguments,1),ae("Firestore.doc","non-empty string",1,i),this.hf(),bu.Rf(rt.g(i),this,null)},a.prototype.collectionGroup=function(i){if(U("Firestore.collectionGroup",arguments,1),ae("Firestore.collectionGroup","non-empty string",1,i),i.indexOf("/")>=0)throw new te(ge.INVALID_ARGUMENT,"Invalid collection ID '"+i+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new pa((s=i,new Kr(rt.P(),s)),this,null);var s},a.prototype.runTransaction=function(i){var s=this;return U("Firestore.runTransaction",arguments,1),ae("Firestore.runTransaction","function",1,i),this.hf().transaction(function(f){return i(new Oo(s,f))})},a.prototype.batch=function(){return this.hf(),new fl(this)},Object.defineProperty(a,"logLevel",{get:function(){switch(Ze()){case Z.LogLevel.DEBUG:return"debug";default:return"error";case Z.LogLevel.SILENT:return"silent";case Z.LogLevel.WARN:return"warn";case Z.LogLevel.INFO:return"info";case Z.LogLevel.VERBOSE:return"verbose"}},enumerable:!1,configurable:!0}),a.setLogLevel=function(i){U("Firestore.setLogLevel",arguments,1),Se("setLogLevel",["debug","error","silent","warn","info","verbose"],1,i),$e.setLogLevel(i)},a.prototype.gf=function(){return this.wf.timestampsInSnapshots},a.prototype.Pf=function(){return this.wf},a}(),Oo=function(){function a(i,s){this.yf=i,this.Vf=s}return a.prototype.get=function(i){var s=this;U("Transaction.get",arguments,1);var f=ga("Transaction.get",i,this.yf);return this.Vf.v_([f.f_]).then(function(p){if(!p||1!==p.length)return Re();var _=p[0];if(_ instanceof Er)return new Eu(s.yf,f.f_,null,!1,!1,f.d_);if(_ instanceof fr)return new Eu(s.yf,f.f_,_,!1,!1,f.d_);throw Re()})},a.prototype.set=function(i,s,f){ee("Transaction.set",arguments,2,3);var p=ga("Transaction.set",i,this.yf);f=gl("Transaction.set",f);var _=tf(p.d_,s,f),I=mu(this.yf.mf,"Transaction.set",p.f_,_,null!==p.d_,f);return this.Vf.set(p.f_,I),this},a.prototype.update=function(i,s,f){for(var p,_,I=[],O=3;O<arguments.length;O++)I[O-3]=arguments[O];return"string"==typeof s||s instanceof Vs?(N("Transaction.update",arguments,3),p=ga("Transaction.update",i,this.yf),_=Ql(this.yf.mf,"Transaction.update",p.f_,s,f,I)):(U("Transaction.update",arguments,2),p=ga("Transaction.update",i,this.yf),_=Eo(this.yf.mf,"Transaction.update",p.f_,s)),this.Vf.update(p.f_,_),this},a.prototype.delete=function(i){U("Transaction.delete",arguments,1);var s=ga("Transaction.delete",i,this.yf);return this.Vf.delete(s.f_),this},a}(),fl=function(){function a(i){this.yf=i,this.pf=[],this.bf=!1}return a.prototype.set=function(i,s,f){ee("WriteBatch.set",arguments,2,3),this.vf();var p=ga("WriteBatch.set",i,this.yf);f=gl("WriteBatch.set",f);var _=tf(p.d_,s,f),I=mu(this.yf.mf,"WriteBatch.set",p.f_,_,null!==p.d_,f);return this.pf=this.pf.concat(I.w_(p.f_,qt.ze())),this},a.prototype.update=function(i,s,f){for(var p,_,I=[],O=3;O<arguments.length;O++)I[O-3]=arguments[O];return this.vf(),"string"==typeof s||s instanceof Vs?(N("WriteBatch.update",arguments,3),p=ga("WriteBatch.update",i,this.yf),_=Ql(this.yf.mf,"WriteBatch.update",p.f_,s,f,I)):(U("WriteBatch.update",arguments,2),p=ga("WriteBatch.update",i,this.yf),_=Eo(this.yf.mf,"WriteBatch.update",p.f_,s)),this.pf=this.pf.concat(_.w_(p.f_,qt.exists(!0))),this},a.prototype.delete=function(i){U("WriteBatch.delete",arguments,1),this.vf();var s=ga("WriteBatch.delete",i,this.yf);return this.pf=this.pf.concat(new Pi(s.f_,qt.ze())),this},a.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},a.prototype.vf=function(){if(this.bf)throw new te(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},a}(),bu=function(a){function i(s,f,p){var _=this;return(_=a.call(this,f.__,s,p)||this).f_=s,_.firestore=f,_.d_=p,_.lf=_.firestore.hf(),_}return $.__extends(i,a),i.Rf=function(s,f,p){if(s.length%2!=0)throw new te(ge.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+s.R()+" has "+s.length);return new i(new E(s),f,p)},Object.defineProperty(i.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return new Tu(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),i.prototype.collection=function(s){if(U("DocumentReference.collection",arguments,1),ae("DocumentReference.collection","non-empty string",1,s),!s)throw new te(ge.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var f=rt.g(s);return new Tu(this.f_.path.child(f),this.firestore,null)},i.prototype.isEqual=function(s){if(!(s instanceof i))throw Wt("isEqual","DocumentReference",1,s);return this.firestore===s.firestore&&this.f_.isEqual(s.f_)&&this.d_===s.d_},i.prototype.set=function(s,f){ee("DocumentReference.set",arguments,1,2),f=gl("DocumentReference.set",f);var p=tf(this.d_,s,f),_=mu(this.firestore.mf,"DocumentReference.set",this.f_,p,null!==this.d_,f);return this.lf.write(_.w_(this.f_,qt.ze()))},i.prototype.update=function(s,f){for(var p,_=[],I=2;I<arguments.length;I++)_[I-2]=arguments[I];return"string"==typeof s||s instanceof Vs?(N("DocumentReference.update",arguments,2),p=Ql(this.firestore.mf,"DocumentReference.update",this.f_,s,f,_)):(U("DocumentReference.update",arguments,1),p=Eo(this.firestore.mf,"DocumentReference.update",this.f_,s)),this.lf.write(p.w_(this.f_,qt.exists(!0)))},i.prototype.delete=function(){return U("DocumentReference.delete",arguments,0),this.lf.write([new Pi(this.f_,qt.ze())])},i.prototype.onSnapshot=function(){for(var s,f,p,_=this,I=[],O=0;O<arguments.length;O++)I[O]=arguments[O];ee("DocumentReference.onSnapshot",arguments,1,4);var V={includeMetadataChanges:!1},X=0;"object"!=typeof I[X]||nc(I[X])||(St("DocumentReference.onSnapshot",V=I[X],["includeMetadataChanges"]),Pe("DocumentReference.onSnapshot","boolean","includeMetadataChanges",V.includeMetadataChanges),X++);var ce={includeMetadataChanges:V.includeMetadataChanges};if(nc(I[X])){var Ee=I[X];I[X]=null===(s=Ee.next)||void 0===s?void 0:s.bind(Ee),I[X+1]=null===(f=Ee.error)||void 0===f?void 0:f.bind(Ee),I[X+2]=null===(p=Ee.complete)||void 0===p?void 0:p.bind(Ee)}else ae("DocumentReference.onSnapshot","function",X,I[X]),pt("DocumentReference.onSnapshot","function",X+1,I[X+1]),pt("DocumentReference.onSnapshot","function",X+2,I[X+2]);var Ie={next:function(Ue){I[X]&&I[X](_.Sf(Ue))},error:I[X+1],complete:I[X+2]};return this.lf.listen(Mi(this.f_.path),ce,Ie)},i.prototype.get=function(s){var f=this;ee("DocumentReference.get",arguments,0,1),ef("DocumentReference.get",s);var p=this.firestore.hf();return s&&"cache"===s.source?p.Q_(this.f_).then(function(_){return new Eu(f.firestore,f.f_,_,!0,_ instanceof fr&&_.Je,f.d_)}):p.W_(this.f_,s).then(function(_){return f.Sf(_)})},i.prototype.withConverter=function(s){return new i(this.f_,this.firestore,s)},i.prototype.Sf=function(s){var f=s.docs.get(this.f_);return new Eu(this.firestore,this.f_,f,s.fromCache,s.hasPendingWrites,this.d_)},i}(Os),Zf=function(){function a(i,s){this.hasPendingWrites=i,this.fromCache=s}return a.prototype.isEqual=function(i){return this.hasPendingWrites===i.hasPendingWrites&&this.fromCache===i.fromCache},a}(),Eu=function(){function a(i,s,f,p,_,I){this.yf=i,this.f_=s,this.Df=f,this.Cf=p,this.Nf=_,this.d_=I}return a.prototype.data=function(i){var s=this;if(ee("DocumentSnapshot.data",arguments,0,1),i=Zl("DocumentSnapshot.data",i),this.Df){if(this.d_){var f=new hl(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(f,i)}return new ys(this.yf.__,this.yf.gf(),i.serverTimestamps||"none",function(p){return new bu(p,s.yf,null)},function(p){return new Zn(p)}).X_(this.Df.rn())}},a.prototype.get=function(i,s){var f=this;if(ee("DocumentSnapshot.get",arguments,1,2),s=Zl("DocumentSnapshot.get",s),this.Df){var p=this.Df.data().field(Us("DocumentSnapshot.get",i,this.f_));if(null!==p)return new ys(this.yf.__,this.yf.gf(),s.serverTimestamps||"none",function(_){return new bu(_,f.yf,f.d_)},function(_){return new Zn(_)}).X_(p)}},Object.defineProperty(a.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ref",{get:function(){return new bu(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"metadata",{get:function(){return new Zf(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),a.prototype.isEqual=function(i){if(!(i instanceof a))throw Wt("isEqual","DocumentSnapshot",1,i);return this.yf===i.yf&&this.Cf===i.Cf&&this.f_.isEqual(i.f_)&&(null===this.Df?null===i.Df:this.Df.isEqual(i.Df))&&this.d_===i.d_},a}(),hl=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.prototype.data=function(s){return a.prototype.data.call(this,s)},i}(Eu);function dl(a,i,s,f,p,_,I){var O;if(p.p()){if("array-contains"===_||"array-contains-any"===_)throw new te(ge.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+_+"' queries on FieldPath.documentId().");if("in"===_||"not-in"===_){pl(I,_);for(var V=[],X=0,ce=I;X<ce.length;X++)V.push(da(f,a,ce[X]));O={arrayValue:{values:V}}}else O=da(f,a,I)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||pl(I,_),O=Qf(s,i,I,"in"===_||"not-in"===_);var Ie=Mr.create(p,_,O);return function(Ue,Je){if(Je.hn()){var ut=Hn(Ue);if(null!==ut&&!ut.isEqual(Je.field))throw new te(ge.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+ut.toString()+"' and '"+Je.field.toString()+"'");var Jt=zt(Ue);null!==Jt&&Xl(0,Je.field,Jt)}var en=function(Tn,Gn){for(var mr=0,ri=Tn.filters;mr<ri.length;mr++){var wi=ri[mr];if(Gn.indexOf(wi.op)>=0)return wi.op}return null}(Ue,function(Tn){switch(Tn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Je.op));if(null!==en)throw new te(ge.INVALID_ARGUMENT,en===Je.op?"Invalid query. You cannot use more than one '"+Je.op.toString()+"' filter.":"Invalid query. You cannot use '"+Je.op.toString()+"' filters with '"+en.toString()+"' filters.")}(a,Ie),Ie}function Yl(a,i,s){if(null!==a.startAt)throw new te(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new te(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var f=new lo(i,s);return function(p,_){if(null===zt(p)){var I=Hn(p);null!==I&&Xl(0,I,_.field)}}(a,f),f}function da(a,i,s){if("string"==typeof s){if(""===s)throw new te(ge.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!yr(i)&&-1!==s.indexOf("/"))throw new te(ge.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+s+"' contains a '/' character.");var f=i.path.child(rt.g(s));if(!E.F(f))throw new te(ge.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+f+"' is not because it has an odd number of segments ("+f.length+").");return pn(a,new E(f))}if(s instanceof Os)return pn(a,s.f_);throw new te(ge.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+at(s)+".")}function pl(a,i){if(!Array.isArray(a)||0===a.length)throw new te(ge.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+i.toString()+"' filters.");if(a.length>10)throw new te(ge.INVALID_ARGUMENT,"Invalid Query. '"+i.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===i||"array-contains-any"===i){if(a.indexOf(null)>=0)throw new te(ge.INVALID_ARGUMENT,"Invalid Query. '"+i.toString()+"' filters cannot contain 'null' in the value array.");if(a.filter(function(s){return Number.isNaN(s)}).length>0)throw new te(ge.INVALID_ARGUMENT,"Invalid Query. '"+i.toString()+"' filters cannot contain 'NaN' in the value array.")}}function Xl(a,i,s){if(!s.isEqual(i))throw new te(ge.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+i.toString()+"' and so you must also use '"+i.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+s.toString()+"' instead.")}function Jl(a){if(ai(a)&&0===a.on.length)throw new te(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pa=function(){function a(i,s,f){this.Ff=i,this.firestore=s,this.d_=f}return a.prototype.where=function(i,s,f){U("Query.where",arguments,3),Gt("Query.where",3,f);var O,X,p=Se("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,s),_=Us("Query.where",i),I=dl(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,_,p,f);return new a((X=(O=this.Ff).filters.concat([I]),new Kr(O.path,O.collectionGroup,O.on.slice(),X,O.limit,O.an,O.startAt,O.endAt)),this.firestore,this.d_)},a.prototype.orderBy=function(i,s){var f;if(ee("Query.orderBy",arguments,1,2),pt("Query.orderBy","non-empty string",2,s),void 0===s||"asc"===s)f="asc";else{if("desc"!==s)throw new te(ge.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+s+"', expected 'asc' or 'desc'.");f="desc"}var I,V,p=Us("Query.orderBy",i),_=Yl(this.Ff,p,f);return new a((V=(I=this.Ff).on.concat([_]),new Kr(I.path,I.collectionGroup,V,I.filters.slice(),I.limit,I.an,I.startAt,I.endAt)),this.firestore,this.d_)},a.prototype.limit=function(i){return U("Query.limit",arguments,1),ae("Query.limit","number",1,i),on("Query.limit",1,i),new a(Rr(this.Ff,i,"F"),this.firestore,this.d_)},a.prototype.limitToLast=function(i){return U("Query.limitToLast",arguments,1),ae("Query.limitToLast","number",1,i),on("Query.limitToLast",1,i),new a(Rr(this.Ff,i,"L"),this.firestore,this.d_)},a.prototype.startAt=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];N("Query.startAt",arguments,1);var p=this.xf("Query.startAt",i,s,!0);return new a(ts(this.Ff,p),this.firestore,this.d_)},a.prototype.startAfter=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];N("Query.startAfter",arguments,1);var p=this.xf("Query.startAfter",i,s,!1);return new a(ts(this.Ff,p),this.firestore,this.d_)},a.prototype.endBefore=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];N("Query.endBefore",arguments,1);var p=this.xf("Query.endBefore",i,s,!0);return new a(ni(this.Ff,p),this.firestore,this.d_)},a.prototype.endAt=function(i){for(var s=[],f=1;f<arguments.length;f++)s[f-1]=arguments[f];N("Query.endAt",arguments,1);var p=this.xf("Query.endAt",i,s,!1);return new a(ni(this.Ff,p),this.firestore,this.d_)},a.prototype.isEqual=function(i){if(!(i instanceof a))throw Wt("isEqual","Query",1,i);return this.firestore===i.firestore&&vi(this.Ff,i.Ff)&&this.d_===i.d_},a.prototype.withConverter=function(i){return new a(this.Ff,this.firestore,i)},a.prototype.xf=function(i,s,f,p){if(Gt(i,1,s),s instanceof Eu)return U(i,$.__spreadArrays([s],f),1),function(I,O,V,X,ce){if(!X)throw new te(ge.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+V+"().");for(var Ee=[],Ie=0,Ue=Vr(I);Ie<Ue.length;Ie++){var Je=Ue[Ie];if(Je.field.p())Ee.push(pn(O,X.key));else{var ut=X.field(Je.field);if(J(ut))throw new te(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Je.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ut){var Jt=Je.field.R();throw new te(ge.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+Jt+"' (used as the orderBy) does not exist.")}Ee.push(ut)}}return new vo(Ee,ce)}(this.Ff,this.firestore.__,i,s.Df,p);var _=[s].concat(f);return function(I,O,V,X,ce,Ee){var Ie=I.on;if(ce.length>Ie.length)throw new te(ge.INVALID_ARGUMENT,"Too many arguments provided to "+X+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var Ue=[],Je=0;Je<ce.length;Je++){var ut=ce[Je];if(Ie[Je].field.p()){if("string"!=typeof ut)throw new te(ge.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+X+"(), but got a "+typeof ut);if(!yr(I)&&-1!==ut.indexOf("/"))throw new te(ge.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+X+"() must be a plain document ID, but '"+ut+"' contains a slash.");var Jt=I.path.child(rt.g(ut));if(!E.F(Jt))throw new te(ge.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+X+"() must result in a valid document path, but '"+Jt+"' is not because it contains an odd number of segments.");var en=new E(Jt);Ue.push(pn(O,en))}else{var Tn=Qf(V,X,ut);Ue.push(Tn)}}return new vo(Ue,Ee)}(this.Ff,this.firestore.__,this.firestore.mf,i,_,p)},a.prototype.onSnapshot=function(){for(var i,s,f,p=this,_=[],I=0;I<arguments.length;I++)_[I]=arguments[I];ee("Query.onSnapshot",arguments,1,4);var O={},V=0;if("object"!=typeof _[V]||nc(_[V])||(St("Query.onSnapshot",O=_[V],["includeMetadataChanges"]),Pe("Query.onSnapshot","boolean","includeMetadataChanges",O.includeMetadataChanges),V++),nc(_[V])){var X=_[V];_[V]=null===(i=X.next)||void 0===i?void 0:i.bind(X),_[V+1]=null===(s=X.error)||void 0===s?void 0:s.bind(X),_[V+2]=null===(f=X.complete)||void 0===f?void 0:f.bind(X)}else ae("Query.onSnapshot","function",V,_[V]),pt("Query.onSnapshot","function",V+1,_[V+1]),pt("Query.onSnapshot","function",V+2,_[V+2]);var ce={next:function(Ee){_[V]&&_[V](new Iu(p.firestore,p.Ff,Ee,p.d_))},error:_[V+1],complete:_[V+2]};return Jl(this.Ff),this.firestore.hf().listen(this.Ff,O,ce)},a.prototype.get=function(i){var s=this;ee("Query.get",arguments,0,1),ef("Query.get",i),Jl(this.Ff);var f=this.firestore.hf();return(i&&"cache"===i.source?f.j_(this.Ff):f.K_(this.Ff,i)).then(function(p){return new Iu(s.firestore,s.Ff,p,s.d_)})},a}(),Iu=function(){function a(i,s,f,p){this.yf=i,this.$f=s,this.kf=f,this.d_=p,this.Mf=null,this.Of=null,this.metadata=new Zf(f.hasPendingWrites,f.fromCache)}return Object.defineProperty(a.prototype,"docs",{get:function(){var i=[];return this.forEach(function(s){return i.push(s)}),i},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),a.prototype.forEach=function(i,s){var f=this;ee("QuerySnapshot.forEach",arguments,1,2),ae("QuerySnapshot.forEach","function",1,i),this.kf.docs.forEach(function(p){i.call(s,f.Lf(p,f.metadata.fromCache,f.kf.Wt.has(p.key)))})},Object.defineProperty(a.prototype,"query",{get:function(){return new pa(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),a.prototype.docChanges=function(i){i&&(St("QuerySnapshot.docChanges",i,["includeMetadataChanges"]),Pe("QuerySnapshot.docChanges","boolean","includeMetadataChanges",i.includeMetadataChanges));var s=!(!i||!i.includeMetadataChanges);if(s&&this.kf.Kt)throw new te(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===s||(this.Mf=function(f,p,_){if(f.Qt.m()){var I=0;return f.docChanges.map(function(V){return{type:"added",doc:_(V.doc,f.fromCache,f.Wt.has(V.doc.key)),oldIndex:-1,newIndex:I++}})}var O=f.Qt;return f.docChanges.filter(function(V){return p||3!==V.type}).map(function(V){var X=_(V.doc,f.fromCache,f.Wt.has(V.doc.key)),ce=-1,Ee=-1;return 0!==V.type&&(ce=O.indexOf(V.doc.key),O=O.delete(V.doc.key)),1!==V.type&&(Ee=(O=O.add(V.doc)).indexOf(V.doc.key)),{type:hd(V.type),doc:X,oldIndex:ce,newIndex:Ee}})}(this.kf,s,this.Lf.bind(this)),this.Of=s),this.Mf},a.prototype.isEqual=function(i){if(!(i instanceof a))throw Wt("isEqual","QuerySnapshot",1,i);return this.yf===i.yf&&vi(this.$f,i.$f)&&this.kf.isEqual(i.kf)&&this.d_===i.d_},a.prototype.Lf=function(i,s,f){return new hl(this.yf,i.key,i,s,f,this.d_)},a}(),Tu=function(a){function i(s,f,p){var _=this;if((_=a.call(this,Mi(s),f,p)||this).Bf=s,s.length%2!=1)throw new te(ge.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+s.R()+" has "+s.length);return _}return $.__extends(i,a),Object.defineProperty(i.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){var s=this.Ff.path.h();return s.m()?null:new bu(new E(s),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),i.prototype.doc=function(s){ee("CollectionReference.doc",arguments,0,1),0===arguments.length&&(s=nn.k()),ae("CollectionReference.doc","non-empty string",1,s);var f=rt.g(s);return bu.Rf(this.Ff.path.child(f),this.firestore,this.d_)},i.prototype.add=function(s){U("CollectionReference.add",arguments,1);var f=this.d_?this.d_.toFirestore(s):s;ae("CollectionReference.add","object",1,f);var p=this.doc();return new bu(p.f_,this.firestore,null).set(f).then(function(){return p})},i.prototype.withConverter=function(s){return new i(this.Bf,this.firestore,s)},i}(pa);function gl(a,i){if(void 0===i)return{merge:!1};if(St(a,i,["merge","mergeFields"]),Pe(a,"boolean","merge",i.merge),void 0!==(_=i.mergeFields)&&function(O,V,X,ce,Ee){if(!(ce instanceof Array))throw new te(ge.INVALID_ARGUMENT,"Function "+O+"() requires its "+V+" option to be an array, but it was: "+at(ce));for(var Ie=0;Ie<ce.length;++Ie)if(!Ee(ce[Ie]))throw new te(ge.INVALID_ARGUMENT,"Function "+O+"() requires all "+V+" elements to be a string or a FieldPath, but the value at index "+Ie+" was: "+at(ce[Ie]))}(a,"mergeFields",0,_,function(s){return"string"==typeof s||s instanceof Vs}),void 0!==i.mergeFields&&void 0!==i.merge)throw new te(ge.INVALID_ARGUMENT,"Invalid options passed to function "+a+'(): You cannot specify both "merge" and "mergeFields".');var _;return i}function Zl(a,i){return void 0===i?{}:(St(a,i,["serverTimestamps"]),dt(a,0,"serverTimestamps",i.serverTimestamps,["estimate","previous","none"]),i)}function ef(a,i){pt(a,"object",1,i),i&&(St(a,i,["source"]),dt(a,0,"source",i.source,["default","server","cache"]))}function ga(a,i,s){if(i instanceof Os){if(i.firestore!==s)throw new te(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}throw Wt(a,"DocumentReference",1,i)}function hd(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re()}}function tf(a,i,s){return a?s&&(s.merge||s.mergeFields)?a.toFirestore(i,s):a.toFirestore(i):i}var dd=function(a){function i(){return null!==a&&a.apply(this,arguments)||this}return $.__extends(i,a),i.serverTimestamp=function(){k("FieldValue.serverTimestamp",arguments);var s=new Zu("serverTimestamp");return s.e_="FieldValue.serverTimestamp",new i(s)},i.delete=function(){k("FieldValue.delete",arguments);var s=new Oc("deleteField");return s.e_="FieldValue.delete",new i(s)},i.arrayUnion=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];N("FieldValue.arrayUnion",arguments,1);var p=function(){for(var _=[],I=0;I<arguments.length;I++)_[I]=arguments[I];return N("arrayUnion()",arguments,1),new qa("arrayUnion",_)}.apply(void 0,s);return p.e_="FieldValue.arrayUnion",new i(p)},i.arrayRemove=function(){for(var s=[],f=0;f<arguments.length;f++)s[f]=arguments[f];N("FieldValue.arrayRemove",arguments,1);var p=function(){for(var _=[],I=0;I<arguments.length;I++)_[I]=arguments[I];return N("arrayRemove()",arguments,1),new zf("arrayRemove",_)}.apply(void 0,s);return p.e_="FieldValue.arrayRemove",new i(p)},i.increment=function(s){ae("FieldValue.increment","number",1,s),U("FieldValue.increment",arguments,1);var f=new ul("increment",s);return f.e_="FieldValue.increment",new i(f)},i.prototype.isEqual=function(s){return this.l_.isEqual(s.l_)},i}(Pc),pd={Firestore:Jf,GeoPoint:ec,Timestamp:Rn,Blob:Zn,Transaction:Oo,WriteBatch:fl,DocumentReference:bu,DocumentSnapshot:Eu,Query:pa,QueryDocumentSnapshot:hl,QuerySnapshot:Iu,CollectionReference:Tu,FieldPath:Vs,FieldValue:dd,setLogLevel:Jf.setLogLevel,CACHE_SIZE_UNLIMITED:wu};function va(a){a.INTERNAL.registerComponent(new In.Component("firestore",function(f){return p=f.getProvider("app").getImmediate(),_=f.getProvider("auth-internal"),I=new Ns,O=new cd(I),new Jf(p,_,O,I);var p,_,I,O},"PUBLIC").setServiceProps(Object.assign({},pd))),a.registerVersion("@firebase/firestore","1.18.0")}va(ln.default),ot.__PRIVATE_registerFirestore=va},401:(br,ot,lt)=>{"use strict";var $=lt(2),Q=lt(483),Z=lt(544);function kt(_t){return _t&&"object"==typeof _t&&"default"in _t?_t:{default:_t}}var Xe=kt($),In={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ot=function(_t){function He(rt,D,C){var E=_t.call(this,D)||this;return Object.setPrototypeOf(E,He.prototype),E.code=rt,E.details=C,E}return Q.__extends(He,_t),He}(Error),te=function(){function _t(He,rt){var D=this;this.auth=null,this.messaging=null,this.auth=He.getImmediate({optional:!0}),this.messaging=rt.getImmediate({optional:!0}),this.auth||He.get().then(function(C){return D.auth=C},function(){}),this.messaging||rt.get().then(function(C){return D.messaging=C},function(){})}return _t.prototype.getAuthToken=function(){return Q.__awaiter(this,void 0,void 0,function(){var He;return Q.__generator(this,function(D){switch(D.label){case 0:if(!this.auth)return[2,void 0];D.label=1;case 1:return D.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(He=D.sent())?[2,He.accessToken]:[2,void 0];case 3:return D.sent(),[2,void 0];case 4:return[2]}})})},_t.prototype.getInstanceIdToken=function(){return Q.__awaiter(this,void 0,void 0,function(){return Q.__generator(this,function(He){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(rt){return[2,void 0]}return[2]})})},_t.prototype.getContext=function(){return Q.__awaiter(this,void 0,void 0,function(){var He,rt;return Q.__generator(this,function(D){switch(D.label){case 0:return[4,this.getAuthToken()];case 1:return He=D.sent(),[4,this.getInstanceIdToken()];case 2:return rt=D.sent(),[2,{authToken:He,instanceIdToken:rt}]}})})},_t}();function Ae(_t,He){var rt={};for(var D in _t)_t.hasOwnProperty(D)&&(rt[D]=He(_t[D]));return rt}var _t,He,rt,mt=function(){function _t(){}return _t.prototype.encode=function(He){var rt=this;if(null==He)return null;if(He instanceof Number&&(He=He.valueOf()),"number"==typeof He&&isFinite(He)||!0===He||!1===He||"[object String]"===Object.prototype.toString.call(He))return He;if(Array.isArray(He))return He.map(function(D){return rt.encode(D)});if("function"==typeof He||"object"==typeof He)return Ae(He,function(D){return rt.encode(D)});throw new Error("Data cannot be encoded in JSON: "+He)},_t.prototype.decode=function(He){var rt=this;if(null==He)return He;if(He["@type"])switch(He["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var D=Number(He.value);if(isNaN(D))throw new Error("Data cannot be decoded from JSON: "+He);return D;default:throw new Error("Data cannot be decoded from JSON: "+He)}return Array.isArray(He)?He.map(function(C){return rt.decode(C)}):"function"==typeof He||"object"==typeof He?Ae(He,function(C){return rt.decode(C)}):He},_t}(),Dt=function(){function _t(He,rt,D,C,E){var k=this;void 0===C&&(C="us-central1"),this.app_=He,this.fetchImpl=E,this.serializer=new mt,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(k.deleteService())}},this.contextProvider=new te(rt,D),this.cancelAllRequests=new Promise(function(N){k.deleteService=function(){return N()}});try{var U=new URL(C);this.customDomain=U.origin,this.region="us-central1"}catch(N){this.customDomain=null,this.region=C}}return Object.defineProperty(_t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),_t.prototype._url=function(He){var rt=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+rt+"/"+this.region+"/"+He:null!==this.customDomain?this.customDomain+"/"+He:"https://"+this.region+"-"+rt+".cloudfunctions.net/"+He},_t.prototype.useFunctionsEmulator=function(He){this.emulatorOrigin=He},_t.prototype.httpsCallable=function(He,rt){var D=this;return function(C){return D.call(He,C,rt||{})}},_t.prototype.postJSON=function(He,rt,D){return Q.__awaiter(this,void 0,void 0,function(){var C,k;return Q.__generator(this,function(N){switch(N.label){case 0:D["Content-Type"]="application/json",N.label=1;case 1:return N.trys.push([1,3,,4]),[4,this.fetchImpl(He,{method:"POST",body:JSON.stringify(rt),headers:D})];case 2:return C=N.sent(),[3,4];case 3:return N.sent(),[2,{status:0,json:null}];case 4:k=null,N.label=5;case 5:return N.trys.push([5,7,,8]),[4,C.json()];case 6:return k=N.sent(),[3,8];case 7:return N.sent(),[3,8];case 8:return[2,{status:C.status,json:k}]}})})},_t.prototype.call=function(He,rt,D){return Q.__awaiter(this,void 0,void 0,function(){var C,E,k,U,ee,ae,pt,re,Pe,dt;return Q.__generator(this,function(De){switch(De.label){case 0:return C=this._url(He),rt=this.serializer.encode(rt),E={data:rt},k={},[4,this.contextProvider.getContext()];case 1:return(U=De.sent()).authToken&&(k.Authorization="Bearer "+U.authToken),U.instanceIdToken&&(k["Firebase-Instance-ID-Token"]=U.instanceIdToken),ee=function(_t){var He,rt=new Promise(function(D,C){He=setTimeout(function(){C(new Ot("deadline-exceeded","deadline-exceeded"))},_t)});return{timer:He,promise:rt}}(D.timeout||7e4),ae=ee.timer,pt=ee.promise,[4,Promise.race([Re(ae,this.postJSON(C,E,k)),pt,Re(ae,this.cancelAllRequests)])];case 2:if(!(re=De.sent()))throw new Ot("cancelled","Firebase Functions instance was deleted.");if(Pe=function(_t,He,rt){var D=function(_t){if(_t>=200&&_t<300)return"ok";switch(_t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(_t),C=D,E=void 0;try{var k=He&&He.error;if(k){var U=k.status;if("string"==typeof U){if(!In[U])return new Ot("internal","internal");D=In[U],C=U}var N=k.message;"string"==typeof N&&(C=N),void 0!==(E=k.details)&&(E=rt.decode(E))}}catch(ee){}return"ok"===D?null:new Ot(D,C,E)}(re.status,re.json,this.serializer),Pe)throw Pe;if(!re.json)throw new Ot("internal","Response is not valid JSON object.");if(void 0===(dt=re.json.data)&&(dt=re.json.result),void 0===dt)throw new Ot("internal","Response is missing data field.");return[2,{data:this.serializer.decode(dt)}]}})})},_t}();function Re(_t,He){return Q.__awaiter(this,void 0,void 0,function(){var rt;return Q.__generator(this,function(D){switch(D.label){case 0:return[4,He];case 1:return rt=D.sent(),clearTimeout(_t),[2,rt]}})})}_t=Xe.default,He=fetch.bind(self),rt={Functions:Dt},_t.INTERNAL.registerComponent(new Z.Component("functions",function(C,E){var k=C.getProvider("app").getImmediate(),U=C.getProvider("auth-internal"),N=C.getProvider("messaging");return new Dt(k,U,N,E,He)},"PUBLIC").setServiceProps(rt).setMultipleInstances(!0)),Xe.default.registerVersion("@firebase/functions","0.5.1")},915:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{registerInstallations:()=>J});var $=lt(2),Q=lt(544),Xe=function(){return Xe=Object.assign||function(W){for(var se,ye=1,_e=arguments.length;ye<_e;ye++)for(var ke in se=arguments[ye])Object.prototype.hasOwnProperty.call(se,ke)&&(W[ke]=se[ke]);return W},Xe.apply(this,arguments)};function te(x,W,se,ye){return new(se||(se=Promise))(function(ke,vt){function ct(Bt){try{Tt(ye.next(Bt))}catch(cr){vt(cr)}}function cn(Bt){try{Tt(ye.throw(Bt))}catch(cr){vt(cr)}}function Tt(Bt){Bt.done?ke(Bt.value):function(ke){return ke instanceof se?ke:new se(function(vt){vt(ke)})}(Bt.value).then(ct,cn)}Tt((ye=ye.apply(x,W||[])).next())})}function $e(x,W){var ye,_e,ke,vt,se={label:0,sent:function(){if(1&ke[0])throw ke[1];return ke[1]},trys:[],ops:[]};return vt={next:ct(0),throw:ct(1),return:ct(2)},"function"==typeof Symbol&&(vt[Symbol.iterator]=function(){return this}),vt;function ct(Tt){return function(Bt){return function(Tt){if(ye)throw new TypeError("Generator is already executing.");for(;se;)try{if(ye=1,_e&&(ke=2&Tt[0]?_e.return:Tt[0]?_e.throw||((ke=_e.return)&&ke.call(_e),0):_e.next)&&!(ke=ke.call(_e,Tt[1])).done)return ke;switch(_e=0,ke&&(Tt=[2&Tt[0],ke.value]),Tt[0]){case 0:case 1:ke=Tt;break;case 4:return se.label++,{value:Tt[1],done:!1};case 5:se.label++,_e=Tt[1],Tt=[0];continue;case 7:Tt=se.ops.pop(),se.trys.pop();continue;default:if(!(ke=(ke=se.trys).length>0&&ke[ke.length-1])&&(6===Tt[0]||2===Tt[0])){se=0;continue}if(3===Tt[0]&&(!ke||Tt[1]>ke[0]&&Tt[1]<ke[3])){se.label=Tt[1];break}if(6===Tt[0]&&se.label<ke[1]){se.label=ke[1],ke=Tt;break}if(ke&&se.label<ke[2]){se.label=ke[2],se.ops.push(Tt);break}ke[2]&&se.ops.pop(),se.trys.pop();continue}Tt=W.call(x,se)}catch(Bt){Tt=[6,Bt],_e=0}finally{ye=ke=0}if(5&Tt[0])throw Tt[1];return{value:Tt[0]?Tt[1]:void 0,done:!0}}([Tt,Bt])}}}function mt(x){var W="function"==typeof Symbol&&Symbol.iterator,se=W&&x[W],ye=0;if(se)return se.call(x);if(x&&"number"==typeof x.length)return{next:function(){return x&&ye>=x.length&&(x=void 0),{value:x&&x[ye++],done:!x}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}function fn(x,W){var se="function"==typeof Symbol&&x[Symbol.iterator];if(!se)return x;var _e,vt,ye=se.call(x),ke=[];try{for(;(void 0===W||W-- >0)&&!(_e=ye.next()).done;)ke.push(_e.value)}catch(ct){vt={error:ct}}finally{try{_e&&!_e.done&&(se=ye.return)&&se.call(ye)}finally{if(vt)throw vt.error}}return ke}var De,E=lt(488),k=lt(995),N="0.4.17",ae="w:"+N,Ve=((De={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',De["not-registered"]="Firebase Installation is not registered.",De["installation-not-found"]="Firebase Installation not found.",De["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',De["app-offline"]="Could not process request. Application offline.",De["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",De),at=new E.ErrorFactory("installations","Installations",Ve);function Gt(x){return x instanceof E.FirebaseError&&x.code.includes("request-failed")}function St(x){return"https://firebaseinstallations.googleapis.com/v1/projects/"+x.projectId+"/installations"}function Wt(x){return{token:x.token,requestStatus:2,expiresIn:nn(x.expiresIn),creationTime:Date.now()}}function on(x,W){return te(this,void 0,void 0,function(){var se,ye;return $e(this,function(_e){switch(_e.label){case 0:return[4,W.json()];case 1:return se=_e.sent(),[2,at.create("request-failed",{requestName:x,serverCode:(ye=se.error).code,serverMessage:ye.message,serverStatus:ye.status})]}})})}function nt(x){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey})}function Nn(x,W){var se=W.refreshToken,ye=nt(x);return ye.append("Authorization",function(x){return"FIS_v2 "+x}(se)),ye}function vr(x){return te(this,void 0,void 0,function(){var W;return $e(this,function(se){switch(se.label){case 0:return[4,x()];case 1:return(W=se.sent()).status>=500&&W.status<600?[2,x()]:[2,W]}})})}function nn(x){return Number(x.replace("s","000"))}function un(x,W){var se=W.fid;return te(this,void 0,void 0,function(){var ye,_e,vt,ct,cn;return $e(this,function(Bt){switch(Bt.label){case 0:return ye=St(x),_e=nt(x),vt={method:"POST",headers:_e,body:JSON.stringify({fid:se,authVersion:"FIS_v2",appId:x.appId,sdkVersion:ae})},[4,vr(function(){return fetch(ye,vt)})];case 1:return(ct=Bt.sent()).ok?[4,ct.json()]:[3,3];case 2:return[2,{fid:(cn=Bt.sent()).fid||se,registrationStatus:2,refreshToken:cn.refreshToken,authToken:Wt(cn.authToken)}];case 3:return[4,on("Create Installation",ct)];case 4:throw Bt.sent()}})})}function vn(x){return new Promise(function(W){setTimeout(W,x)})}var yn=/^[cdef][\w-]{21}$/;function ir(){try{var x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;var se=function(x){return function(x){var W=btoa(String.fromCharCode.apply(String,function(){for(var x=[],W=0;W<arguments.length;W++)x=x.concat(fn(arguments[W]));return x}(x)));return W.replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return yn.test(se)?se:""}catch(ye){return""}}function Kn(x){return x.appName+"!"+x.appId}var Pr=new Map;function or(x,W){var se=Kn(x);Jr(se,W),function(x,W){var se=Fe();se&&se.postMessage({key:x,fid:W}),Ge()}(se,W)}function Jr(x,W){var se,ye,_e=Pr.get(x);if(_e)try{for(var ke=mt(_e),vt=ke.next();!vt.done;vt=ke.next())(0,vt.value)(W)}catch(cn){se={error:cn}}finally{try{vt&&!vt.done&&(ye=ke.return)&&ye.call(ke)}finally{if(se)throw se.error}}}var he=null;function Fe(){return!he&&"BroadcastChannel"in self&&((he=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(x){Jr(x.data.key,x.data.fid)}),he}function Ge(){0===Pr.size&&he&&(he.close(),he=null)}var Pt="firebase-installations-store",Zt=null;function $t(){return Zt||(Zt=(0,k.openDb)("firebase-installations-database",1,function(x){0===x.oldVersion&&x.createObjectStore(Pt)})),Zt}function dn(x,W){return te(this,void 0,void 0,function(){var se,ye,_e,ke,vt;return $e(this,function(ct){switch(ct.label){case 0:return se=Kn(x),[4,$t()];case 1:return ye=ct.sent(),_e=ye.transaction(Pt,"readwrite"),[4,(ke=_e.objectStore(Pt)).get(se)];case 2:return vt=ct.sent(),[4,ke.put(W,se)];case 3:return ct.sent(),[4,_e.complete];case 4:return ct.sent(),(!vt||vt.fid!==W.fid)&&or(x,W.fid),[2,W]}})})}function Qn(x){return te(this,void 0,void 0,function(){var W,se,ye;return $e(this,function(_e){switch(_e.label){case 0:return W=Kn(x),[4,$t()];case 1:return se=_e.sent(),[4,(ye=se.transaction(Pt,"readwrite")).objectStore(Pt).delete(W)];case 2:return _e.sent(),[4,ye.complete];case 3:return _e.sent(),[2]}})})}function On(x,W){return te(this,void 0,void 0,function(){var se,ye,_e,ke,vt,ct;return $e(this,function(cn){switch(cn.label){case 0:return se=Kn(x),[4,$t()];case 1:return ye=cn.sent(),_e=ye.transaction(Pt,"readwrite"),[4,(ke=_e.objectStore(Pt)).get(se)];case 2:return vt=cn.sent(),void 0!==(ct=W(vt))?[3,4]:[4,ke.delete(se)];case 3:return cn.sent(),[3,6];case 4:return[4,ke.put(ct,se)];case 5:cn.sent(),cn.label=6;case 6:return[4,_e.complete];case 7:return cn.sent(),ct&&(!vt||vt.fid!==ct.fid)&&or(x,ct.fid),[2,ct]}})})}function er(x){return te(this,void 0,void 0,function(){var W,se,ye;return $e(this,function(_e){switch(_e.label){case 0:return[4,On(x,function(ke){var vt=function(x){return Zr(x||{fid:ir(),registrationStatus:0})}(ke),ct=function(x,W){if(0===W.registrationStatus){if(!navigator.onLine)return{installationEntry:W,registrationPromise:Promise.reject(at.create("app-offline"))};var ye={fid:W.fid,registrationStatus:1,registrationTime:Date.now()},_e=function(x,W){return te(this,void 0,void 0,function(){var se,ye;return $e(this,function(_e){switch(_e.label){case 0:return _e.trys.push([0,2,,7]),[4,un(x,W)];case 1:return se=_e.sent(),[2,dn(x,se)];case 2:return Gt(ye=_e.sent())&&409===ye.serverCode?[4,Qn(x)]:[3,4];case 3:return _e.sent(),[3,6];case 4:return[4,dn(x,{fid:W.fid,registrationStatus:0})];case 5:_e.sent(),_e.label=6;case 6:throw ye;case 7:return[2]}})})}(x,ye);return{installationEntry:ye,registrationPromise:_e}}return 1===W.registrationStatus?{installationEntry:W,registrationPromise:sr(x)}:{installationEntry:W}}(x,vt);return W=ct.registrationPromise,ct.installationEntry})];case 1:return""!==(se=_e.sent()).fid?[3,3]:(ye={},[4,W]);case 2:return[2,(ye.installationEntry=_e.sent(),ye)];case 3:return[2,{installationEntry:se,registrationPromise:W}]}})})}function sr(x){return te(this,void 0,void 0,function(){var W,se,ye,_e;return $e(this,function(ke){switch(ke.label){case 0:return[4,Bi(x)];case 1:W=ke.sent(),ke.label=2;case 2:return 1!==W.registrationStatus?[3,5]:[4,vn(100)];case 3:return ke.sent(),[4,Bi(x)];case 4:return W=ke.sent(),[3,2];case 5:return 0!==W.registrationStatus?[3,7]:[4,er(x)];case 6:return se=ke.sent(),ye=se.installationEntry,(_e=se.registrationPromise)?[2,_e]:[2,ye];case 7:return[2,W]}})})}function Bi(x){return On(x,function(W){if(!W)throw at.create("installation-not-found");return Zr(W)})}function Zr(x){return function(x){return 1===x.registrationStatus&&x.registrationTime+1e4<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function Ti(x,W){var se=x.appConfig,ye=x.platformLoggerProvider;return te(this,void 0,void 0,function(){var _e,ke,vt,cn,Tt;return $e(this,function(xn){switch(xn.label){case 0:return _e=function(x,W){var se=W.fid;return St(x)+"/"+se+"/authTokens:generate"}(se,W),ke=Nn(se,W),(vt=ye.getImmediate({optional:!0}))&&ke.append("x-firebase-client",vt.getPlatformInfoString()),cn={method:"POST",headers:ke,body:JSON.stringify({installation:{sdkVersion:ae}})},[4,vr(function(){return fetch(_e,cn)})];case 1:return(Tt=xn.sent()).ok?[4,Tt.json()]:[3,3];case 2:return[2,Wt(xn.sent())];case 3:return[4,on("Generate Auth Token",Tt)];case 4:throw xn.sent()}})})}function Me(x,W){return void 0===W&&(W=!1),te(this,void 0,void 0,function(){var se,ye,ke;return $e(this,function(vt){switch(vt.label){case 0:return[4,On(x.appConfig,function(ct){if(!tt(ct))throw at.create("not-registered");var cn=ct.authToken;if(!W&&function(x){return 2===x.requestStatus&&!function(x){var W=Date.now();return W<x.creationTime||x.creationTime+x.expiresIn<W+36e5}(x)}(cn))return ct;if(1===cn.requestStatus)return se=function(x,W){return te(this,void 0,void 0,function(){var se,ye;return $e(this,function(_e){switch(_e.label){case 0:return[4,st(x.appConfig)];case 1:se=_e.sent(),_e.label=2;case 2:return 1!==se.authToken.requestStatus?[3,5]:[4,vn(100)];case 3:return _e.sent(),[4,st(x.appConfig)];case 4:return se=_e.sent(),[3,2];case 5:return 0===(ye=se.authToken).requestStatus?[2,Me(x,W)]:[2,ye]}})})}(x,W),ct;if(!navigator.onLine)throw at.create("app-offline");var Tt=function(x){var W={requestStatus:1,requestTime:Date.now()};return Xe(Xe({},x),{authToken:W})}(ct);return se=function(x,W){return te(this,void 0,void 0,function(){var se,_e,ye;return $e(this,function(ke){switch(ke.label){case 0:return ke.trys.push([0,3,,8]),[4,Ti(x,W)];case 1:return se=ke.sent(),ye=Xe(Xe({},W),{authToken:se}),[4,dn(x.appConfig,ye)];case 2:return ke.sent(),[2,se];case 3:return!Gt(_e=ke.sent())||401!==_e.serverCode&&404!==_e.serverCode?[3,5]:[4,Qn(x.appConfig)];case 4:return ke.sent(),[3,7];case 5:return ye=Xe(Xe({},W),{authToken:{requestStatus:0}}),[4,dn(x.appConfig,ye)];case 6:ke.sent(),ke.label=7;case 7:throw _e;case 8:return[2]}})})}(x,Tt),Tt})];case 1:return ye=vt.sent(),se?[4,se]:[3,3];case 2:return ke=vt.sent(),[3,4];case 3:ke=ye.authToken,vt.label=4;case 4:return[2,ke]}})})}function st(x){return On(x,function(W){if(!tt(W))throw at.create("not-registered");return function(x){return 1===x.requestStatus&&x.requestTime+1e4<Date.now()}(W.authToken)?Xe(Xe({},W),{authToken:{requestStatus:0}}):W})}function tt(x){return void 0!==x&&2===x.registrationStatus}function jn(x){return te(this,void 0,void 0,function(){var W;return $e(this,function(se){switch(se.label){case 0:return[4,er(x)];case 1:return(W=se.sent().registrationPromise)?[4,W]:[3,3];case 2:se.sent(),se.label=3;case 3:return[2]}})})}function Bn(x,W){return te(this,void 0,void 0,function(){var se,ye,_e,ke;return $e(this,function(vt){switch(vt.label){case 0:return se=function(x,W){var se=W.fid;return St(x)+"/"+se}(x,W),ye=Nn(x,W),_e={method:"DELETE",headers:ye},[4,vr(function(){return fetch(se,_e)})];case 1:return(ke=vt.sent()).ok?[3,3]:[4,on("Delete Installation",ke)];case 2:throw vt.sent();case 3:return[2]}})})}function Ce(x){return at.create("missing-app-config-values",{valueName:x})}function J(x){x.INTERNAL.registerComponent(new Q.Component("installations",function(se){var ye=se.getProvider("app").getImmediate(),_e=function(x){var W,se;if(!x||!x.options)throw Ce("App Configuration");if(!x.name)throw Ce("App Name");try{for(var _e=mt(["projectId","apiKey","appId"]),ke=_e.next();!ke.done;ke=_e.next()){var vt=ke.value;if(!x.options[vt])throw Ce(vt)}}catch(ct){W={error:ct}}finally{try{ke&&!ke.done&&(se=_e.return)&&se.call(_e)}finally{if(W)throw W.error}}return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(ye),vt={appConfig:_e,platformLoggerProvider:se.getProvider("platform-logger")},ct={app:ye,getId:function(){return function(x){return te(this,void 0,void 0,function(){var W,se,ye;return $e(this,function(_e){switch(_e.label){case 0:return[4,er(x.appConfig)];case 1:return W=_e.sent(),se=W.installationEntry,(ye=W.registrationPromise)?ye.catch(console.error):Me(x).catch(console.error),[2,se.fid]}})})}(vt)},getToken:function(cn){return function(x,W){return void 0===W&&(W=!1),te(this,void 0,void 0,function(){return $e(this,function(ye){switch(ye.label){case 0:return[4,jn(x.appConfig)];case 1:return ye.sent(),[4,Me(x,W)];case 2:return[2,ye.sent().token]}})})}(vt,cn)},delete:function(){return function(x){return te(this,void 0,void 0,function(){var W,se;return $e(this,function(ye){switch(ye.label){case 0:return[4,On(W=x.appConfig,function(_e){if(!_e||0!==_e.registrationStatus)return _e})];case 1:if(!(se=ye.sent()))return[3,6];if(1!==se.registrationStatus)return[3,2];throw at.create("delete-pending-registration");case 2:if(2!==se.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw at.create("app-offline");case 3:return[4,Bn(W,se)];case 4:return ye.sent(),[4,Qn(W)];case 5:ye.sent(),ye.label=6;case 6:return[2]}})})}(vt)},onIdChange:function(cn){return function(x,W){var se=x.appConfig;return function(x,W){Fe();var se=Kn(x),ye=Pr.get(se);ye||(ye=new Set,Pr.set(se,ye)),ye.add(W)}(se,W),function(){!function(x,W){var se=Kn(x),ye=Pr.get(se);!ye||(ye.delete(W),0===ye.size&&Pr.delete(se),Ge())}(se,W)}}(vt,cn)}};return ct},"PUBLIC")),x.registerVersion("@firebase/installations",N)}J($.default)},433:(br,ot,lt)=>{"use strict";function $(){for(var Ze=0,Ae=0,mt=arguments.length;Ae<mt;Ae++)Ze+=arguments[Ae].length;var fn=Array(Ze),Dt=0;for(Ae=0;Ae<mt;Ae++)for(var Re=arguments[Ae],it=0,ze=Re.length;it<ze;it++,Dt++)fn[Dt]=Re[it];return fn}lt.r(ot),lt.d(ot,{LogLevel:()=>kt,Logger:()=>ge,setLogLevel:()=>te,setUserLogHandler:()=>$e});var Q,Z=[],kt=(()=>{return(Ze=kt||(kt={}))[Ze.DEBUG=0]="DEBUG",Ze[Ze.VERBOSE=1]="VERBOSE",Ze[Ze.INFO=2]="INFO",Ze[Ze.WARN=3]="WARN",Ze[Ze.ERROR=4]="ERROR",Ze[Ze.SILENT=5]="SILENT",kt;var Ze})(),Xe={debug:kt.DEBUG,verbose:kt.VERBOSE,info:kt.INFO,warn:kt.WARN,error:kt.ERROR,silent:kt.SILENT},In=kt.INFO,Ot=((Q={})[kt.DEBUG]="log",Q[kt.VERBOSE]="log",Q[kt.INFO]="info",Q[kt.WARN]="warn",Q[kt.ERROR]="error",Q),ln=function(Ze,Ae){for(var mt=[],fn=2;fn<arguments.length;fn++)mt[fn-2]=arguments[fn];if(!(Ae<Ze.logLevel)){var Dt=(new Date).toISOString(),Re=Ot[Ae];if(!Re)throw new Error("Attempted to log a message with an invalid logType (value: "+Ae+")");console[Re].apply(console,$(["["+Dt+"]  "+Ze.name+":"],mt))}},ge=function(){function Ze(Ae){this.name=Ae,this._logLevel=In,this._logHandler=ln,this._userLogHandler=null,Z.push(this)}return Object.defineProperty(Ze.prototype,"logLevel",{get:function(){return this._logLevel},set:function(Ae){if(!(Ae in kt))throw new TypeError('Invalid value "'+Ae+'" assigned to `logLevel`');this._logLevel=Ae},enumerable:!1,configurable:!0}),Ze.prototype.setLogLevel=function(Ae){this._logLevel="string"==typeof Ae?Xe[Ae]:Ae},Object.defineProperty(Ze.prototype,"logHandler",{get:function(){return this._logHandler},set:function(Ae){if("function"!=typeof Ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ae},enumerable:!1,configurable:!0}),Object.defineProperty(Ze.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(Ae){this._userLogHandler=Ae},enumerable:!1,configurable:!0}),Ze.prototype.debug=function(){for(var Ae=[],mt=0;mt<arguments.length;mt++)Ae[mt]=arguments[mt];this._userLogHandler&&this._userLogHandler.apply(this,$([this,kt.DEBUG],Ae)),this._logHandler.apply(this,$([this,kt.DEBUG],Ae))},Ze.prototype.log=function(){for(var Ae=[],mt=0;mt<arguments.length;mt++)Ae[mt]=arguments[mt];this._userLogHandler&&this._userLogHandler.apply(this,$([this,kt.VERBOSE],Ae)),this._logHandler.apply(this,$([this,kt.VERBOSE],Ae))},Ze.prototype.info=function(){for(var Ae=[],mt=0;mt<arguments.length;mt++)Ae[mt]=arguments[mt];this._userLogHandler&&this._userLogHandler.apply(this,$([this,kt.INFO],Ae)),this._logHandler.apply(this,$([this,kt.INFO],Ae))},Ze.prototype.warn=function(){for(var Ae=[],mt=0;mt<arguments.length;mt++)Ae[mt]=arguments[mt];this._userLogHandler&&this._userLogHandler.apply(this,$([this,kt.WARN],Ae)),this._logHandler.apply(this,$([this,kt.WARN],Ae))},Ze.prototype.error=function(){for(var Ae=[],mt=0;mt<arguments.length;mt++)Ae[mt]=arguments[mt];this._userLogHandler&&this._userLogHandler.apply(this,$([this,kt.ERROR],Ae)),this._logHandler.apply(this,$([this,kt.ERROR],Ae))},Ze}();function te(Ze){Z.forEach(function(Ae){Ae.setLogLevel(Ze)})}function $e(Ze,Ae){for(var mt=function(it){var ze=null;Ae&&Ae.level&&(ze=Xe[Ae.level]),it.userLogHandler=null===Ze?null:function(At,Nt){for(var _t=[],He=2;He<arguments.length;He++)_t[He-2]=arguments[He];var rt=_t.map(function(D){if(null==D)return null;if("string"==typeof D)return D;if("number"==typeof D||"boolean"==typeof D)return D.toString();if(D instanceof Error)return D.message;try{return JSON.stringify(D)}catch(C){return null}}).filter(function(D){return D}).join(" ");Nt>=(null!=ze?ze:At.logLevel)&&Ze({level:kt[Nt].toLowerCase(),message:rt,args:_t,type:At.name})}},fn=0,Dt=Z;fn<Dt.length;fn++)mt(Dt[fn])}},299:(br,ot,lt)=>{"use strict";lt.r(ot),lt(915);var Q=lt(544),Z=lt(488),In=function(){return In=Object.assign||function(fe){for(var me,Ce=1,J=arguments.length;Ce<J;Ce++)for(var x in me=arguments[Ce])Object.prototype.hasOwnProperty.call(me,x)&&(fe[x]=me[x]);return fe},In.apply(this,arguments)};function $e(pe,fe,me,Ce){return new(me||(me=Promise))(function(x,W){function se(ke){try{_e(Ce.next(ke))}catch(vt){W(vt)}}function ye(ke){try{_e(Ce.throw(ke))}catch(vt){W(vt)}}function _e(ke){ke.done?x(ke.value):function(x){return x instanceof me?x:new me(function(W){W(x)})}(ke.value).then(se,ye)}_e((Ce=Ce.apply(pe,fe||[])).next())})}function Ze(pe,fe){var Ce,J,x,W,me={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return W={next:se(0),throw:se(1),return:se(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W;function se(_e){return function(ke){return function(_e){if(Ce)throw new TypeError("Generator is already executing.");for(;me;)try{if(Ce=1,J&&(x=2&_e[0]?J.return:_e[0]?J.throw||((x=J.return)&&x.call(J),0):J.next)&&!(x=x.call(J,_e[1])).done)return x;switch(J=0,x&&(_e=[2&_e[0],x.value]),_e[0]){case 0:case 1:x=_e;break;case 4:return me.label++,{value:_e[1],done:!1};case 5:me.label++,J=_e[1],_e=[0];continue;case 7:_e=me.ops.pop(),me.trys.pop();continue;default:if(!(x=(x=me.trys).length>0&&x[x.length-1])&&(6===_e[0]||2===_e[0])){me=0;continue}if(3===_e[0]&&(!x||_e[1]>x[0]&&_e[1]<x[3])){me.label=_e[1];break}if(6===_e[0]&&me.label<x[1]){me.label=x[1],x=_e;break}if(x&&me.label<x[2]){me.label=x[2],me.ops.push(_e);break}x[2]&&me.ops.pop(),me.trys.pop();continue}_e=fe.call(pe,me)}catch(ke){_e=[6,ke],J=0}finally{Ce=x=0}if(5&_e[0])throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}([_e,ke])}}}function fn(pe){var fe="function"==typeof Symbol&&Symbol.iterator,me=fe&&pe[fe],Ce=0;if(me)return me.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&Ce>=pe.length&&(pe=void 0),{value:pe&&pe[Ce++],done:!pe}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dt(pe,fe){var me="function"==typeof Symbol&&pe[Symbol.iterator];if(!me)return pe;var J,W,Ce=me.call(pe),x=[];try{for(;(void 0===fe||fe-- >0)&&!(J=Ce.next()).done;)x.push(J.value)}catch(se){W={error:se}}finally{try{J&&!J.done&&(me=Ce.return)&&me.call(Ce)}finally{if(W)throw W.error}}return x}var N,k=lt(995),U=lt(2),ee=((N={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',N["only-available-in-window"]="This method is available in a Window context.",N["only-available-in-sw"]="This method is available in a service worker context.",N["permission-default"]="The notification permission was not granted and dismissed instead.",N["permission-blocked"]="The notification permission was not granted and blocked instead.",N["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",N["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",N["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",N["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",N["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",N["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",N["token-update-no-token"]="FCM returned no token when updating the user to push.",N["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",N["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",N["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",N["invalid-vapid-key"]="The public VAPID key must be a string.",N["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",N),ae=new Z.ErrorFactory("messaging","Messaging",ee),Pe="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Se="FCM_MSG",De="google.c.a.c_id",Wt=(()=>{return(pe=Wt||(Wt={})).PUSH_RECEIVED="push-received",pe.NOTIFICATION_CLICKED="notification-clicked",Wt;var pe})();function on(pe){var fe=new Uint8Array(pe),me=btoa(String.fromCharCode.apply(String,function(){for(var pe=[],fe=0;fe<arguments.length;fe++)pe=pe.concat(Dt(arguments[fe]));return pe}(fe)));return me.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nt(pe){for(var me=(pe+"=".repeat((4-pe.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ce=atob(me),J=new Uint8Array(Ce.length),x=0;x<Ce.length;++x)J[x]=Ce.charCodeAt(x);return J}var Nn="fcm_token_details_db",nn="fcm_token_object_Store";function Lt(pe){return $e(this,void 0,void 0,function(){var Ce,x=this;return Ze(this,function(W){switch(W.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!W.sent().map(function(se){return se.name}).includes(Nn))return[2,null];W.label=2;case 2:return Ce=null,[4,(0,k.openDb)(Nn,5,function(se){return $e(x,void 0,void 0,function(){var ye,_e,ke,vt;return Ze(this,function(ct){switch(ct.label){case 0:return se.oldVersion<2?[2]:se.objectStoreNames.contains(nn)?[4,(ye=se.transaction.objectStore(nn)).index("fcmSenderId").get(pe)]:[2];case 1:return _e=ct.sent(),[4,ye.clear()];case 2:if(ct.sent(),!_e)return[2];if(2===se.oldVersion){if(!(ke=_e).auth||!ke.p256dh||!ke.endpoint)return[2];Ce={token:ke.fcmToken,createTime:null!==(vt=ke.createTime)&&void 0!==vt?vt:Date.now(),subscriptionOptions:{auth:ke.auth,p256dh:ke.p256dh,endpoint:ke.endpoint,swScope:ke.swScope,vapidKey:"string"==typeof ke.vapidKey?ke.vapidKey:on(ke.vapidKey)}}}else(3===se.oldVersion||4===se.oldVersion)&&(Ce={token:(ke=_e).fcmToken,createTime:ke.createTime,subscriptionOptions:{auth:on(ke.auth),p256dh:on(ke.p256dh),endpoint:ke.endpoint,swScope:ke.swScope,vapidKey:on(ke.vapidKey)}});return[2]}})})})];case 3:return W.sent().close(),[4,(0,k.deleteDb)(Nn)];case 4:return W.sent(),[4,(0,k.deleteDb)("fcm_vapid_details_db")];case 5:return W.sent(),[4,(0,k.deleteDb)("undefined")];case 6:return W.sent(),[2,un(Ce)?Ce:null]}})})}function un(pe){if(!pe||!pe.subscriptionOptions)return!1;var fe=pe.subscriptionOptions;return"number"==typeof pe.createTime&&pe.createTime>0&&"string"==typeof pe.token&&pe.token.length>0&&"string"==typeof fe.auth&&fe.auth.length>0&&"string"==typeof fe.p256dh&&fe.p256dh.length>0&&"string"==typeof fe.endpoint&&fe.endpoint.length>0&&"string"==typeof fe.swScope&&fe.swScope.length>0&&"string"==typeof fe.vapidKey&&fe.vapidKey.length>0}var yn="firebase-messaging-store",Jn=null;function ir(){return Jn||(Jn=(0,k.openDb)("firebase-messaging-database",1,function(pe){0===pe.oldVersion&&pe.createObjectStore(yn)})),Jn}function Zn(pe){return $e(this,void 0,void 0,function(){var fe,Ce,J;return Ze(this,function(x){switch(x.label){case 0:return fe=or(pe),[4,ir()];case 1:return[4,x.sent().transaction(yn).objectStore(yn).get(fe)];case 2:return(Ce=x.sent())?[2,Ce]:[3,3];case 3:return[4,Lt(pe.appConfig.senderId)];case 4:return(J=x.sent())?[4,Kn(pe,J)]:[3,6];case 5:return x.sent(),[2,J];case 6:return[2]}})})}function Kn(pe,fe){return $e(this,void 0,void 0,function(){var me,Ce,J;return Ze(this,function(x){switch(x.label){case 0:return me=or(pe),[4,ir()];case 1:return Ce=x.sent(),[4,(J=Ce.transaction(yn,"readwrite")).objectStore(yn).put(fe,me)];case 2:return x.sent(),[4,J.complete];case 3:return x.sent(),[2,fe]}})})}function Pr(pe){return $e(this,void 0,void 0,function(){var fe,me,Ce;return Ze(this,function(J){switch(J.label){case 0:return fe=or(pe),[4,ir()];case 1:return me=J.sent(),[4,(Ce=me.transaction(yn,"readwrite")).objectStore(yn).delete(fe)];case 2:return J.sent(),[4,Ce.complete];case 3:return J.sent(),[2]}})})}function or(pe){return pe.appConfig.appId}function Rn(pe,fe){return $e(this,void 0,void 0,function(){var me,Ce,J,x,se;return Ze(this,function(_e){switch(_e.label){case 0:return[4,he(pe)];case 1:me=_e.sent(),Ce=Fe(fe),J={method:"POST",headers:me,body:JSON.stringify(Ce)},_e.label=2;case 2:return _e.trys.push([2,5,,6]),[4,fetch(je(pe.appConfig),J)];case 3:return[4,_e.sent().json()];case 4:return x=_e.sent(),[3,6];case 5:throw se=_e.sent(),ae.create("token-subscribe-failed",{errorInfo:se});case 6:if(x.error)throw ae.create("token-subscribe-failed",{errorInfo:x.error.message});if(!x.token)throw ae.create("token-subscribe-no-token");return[2,x.token]}})})}function _n(pe,fe){return $e(this,void 0,void 0,function(){var me,Ce,J,x,se;return Ze(this,function(_e){switch(_e.label){case 0:return[4,he(pe)];case 1:me=_e.sent(),Ce=Fe(fe.subscriptionOptions),J={method:"PATCH",headers:me,body:JSON.stringify(Ce)},_e.label=2;case 2:return _e.trys.push([2,5,,6]),[4,fetch(je(pe.appConfig)+"/"+fe.token,J)];case 3:return[4,_e.sent().json()];case 4:return x=_e.sent(),[3,6];case 5:throw se=_e.sent(),ae.create("token-update-failed",{errorInfo:se});case 6:if(x.error)throw ae.create("token-update-failed",{errorInfo:x.error.message});if(!x.token)throw ae.create("token-update-no-token");return[2,x.token]}})})}function Jr(pe,fe){return $e(this,void 0,void 0,function(){var me,Ce,x,se;return Ze(this,function(ye){switch(ye.label){case 0:return[4,he(pe)];case 1:me=ye.sent(),Ce={method:"DELETE",headers:me},ye.label=2;case 2:return ye.trys.push([2,5,,6]),[4,fetch(je(pe.appConfig)+"/"+fe,Ce)];case 3:return[4,ye.sent().json()];case 4:if((x=ye.sent()).error)throw ae.create("token-unsubscribe-failed",{errorInfo:x.error.message});return[3,6];case 5:throw se=ye.sent(),ae.create("token-unsubscribe-failed",{errorInfo:se});case 6:return[2]}})})}function je(pe){return"https://fcmregistrations.googleapis.com/v1/projects/"+pe.projectId+"/registrations"}function he(pe){var fe=pe.appConfig,me=pe.installations;return $e(this,void 0,void 0,function(){var Ce;return Ze(this,function(J){switch(J.label){case 0:return[4,me.getToken()];case 1:return Ce=J.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":fe.apiKey,"x-goog-firebase-installations-auth":"FIS "+Ce})]}})})}function Fe(pe){var J=pe.vapidKey,x={web:{endpoint:pe.endpoint,auth:pe.auth,p256dh:pe.p256dh}};return J!==Pe&&(x.web.applicationPubKey=J),x}function xe(pe,fe,me){return $e(this,void 0,void 0,function(){var Ce,J,x,W;return Ze(this,function(se){switch(se.label){case 0:if("granted"!==Notification.permission)throw ae.create("permission-blocked");return[4,$t(fe,me)];case 1:return Ce=se.sent(),[4,Zn(pe)];case 2:return J=se.sent(),x={vapidKey:me,swScope:fe.scope,endpoint:Ce.endpoint,auth:on(Ce.getKey("auth")),p256dh:on(Ce.getKey("p256dh"))},J?[3,3]:[2,Zt(pe,x)];case 3:if(function(pe,fe){return fe.vapidKey===pe.vapidKey&&fe.endpoint===pe.endpoint&&fe.auth===pe.auth&&fe.p256dh===pe.p256dh}(J.subscriptionOptions,x))return[3,8];se.label=4;case 4:return se.trys.push([4,6,,7]),[4,Jr(pe,J.token)];case 5:return se.sent(),[3,7];case 6:return W=se.sent(),console.warn(W),[3,7];case 7:return[2,Zt(pe,x)];case 8:return Date.now()>=J.createTime+6048e5?[2,Pt({token:J.token,createTime:Date.now(),subscriptionOptions:x},pe,fe)]:[2,J.token];case 9:return[2]}})})}function Ft(pe,fe){return $e(this,void 0,void 0,function(){var me,Ce;return Ze(this,function(J){switch(J.label){case 0:return[4,Zn(pe)];case 1:return(me=J.sent())?[4,Jr(pe,me.token)]:[3,4];case 2:return J.sent(),[4,Pr(pe)];case 3:J.sent(),J.label=4;case 4:return[4,fe.pushManager.getSubscription()];case 5:return(Ce=J.sent())?[2,Ce.unsubscribe()]:[2,!0]}})})}function Pt(pe,fe,me){return $e(this,void 0,void 0,function(){var Ce,J,x;return Ze(this,function(W){switch(W.label){case 0:return W.trys.push([0,3,,5]),[4,_n(fe,pe)];case 1:return Ce=W.sent(),J=In(In({},pe),{token:Ce,createTime:Date.now()}),[4,Kn(fe,J)];case 2:return W.sent(),[2,Ce];case 3:return x=W.sent(),[4,Ft(fe,me)];case 4:throw W.sent(),x;case 5:return[2]}})})}function Zt(pe,fe){return $e(this,void 0,void 0,function(){var me,Ce;return Ze(this,function(J){switch(J.label){case 0:return[4,Rn(pe,fe)];case 1:return me=J.sent(),Ce={token:me,createTime:Date.now(),subscriptionOptions:fe},[4,Kn(pe,Ce)];case 2:return J.sent(),[2,Ce.token]}})})}function $t(pe,fe){return $e(this,void 0,void 0,function(){var me;return Ze(this,function(Ce){switch(Ce.label){case 0:return[4,pe.pushManager.getSubscription()];case 1:return(me=Ce.sent())?[2,me]:[2,pe.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nt(fe)})]}})})}function Cr(pe){return"object"==typeof pe&&!!pe&&De in pe}function zn(pe){return new Promise(function(fe){setTimeout(fe,pe)})}var sr=function(){function pe(fe){var me=this;this.firebaseDependencies=fe,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(Ce){Ce.waitUntil(me.onPush(Ce))}),self.addEventListener("pushsubscriptionchange",function(Ce){Ce.waitUntil(me.onSubChange(Ce))}),self.addEventListener("notificationclick",function(Ce){Ce.waitUntil(me.onNotificationClick(Ce))})}return Object.defineProperty(pe.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),pe.prototype.setBackgroundMessageHandler=function(fe){if(this.isOnBackgroundMessageUsed=!1,!fe||"function"!=typeof fe)throw ae.create("invalid-bg-handler");this.bgMessageHandler=fe},pe.prototype.onBackgroundMessage=function(fe){var me=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=fe,function(){me.bgMessageHandler=null}},pe.prototype.getToken=function(){var fe,me;return $e(this,void 0,void 0,function(){var Ce;return Ze(this,function(J){switch(J.label){case 0:return this.vapidKey?[3,2]:[4,Zn(this.firebaseDependencies)];case 1:Ce=J.sent(),this.vapidKey=null!==(me=null===(fe=null==Ce?void 0:Ce.subscriptionOptions)||void 0===fe?void 0:fe.vapidKey)&&void 0!==me?me:Pe,J.label=2;case 2:return[2,xe(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},pe.prototype.deleteToken=function(){return Ft(this.firebaseDependencies,self.registration)},pe.prototype.requestPermission=function(){throw ae.create("only-available-in-window")},pe.prototype.usePublicVapidKey=function(fe){if(null!==this.vapidKey)throw ae.create("use-vapid-key-after-get-token");if("string"!=typeof fe||0===fe.length)throw ae.create("invalid-vapid-key");this.vapidKey=fe},pe.prototype.useServiceWorker=function(){throw ae.create("only-available-in-window")},pe.prototype.onMessage=function(){throw ae.create("only-available-in-window")},pe.prototype.onTokenRefresh=function(){throw ae.create("only-available-in-window")},pe.prototype.onPush=function(fe){return $e(this,void 0,void 0,function(){var me,Ce,J,x;return Ze(this,function(W){switch(W.label){case 0:return me=function(pe){var fe=pe.data;if(!fe)return null;try{return fe.json()}catch(me){return null}}(fe),me?[4,Me()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(pe){return pe.some(function(fe){return"visible"===fe.visibilityState&&!fe.url.startsWith("chrome-extension://")})}(Ce=W.sent())?[2,de(Ce,me)]:(J=!1,me.notification?[4,Be(Bi(me))]:[3,3]);case 2:W.sent(),J=!0,W.label=3;case 3:return!0===J&&!1===this.isOnBackgroundMessageUsed||this.bgMessageHandler&&(x=function(pe){var fe={from:pe.from,collapseKey:pe.collapse_key};return function(pe,fe){if(fe.notification){pe.notification={};var me=fe.notification.title;me&&(pe.notification.title=me);var Ce=fe.notification.body;Ce&&(pe.notification.body=Ce);var J=fe.notification.image;J&&(pe.notification.image=J)}}(fe,pe),function(pe,fe){!fe.data||(pe.data=fe.data)}(fe,pe),function(pe,fe){if(fe.fcmOptions){pe.fcmOptions={};var me=fe.fcmOptions.link;me&&(pe.fcmOptions.link=me);var Ce=fe.fcmOptions.analytics_label;Ce&&(pe.fcmOptions.analyticsLabel=Ce)}}(fe,pe),fe}(me),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(x):this.bgMessageHandler.next(x)),[2]}})})},pe.prototype.onSubChange=function(fe){var me,Ce;return $e(this,void 0,void 0,function(){var x;return Ze(this,function(W){switch(W.label){case 0:return fe.newSubscription?[3,2]:[4,Ft(this.firebaseDependencies,self.registration)];case 1:case 5:return W.sent(),[2];case 2:return[4,Zn(this.firebaseDependencies)];case 3:return x=W.sent(),[4,Ft(this.firebaseDependencies,self.registration)];case 4:return W.sent(),[4,xe(this.firebaseDependencies,self.registration,null!==(Ce=null===(me=null==x?void 0:x.subscriptionOptions)||void 0===me?void 0:me.vapidKey)&&void 0!==Ce?Ce:Pe)]}})})},pe.prototype.onNotificationClick=function(fe){var me,Ce;return $e(this,void 0,void 0,function(){var J,x,W,se,ye;return Ze(this,function(_e){switch(_e.label){case 0:return(J=null===(Ce=null===(me=fe.notification)||void 0===me?void 0:me.data)||void 0===Ce?void 0:Ce[Se])?fe.action?[2]:(fe.stopImmediatePropagation(),fe.notification.close(),x=function(pe){var fe,me,Ce;return(null!==(me=null===(fe=pe.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==me?me:null===(Ce=pe.notification)||void 0===Ce?void 0:Ce.click_action)||(Cr(pe.data)?self.location.origin:null)}(J),x?(W=new URL(x,self.location.href),se=new URL(self.location.origin),W.host!==se.host?[2]:[4,oi(W)]):[2]):[2];case 1:return(ye=_e.sent())?[3,4]:[4,self.clients.openWindow(x)];case 2:return ye=_e.sent(),[4,zn(3e3)];case 3:return _e.sent(),[3,6];case 4:return[4,ye.focus()];case 5:ye=_e.sent(),_e.label=6;case 6:return ye?(J.messageType=Wt.NOTIFICATION_CLICKED,J.isFirebaseMessaging=!0,[2,ye.postMessage(J)]):[2]}})})},pe}();function Bi(pe){var fe,me=In({},pe.notification);return me.data=((fe={})[Se]=pe,fe),me}function oi(pe){return $e(this,void 0,void 0,function(){var fe,me,Ce,J,x,W,se;return Ze(this,function(ye){switch(ye.label){case 0:return[4,Me()];case 1:fe=ye.sent();try{for(me=fn(fe),Ce=me.next();!Ce.done;Ce=me.next())if(J=Ce.value,x=new URL(J.url,self.location.href),pe.host===x.host)return[2,J]}catch(_e){W={error:_e}}finally{try{Ce&&!Ce.done&&(se=me.return)&&se.call(me)}finally{if(W)throw W.error}}return[2,null]}})})}function de(pe,fe){var me,Ce;fe.isFirebaseMessaging=!0,fe.messageType=Wt.PUSH_RECEIVED;try{for(var J=fn(pe),x=J.next();!x.done;x=J.next())x.value.postMessage(fe)}catch(se){me={error:se}}finally{try{x&&!x.done&&(Ce=J.return)&&Ce.call(J)}finally{if(me)throw me.error}}}function Me(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Be(pe){var fe,me=pe.actions,Ce=Notification.maxActions;return me&&Ce&&me.length>Ce&&console.warn("This browser only supports "+Ce+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(fe=pe.title)&&void 0!==fe?fe:"",pe)}var We=function(){function pe(fe){var me=this;this.firebaseDependencies=fe,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(Ce){return me.messageEventListener(Ce)})}return Object.defineProperty(pe.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),pe.prototype.messageEventListener=function(fe){return $e(this,void 0,void 0,function(){var me,Ce;return Ze(this,function(J){switch(J.label){case 0:return(me=fe.data).isFirebaseMessaging?(this.onMessageCallback&&me.messageType===Wt.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(pe){return delete pe.messageType,delete pe.isFirebaseMessaging,pe}(Object.assign({},me))):this.onMessageCallback.next(Object.assign({},me))),Cr(Ce=me.data)&&"1"===Ce["google.c.a.e"]?[4,this.logEvent(me.messageType,Ce)]:[3,2]):[2];case 1:J.sent(),J.label=2;case 2:return[2]}})})},pe.prototype.getVapidKey=function(){return this.vapidKey},pe.prototype.getSwReg=function(){return this.swRegistration},pe.prototype.getToken=function(fe){return $e(this,void 0,void 0,function(){return Ze(this,function(me){switch(me.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:me.sent(),me.label=2;case 2:if("granted"!==Notification.permission)throw ae.create("permission-blocked");return[4,this.updateVapidKey(null==fe?void 0:fe.vapidKey)];case 3:return me.sent(),[4,this.updateSwReg(null==fe?void 0:fe.serviceWorkerRegistration)];case 4:return me.sent(),[2,xe(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},pe.prototype.updateVapidKey=function(fe){return $e(this,void 0,void 0,function(){return Ze(this,function(me){return fe?this.vapidKey=fe:this.vapidKey||(this.vapidKey=Pe),[2]})})},pe.prototype.updateSwReg=function(fe){return $e(this,void 0,void 0,function(){return Ze(this,function(me){switch(me.label){case 0:return fe||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:me.sent(),me.label=2;case 2:if(!fe&&this.swRegistration)return[2];if(!(fe instanceof ServiceWorkerRegistration))throw ae.create("invalid-sw-registration");return this.swRegistration=fe,[2]}})})},pe.prototype.registerDefaultSw=function(){return $e(this,void 0,void 0,function(){var fe,me;return Ze(this,function(Ce){switch(Ce.label){case 0:return Ce.trys.push([0,2,,3]),fe=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return fe.swRegistration=Ce.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw me=Ce.sent(),ae.create("failed-service-worker-registration",{browserErrorMessage:me.message});case 3:return[2]}})})},pe.prototype.deleteToken=function(){return $e(this,void 0,void 0,function(){return Ze(this,function(fe){switch(fe.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:fe.sent(),fe.label=2;case 2:return[2,Ft(this.firebaseDependencies,this.swRegistration)]}})})},pe.prototype.requestPermission=function(){return $e(this,void 0,void 0,function(){var fe;return Ze(this,function(me){switch(me.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(fe=me.sent()))return[2];throw ae.create("denied"===fe?"permission-blocked":"permission-default")}})})},pe.prototype.usePublicVapidKey=function(fe){if(null!==this.vapidKey)throw ae.create("use-vapid-key-after-get-token");if("string"!=typeof fe||0===fe.length)throw ae.create("invalid-vapid-key");this.vapidKey=fe},pe.prototype.useServiceWorker=function(fe){if(!(fe instanceof ServiceWorkerRegistration))throw ae.create("invalid-sw-registration");if(this.swRegistration)throw ae.create("use-sw-after-get-token");this.swRegistration=fe},pe.prototype.onMessage=function(fe){var me=this;return this.onMessageCallback=fe,function(){me.onMessageCallback=null}},pe.prototype.setBackgroundMessageHandler=function(){throw ae.create("only-available-in-sw")},pe.prototype.onBackgroundMessage=function(){throw ae.create("only-available-in-sw")},pe.prototype.onTokenRefresh=function(){return function(){}},pe.prototype.logEvent=function(fe,me){return $e(this,void 0,void 0,function(){var Ce;return Ze(this,function(x){switch(x.label){case 0:return Ce=function(pe){switch(pe){case Wt.NOTIFICATION_CLICKED:return"notification_open";case Wt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(fe),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return x.sent().logEvent(Ce,{message_id:me[De],message_name:me["google.c.a.c_l"],message_time:me["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},pe}();function an(pe){return ae.create("missing-app-config-values",{valueName:pe})}var tr={isSupported:jn};function jn(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}U.default.INTERNAL.registerComponent(new Q.Component("messaging",function(pe){var fe=pe.getProvider("app").getImmediate(),me=function(pe){var fe,me;if(!pe||!pe.options)throw an("App Configuration Object");if(!pe.name)throw an("App Name");var J=pe.options;try{for(var x=fn(["projectId","apiKey","appId","messagingSenderId"]),W=x.next();!W.done;W=x.next()){var se=W.value;if(!J[se])throw an(se)}}catch(ye){fe={error:ye}}finally{try{W&&!W.done&&(me=x.return)&&me.call(x)}finally{if(fe)throw fe.error}}return{appName:pe.name,projectId:J.projectId,apiKey:J.apiKey,appId:J.appId,senderId:J.messagingSenderId}}(fe),x={app:fe,appConfig:me,installations:pe.getProvider("installations").getImmediate(),analyticsProvider:pe.getProvider("analytics-internal")};if(!jn())throw ae.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new sr(x):new We(x)},"PUBLIC").setServiceProps(tr))},560:(br,ot,lt)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var $=lt(2);lt(915);var Q=lt(9),Z=lt(488),kt=lt(433),Xe=lt(544);function In(J){return J&&"object"==typeof J&&"default"in J?J:{default:J}}var _t,Ot=In($),Ae="FB-PERF-TRACE-MEASURE",it="@firebase/performance/config",ze="@firebase/performance/configexpire",Nt="Performance",He=((_t={})["trace started"]="Trace {$traceName} was started before.",_t["trace stopped"]="Trace {$traceName} is not running.",_t["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",_t["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",_t["no window"]="Window is not available.",_t["no app id"]="App id is not available.",_t["no project id"]="Project id is not available.",_t["no api key"]="Api key is not available.",_t["invalid cc log"]="Attempted to queue invalid cc event",_t["FB not default"]="Performance can only start when Firebase app instance is the default one.",_t["RC response not ok"]="RC response is not ok",_t["invalid attribute name"]="Attribute name {$attributeName} is invalid.",_t["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",_t["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",_t["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",_t),rt=new Z.ErrorFactory("performance",Nt,He),D=new kt.Logger(Nt);D.logLevel=kt.LogLevel.INFO;var C,E,k=function(){function J(x){if(this.window=x,!x)throw rt.create("no window");this.performance=x.performance,this.PerformanceObserver=x.PerformanceObserver,this.windowLocation=x.location,this.navigator=x.navigator,this.document=x.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=x.localStorage),x.perfMetrics&&x.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=x.perfMetrics.onFirstInputDelay)}return J.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},J.prototype.mark=function(x){!this.performance||!this.performance.mark||this.performance.mark(x)},J.prototype.measure=function(x,W,se){!this.performance||!this.performance.measure||this.performance.measure(x,W,se)},J.prototype.getEntriesByType=function(x){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(x):[]},J.prototype.getEntriesByName=function(x){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(x):[]},J.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},J.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Z.isIndexedDBAvailable()||(D.info("IndexedDB is not supported by current browswer"),!1):(D.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},J.prototype.setupObserver=function(x,W){this.PerformanceObserver&&new this.PerformanceObserver(function(ye){for(var _e=0,ke=ye.getEntries();_e<ke.length;_e++)W(ke[_e])}).observe({entryTypes:[x]})},J.getInstance=function(){return void 0===C&&(C=new J(E)),C},J}();function N(J,x){var W=J.length-x.length;if(W<0||W>1)throw rt.create("invalid String merger input");for(var se=[],ye=0;ye<J.length;ye++)se.push(J.charAt(ye)),x.length>ye&&se.push(x.charAt(ye));return se.join("")}var ee,pt,ae=function(){function J(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=N("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=N("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return J.prototype.getAppId=function(){var x=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!x)throw rt.create("no app id");return x},J.prototype.getProjectId=function(){var x=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!x)throw rt.create("no project id");return x},J.prototype.getApiKey=function(){var x=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!x)throw rt.create("no api key");return x},J.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},J.getInstance=function(){return void 0===ee&&(ee=new J),ee},J}();function Pe(){return pt}var Se=(()=>{return(J=Se||(Se={}))[J.UNKNOWN=0]="UNKNOWN",J[J.VISIBLE=1]="VISIBLE",J[J.HIDDEN=2]="HIDDEN",Se;var J})(),De=["firebase_","google_","ga_"],Ve=new RegExp("^[a-zA-Z]\\w*$");function Wt(){switch(k.getInstance().document.visibilityState){case"visible":return Se.VISIBLE;case"hidden":return Se.HIDDEN;default:return Se.UNKNOWN}}function on(){var x=k.getInstance().navigator.connection;switch(x&&x.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var yn="Could not fetch config, will use default configs";function ir(J){if(!J)return J;var x=ae.getInstance(),W=J.entries||{};return x.loggingEnabled=void 0===W.fpr_enabled||"true"===String(W.fpr_enabled),W.fpr_log_source&&(x.logSource=Number(W.fpr_log_source)),W.fpr_log_endpoint_url&&(x.logEndPointUrl=W.fpr_log_endpoint_url),W.fpr_log_transport_key&&(x.transportKey=W.fpr_log_transport_key),void 0!==W.fpr_vc_network_request_sampling_rate&&(x.networkRequestsSamplingRate=Number(W.fpr_vc_network_request_sampling_rate)),void 0!==W.fpr_vc_trace_sampling_rate&&(x.tracesSamplingRate=Number(W.fpr_vc_trace_sampling_rate)),x.logTraceAfterSampling=Kn(x.tracesSamplingRate),x.logNetworkAfterSampling=Kn(x.networkRequestsSamplingRate),J}function Kn(J){return Math.random()<=J}var or,Pr=1;function Rn(){return Pr=2,or=or||(J=k.getInstance().document,new Promise(function(x){if(J&&"complete"!==J.readyState){var W=function(){"complete"===J.readyState&&(J.removeEventListener("readystatechange",W),x())};J.addEventListener("readystatechange",W)}else x()})).then(function(){return function(){var J=ae.getInstance().installationsService.getId();return J.then(function(x){pt=x}),J}()}).then(function(J){return function(J){var x=function(){var J=k.getInstance().localStorage;if(J){var x=J.getItem(ze);if(x&&function(J){return Number(J)>Date.now()}(x)){var W=J.getItem(it);if(W)try{return JSON.parse(W)}catch(ye){return}}}}();return x?(ir(x),Promise.resolve()):function(J){return function(){var J=ae.getInstance().installationsService.getToken();return J.then(function(x){}),J}().then(function(x){var se="https://firebaseremoteconfig.googleapis.com/v1/projects/"+ae.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+ae.getInstance().getApiKey(),ye=new Request(se,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+x},body:JSON.stringify({app_instance_id:J,app_instance_id_token:x,app_id:ae.getInstance().getAppId(),app_version:"0.4.2",sdk_version:"0.0.1"})});return fetch(ye).then(function(_e){if(_e.ok)return _e.json();throw rt.create("RC response not ok")})}).catch(function(){D.info(yn)})}(J).then(ir).then(function(W){return function(J){var x=k.getInstance().localStorage;!J||!x||(x.setItem(it,JSON.stringify(J)),x.setItem(ze,String(Date.now()+60*ae.getInstance().configTimeToLive*60*1e3)))}(W)},function(){})}(J)}).then(function(){return he()},function(){return he()}),or;var J}function he(){Pr=3}var zn,Ft=3,Pt=[],Zt=!1;function dn(J){setTimeout(function(){if(0!==Ft){if(!Pt.length)return dn(1e4);!function(){var J=Q.__spreadArrays(Pt);Pt=[];var x=J.map(function(se){return{source_extension_json_proto3:se.message,event_time_ms:String(se.eventTime)}});(function(J,x){return function(J){var x=ae.getInstance().getFlTransportFullUrl();return fetch(x,{method:"POST",body:JSON.stringify(J)})}(J).then(function(W){return W.ok||D.info("Call to Firebase backend failed."),W.json()}).then(function(W){var se=Number(W.nextRequestWaitMillis),ye=1e4;isNaN(se)||(ye=Math.max(se,ye));var _e=W.logResponseDetails;Array.isArray(_e)&&_e.length>0&&"RETRY_REQUEST_LATER"===_e[0].responseAction&&(Pt=Q.__spreadArrays(x,Pt),D.info("Retry transport request later.")),Ft=3,dn(ye)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:ae.getInstance().logSource,log_event:x},J).catch(function(){Pt=Q.__spreadArrays(J,Pt),Ft--,D.info("Tries left: "+Ft+"."),dn(1e4)})}()}},J)}function Cn(J){if(!J.eventTime||!J.message)throw rt.create("invalid cc log");Pt=Q.__spreadArrays(Pt,[J])}function sr(J,x){zn||(zn=function(J){return function(){for(var x=[],W=0;W<arguments.length;W++)x[W]=arguments[W];Cn({message:J.apply(void 0,x),eventTime:Date.now()})}}(Ti)),zn(J,x)}function Bi(J){var x=ae.getInstance();!x.instrumentationEnabled&&J.isAuto||!x.dataCollectionEnabled&&!J.isAuto||!k.getInstance().requiredApisAvailable()||J.isAuto&&Wt()!==Se.VISIBLE||(3===Pr?Zr(J):Rn().then(function(){return Zr(J)},function(){return Zr(J)}))}function Zr(J){if(Pe()){var x=ae.getInstance();!x.loggingEnabled||!x.logTraceAfterSampling||setTimeout(function(){return sr(J,1)},0)}}function Ti(J,x){return 0===x?function(J){var x={url:J.url,http_method:J.httpMethod||0,http_response_code:200,response_payload_bytes:J.responsePayloadBytes,client_start_time_us:J.startTimeUs,time_to_response_initiated_us:J.timeToResponseInitiatedUs,time_to_response_completed_us:J.timeToResponseCompletedUs},W={application_info:Be(),network_request_metric:x};return JSON.stringify(W)}(J):function(J){var x={name:J.name,is_auto:J.isAuto,client_start_time_us:J.startTimeUs,duration_us:J.durationUs};0!==Object.keys(J.counters).length&&(x.counters=J.counters);var W=J.getAttributes();0!==Object.keys(W).length&&(x.custom_attributes=W);var se={application_info:Be(),trace_metric:x};return JSON.stringify(se)}(J)}function Be(){return{google_app_id:ae.getInstance().getAppId(),app_instance_id:Pe(),web_app_info:{sdk_version:"0.4.2",page_url:k.getInstance().getUrl(),service_worker_status:(J=k.getInstance().navigator,"serviceWorker"in J?J.serviceWorker.controller?2:3:1),visibility_state:Wt(),effective_connection_type:on()},application_process_state:0};var J}var tt=["_fp","_fcp","_fid"],an=function(){function J(x,W,se){void 0===W&&(W=!1),this.name=x,this.isAuto=W,this.state=1,this.customAttributes={},this.counters={},this.api=k.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=se||Ae+"-"+this.randomId+"-"+this.name,se&&this.calculateTraceMetrics())}return J.prototype.start=function(){if(1!==this.state)throw rt.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},J.prototype.stop=function(){if(2!==this.state)throw rt.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Bi(this)},J.prototype.record=function(x,W,se){if(x<=0)throw rt.create("nonpositive trace startTime",{traceName:this.name});if(W<=0)throw rt.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*W),this.startTimeUs=Math.floor(1e3*x),se&&se.attributes&&(this.customAttributes=Q.__assign({},se.attributes)),se&&se.metrics)for(var ye=0,_e=Object.keys(se.metrics);ye<_e.length;ye++){var ke=_e[ye];isNaN(Number(se.metrics[ke]))||(this.counters[ke]=Number(Math.floor(se.metrics[ke])))}Bi(this)},J.prototype.incrementMetric=function(x,W){void 0===W&&(W=1),this.putMetric(x,void 0===this.counters[x]?W:this.counters[x]+W)},J.prototype.putMetric=function(x,W){if(!function(J,x){return!(0===J.length||J.length>100)&&(x&&x.startsWith("_wt_")&&tt.indexOf(J)>-1||!J.startsWith("_"))}(x,this.name))throw rt.create("invalid custom metric name",{customMetricName:x});this.counters[x]=function(J){var x=Math.floor(J);return x<J&&D.info("Metric value should be an Integer, setting the value as : "+x+"."),x}(W)},J.prototype.getMetric=function(x){return this.counters[x]||0},J.prototype.putAttribute=function(x,W){var se=function(J){return!(0===J.length||J.length>40||De.some(function(W){return J.startsWith(W)})||!J.match(Ve))}(x),ye=function(J){return 0!==J.length&&J.length<=100}(W);if(se&&ye)this.customAttributes[x]=W;else{if(!se)throw rt.create("invalid attribute name",{attributeName:x});if(!ye)throw rt.create("invalid attribute value",{attributeValue:W})}},J.prototype.getAttribute=function(x){return this.customAttributes[x]},J.prototype.removeAttribute=function(x){void 0!==this.customAttributes[x]&&delete this.customAttributes[x]},J.prototype.getAttributes=function(){return Q.__assign({},this.customAttributes)},J.prototype.setStartTime=function(x){this.startTimeUs=x},J.prototype.setDuration=function(x){this.durationUs=x},J.prototype.calculateTraceMetrics=function(){var x=this.api.getEntriesByName(this.traceMeasure),W=x&&x[0];W&&(this.durationUs=Math.floor(1e3*W.duration),this.startTimeUs=Math.floor(1e3*(W.startTime+this.api.getTimeOrigin())))},J.createOobTrace=function(x,W,se){var ye=k.getInstance().getUrl();if(ye){var _e=new J("_wt_"+ye,!0),ke=Math.floor(1e3*k.getInstance().getTimeOrigin());if(_e.setStartTime(ke),x&&x[0]&&(_e.setDuration(Math.floor(1e3*x[0].duration)),_e.putMetric("domInteractive",Math.floor(1e3*x[0].domInteractive)),_e.putMetric("domContentLoadedEventEnd",Math.floor(1e3*x[0].domContentLoadedEventEnd)),_e.putMetric("loadEventEnd",Math.floor(1e3*x[0].loadEventEnd))),W){var cn=W.find(function(Bt){return"first-paint"===Bt.name});cn&&cn.startTime&&_e.putMetric("_fp",Math.floor(1e3*cn.startTime));var Tt=W.find(function(Bt){return"first-contentful-paint"===Bt.name});Tt&&Tt.startTime&&_e.putMetric("_fcp",Math.floor(1e3*Tt.startTime)),se&&_e.putMetric("_fid",Math.floor(1e3*se))}Bi(_e)}},J.createUserTimingTrace=function(x){Bi(new J(x,!1,x))},J}();function wt(J){var x=J;if(x&&void 0!==x.responseStart){var W=k.getInstance().getTimeOrigin(),se=Math.floor(1e3*(x.startTime+W)),ye=x.responseStart?Math.floor(1e3*(x.responseStart-x.startTime)):void 0,_e=Math.floor(1e3*(x.responseEnd-x.startTime));!function(J){var x=ae.getInstance();if(x.instrumentationEnabled){var W=J.url,se=x.logEndPointUrl.split("?")[0],ye=x.flTransportEndpointUrl.split("?")[0];W===se||W===ye||!x.loggingEnabled||!x.logNetworkAfterSampling||setTimeout(function(){return sr(J,0)},0)}}({url:x.name&&x.name.split("?")[0],responsePayloadBytes:x.transferSize,startTimeUs:se,timeToResponseInitiatedUs:ye,timeToResponseCompletedUs:_e})}}function tr(){!Pe()||(setTimeout(function(){return function(){var J=k.getInstance(),x=J.getEntriesByType("navigation"),W=J.getEntriesByType("paint");if(J.onFirstInputDelay){var se=setTimeout(function(){an.createOobTrace(x,W),se=void 0},5e3);J.onFirstInputDelay(function(ye){se&&(clearTimeout(se),an.createOobTrace(x,W,ye))})}else an.createOobTrace(x,W)}()},0),setTimeout(function(){return function(){for(var J=k.getInstance(),W=0,se=J.getEntriesByType("resource");W<se.length;W++)wt(se[W]);J.setupObserver("resource",wt)}()},0),setTimeout(function(){return function(){for(var J=k.getInstance(),W=0,se=J.getEntriesByType("measure");W<se.length;W++)pe(se[W]);J.setupObserver("measure",pe)}()},0))}function pe(J){var x=J.name;x.substring(0,Ae.length)!==Ae&&an.createUserTimingTrace(x)}var fe=function(){function J(x){this.app=x,k.getInstance().requiredApisAvailable()&&Z.validateIndexedDBOpenable().then(function(W){W&&(Zt||(dn(5500),Zt=!0),Rn().then(tr,tr))}).catch(function(W){D.info("Environment doesn't support IndexedDB: "+W)})}return J.prototype.trace=function(x){return new an(x)},Object.defineProperty(J.prototype,"instrumentationEnabled",{get:function(){return ae.getInstance().instrumentationEnabled},set:function(x){ae.getInstance().instrumentationEnabled=x},enumerable:!1,configurable:!0}),Object.defineProperty(J.prototype,"dataCollectionEnabled",{get:function(){return ae.getInstance().dataCollectionEnabled},set:function(x){ae.getInstance().dataCollectionEnabled=x},enumerable:!1,configurable:!0}),J}();function Ce(J){J.INTERNAL.registerComponent(new Xe.Component("performance",function(W){return function(W,se){if("[DEFAULT]"!==W.name)throw rt.create("FB not default");if("undefined"==typeof window)throw rt.create("no window");return function(J){E=J}(window),ae.getInstance().firebaseAppInstance=W,ae.getInstance().installationsService=se,new fe(W)}(W.getProvider("app").getImmediate(),W.getProvider("installations").getImmediate())},"PUBLIC")),J.registerVersion("@firebase/performance","0.4.2")}Ce(Ot.default),ot.registerPerformance=Ce},665:(br,ot,lt)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var $=lt(2);lt(915);var Q=lt(698),Z=lt(488),kt=lt(433),Xe=lt(544);function In(De){return De&&"object"==typeof De&&"default"in De?De:{default:De}}var ge,Ot=In($),ln=function(){function De(Ve,at,Gt,St){this.client=Ve,this.storage=at,this.storageCache=Gt,this.logger=St}return De.prototype.isCachedDataFresh=function(Ve,at){if(!at)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var Gt=Date.now()-at,St=Gt<=Ve;return this.logger.debug("Config fetch cache check. Cache age millis: "+Gt+". Cache max age millis (minimumFetchIntervalMillis setting): "+Ve+". Is cache hit: "+St+"."),St},De.prototype.fetch=function(Ve){return Q.__awaiter(this,void 0,void 0,function(){var at,Gt,St,Wt,on;return Q.__generator(this,function(nt){switch(nt.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return at=nt.sent(),Gt=at[0],(St=at[1])&&this.isCachedDataFresh(Ve.cacheMaxAgeMillis,Gt)?[2,St]:(Ve.eTag=St&&St.eTag,[4,this.client.fetch(Ve)]);case 2:return Wt=nt.sent(),on=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===Wt.status&&on.push(this.storage.setLastSuccessfulFetchResponse(Wt)),[4,Promise.all(on)];case 3:return nt.sent(),[2,Wt]}})})},De}(),te=((ge={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",ge["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",ge["registration-api-key"]="Undefined API key. Check Firebase app initialization.",ge["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",ge["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",ge["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",ge["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",ge["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",ge["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",ge["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',ge["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',ge["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",ge["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",ge),$e=new Z.ErrorFactory("remoteconfig","Remote Config",te);function Ae(De){return void 0===De&&(De=navigator),De.languages&&De.languages[0]||De.language}var mt=function(){function De(Ve,at,Gt,St,Wt,on){this.firebaseInstallations=Ve,this.sdkVersion=at,this.namespace=Gt,this.projectId=St,this.apiKey=Wt,this.appId=on}return De.prototype.fetch=function(Ve){return Q.__awaiter(this,void 0,void 0,function(){var at,Wt,on,nt,Nn,vr,nn,Lt,un,vn,Vt,yn,Jn,ir,Zn,Kn,Pr;return Q.__generator(this,function(or){switch(or.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:at=or.sent(),Wt=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",on=Wt+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Ve.eTag||"*"},Nn={sdk_version:this.sdkVersion,app_instance_id:at[0],app_instance_id_token:at[1],app_id:this.appId,language_code:Ae()},vr={method:"POST",headers:nt,body:JSON.stringify(Nn)},nn=fetch(on,vr),Lt=new Promise(function(Rn,_n){Ve.signal.addEventListener(function(){var Jr=new Error("The operation was aborted.");Jr.name="AbortError",_n(Jr)})}),or.label=2;case 2:return or.trys.push([2,5,,6]),[4,Promise.race([nn,Lt])];case 3:return or.sent(),[4,nn];case 4:return un=or.sent(),[3,6];case 5:throw vn=or.sent(),Vt="fetch-client-network","AbortError"===vn.name&&(Vt="fetch-timeout"),$e.create(Vt,{originalErrorMessage:vn.message});case 6:if(yn=un.status,Jn=un.headers.get("ETag")||void 0,200!==un.status)return[3,11];Kn=void 0,or.label=7;case 7:return or.trys.push([7,9,,10]),[4,un.json()];case 8:return Kn=or.sent(),[3,10];case 9:throw Pr=or.sent(),$e.create("fetch-client-parse",{originalErrorMessage:Pr.message});case 10:ir=Kn.entries,Zn=Kn.state,or.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===Zn?yn=500:"NO_CHANGE"===Zn?yn=304:("NO_TEMPLATE"===Zn||"EMPTY_CONFIG"===Zn)&&(ir={}),304!==yn&&200!==yn)throw $e.create("fetch-status",{httpStatus:yn});return[2,{status:yn,eTag:Jn,config:ir}]}})})},De}(),fn=function(){function De(){this.listeners=[]}return De.prototype.addEventListener=function(Ve){this.listeners.push(Ve)},De.prototype.abort=function(){this.listeners.forEach(function(Ve){return Ve()})},De}(),ze=["1","true","t","yes","y","on"],At=function(){function De(Ve,at){void 0===at&&(at=""),this._source=Ve,this._value=at}return De.prototype.asString=function(){return this._value},De.prototype.asBoolean=function(){return"static"!==this._source&&ze.indexOf(this._value.toLowerCase())>=0},De.prototype.asNumber=function(){if("static"===this._source)return 0;var Ve=Number(this._value);return isNaN(Ve)&&(Ve=0),Ve},De.prototype.getSource=function(){return this._source},De}(),He=function(){function De(Ve,at,Gt,St,Wt){this.app=Ve,this._client=at,this._storageCache=Gt,this._storage=St,this._logger=Wt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return De.prototype.setLogLevel=function(Ve){switch(Ve){case"debug":this._logger.logLevel=kt.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=kt.LogLevel.SILENT;break;default:this._logger.logLevel=kt.LogLevel.ERROR}},Object.defineProperty(De.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(De.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),De.prototype.activate=function(){return Q.__awaiter(this,void 0,void 0,function(){var Ve,at,Gt;return Q.__generator(this,function(St){switch(St.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return Ve=St.sent(),Gt=Ve[1],(at=Ve[0])&&at.config&&at.eTag&&at.eTag!==Gt?[4,Promise.all([this._storageCache.setActiveConfig(at.config),this._storage.setActiveConfigEtag(at.eTag)])]:[2,!1];case 2:return St.sent(),[2,!0]}})})},De.prototype.ensureInitialized=function(){var Ve=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){Ve._isInitializationComplete=!0})),this._initializePromise},De.prototype.fetch=function(){return Q.__awaiter(this,void 0,void 0,function(){var Ve,at,Gt,St=this;return Q.__generator(this,function(Wt){switch(Wt.label){case 0:Ve=new fn,setTimeout(function(){return Q.__awaiter(St,void 0,void 0,function(){return Q.__generator(this,function(on){return Ve.abort(),[2]})})},this.settings.fetchTimeoutMillis),Wt.label=1;case 1:return Wt.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:Ve})];case 2:return Wt.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return Wt.sent(),[3,6];case 4:return at=Wt.sent(),Gt=function(De,Ve){return De instanceof Z.FirebaseError&&-1!==De.code.indexOf("fetch-throttle")}(at)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(Gt)];case 5:throw Wt.sent(),at;case 6:return[2]}})})},De.prototype.fetchAndActivate=function(){return Q.__awaiter(this,void 0,void 0,function(){return Q.__generator(this,function(Ve){switch(Ve.label){case 0:return[4,this.fetch()];case 1:return Ve.sent(),[2,this.activate()]}})})},De.prototype.getAll=function(){var Ve=this;return function(De,Ve){return void 0===De&&(De={}),void 0===Ve&&(Ve={}),Object.keys(Q.__assign(Q.__assign({},De),Ve))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(at,Gt){return at[Gt]=Ve.getValue(Gt),at},{})},De.prototype.getBoolean=function(Ve){return this.getValue(Ve).asBoolean()},De.prototype.getNumber=function(Ve){return this.getValue(Ve).asNumber()},De.prototype.getString=function(Ve){return this.getValue(Ve).asString()},De.prototype.getValue=function(Ve){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+Ve+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var at=this._storageCache.getActiveConfig();return at&&void 0!==at[Ve]?new At("remote",at[Ve]):this.defaultConfig&&void 0!==this.defaultConfig[Ve]?new At("default",String(this.defaultConfig[Ve])):(this._logger.debug('Returning static value for key "'+Ve+'". Define a default or remote value if this is unintentional.'),new At("static"))},De}();function D(De,Ve){var at=De.target.error||void 0;return $e.create(Ve,{originalErrorMessage:at&&at.message})}var C="app_namespace_store",N=function(){function De(Ve,at,Gt,St){void 0===St&&(St=new Promise(function(De,Ve){var at=indexedDB.open("firebase_remote_config",1);at.onerror=function(Gt){Ve(D(Gt,"storage-open"))},at.onsuccess=function(Gt){De(Gt.target.result)},at.onupgradeneeded=function(Gt){0===Gt.oldVersion&&Gt.target.result.createObjectStore(C,{keyPath:"compositeKey"})}})),this.appId=Ve,this.appName=at,this.namespace=Gt,this.openDbPromise=St}return De.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},De.prototype.setLastFetchStatus=function(Ve){return this.set("last_fetch_status",Ve)},De.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},De.prototype.setLastSuccessfulFetchTimestampMillis=function(Ve){return this.set("last_successful_fetch_timestamp_millis",Ve)},De.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},De.prototype.setLastSuccessfulFetchResponse=function(Ve){return this.set("last_successful_fetch_response",Ve)},De.prototype.getActiveConfig=function(){return this.get("active_config")},De.prototype.setActiveConfig=function(Ve){return this.set("active_config",Ve)},De.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},De.prototype.setActiveConfigEtag=function(Ve){return this.set("active_config_etag",Ve)},De.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},De.prototype.setThrottleMetadata=function(Ve){return this.set("throttle_metadata",Ve)},De.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},De.prototype.get=function(Ve){return Q.__awaiter(this,void 0,void 0,function(){var at,Gt=this;return Q.__generator(this,function(St){switch(St.label){case 0:return[4,this.openDbPromise];case 1:return at=St.sent(),[2,new Promise(function(Wt,on){var Nn=at.transaction([C],"readonly").objectStore(C),vr=Gt.createCompositeKey(Ve);try{var nn=Nn.get(vr);nn.onerror=function(Lt){on(D(Lt,"storage-get"))},nn.onsuccess=function(Lt){var un=Lt.target.result;Wt(un?un.value:void 0)}}catch(Lt){on($e.create("storage-get",{originalErrorMessage:Lt&&Lt.message}))}})]}})})},De.prototype.set=function(Ve,at){return Q.__awaiter(this,void 0,void 0,function(){var Gt,St=this;return Q.__generator(this,function(Wt){switch(Wt.label){case 0:return[4,this.openDbPromise];case 1:return Gt=Wt.sent(),[2,new Promise(function(on,nt){var vr=Gt.transaction([C],"readwrite").objectStore(C),nn=St.createCompositeKey(Ve);try{var Lt=vr.put({compositeKey:nn,value:at});Lt.onerror=function(un){nt(D(un,"storage-set"))},Lt.onsuccess=function(){on()}}catch(un){nt($e.create("storage-set",{originalErrorMessage:un&&un.message}))}})]}})})},De.prototype.delete=function(Ve){return Q.__awaiter(this,void 0,void 0,function(){var at,Gt=this;return Q.__generator(this,function(St){switch(St.label){case 0:return[4,this.openDbPromise];case 1:return at=St.sent(),[2,new Promise(function(Wt,on){var Nn=at.transaction([C],"readwrite").objectStore(C),vr=Gt.createCompositeKey(Ve);try{var nn=Nn.delete(vr);nn.onerror=function(Lt){on(D(Lt,"storage-delete"))},nn.onsuccess=function(){Wt()}}catch(Lt){on($e.create("storage-delete",{originalErrorMessage:Lt&&Lt.message}))}})]}})})},De.prototype.createCompositeKey=function(Ve){return[this.appId,this.appName,this.namespace,Ve].join()},De}(),ee=function(){function De(Ve){this.storage=Ve}return De.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},De.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},De.prototype.getActiveConfig=function(){return this.activeConfig},De.prototype.loadFromStorage=function(){return Q.__awaiter(this,void 0,void 0,function(){var Ve,at,Gt,St,Wt,on;return Q.__generator(this,function(nt){switch(nt.label){case 0:return Ve=this.storage.getLastFetchStatus(),at=this.storage.getLastSuccessfulFetchTimestampMillis(),Gt=this.storage.getActiveConfig(),[4,Ve];case 1:return(St=nt.sent())&&(this.lastFetchStatus=St),[4,at];case 2:return(Wt=nt.sent())&&(this.lastSuccessfulFetchTimestampMillis=Wt),[4,Gt];case 3:return(on=nt.sent())&&(this.activeConfig=on),[2]}})})},De.prototype.setLastFetchStatus=function(Ve){return this.lastFetchStatus=Ve,this.storage.setLastFetchStatus(Ve)},De.prototype.setLastSuccessfulFetchTimestampMillis=function(Ve){return this.lastSuccessfulFetchTimestampMillis=Ve,this.storage.setLastSuccessfulFetchTimestampMillis(Ve)},De.prototype.setActiveConfig=function(Ve){return this.activeConfig=Ve,this.storage.setActiveConfig(Ve)},De}();function ae(De,Ve){return new Promise(function(at,Gt){var St=Math.max(Ve-Date.now(),0),Wt=setTimeout(at,St);De.addEventListener(function(){clearTimeout(Wt),Gt($e.create("fetch-throttle",{throttleEndTimeMillis:Ve}))})})}var re=function(){function De(Ve,at){this.client=Ve,this.storage=at}return De.prototype.fetch=function(Ve){return Q.__awaiter(this,void 0,void 0,function(){var at;return Q.__generator(this,function(Gt){switch(Gt.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return at=Gt.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(Ve,at)]}})})},De.prototype.attemptFetch=function(Ve,at){var Gt=at.throttleEndTimeMillis,St=at.backoffCount;return Q.__awaiter(this,void 0,void 0,function(){var Wt,on,nt;return Q.__generator(this,function(Nn){switch(Nn.label){case 0:return[4,ae(Ve.signal,Gt)];case 1:Nn.sent(),Nn.label=2;case 2:return Nn.trys.push([2,5,,7]),[4,this.client.fetch(Ve)];case 3:return Wt=Nn.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return Nn.sent(),[2,Wt];case 5:if(!function(De){if(!(De instanceof Z.FirebaseError))return!1;var Ve=Number(De.httpStatus);return 429===Ve||500===Ve||503===Ve||504===Ve}(on=Nn.sent()))throw on;return nt={throttleEndTimeMillis:Date.now()+Z.calculateBackoffMillis(St),backoffCount:St+1},[4,this.storage.setThrottleMetadata(nt)];case 6:return Nn.sent(),[2,this.attemptFetch(Ve,nt)];case 7:return[2]}})})},De}(),Pe="@firebase/remote-config";function Se(De){De.INTERNAL.registerComponent(new Xe.Component("remoteConfig",function(at,Gt){var St=at.getProvider("app").getImmediate(),Wt=at.getProvider("installations").getImmediate();if("undefined"==typeof window)throw $e.create("registration-window");var on=St.options,nt=on.projectId,Nn=on.apiKey,vr=on.appId;if(!nt)throw $e.create("registration-project-id");if(!Nn)throw $e.create("registration-api-key");if(!vr)throw $e.create("registration-app-id");var nn=new N(vr,St.name,Gt=Gt||"firebase"),Lt=new ee(nn),un=new kt.Logger(Pe);un.logLevel=kt.LogLevel.ERROR;var vn=new mt(Wt,De.SDK_VERSION,Gt,nt,Nn,vr),Vt=new re(vn,nn),yn=new ln(Vt,nn,Lt,un),Jn=new He(St,yn,Lt,nn,un);return Jn.ensureInitialized(),Jn},"PUBLIC").setMultipleInstances(!0)),De.registerVersion(Pe,"0.1.28")}Se(Ot.default),ot.registerRemoteConfig=Se},314:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{registerStorage:()=>si});var $=lt(2);function ge(j,L,K,le){return new(K||(K=Promise))(function(Ne,Qe){function yt(qt){try{xt(le.next(qt))}catch(sn){Qe(sn)}}function ft(qt){try{xt(le.throw(qt))}catch(sn){Qe(sn)}}function xt(qt){qt.done?Ne(qt.value):function(Ne){return Ne instanceof K?Ne:new K(function(Qe){Qe(Ne)})}(qt.value).then(yt,ft)}xt((le=le.apply(j,L||[])).next())})}function te(j,L){var le,we,Ne,Qe,K={label:0,sent:function(){if(1&Ne[0])throw Ne[1];return Ne[1]},trys:[],ops:[]};return Qe={next:yt(0),throw:yt(1),return:yt(2)},"function"==typeof Symbol&&(Qe[Symbol.iterator]=function(){return this}),Qe;function yt(xt){return function(qt){return function(xt){if(le)throw new TypeError("Generator is already executing.");for(;K;)try{if(le=1,we&&(Ne=2&xt[0]?we.return:xt[0]?we.throw||((Ne=we.return)&&Ne.call(we),0):we.next)&&!(Ne=Ne.call(we,xt[1])).done)return Ne;switch(we=0,Ne&&(xt=[2&xt[0],Ne.value]),xt[0]){case 0:case 1:Ne=xt;break;case 4:return K.label++,{value:xt[1],done:!1};case 5:K.label++,we=xt[1],xt=[0];continue;case 7:xt=K.ops.pop(),K.trys.pop();continue;default:if(!(Ne=(Ne=K.trys).length>0&&Ne[Ne.length-1])&&(6===xt[0]||2===xt[0])){K=0;continue}if(3===xt[0]&&(!Ne||xt[1]>Ne[0]&&xt[1]<Ne[3])){K.label=xt[1];break}if(6===xt[0]&&K.label<Ne[1]){K.label=Ne[1],Ne=xt;break}if(Ne&&K.label<Ne[2]){K.label=Ne[2],K.ops.push(xt);break}Ne[2]&&K.ops.pop(),K.trys.pop();continue}xt=L.call(j,K)}catch(qt){xt=[6,qt],we=0}finally{le=Ne=0}if(5&xt[0])throw xt[1];return{value:xt[0]?xt[1]:void 0,done:!0}}([xt,qt])}}}function Dt(){for(var j=0,L=0,K=arguments.length;L<K;L++)j+=arguments[L].length;var le=Array(j),we=0;for(L=0;L<K;L++)for(var Ne=arguments[L],Qe=0,yt=Ne.length;Qe<yt;Qe++,we++)le[we]=Ne[Qe];return le}var C=lt(544),E="firebasestorage.googleapis.com",ee=function(){function j(L,K){this.code_=pt(L),this.message_="Firebase Storage: "+K,this.serverResponse_=null,this.name_="FirebaseError"}return j.prototype.codeProp=function(){return this.code},j.prototype.codeEquals=function(L){return pt(L)===this.codeProp()},j.prototype.serverResponseProp=function(){return this.serverResponse_},j.prototype.setServerResponseProp=function(L){this.serverResponse_=L},Object.defineProperty(j.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),j}();function pt(j){return"storage/"+j}function re(){return new ee("unknown","An unknown error occurred, please check the error payload for server response.")}function at(){return new ee("canceled","User canceled the upload/download.")}function Wt(){return new ee("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function nt(){return new ee("no-download-url","The given file does not have any download URLs.")}function Nn(j,L,K){return new ee("invalid-argument","Invalid argument in `"+L+"` at index "+j+": "+K)}function nn(){return new ee("app-deleted","The Firebase app was deleted.")}function un(j,L){return new ee("invalid-format","String does not match format '"+j+"': "+L)}function vn(j){throw new ee("internal-error","Internal error: "+j)}var Vt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function yn(j){switch(j){case Vt.RAW:case Vt.BASE64:case Vt.BASE64URL:case Vt.DATA_URL:return;default:throw"Expected one of the event types: ["+Vt.RAW+", "+Vt.BASE64+", "+Vt.BASE64URL+", "+Vt.DATA_URL+"]."}}var Jn=function(L,K){this.data=L,this.contentType=K||null};function ir(j,L){switch(j){case Vt.RAW:return new Jn(Zn(L));case Vt.BASE64:case Vt.BASE64URL:return new Jn(Pr(j,L));case Vt.DATA_URL:return new Jn(function(j){var L=new or(j);return L.base64?Pr(Vt.BASE64,L.rest):function(j){var L;try{L=decodeURIComponent(j)}catch(K){throw un(Vt.DATA_URL,"Malformed data URL.")}return Zn(L)}(L.rest)}(L),function(j){return new or(j).contentType}(L))}throw re()}function Zn(j){for(var L=[],K=0;K<j.length;K++){var le=j.charCodeAt(K);if(le<=127)L.push(le);else if(le<=2047)L.push(192|le>>6,128|63&le);else if(55296==(64512&le))if(K<j.length-1&&56320==(64512&j.charCodeAt(K+1))){var Ne=le,Qe=j.charCodeAt(++K);L.push(240|(le=65536|(1023&Ne)<<10|1023&Qe)>>18,128|le>>12&63,128|le>>6&63,128|63&le)}else L.push(239,191,189);else 56320==(64512&le)?L.push(239,191,189):L.push(224|le>>12,128|le>>6&63,128|63&le)}return new Uint8Array(L)}function Pr(j,L){switch(j){case Vt.BASE64:var K=-1!==L.indexOf("-"),le=-1!==L.indexOf("_");if(K||le)throw un(j,"Invalid character '"+(K?"-":"_")+"' found: is it base64url encoded?");break;case Vt.BASE64URL:var Ne=-1!==L.indexOf("+"),Qe=-1!==L.indexOf("/");if(Ne||Qe)throw un(j,"Invalid character '"+(Ne?"+":"/")+"' found: is it base64 encoded?");L=L.replace(/-/g,"+").replace(/_/g,"/")}var yt;try{yt=atob(L)}catch(qt){throw un(j,"Invalid character found")}for(var ft=new Uint8Array(yt.length),xt=0;xt<yt.length;xt++)ft[xt]=yt.charCodeAt(xt);return ft}var or=function(L){this.base64=!1,this.contentType=null;var K=L.match(/^data:([^,]+)?,/);if(null===K)throw un(Vt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var le=K[1]||null;null!=le&&(this.base64=function(j,L){return j.length>=L.length&&j.substring(j.length-L.length)===L}(le,";base64"),this.contentType=this.base64?le.substring(0,le.length-";base64".length):le),this.rest=L.substring(L.indexOf(",")+1)},je={STATE_CHANGED:"state_changed"},Fe={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ge(j){switch(j){case"running":case"pausing":case"canceling":return Fe.RUNNING;case"paused":return Fe.PAUSED;case"success":return Fe.SUCCESS;case"canceled":return Fe.CANCELED;default:return Fe.ERROR}}function xe(j){return null!=j}function Ft(j){return void 0!==j}function Pt(j){return"function"==typeof j}function Zt(j){return"object"==typeof j}function $t(j){return Zt(j)&&null!==j}function Qn(j){return"string"==typeof j||j instanceof String}function On(j){return er(j)&&Number.isInteger(j)}function er(j){return"number"==typeof j||j instanceof Number}function Cn(j){return Cr()&&j instanceof Blob}function Cr(){return"undefined"!=typeof Blob}var zn=(()=>{return(j=zn||(zn={}))[j.NO_ERROR=0]="NO_ERROR",j[j.NETWORK_ERROR=1]="NETWORK_ERROR",j[j.ABORT=2]="ABORT",zn;var j})(),sr=function(){function j(){var L=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=zn.NO_ERROR,this.sendPromise_=new Promise(function(K){L.xhr_.addEventListener("abort",function(){L.errorCode_=zn.ABORT,K(L)}),L.xhr_.addEventListener("error",function(){L.errorCode_=zn.NETWORK_ERROR,K(L)}),L.xhr_.addEventListener("load",function(){K(L)})})}return j.prototype.send=function(L,K,le,we){if(this.sent_)throw vn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(K,L,!0),xe(we))for(var Ne in we)we.hasOwnProperty(Ne)&&this.xhr_.setRequestHeader(Ne,we[Ne].toString());return xe(le)?this.xhr_.send(le):this.xhr_.send(),this.sendPromise_},j.prototype.getErrorCode=function(){if(!this.sent_)throw vn("cannot .getErrorCode() before sending");return this.errorCode_},j.prototype.getStatus=function(){if(!this.sent_)throw vn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(L){return-1}},j.prototype.getResponseText=function(){if(!this.sent_)throw vn("cannot .getResponseText() before sending");return this.xhr_.responseText},j.prototype.abort=function(){this.xhr_.abort()},j.prototype.getResponseHeader=function(L){return this.xhr_.getResponseHeader(L)},j.prototype.addUploadProgressListener=function(L){xe(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",L)},j.prototype.removeUploadProgressListener=function(L){xe(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",L)},j}(),Bi=function(){function j(){}return j.prototype.createXhrIo=function(){return new sr},j}();function Zr(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function oi(){for(var j=[],L=0;L<arguments.length;L++)j[L]=arguments[L];var K=Zr();if(void 0!==K){for(var le=new K,we=0;we<j.length;we++)le.append(j[we]);return le.getBlob()}if(Cr())return new Blob(j);throw Error("This browser doesn't seem to support creating Blobs")}var de=function(){function j(L,K){var le=0,we="";Cn(L)?(this.data_=L,le=L.size,we=L.type):L instanceof ArrayBuffer?(K?this.data_=new Uint8Array(L):(this.data_=new Uint8Array(L.byteLength),this.data_.set(new Uint8Array(L))),le=this.data_.length):L instanceof Uint8Array&&(K?this.data_=L:(this.data_=new Uint8Array(L.length),this.data_.set(L)),le=L.length),this.size_=le,this.type_=we}return j.prototype.size=function(){return this.size_},j.prototype.type=function(){return this.type_},j.prototype.slice=function(L,K){if(Cn(this.data_)){var we=function(j,L,K){return j.webkitSlice?j.webkitSlice(L,K):j.mozSlice?j.mozSlice(L,K):j.slice?j.slice(L,K):null}(this.data_,L,K);return null===we?null:new j(we)}return new j(new Uint8Array(this.data_.buffer,L,K-L),!0)},j.getBlob=function(){for(var L=[],K=0;K<arguments.length;K++)L[K]=arguments[K];if(Cr()){var le=L.map(function(ft){return ft instanceof j?ft.data_:ft});return new j(oi.apply(null,le))}var we=L.map(function(ft){return Qn(ft)?ir(Vt.RAW,ft).data:ft.data_}),Ne=0;we.forEach(function(ft){Ne+=ft.byteLength});var Qe=new Uint8Array(Ne),yt=0;return we.forEach(function(ft){for(var xt=0;xt<ft.length;xt++)Qe[yt++]=ft[xt]}),new j(Qe,!0)},j.prototype.uploadData=function(){return this.data_},j}(),Me=function(){function j(L,K){this.bucket=L,this.path_=K}return Object.defineProperty(j.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),j.prototype.fullServerUrl=function(){var L=encodeURIComponent;return"/b/"+L(this.bucket)+"/o/"+L(this.path)},j.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},j.makeFromBucketSpec=function(L){var K;try{K=j.makeFromUrl(L)}catch(le){return new j(L,"")}if(""===K.path)return K;throw function(j){return new ee("invalid-default-bucket","Invalid default bucket '"+j+"'.")}(L)},j.makeFromUrl=function(L){var K=null,le="([A-Za-z0-9.\\-_]+)",Qe=new RegExp("^gs://"+le+"(/(.*))?$","i");function ft(Pi){Pi.path_=decodeURIComponent(Pi.path)}for(var qt=E.replace(/[.]/g,"\\."),Nr=[{regex:Qe,indices:{bucket:1,path:3},postModify:function(Pi){"/"===Pi.path.charAt(Pi.path.length-1)&&(Pi.path_=Pi.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+qt+"/v[A-Za-z0-9_]+/b/"+le+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:ft},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+le+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:ft}],nr=0;nr<Nr.length;nr++){var $r=Nr[nr],hi=$r.regex.exec(L);if(hi){var Gr=hi[$r.indices.path];Gr||(Gr=""),K=new j(hi[$r.indices.bucket],Gr),$r.postModify(K);break}}if(null==K)throw function(j){return new ee("invalid-url","Invalid URL '"+j+"'.")}(L);return K},j}();function Be(j){var L;try{L=JSON.parse(j)}catch(K){return null}return function(j){return Zt(j)&&!Array.isArray(j)}(L)?L:null}function We(j,L){var K=L.split("/").filter(function(le){return le.length>0}).join("/");return 0===j.length?K:j+"/"+K}function tt(j){var L=j.lastIndexOf("/",j.length-2);return-1===L?j:j.slice(L+1)}function It(j){return"https://"+E+"/v0"+j}function Ut(j){var L=encodeURIComponent,K="?";for(var le in j)j.hasOwnProperty(le)&&(K=K+(L(le)+"=")+L(j[le])+"&");return K.slice(0,-1)}function an(j,L){return L}var wt=function(L,K,le,we){this.server=L,this.local=K||L,this.writable=!!le,this.xform=we||an},rn=null;function pe(j,L,K){var le=Be(L);return null===le?null:function(j,L,K){for(var le={type:"file"},we=K.length,Ne=0;Ne<we;Ne++){var Qe=K[Ne];le[Qe.local]=Qe.xform(le,L[Qe.server])}return function(j,L){Object.defineProperty(j,"ref",{get:function(){var Ne=new Me(j.bucket,j.fullPath);return L.makeStorageReference(Ne)}})}(le,j),le}(j,le,K)}function me(j,L){for(var K={},le=L.length,we=0;we<le;we++){var Ne=L[we];Ne.writable&&(K[Ne.server]=j[Ne.local])}return JSON.stringify(K)}function Ce(j){if(!Zt(j)||!j)throw"Expected Metadata object.";for(var L in j)if(j.hasOwnProperty(L)){var K=j[L];if("customMetadata"===L){if(!Zt(K))throw"Expected object for 'customMetadata' mapping."}else if($t(K))throw"Mapping for '"+L+"' cannot be an object."}}var J="maxResults",W="pageToken",se="prefixes";function vt(j){if(!Zt(j)||!j)throw"Expected ListOptions object.";for(var L in j)if(L===J){if(!On(j[J])||j[J]<=0)throw"Expected maxResults to be a positive number.";if(j[J]>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if(L!==W)throw"Unknown option: "+L;if(j[W]&&!Qn(j[W]))throw"Expected pageToken to be string."}}var ct=function(L,K,le,we){this.url=L,this.method=K,this.handler=le,this.timeout=we,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function cn(j){if(!j)throw re()}function Tt(j,L){return function(le,we){var Ne=pe(j,we,L);return cn(null!==Ne),Ne}}function xn(j){return function(K,le){var we;return we=401===K.getStatus()?new ee("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===K.getStatus()?function(j){return new ee("quota-exceeded","Quota for bucket '"+j+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(j.bucket):403===K.getStatus()?function(j){return new ee("unauthorized","User does not have permission to access '"+j+"'.")}(j.path):le,we.setServerResponseProp(le.serverResponseProp()),we}}function pn(j){var L=xn(j);return function(le,we){var Ne=L(le,we);return 404===le.getStatus()&&(Ne=function(j){return new ee("object-not-found","Object '"+j+"' does not exist.")}(j.path)),Ne.setServerResponseProp(we.serverResponseProp()),Ne}}function bn(j,L,K){var we=It(L.fullServerUrl()),Qe=j.maxOperationRetryTime,yt=new ct(we,"GET",Tt(j,K),Qe);return yt.errorHandler=pn(L),yt}function xs(j,L,K,le,we){var Ne={};Ne.prefix=L.isRoot?"":L.path+"/",K&&K.length>0&&(Ne.delimiter=K),le&&(Ne.pageToken=le),we&&(Ne.maxResults=we);var yt=It(L.bucketOnlyServerUrl()),xt=j.maxOperationRetryTime,qt=new ct(yt,"GET",function(j,L){return function(le,we){var Ne=function(j,L,K){var le=Be(K);return null===le?null:function(j,L,K){var le={prefixes:[],items:[],nextPageToken:K.nextPageToken};if(K[se])for(var we=0,Ne=K[se];we<Ne.length;we++){var yt=Ne[we].replace(/\/$/,""),ft=j.makeStorageReference(new Me(L,yt));le.prefixes.push(ft)}if(K.items)for(var xt=0,qt=K.items;xt<qt.length;xt++)ft=j.makeStorageReference(new Me(L,qt[xt].name)),le.items.push(ft);return le}(j,L,le)}(j,L,we);return cn(null!==Ne),Ne}}(j,L.bucket),xt);return qt.urlParams=Ne,qt.errorHandler=xn(L),qt}function Lr(j,L,K){var we=It(L.fullServerUrl()),Qe=j.maxOperationRetryTime,yt=new ct(we,"GET",function(j,L){return function(le,we){var Ne=pe(j,we,L);return cn(null!==Ne),function(j,L){var K=Be(L);if(null===K||!Qn(K.downloadTokens))return null;var le=K.downloadTokens;if(0===le.length)return null;var we=encodeURIComponent;return le.split(",").map(function(yt){var xt=j.fullPath;return It("/b/"+we(j.bucket)+"/o/"+we(xt))+Ut({alt:"media",token:yt})})[0]}(Ne,we)}}(j,K),Qe);return yt.errorHandler=pn(L),yt}function $o(j,L,K,le){var Ne=It(L.fullServerUrl()),yt=me(K,le),xt=j.maxOperationRetryTime,qt=new ct(Ne,"PATCH",Tt(j,le),xt);return qt.headers={"Content-Type":"application/json; charset=utf-8"},qt.body=yt,qt.errorHandler=pn(L),qt}function $i(j,L){var le=It(L.fullServerUrl()),yt=new ct(le,"DELETE",function(ft,xt){},j.maxOperationRetryTime);return yt.successCodes=[200,204],yt.errorHandler=pn(L),yt}function pi(j,L,K){var le=Object.assign({},K);return le.fullPath=j.path,le.size=L.size(),le.contentType||(le.contentType=function(j,L){return L&&L.type()||"application/octet-stream"}(0,L)),le}var Lo=function(L,K,le,we){this.current=L,this.total=K,this.finalized=!!le,this.metadata=we||null};function Ko(j,L){var K=null;try{K=j.getResponseHeader("X-Goog-Upload-Status")}catch(we){cn(!1)}return cn(!!K&&-1!==(L||["active"]).indexOf(K)),K}var po=function(L,K,le){if(Pt(L)||xe(K)||xe(le))this.next=L,this.error=K||null,this.complete=le||null;else{var Ne=L;this.next=Ne.next||null,this.error=Ne.error||null,this.complete=Ne.complete||null}},Hi=function(L,K,le,we,Ne,Qe){this.bytesTransferred=L,this.totalBytes=K,this.state=le,this.metadata=we,this.task=Ne,this.ref=Qe};function ei(j,L,K){for(var le=L.length,we=L.length,Ne=0;Ne<L.length;Ne++)if(L[Ne].optional){le=Ne;break}if(!(le<=K.length&&K.length<=we))throw function(j,L,K,le){var we,Ne;return j===L?(we=j,Ne=1===j?"argument":"arguments"):(we="between "+j+" and "+L,Ne="arguments"),new ee("invalid-argument-count","Invalid argument count in `"+K+"`: Expected "+we+" "+Ne+", received "+le+".")}(le,we,j,K.length);for(Ne=0;Ne<K.length;Ne++)try{L[Ne].validator(K[Ne])}catch(ft){throw ft instanceof Error?Nn(Ne,j,ft.message):Nn(Ne,j,ft)}}var Oi=function(L,K){var le=this;this.validator=function(we){le.optional&&!Ft(we)||L(we)},this.optional=!!K};function Di(j,L){function K(we){if(!Qn(we))throw"Expected string."}var le;return le=j?function(j,L){return function(K){j(K),L(K)}}(K,j):K,new Oi(le,L)}function Yo(){return new Oi(function(L){if(!(L instanceof Uint8Array||L instanceof ArrayBuffer||Cr()&&L instanceof Blob))throw"Expected Blob or File."})}function Ir(j){return new Oi(Ce,j)}function io(j){return new Oi(vt,j)}function bs(){return new Oi(function(L){if(!(er(L)&&L>=0))throw"Expected a number 0 or greater."})}function Fr(j,L){return new Oi(function(le){if(!(null===le||xe(le)&&le instanceof Object))throw"Expected an Object.";null!=j&&j(le)},L)}function jt(j){return new Oi(function(K){if(null!==K&&!Pt(K))throw"Expected a Function."},j)}function kn(j){return function(){for(var L=[],K=0;K<arguments.length;K++)L[K]=arguments[K];Promise.resolve().then(function(){return j.apply(void 0,L)})}}var Ws=function(){function j(L,K,le,we,Ne,Qe){var yt=this;void 0===Qe&&(Qe=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=L,this.service_=K,this.location_=le,this.blob_=Ne,this.metadata_=Qe,this.mappings_=we,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(ft){yt.request_=null,yt.chunkMultiplier_=1,ft.codeEquals("canceled")?(yt.needToFetchStatus_=!0,yt.completeTransitions_()):(yt.error_=ft,yt.transition_("error"))},this.metadataErrorHandler_=function(ft){yt.request_=null,ft.codeEquals("canceled")?yt.completeTransitions_():(yt.error_=ft,yt.transition_("error"))},this.promise_=new Promise(function(ft,xt){yt.resolve_=ft,yt.reject_=xt,yt.start_()}),this.promise_.then(null,function(){})}return j.prototype.makeProgressCallback_=function(){var L=this,K=this.transferred_;return function(le){return L.updateProgress_(K+le)}},j.prototype.shouldDoResumable_=function(L){return L.size()>262144},j.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},j.prototype.resolveToken_=function(L){var K=this;this.service_.getAuthToken().then(function(le){switch(K.state_){case"running":L(le);break;case"canceling":K.transition_("canceled");break;case"pausing":K.transition_("paused")}})},j.prototype.createResumable_=function(){var L=this;this.resolveToken_(function(K){var le=function(j,L,K,le,we){var Ne=L.bucketOnlyServerUrl(),Qe=pi(L,le,we),yt={name:Qe.fullPath},ft=It(Ne),qt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":le.size(),"X-Goog-Upload-Header-Content-Type":Qe.contentType,"Content-Type":"application/json; charset=utf-8"},sn=me(Qe,K),Vn=new ct(ft,"POST",function(wn){var lr;Ko(wn);try{lr=wn.getResponseHeader("X-Goog-Upload-URL")}catch(gi){cn(!1)}return cn(Qn(lr)),lr},j.maxUploadRetryTime);return Vn.urlParams=yt,Vn.headers=qt,Vn.body=sn,Vn.errorHandler=xn(L),Vn}(L.service_,L.location_,L.mappings_,L.blob_,L.metadata_),we=L.service_.makeRequest(le,K);L.request_=we,we.getPromise().then(function(Ne){L.request_=null,L.uploadUrl_=Ne,L.needToFetchStatus_=!1,L.completeTransitions_()},L.errorHandler_)})},j.prototype.fetchStatus_=function(){var L=this,K=this.uploadUrl_;this.resolveToken_(function(le){var we=function(j,L,K,le){var ft=new ct(K,"POST",function(xt){var qt=Ko(xt,["active","final"]),sn=null;try{sn=xt.getResponseHeader("X-Goog-Upload-Size-Received")}catch(jr){cn(!1)}sn||cn(!1);var mn=Number(sn);return cn(!isNaN(mn)),new Lo(mn,le.size(),"final"===qt)},j.maxUploadRetryTime);return ft.headers={"X-Goog-Upload-Command":"query"},ft.errorHandler=xn(L),ft}(L.service_,L.location_,K,L.blob_),Ne=L.service_.makeRequest(we,le);L.request_=Ne,Ne.getPromise().then(function(Qe){Qe=Qe,L.request_=null,L.updateProgress_(Qe.current),L.needToFetchStatus_=!1,Qe.finalized&&(L.needToFetchMetadata_=!0),L.completeTransitions_()},L.errorHandler_)})},j.prototype.continueUpload_=function(){var L=this,K=262144*this.chunkMultiplier_,le=new Lo(this.transferred_,this.blob_.size()),we=this.uploadUrl_;this.resolveToken_(function(Ne){var Qe;try{Qe=function(j,L,K,le,we,Ne,Qe,yt){var ft=new Lo(0,0);if(Qe?(ft.current=Qe.current,ft.total=Qe.total):(ft.current=0,ft.total=le.size()),le.size()!==ft.total)throw new ee("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var xt=ft.total-ft.current,qt=xt;we>0&&(qt=Math.min(qt,we));var sn=ft.current,Vn={"X-Goog-Upload-Command":qt===xt?"upload, finalize":"upload","X-Goog-Upload-Offset":ft.current},wn=le.slice(sn,sn+qt);if(null===wn)throw Wt();var nr=new ct(K,"POST",function($r,hi){var fs,Fo=Ko($r,["active","final"]),Gr=ft.current+qt,Pi=le.size();return fs="final"===Fo?Tt(L,Ne)($r,hi):null,new Lo(Gr,Pi,"final"===Fo,fs)},L.maxUploadRetryTime);return nr.headers=Vn,nr.body=wn.uploadData(),nr.progressCallback=yt||null,nr.errorHandler=xn(j),nr}(L.location_,L.service_,we,L.blob_,K,L.mappings_,le,L.makeProgressCallback_())}catch(ft){return L.error_=ft,void L.transition_("error")}var yt=L.service_.makeRequest(Qe,Ne);L.request_=yt,yt.getPromise().then(function(ft){L.increaseMultiplier_(),L.request_=null,L.updateProgress_(ft.current),ft.finalized?(L.metadata_=ft.metadata,L.transition_("success")):L.completeTransitions_()},L.errorHandler_)})},j.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},j.prototype.fetchMetadata_=function(){var L=this;this.resolveToken_(function(K){var le=bn(L.service_,L.location_,L.mappings_),we=L.service_.makeRequest(le,K);L.request_=we,we.getPromise().then(function(Ne){L.request_=null,L.metadata_=Ne,L.transition_("success")},L.metadataErrorHandler_)})},j.prototype.oneShotUpload_=function(){var L=this;this.resolveToken_(function(K){var le=function(j,L,K,le,we){var Ne=L.bucketOnlyServerUrl(),Qe={"X-Goog-Upload-Protocol":"multipart"},ft=function(){for(var nr="",$r=0;$r<2;$r++)nr+=Math.random().toString().slice(2);return nr}();Qe["Content-Type"]="multipart/related; boundary="+ft;var xt=pi(L,le,we),qt=me(xt,K),jr=de.getBlob("--"+ft+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qt+"\r\n--"+ft+"\r\nContent-Type: "+xt.contentType+"\r\n\r\n",le,"\r\n--"+ft+"--");if(null===jr)throw Wt();var Vn={name:xt.fullPath},wn=It(Ne),gi=j.maxUploadRetryTime,Nr=new ct(wn,"POST",Tt(j,K),gi);return Nr.urlParams=Vn,Nr.headers=Qe,Nr.body=jr.uploadData(),Nr.errorHandler=xn(L),Nr}(L.service_,L.location_,L.mappings_,L.blob_,L.metadata_),we=L.service_.makeRequest(le,K);L.request_=we,we.getPromise().then(function(Ne){L.request_=null,L.metadata_=Ne,L.updateProgress_(L.blob_.size()),L.transition_("success")},L.errorHandler_)})},j.prototype.updateProgress_=function(L){var K=this.transferred_;this.transferred_=L,this.transferred_!==K&&this.notifyObservers_()},j.prototype.transition_=function(L){if(this.state_!==L)switch(L){case"canceling":case"pausing":this.state_=L,null!==this.request_&&this.request_.cancel();break;case"running":var K="paused"===this.state_;this.state_=L,K&&(this.notifyObservers_(),this.start_());break;case"paused":case"error":case"success":this.state_=L,this.notifyObservers_();break;case"canceled":this.error_=at(),this.state_=L,this.notifyObservers_()}},j.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(j.prototype,"snapshot",{get:function(){var L=Ge(this.state_);return new Hi(this.transferred_,this.blob_.size(),L,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),j.prototype.on=function(L,K,le,we){function Ne(){if(L!==je.STATE_CHANGED)throw"Expected one of the event types: ["+je.STATE_CHANGED+"]."}var Qe="Expected a function or an Object with one of `next`, `error`, `complete` properties.",yt=jt(!0).validator,ft=Fr(null,!0).validator;function xt(lr){try{return void yt(lr)}catch(Nr){}try{if(ft(lr),!(Ft(lr.next)||Ft(lr.error)||Ft(lr.complete)))throw"";return}catch(Nr){throw Qe}}var qt=[Di(Ne),Fr(xt,!0),jt(!0),jt(!0)];ei("on",qt,arguments);var sn=this;function mn(lr){return function(Nr,nr,$r){null!==lr&&ei("on",lr,arguments);var hi=new po(Nr,nr,we);return sn.addObserver_(hi),function(){sn.removeObserver_(hi)}}}function jr(lr){if(null===lr)throw Qe;xt(lr)}var Vn=[Fr(jr),jt(!0),jt(!0)],wn=!(Ft(K)||Ft(le)||Ft(we));return wn?mn(Vn):mn(null)(K,le,we)},j.prototype.then=function(L,K){return this.promise_.then(L,K)},j.prototype.catch=function(L){return this.then(null,L)},j.prototype.addObserver_=function(L){this.observers_.push(L),this.notifyObserver_(L)},j.prototype.removeObserver_=function(L){var K=this.observers_.indexOf(L);-1!==K&&this.observers_.splice(K,1)},j.prototype.notifyObservers_=function(){var L=this;this.finishPromise_(),this.observers_.slice().forEach(function(le){L.notifyObserver_(le)})},j.prototype.finishPromise_=function(){if(null!==this.resolve_){var L=!0;switch(Ge(this.state_)){case Fe.SUCCESS:kn(this.resolve_.bind(null,this.snapshot))();break;case Fe.CANCELED:case Fe.ERROR:kn(this.reject_.bind(null,this.error_))();break;default:L=!1}L&&(this.resolve_=null,this.reject_=null)}},j.prototype.notifyObserver_=function(L){switch(Ge(this.state_)){case Fe.RUNNING:case Fe.PAUSED:L.next&&kn(L.next.bind(L,this.snapshot))();break;case Fe.SUCCESS:L.complete&&kn(L.complete.bind(L))();break;default:L.error&&kn(L.error.bind(L,this.error_))()}},j.prototype.resume=function(){ei("resume",[],arguments);var L="paused"===this.state_||"pausing"===this.state_;return L&&this.transition_("running"),L},j.prototype.pause=function(){ei("pause",[],arguments);var L="running"===this.state_;return L&&this.transition_("pausing"),L},j.prototype.cancel=function(){ei("cancel",[],arguments);var L="running"===this.state_||"pausing"===this.state_;return L&&this.transition_("canceling"),L},j}(),Xo=function(){function j(L,K){this.service=L,this.location=K instanceof Me?K:Me.makeFromUrl(K)}return j.prototype.toString=function(){return ei("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},j.prototype.newRef=function(L,K){return new j(L,K)},j.prototype.mappings=function(){return function(){if(rn)return rn;var j=[];j.push(new wt("bucket")),j.push(new wt("generation")),j.push(new wt("metageneration")),j.push(new wt("name","fullPath",!0));var K=new wt("name");K.xform=function(Ne,Qe){return function(j){return!Qn(j)||j.length<2?j:tt(j)}(Qe)},j.push(K);var we=new wt("size");return we.xform=function(Ne,Qe){return xe(Qe)?Number(Qe):Qe},j.push(we),j.push(new wt("timeCreated")),j.push(new wt("updated")),j.push(new wt("md5Hash",null,!0)),j.push(new wt("cacheControl",null,!0)),j.push(new wt("contentDisposition",null,!0)),j.push(new wt("contentEncoding",null,!0)),j.push(new wt("contentLanguage",null,!0)),j.push(new wt("contentType",null,!0)),j.push(new wt("metadata","customMetadata",!0)),rn=j}()},j.prototype.child=function(L){ei("child",[Di()],arguments);var K=We(this.location.path,L),le=new Me(this.location.bucket,K);return this.newRef(this.service,le)},Object.defineProperty(j.prototype,"parent",{get:function(){var L=function(j){if(0===j.length)return null;var L=j.lastIndexOf("/");return-1===L?"":j.slice(0,L)}(this.location.path);if(null===L)return null;var K=new Me(this.location.bucket,L);return this.newRef(this.service,K)},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"root",{get:function(){var L=new Me(this.location.bucket,"");return this.newRef(this.service,L)},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"name",{get:function(){return tt(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),j.prototype.put=function(L,K){return void 0===K&&(K=null),ei("put",[Yo(),Ir(!0)],arguments),this.throwIfRoot_("put"),new Ws(this,this.service,this.location,this.mappings(),new de(L),K)},j.prototype.putString=function(L,K,le){void 0===K&&(K=Vt.RAW),ei("putString",[Di(),Di(yn,!0),Ir(!0)],arguments),this.throwIfRoot_("putString");var we=ir(K,L),Ne=Object.assign({},le);return!xe(Ne.contentType)&&xe(we.contentType)&&(Ne.contentType=we.contentType),new Ws(this,this.service,this.location,this.mappings(),new de(we.data,!0),Ne)},j.prototype.delete=function(){var L=this;return ei("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(K){var le=$i(L.service,L.location);return L.service.makeRequest(le,K).getPromise()})},j.prototype.listAll=function(){ei("listAll",[],arguments);var L={prefixes:[],items:[]};return this.listAllHelper(L).then(function(){return L})},j.prototype.listAllHelper=function(L,K){return ge(this,void 0,void 0,function(){var we,Ne,Qe;return te(this,function(yt){switch(yt.label){case 0:return[4,this.list({pageToken:K})];case 1:return we=yt.sent(),(Ne=L.prefixes).push.apply(Ne,we.prefixes),(Qe=L.items).push.apply(Qe,we.items),null==we.nextPageToken?[3,3]:[4,this.listAllHelper(L,we.nextPageToken)];case 2:yt.sent(),yt.label=3;case 3:return[2]}})})},j.prototype.list=function(L){ei("list",[io(!0)],arguments);var K=this;return this.service.getAuthToken().then(function(le){var we=L||{},Ne=xs(K.service,K.location,"/",we.pageToken,we.maxResults);return K.service.makeRequest(Ne,le).getPromise()})},j.prototype.getMetadata=function(){var L=this;return ei("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(K){var le=bn(L.service,L.location,L.mappings());return L.service.makeRequest(le,K).getPromise()})},j.prototype.updateMetadata=function(L){var K=this;return ei("updateMetadata",[Ir()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(le){var we=$o(K.service,K.location,L,K.mappings());return K.service.makeRequest(we,le).getPromise()})},j.prototype.getDownloadURL=function(){var L=this;return ei("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(K){var le=Lr(L.service,L.location,L.mappings());return L.service.makeRequest(le,K).getPromise().then(function(we){if(null===we)throw nt();return we})})},j.prototype.throwIfRoot_=function(L){if(""===this.location.path)throw function(j){return new ee("invalid-root-operation","The operation '"+j+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(L)},j}(),hr=function(){function j(L){this.promise_=Promise.reject(L)}return j.prototype.getPromise=function(){return this.promise_},j.prototype.cancel=function(L){},j}(),Fn=function(){function j(L,K,le,we,Ne,Qe,yt,ft,xt,qt,sn){var mn=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=L,this.method_=K,this.headers_=le,this.body_=we,this.successCodes_=Ne.slice(),this.additionalRetryCodes_=Qe.slice(),this.callback_=yt,this.errorCallback_=ft,this.progressCallback_=qt,this.timeout_=xt,this.pool_=sn,this.promise_=new Promise(function(jr,Vn){mn.resolve_=jr,mn.reject_=Vn,mn.start_()})}return j.prototype.start_=function(){var L=this;function le(we,Ne){var Qe=L.resolve_,yt=L.reject_,ft=Ne.xhr;if(Ne.wasSuccessCode)try{var xt=L.callback_(ft,ft.getResponseText());Ft(xt)?Qe(xt):Qe()}catch(sn){yt(sn)}else if(null!==ft)(qt=re()).setServerResponseProp(ft.getResponseText()),yt(L.errorCallback_?L.errorCallback_(ft,qt):qt);else if(Ne.canceled)yt(qt=L.appDelete_?nn():at());else{var qt;yt(qt=new ee("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?le(0,new Ki(!1,null,!0)):this.backoffId_=function(j,L,K){var le=1,we=null,Ne=!1,Qe=0;function yt(){return 2===Qe}var ft=!1;function xt(){for(var Vn=[],wn=0;wn<arguments.length;wn++)Vn[wn]=arguments[wn];ft||(ft=!0,L.apply(null,Vn))}function qt(Vn){we=setTimeout(function(){we=null,j(sn,yt())},Vn)}function sn(Vn){for(var wn=[],lr=1;lr<arguments.length;lr++)wn[lr-1]=arguments[lr];if(!ft){if(Vn)return void xt.call.apply(xt,Dt([null,Vn],wn));var Nr;if(yt()||Ne)return void xt.call.apply(xt,Dt([null,Vn],wn));le<64&&(le*=2),1===Qe?(Qe=2,Nr=0):Nr=1e3*(le+Math.random()),qt(Nr)}}var mn=!1;function jr(Vn){mn||(mn=!0,!ft&&(null!==we?(Vn||(Qe=2),clearTimeout(we),qt(0)):Vn||(Qe=1)))}return qt(0),setTimeout(function(){Ne=!0,jr(!0)},K),jr}(function(we,Ne){if(Ne)we(!1,new Ki(!1,null,!0));else{var Qe=L.pool_.createXhrIo();L.pendingXhr_=Qe,null!==L.progressCallback_&&Qe.addUploadProgressListener(yt),Qe.send(L.url_,L.method_,L.body_,L.headers_).then(function(ft){null!==L.progressCallback_&&ft.removeUploadProgressListener(yt),L.pendingXhr_=null;var xt=(ft=ft).getErrorCode()===zn.NO_ERROR,qt=ft.getStatus();if(xt&&!L.isRetryStatusCode_(qt)){var mn=-1!==L.successCodes_.indexOf(qt);we(!0,new Ki(mn,ft))}else{var sn=ft.getErrorCode()===zn.ABORT;we(!1,new Ki(!1,null,sn))}})}function yt(ft){null!==L.progressCallback_&&L.progressCallback_(ft.loaded,ft.lengthComputable?ft.total:-1)}},le,this.timeout_)},j.prototype.getPromise=function(){return this.promise_},j.prototype.cancel=function(L){this.canceled_=!0,this.appDelete_=L||!1,null!==this.backoffId_&&function(j){j(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},j.prototype.isRetryStatusCode_=function(L){var K=L>=500&&L<600,we=-1!==[408,429].indexOf(L),Ne=-1!==this.additionalRetryCodes_.indexOf(L);return K||we||Ne},j}(),Ki=function(L,K,le){this.wasSuccessCode=L,this.xhr=K,this.canceled=!!le};var Jo=function(){function j(L,K,le,we){var Ne;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=L,this.authProvider_=K,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=le,this.bucket_=null!=we?Me.makeFromBucketSpec(we):j.extractBucket_(null===(Ne=this.app_)||void 0===Ne?void 0:Ne.options),this.internals_=new ks(this)}return j.extractBucket_=function(L){var K=null==L?void 0:L.storageBucket;return null==K?null:Me.makeFromBucketSpec(K)},j.prototype.getAuthToken=function(){return ge(this,void 0,void 0,function(){var L,K;return te(this,function(le){switch(le.label){case 0:return(L=this.authProvider_.getImmediate({optional:!0}))?[4,L.getToken()]:[3,2];case 1:if(null!==(K=le.sent()))return[2,K.accessToken];le.label=2;case 2:return[2,null]}})})},j.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(L){return L.cancel()}),this.requests_.clear()},j.prototype.makeStorageReference=function(L){return new Xo(this,L)},j.prototype.makeRequest=function(L,K){var le=this;if(this.deleted_)return new hr(nn());var we=function(j,L,K,le){var we=Ut(j.urlParams),Ne=j.url+we,Qe=Object.assign({},j.headers);return function(j,L){L&&(j["X-Firebase-GMPID"]=L)}(Qe,L),function(j,L){null!==L&&L.length>0&&(j.Authorization="Firebase "+L)}(Qe,K),function(j){j["X-Firebase-Storage-Version"]="webjs/"+(void 0!==$.default?$.default.SDK_VERSION:"AppManager")}(Qe),new Fn(Ne,j.method,Qe,j.body,j.successCodes,j.additionalRetryCodes,j.handler,j.errorHandler,j.timeout,j.progressCallback,le)}(L,this.appId_,K,this.pool_);return this.requests_.add(we),we.getPromise().then(function(){return le.requests_.delete(we)},function(){return le.requests_.delete(we)}),we},j.prototype.ref=function(L){function K(we){if("string"!=typeof we)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(we))throw"Expected child path but got a URL, use refFromURL instead."}if(ei("ref",[Di(K,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var le=new Xo(this,this.bucket_);return null!=L?le.child(L):le},j.prototype.refFromURL=function(L){function K(le){if("string"!=typeof le)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(le))throw"Expected full URL but got a child path, use ref instead.";try{Me.makeFromUrl(le)}catch(we){throw"Expected valid full URL but got an invalid one."}}return ei("refFromURL",[Di(K,!1)],arguments),new Xo(this,L)},Object.defineProperty(j.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),j.prototype.setMaxUploadRetryTime=function(L){ei("setMaxUploadRetryTime",[bs()],arguments),this.maxUploadRetryTime_=L},Object.defineProperty(j.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),j.prototype.setMaxOperationRetryTime=function(L){ei("setMaxOperationRetryTime",[bs()],arguments),this.maxOperationRetryTime_=L},Object.defineProperty(j.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),j}(),ks=function(){function j(L){this.service_=L}return j.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},j}();function Es(j,L){var K=j.getProvider("app").getImmediate(),le=j.getProvider("auth-internal");return new Jo(K,le,new Bi,L)}function si(j){var L={TaskState:Fe,TaskEvent:je,StringFormat:Vt,Storage:Jo,Reference:Xo};j.INTERNAL.registerComponent(new C.Component("storage",Es,"PUBLIC").setServiceProps(L).setMultipleInstances(!0)),j.registerVersion("@firebase/storage","0.3.43")}si($.default)},488:(br,ot,lt)=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});var $=lt(57),Q={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Z=function(je,he){if(!je)throw kt(he)},kt=function(je){return new Error("Firebase Database ("+Q.SDK_VERSION+") INTERNAL ASSERT FAILED: "+je)},Xe=function(je){for(var he=[],Fe=0,Ge=0;Ge<je.length;Ge++){var xe=je.charCodeAt(Ge);xe<128?he[Fe++]=xe:xe<2048?(he[Fe++]=xe>>6|192,he[Fe++]=63&xe|128):55296==(64512&xe)&&Ge+1<je.length&&56320==(64512&je.charCodeAt(Ge+1))?(xe=65536+((1023&xe)<<10)+(1023&je.charCodeAt(++Ge)),he[Fe++]=xe>>18|240,he[Fe++]=xe>>12&63|128,he[Fe++]=xe>>6&63|128,he[Fe++]=63&xe|128):(he[Fe++]=xe>>12|224,he[Fe++]=xe>>6&63|128,he[Fe++]=63&xe|128)}return he},Ot={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(je,he){if(!Array.isArray(je))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var Fe=he?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ge=[],xe=0;xe<je.length;xe+=3){var Ft=je[xe],Pt=xe+1<je.length,Zt=Pt?je[xe+1]:0,$t=xe+2<je.length,dn=$t?je[xe+2]:0,er=(15&Zt)<<2|dn>>6,Cn=63&dn;$t||(Cn=64,Pt||(er=64)),Ge.push(Fe[Ft>>2],Fe[(3&Ft)<<4|Zt>>4],Fe[er],Fe[Cn])}return Ge.join("")},encodeString:function(je,he){return this.HAS_NATIVE_SUPPORT&&!he?btoa(je):this.encodeByteArray(Xe(je),he)},decodeString:function(je,he){return this.HAS_NATIVE_SUPPORT&&!he?atob(je):function(je){for(var he=[],Fe=0,Ge=0;Fe<je.length;){var xe=je[Fe++];if(xe<128)he[Ge++]=String.fromCharCode(xe);else if(xe>191&&xe<224){var Ft=je[Fe++];he[Ge++]=String.fromCharCode((31&xe)<<6|63&Ft)}else if(xe>239&&xe<365){var $t=((7&xe)<<18|(63&(Ft=je[Fe++]))<<12|(63&(Pt=je[Fe++]))<<6|63&je[Fe++])-65536;he[Ge++]=String.fromCharCode(55296+($t>>10)),he[Ge++]=String.fromCharCode(56320+(1023&$t))}else{Ft=je[Fe++];var Pt=je[Fe++];he[Ge++]=String.fromCharCode((15&xe)<<12|(63&Ft)<<6|63&Pt)}}return he.join("")}(this.decodeStringToByteArray(je,he))},decodeStringToByteArray:function(je,he){this.init_();for(var Fe=he?this.charToByteMapWebSafe_:this.charToByteMap_,Ge=[],xe=0;xe<je.length;){var Ft=Fe[je.charAt(xe++)],Zt=xe<je.length?Fe[je.charAt(xe)]:0,dn=++xe<je.length?Fe[je.charAt(xe)]:64,On=++xe<je.length?Fe[je.charAt(xe)]:64;if(++xe,null==Ft||null==Zt||null==dn||null==On)throw Error();Ge.push(Ft<<2|Zt>>4),64!==dn&&(Ge.push(Zt<<4&240|dn>>2),64!==On&&Ge.push(dn<<6&192|On))}return Ge},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var je=0;je<this.ENCODED_VALS.length;je++)this.byteToCharMap_[je]=this.ENCODED_VALS.charAt(je),this.charToByteMap_[this.byteToCharMap_[je]]=je,this.byteToCharMapWebSafe_[je]=this.ENCODED_VALS_WEBSAFE.charAt(je),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[je]]=je,je>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(je)]=je,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(je)]=je)}}},ge=function(je){try{return Ot.decodeString(je,!0)}catch(he){console.error("base64Decode failed: ",he)}return null};function $e(je,he){if(!(he instanceof Object))return he;switch(he.constructor){case Date:return new Date(he.getTime());case Object:void 0===je&&(je={});break;case Array:je=[];break;default:return he}for(var Ge in he)!he.hasOwnProperty(Ge)||(je[Ge]=$e(je[Ge],he[Ge]));return je}var Ze=function(){function je(){var he=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(Fe,Ge){he.resolve=Fe,he.reject=Ge})}return je.prototype.wrapCallback=function(he){var Fe=this;return function(Ge,xe){Ge?Fe.reject(Ge):Fe.resolve(xe),"function"==typeof he&&(Fe.promise.catch(function(){}),1===he.length?he(Ge):he(Ge,xe))}},je}();function Ae(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fn(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(je){return!1}}var k=function(je){function he(Fe,Ge){var xe=je.call(this,Ge)||this;return xe.code=Fe,xe.name="FirebaseError",Object.setPrototypeOf(xe,he.prototype),Error.captureStackTrace&&Error.captureStackTrace(xe,U.prototype.create),xe}return $.__extends(he,je),he}(Error),U=function(){function je(he,Fe,Ge){this.service=he,this.serviceName=Fe,this.errors=Ge}return je.prototype.create=function(he){for(var Fe=[],Ge=1;Ge<arguments.length;Ge++)Fe[Ge-1]=arguments[Ge];for(var xe=Fe[0]||{},Ft=this.service+"/"+he,Pt=this.errors[he],Zt=Pt?N(Pt,xe):"Error",$t=this.serviceName+": "+Zt+" ("+Ft+").",dn=new k(Ft,$t),Qn=0,On=Object.keys(xe);Qn<On.length;Qn++){var er=On[Qn];"_"!==er.slice(-1)&&(er in dn&&console.warn('Overwriting FirebaseError base field "'+er+'" can cause unexpected behavior.'),dn[er]=xe[er])}return dn},je}();function N(je,he){return je.replace(ee,function(Fe,Ge){var xe=he[Ge];return null!=xe?String(xe):"<"+Ge+"?>"})}var ee=/\{\$([^}]+)}/g;function ae(je){return JSON.parse(je)}var re=function(je){var he={},Fe={},Ge={},xe="";try{var Ft=je.split(".");he=ae(ge(Ft[0])||""),Fe=ae(ge(Ft[1])||""),xe=Ft[2],Ge=Fe.d||{},delete Fe.d}catch(Pt){}return{header:he,claims:Fe,data:Ge,signature:xe}},nt=function(){function je(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var he=1;he<this.blockSize;++he)this.pad_[he]=0;this.reset()}return je.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},je.prototype.compress_=function(he,Fe){Fe||(Fe=0);var Ge=this.W_;if("string"==typeof he)for(var xe=0;xe<16;xe++)Ge[xe]=he.charCodeAt(Fe)<<24|he.charCodeAt(Fe+1)<<16|he.charCodeAt(Fe+2)<<8|he.charCodeAt(Fe+3),Fe+=4;else for(xe=0;xe<16;xe++)Ge[xe]=he[Fe]<<24|he[Fe+1]<<16|he[Fe+2]<<8|he[Fe+3],Fe+=4;for(xe=16;xe<80;xe++)Ge[xe]=4294967295&((Ft=Ge[xe-3]^Ge[xe-8]^Ge[xe-14]^Ge[xe-16])<<1|Ft>>>31);var On,er,Pt=this.chain_[0],Zt=this.chain_[1],$t=this.chain_[2],dn=this.chain_[3],Qn=this.chain_[4];for(xe=0;xe<80;xe++){xe<40?xe<20?(On=dn^Zt&($t^dn),er=1518500249):(On=Zt^$t^dn,er=1859775393):xe<60?(On=Zt&$t|dn&(Zt|$t),er=2400959708):(On=Zt^$t^dn,er=3395469782);var Ft=(Pt<<5|Pt>>>27)+On+Qn+er+Ge[xe]&4294967295;Qn=dn,dn=$t,$t=4294967295&(Zt<<30|Zt>>>2),Zt=Pt,Pt=Ft}this.chain_[0]=this.chain_[0]+Pt&4294967295,this.chain_[1]=this.chain_[1]+Zt&4294967295,this.chain_[2]=this.chain_[2]+$t&4294967295,this.chain_[3]=this.chain_[3]+dn&4294967295,this.chain_[4]=this.chain_[4]+Qn&4294967295},je.prototype.update=function(he,Fe){if(null!=he){void 0===Fe&&(Fe=he.length);for(var Ge=Fe-this.blockSize,xe=0,Ft=this.buf_,Pt=this.inbuf_;xe<Fe;){if(0===Pt)for(;xe<=Ge;)this.compress_(he,xe),xe+=this.blockSize;if("string"==typeof he){for(;xe<Fe;)if(Ft[Pt]=he.charCodeAt(xe),++xe,++Pt===this.blockSize){this.compress_(Ft),Pt=0;break}}else for(;xe<Fe;)if(Ft[Pt]=he[xe],++xe,++Pt===this.blockSize){this.compress_(Ft),Pt=0;break}}this.inbuf_=Pt,this.total_+=Fe}},je.prototype.digest=function(){var he=[],Fe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var Ge=this.blockSize-1;Ge>=56;Ge--)this.buf_[Ge]=255&Fe,Fe/=256;this.compress_(this.buf_);var xe=0;for(Ge=0;Ge<5;Ge++)for(var Ft=24;Ft>=0;Ft-=8)he[xe]=this.chain_[Ge]>>Ft&255,++xe;return he},je}(),vr=function(){function je(he,Fe){var Ge=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Fe,this.task.then(function(){he(Ge)}).catch(function(xe){Ge.error(xe)})}return je.prototype.next=function(he){this.forEachObserver(function(Fe){Fe.next(he)})},je.prototype.error=function(he){this.forEachObserver(function(Fe){Fe.error(he)}),this.close(he)},je.prototype.complete=function(){this.forEachObserver(function(he){he.complete()}),this.close()},je.prototype.subscribe=function(he,Fe,Ge){var Ft,xe=this;if(void 0===he&&void 0===Fe&&void 0===Ge)throw new Error("Missing Observer.");Ft=function(je,he){if("object"!=typeof je||null===je)return!1;for(var Fe=0,Ge=["next","error","complete"];Fe<Ge.length;Fe++){var xe=Ge[Fe];if(xe in je&&"function"==typeof je[xe])return!0}return!1}(he)?he:{next:he,error:Fe,complete:Ge},void 0===Ft.next&&(Ft.next=un),void 0===Ft.error&&(Ft.error=un),void 0===Ft.complete&&(Ft.complete=un);var Pt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{xe.finalError?Ft.error(xe.finalError):Ft.complete()}catch(Zt){}}),this.observers.push(Ft),Pt},je.prototype.unsubscribeOne=function(he){void 0===this.observers||void 0===this.observers[he]||(delete this.observers[he],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},je.prototype.forEachObserver=function(he){if(!this.finalized)for(var Fe=0;Fe<this.observers.length;Fe++)this.sendOne(Fe,he)},je.prototype.sendOne=function(he,Fe){var Ge=this;this.task.then(function(){if(void 0!==Ge.observers&&void 0!==Ge.observers[he])try{Fe(Ge.observers[he])}catch(xe){"undefined"!=typeof console&&console.error&&console.error(xe)}})},je.prototype.close=function(he){var Fe=this;this.finalized||(this.finalized=!0,void 0!==he&&(this.finalError=he),this.task.then(function(){Fe.observers=void 0,Fe.onNoObservers=void 0}))},je}();function un(){}function Vt(je,he,Fe){var Ge="";switch(he){case 1:Ge=Fe?"first":"First";break;case 2:Ge=Fe?"second":"Second";break;case 3:Ge=Fe?"third":"Third";break;case 4:Ge=Fe?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return je+" failed: "+(Ge+" argument ")}ot.CONSTANTS=Q,ot.Deferred=Ze,ot.ErrorFactory=U,ot.FirebaseError=k,ot.MAX_VALUE_MILLIS=144e5,ot.RANDOM_FACTOR=.5,ot.Sha1=nt,ot.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},ot.assert=Z,ot.assertionError=kt,ot.async=function(je,he){return function(){for(var Fe=[],Ge=0;Ge<arguments.length;Ge++)Fe[Ge]=arguments[Ge];Promise.resolve(!0).then(function(){je.apply(void 0,Fe)}).catch(function(xe){he&&he(xe)})}},ot.base64=Ot,ot.base64Decode=ge,ot.base64Encode=function(je){var he=Xe(je);return Ot.encodeByteArray(he,!0)},ot.calculateBackoffMillis=function(je,he,Fe){void 0===he&&(he=1e3),void 0===Fe&&(Fe=2);var Ge=he*Math.pow(Fe,je),xe=Math.round(.5*Ge*(Math.random()-.5)*2);return Math.min(144e5,Ge+xe)},ot.contains=function(je,he){return Object.prototype.hasOwnProperty.call(je,he)},ot.createSubscribe=function(je,he){var Fe=new vr(je,he);return Fe.subscribe.bind(Fe)},ot.decode=re,ot.deepCopy=function(je){return $e(void 0,je)},ot.deepExtend=$e,ot.errorPrefix=Vt,ot.getUA=Ae,ot.isAdmin=function(je){var he=re(je).claims;return"object"==typeof he&&!0===he.admin},ot.isBrowser=function(){return"object"==typeof self&&self.self===self},ot.isBrowserExtension=function(){var je="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof je&&void 0!==je.id},ot.isElectron=function(){return Ae().indexOf("Electron/")>=0},ot.isEmpty=function(je){for(var he in je)if(Object.prototype.hasOwnProperty.call(je,he))return!1;return!0},ot.isIE=function(){var je=Ae();return je.indexOf("MSIE ")>=0||je.indexOf("Trident/")>=0},ot.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},ot.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ae())},ot.isNode=fn,ot.isNodeSdk=function(){return!0===Q.NODE_CLIENT||!0===Q.NODE_ADMIN},ot.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},ot.isSafari=function(){return!fn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},ot.isUWP=function(){return Ae().indexOf("MSAppHost/")>=0},ot.isValidFormat=function(je){var Fe=re(je).claims;return!!Fe&&"object"==typeof Fe&&Fe.hasOwnProperty("iat")},ot.isValidTimestamp=function(je){var he=re(je).claims,Fe=Math.floor((new Date).getTime()/1e3),Ge=0,xe=0;return"object"==typeof he&&(he.hasOwnProperty("nbf")?Ge=he.nbf:he.hasOwnProperty("iat")&&(Ge=he.iat),xe=he.hasOwnProperty("exp")?he.exp:Ge+86400),!!Fe&&!!Ge&&!!xe&&Fe>=Ge&&Fe<=xe},ot.issuedAtTime=function(je){var he=re(je).claims;return"object"==typeof he&&he.hasOwnProperty("iat")?he.iat:null},ot.jsonEval=ae,ot.map=function(je,he,Fe){var Ge={};for(var xe in je)Object.prototype.hasOwnProperty.call(je,xe)&&(Ge[xe]=he.call(Fe,je[xe],xe,je));return Ge},ot.querystring=function(je){for(var he=[],Fe=function($t,dn){Array.isArray(dn)?dn.forEach(function(Qn){he.push(encodeURIComponent($t)+"="+encodeURIComponent(Qn))}):he.push(encodeURIComponent($t)+"="+encodeURIComponent(dn))},Ge=0,xe=Object.entries(je);Ge<xe.length;Ge++){var Ft=xe[Ge];Fe(Ft[0],Ft[1])}return he.length?"&"+he.join("&"):""},ot.querystringDecode=function(je){var he={};return je.replace(/^\?/,"").split("&").forEach(function(Ge){if(Ge){var xe=Ge.split("=");he[xe[0]]=xe[1]}}),he},ot.safeGet=function(je,he){if(Object.prototype.hasOwnProperty.call(je,he))return je[he]},ot.stringLength=function(je){for(var he=0,Fe=0;Fe<je.length;Fe++){var Ge=je.charCodeAt(Fe);Ge<128?he++:Ge<2048?he+=2:Ge>=55296&&Ge<=56319?(he+=4,Fe++):he+=3}return he},ot.stringToByteArray=function(je){for(var he=[],Fe=0,Ge=0;Ge<je.length;Ge++){var xe=je.charCodeAt(Ge);if(xe>=55296&&xe<=56319){var Ft=xe-55296;Ge++,Z(Ge<je.length,"Surrogate pair missing trail surrogate."),xe=65536+(Ft<<10)+(je.charCodeAt(Ge)-56320)}xe<128?he[Fe++]=xe:xe<2048?(he[Fe++]=xe>>6|192,he[Fe++]=63&xe|128):xe<65536?(he[Fe++]=xe>>12|224,he[Fe++]=xe>>6&63|128,he[Fe++]=63&xe|128):(he[Fe++]=xe>>18|240,he[Fe++]=xe>>12&63|128,he[Fe++]=xe>>6&63|128,he[Fe++]=63&xe|128)}return he},ot.stringify=function(je){return JSON.stringify(je)},ot.validateArgCount=function(je,he,Fe,Ge){var xe;if(Ge<he?xe="at least "+he:Ge>Fe&&(xe=0===Fe?"none":"no more than "+Fe),xe)throw new Error(je+" failed: Was called with "+Ge+(1===Ge?" argument.":" arguments.")+" Expects "+xe+".")},ot.validateCallback=function(je,he,Fe,Ge){if((!Ge||Fe)&&"function"!=typeof Fe)throw new Error(Vt(je,he,Ge)+"must be a valid function.")},ot.validateContextObject=function(je,he,Fe,Ge){if((!Ge||Fe)&&("object"!=typeof Fe||null===Fe))throw new Error(Vt(je,he,Ge)+"must be a valid context object.")},ot.validateIndexedDBOpenable=function(){return new Promise(function(je,he){try{var Fe=!0,Ge="validate-browser-context-for-indexeddb-analytics-module",xe=window.indexedDB.open(Ge);xe.onsuccess=function(){xe.result.close(),Fe||window.indexedDB.deleteDatabase(Ge),je(!0)},xe.onupgradeneeded=function(){Fe=!1},xe.onerror=function(){var Ft;he((null===(Ft=xe.error)||void 0===Ft?void 0:Ft.message)||"")}}catch(Ft){he(Ft)}})},ot.validateNamespace=function(je,he,Fe,Ge){if((!Ge||Fe)&&"string"!=typeof Fe)throw new Error(Vt(je,he,Ge)+"must be a valid firebase namespace.")}},691:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{default:()=>ui,ErrorCode:()=>qi,EventType:()=>ns,WebChannel:()=>Co,XhrIo:()=>nu,createWebChannelTransport:()=>Ls});var $=function(y,P){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,oe){B.__proto__=oe}||function(B,oe){for(var Te in oe)Object.prototype.hasOwnProperty.call(oe,Te)&&(B[Te]=oe[Te])})(y,P)};function Z(y){var P="function"==typeof Symbol&&Symbol.iterator,B=P&&y[P],oe=0;if(B)return B.call(y);if(y&&"number"==typeof y.length)return{next:function(){return y&&oe>=y.length&&(y=void 0),{value:y&&y[oe++],done:!y}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")}var Xe,kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},In=In||{},Ot=kt||self;function ln(){}function ge(y){var P=typeof y;return"object"!=P?P:y?Array.isArray(y)?"array":P:"null"}function te(y){var P=ge(y);return"array"==P||"object"==P&&"number"==typeof y.length}function $e(y){var P=typeof y;return"object"==P&&null!=y||"function"==P}var Ae="closure_uid_"+(1e9*Math.random()>>>0),mt=0;function fn(y,P,B){return y.call.apply(y.bind,arguments)}function Dt(y,P,B){if(!y)throw Error();if(2<arguments.length){var oe=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,oe),y.apply(P,Te)}}return function(){return y.apply(P,arguments)}}function Re(y,P,B){return(Re=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?fn:Dt).apply(null,arguments)}function it(y,P){var B=Array.prototype.slice.call(arguments,1);return function(){var oe=B.slice();return oe.push.apply(oe,arguments),y.apply(this,oe)}}var ze=Date.now;function At(y,P){function B(){}B.prototype=P.prototype,y.S=P.prototype,y.prototype=new B,y.prototype.constructor=y}function Nt(){this.j=this.j,this.i=this.i}Nt.prototype.j=!1,Nt.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(y){Object.prototype.hasOwnProperty.call(y,Ae)&&y[Ae]||(y[Ae]=++mt)}(this)},Nt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var He=Array.prototype.indexOf?function(y,P){return Array.prototype.indexOf.call(y,P,void 0)}:function(y,P){if("string"==typeof y)return"string"!=typeof P||1!=P.length?-1:y.indexOf(P,0);for(var B=0;B<y.length;B++)if(B in y&&y[B]===P)return B;return-1},rt=Array.prototype.forEach?function(y,P,B){Array.prototype.forEach.call(y,P,B)}:function(y,P,B){for(var oe=y.length,Te="string"==typeof y?y.split(""):y,qe=0;qe<oe;qe++)qe in Te&&P.call(B,Te[qe],qe,y)};function C(y){return Array.prototype.concat.apply([],arguments)}function E(y){var P=y.length;if(0<P){for(var B=Array(P),oe=0;oe<P;oe++)B[oe]=y[oe];return B}return[]}function k(y){return/^[\s\xa0]*$/.test(y)}var ae,U=String.prototype.trim?function(y){return y.trim()}:function(y){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(y)[1]};function N(y,P){return-1!=y.indexOf(P)}function ee(y,P){return y<P?-1:y>P?1:0}e:{var pt=Ot.navigator;if(pt){var re=pt.userAgent;if(re){ae=re;break e}}ae=""}function Pe(y,P,B){for(var oe in y)P.call(B,y[oe],oe,y)}function dt(y){var P={};for(var B in y)P[B]=y[B];return P}var Se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function De(y,P){for(var B,oe,Te=1;Te<arguments.length;Te++){for(B in oe=arguments[Te])y[B]=oe[B];for(var qe=0;qe<Se.length;qe++)B=Se[qe],Object.prototype.hasOwnProperty.call(oe,B)&&(y[B]=oe[B])}}function Ve(y){return Ve[" "](y),y}Ve[" "]=ln;var nn,y,Gt=N(ae,"Opera"),St=N(ae,"Trident")||N(ae,"MSIE"),Wt=N(ae,"Edge"),on=Wt||St,nt=N(ae,"Gecko")&&!(N(ae.toLowerCase(),"webkit")&&!N(ae,"Edge"))&&!(N(ae,"Trident")||N(ae,"MSIE"))&&!N(ae,"Edge"),Nn=N(ae.toLowerCase(),"webkit")&&!N(ae,"Edge");function vr(){var y=Ot.document;return y?y.documentMode:void 0}e:{var Lt="",un=(y=ae,nt?/rv:([^\);]+)(\)|;)/.exec(y):Wt?/Edge\/([\d\.]+)/.exec(y):St?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(y):Nn?/WebKit\/(\S+)/.exec(y):Gt?/(?:Version)[ \/]?(\S+)/.exec(y):void 0);if(un&&(Lt=un?un[1]:""),St){var vn=vr();if(null!=vn&&vn>parseFloat(Lt)){nn=String(vn);break e}}nn=Lt}var Vt={};function yn(y){return function(y,P){var B=Vt;return Object.prototype.hasOwnProperty.call(B,y)?B[y]:B[y]=P()}(y,function(){for(var P=0,B=U(String(nn)).split("."),oe=U(String(y)).split("."),Te=Math.max(B.length,oe.length),qe=0;0==P&&qe<Te;qe++){var Xt=B[qe]||"",dr=oe[qe]||"";do{if(Xt=/(\d*)(\D*)(.*)/.exec(Xt)||["","","",""],dr=/(\d*)(\D*)(.*)/.exec(dr)||["","","",""],0==Xt[0].length&&0==dr[0].length)break;P=ee(0==Xt[1].length?0:parseInt(Xt[1],10),0==dr[1].length?0:parseInt(dr[1],10))||ee(0==Xt[2].length,0==dr[2].length)||ee(Xt[2],dr[2]),Xt=Xt[3],dr=dr[3]}while(0==P)}return 0<=P})}var Zn=Ot.document&&St&&(vr()||parseInt(nn,10))||void 0,Kn=!St||9<=Number(Zn),Pr=St&&!yn("9"),or=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var y=!1,P=Object.defineProperty({},"passive",{get:function(){y=!0}});try{Ot.addEventListener("test",ln,P),Ot.removeEventListener("test",ln,P)}catch(B){}return y}();function Rn(y,P){this.type=y,this.a=this.target=P,this.defaultPrevented=!1}function _n(y,P){if(Rn.call(this,y?y.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,y){var B=this.type=y.type,oe=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.a=P,P=y.relatedTarget){if(nt){e:{try{Ve(P.nodeName);var Te=!0;break e}catch(qe){}Te=!1}Te||(P=null)}}else"mouseover"==B?P=y.fromElement:"mouseout"==B&&(P=y.toElement);this.relatedTarget=P,oe?(this.clientX=void 0!==oe.clientX?oe.clientX:oe.pageX,this.clientY=void 0!==oe.clientY?oe.clientY:oe.pageY,this.screenX=oe.screenX||0,this.screenY=oe.screenY||0):(this.clientX=void 0!==y.clientX?y.clientX:y.pageX,this.clientY=void 0!==y.clientY?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType="string"==typeof y.pointerType?y.pointerType:Jr[y.pointerType]||"",this.c=y,y.defaultPrevented&&this.b()}}Rn.prototype.b=function(){this.defaultPrevented=!0},At(_n,Rn);var Jr={2:"touch",3:"pen",4:"mouse"};_n.prototype.b=function(){_n.S.b.call(this);var y=this.c;if(y.preventDefault)y.preventDefault();else if(y.returnValue=!1,Pr)try{(y.ctrlKey||112<=y.keyCode&&123>=y.keyCode)&&(y.keyCode=-1)}catch(P){}};var je="closure_listenable_"+(1e6*Math.random()|0),he=0;function Fe(y,P,B,oe,Te){this.listener=y,this.proxy=null,this.src=P,this.type=B,this.capture=!!oe,this.ca=Te,this.key=++he,this.Y=this.Z=!1}function Ge(y){y.Y=!0,y.listener=null,y.proxy=null,y.src=null,y.ca=null}function xe(y){this.src=y,this.a={},this.b=0}function Ft(y,P){var B=P.type;if(B in y.a){var qe,oe=y.a[B],Te=He(oe,P);(qe=0<=Te)&&Array.prototype.splice.call(oe,Te,1),qe&&(Ge(P),0==y.a[B].length&&(delete y.a[B],y.b--))}}function Pt(y,P,B,oe){for(var Te=0;Te<y.length;++Te){var qe=y[Te];if(!qe.Y&&qe.listener==P&&qe.capture==!!B&&qe.ca==oe)return Te}return-1}xe.prototype.add=function(y,P,B,oe,Te){var qe=y.toString();(y=this.a[qe])||(y=this.a[qe]=[],this.b++);var Xt=Pt(y,P,oe,Te);return-1<Xt?(P=y[Xt],B||(P.Z=!1)):((P=new Fe(P,this.src,qe,!!oe,Te)).Z=B,y.push(P)),P};var Zt="closure_lm_"+(1e6*Math.random()|0),$t={};function dn(y,P,B,oe,Te){if(oe&&oe.once)return er(y,P,B,oe,Te);if(Array.isArray(P)){for(var qe=0;qe<P.length;qe++)dn(y,P[qe],B,oe,Te);return null}return B=Ti(B),y&&y[je]?y.va(P,B,$e(oe)?!!oe.capture:!!oe,Te):Qn(y,P,B,!1,oe,Te)}function Qn(y,P,B,oe,Te,qe){if(!P)throw Error("Invalid event type");var Xt=$e(Te)?!!Te.capture:!!Te;if(Xt&&!Kn)return null;var dr=Zr(y);if(dr||(y[Zt]=dr=new xe(y)),(B=dr.add(P,B,oe,Xt,qe)).proxy)return B;if(oe=function(){var y=Bi,P=Kn?function(B){return y.call(P.src,P.listener,B)}:function(B){if(!(B=y.call(P.src,P.listener,B)))return B};return P}(),B.proxy=oe,oe.src=y,oe.listener=B,y.addEventListener)or||(Te=Xt),void 0===Te&&(Te=!1),y.addEventListener(P.toString(),oe,Te);else if(y.attachEvent)y.attachEvent(zn(P.toString()),oe);else{if(!y.addListener||!y.removeListener)throw Error("addEventListener and attachEvent are unavailable.");y.addListener(oe)}return B}function er(y,P,B,oe,Te){if(Array.isArray(P)){for(var qe=0;qe<P.length;qe++)er(y,P[qe],B,oe,Te);return null}return B=Ti(B),y&&y[je]?y.wa(P,B,$e(oe)?!!oe.capture:!!oe,Te):Qn(y,P,B,!0,oe,Te)}function Cn(y,P,B,oe,Te){if(Array.isArray(P))for(var qe=0;qe<P.length;qe++)Cn(y,P[qe],B,oe,Te);else oe=$e(oe)?!!oe.capture:!!oe,B=Ti(B),y&&y[je]?(y=y.c,(P=String(P).toString())in y.a&&-1<(B=Pt(qe=y.a[P],B,oe,Te))&&(Ge(qe[B]),Array.prototype.splice.call(qe,B,1),0==qe.length&&(delete y.a[P],y.b--))):y&&(y=Zr(y))&&(P=y.a[P.toString()],y=-1,P&&(y=Pt(P,B,oe,Te)),(B=-1<y?P[y]:null)&&Cr(B))}function Cr(y){if("number"!=typeof y&&y&&!y.Y){var P=y.src;if(P&&P[je])Ft(P.c,y);else{var B=y.type,oe=y.proxy;P.removeEventListener?P.removeEventListener(B,oe,y.capture):P.detachEvent?P.detachEvent(zn(B),oe):P.addListener&&P.removeListener&&P.removeListener(oe),(B=Zr(P))?(Ft(B,y),0==B.b&&(B.src=null,P[Zt]=null)):Ge(y)}}}function zn(y){return y in $t?$t[y]:$t[y]="on"+y}function sr(y,P){var B=y.listener,oe=y.ca||y.src;return y.Z&&Cr(y),B.call(oe,P)}function Bi(y,P){if(y.Y)return!0;if(!Kn){if(!P)e:{P=["window","event"];for(var B=Ot,oe=0;oe<P.length;oe++)if(null==(B=B[P[oe]])){P=null;break e}P=B}return sr(y,P=new _n(P,this))}return sr(y,new _n(P,this))}function Zr(y){return(y=y[Zt])instanceof xe?y:null}var oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ti(y){return"function"==ge(y)?y:(y[oi]||(y[oi]=function(P){return y.handleEvent(P)}),y[oi])}function de(){Nt.call(this),this.c=new xe(this),this.J=this,this.C=null}function Me(y,P,B,oe){if(!(P=y.c.a[String(P)]))return!0;P=P.concat();for(var Te=!0,qe=0;qe<P.length;++qe){var Xt=P[qe];if(Xt&&!Xt.Y&&Xt.capture==B){var dr=Xt.listener,rr=Xt.ca||Xt.src;Xt.Z&&Ft(y.c,Xt),Te=!1!==dr.call(rr,oe)&&Te}}return Te&&!oe.defaultPrevented}At(de,Nt),de.prototype[je]=!0,(Xe=de.prototype).addEventListener=function(y,P,B,oe){dn(this,y,P,B,oe)},Xe.removeEventListener=function(y,P,B,oe){Cn(this,y,P,B,oe)},Xe.dispatchEvent=function(y){var P,B=this.C;if(B)for(P=[];B;B=B.C)P.push(B);B=this.J;var oe=y.type||y;if("string"==typeof y)y=new Rn(y,B);else if(y instanceof Rn)y.target=y.target||B;else{var Te=y;De(y=new Rn(oe,B),Te)}if(Te=!0,P)for(var qe=P.length-1;0<=qe;qe--){var Xt=y.a=P[qe];Te=Me(Xt,oe,!0,y)&&Te}if(Te=Me(Xt=y.a=B,oe,!0,y)&&Te,Te=Me(Xt,oe,!1,y)&&Te,P)for(qe=0;qe<P.length;qe++)Te=Me(Xt=y.a=P[qe],oe,!1,y)&&Te;return Te},Xe.G=function(){if(de.S.G.call(this),this.c){var P,y=this.c;for(P in y.a){for(var B=y.a[P],oe=0;oe<B.length;oe++)Ge(B[oe]);delete y.a[P],y.b--}}this.C=null},Xe.va=function(y,P,B,oe){return this.c.add(String(y),P,!1,B,oe)},Xe.wa=function(y,P,B,oe){return this.c.add(String(y),P,!0,B,oe)};var Be=Ot.JSON.stringify;function st(){this.b=this.a=null}var wt,We=new(function(){function y(P,B,oe){this.f=oe,this.c=P,this.g=B,this.b=0,this.a=null}return y.prototype.get=function(){var P;return 0<this.b?(this.b--,this.a=(P=this.a).next,P.next=null):P=this.c(),P},y}())(function(){return new It},function(y){y.reset()},100);function tt(){var y=jn,P=null;return y.a&&(P=y.a,y.a=y.a.next,y.a||(y.b=null),P.next=null),P}function It(){this.next=this.b=this.a=null}function Ut(y){Ot.setTimeout(function(){throw y},0)}function an(y,P){wt||function(){var y=Ot.Promise.resolve(void 0);wt=function(){y.then(Bn)}}(),tr||(wt(),tr=!0),jn.add(y,P)}st.prototype.add=function(y,P){var B=We.get();B.set(y,P),this.b?this.b.next=B:this.a=B,this.b=B},It.prototype.set=function(y,P){this.a=y,this.b=P,this.next=null},It.prototype.reset=function(){this.next=this.b=this.a=null};var tr=!1,jn=new st;function Bn(){for(var y;y=tt();){try{y.a.call(y.b)}catch(B){Ut(B)}var P=We;P.g(y),P.b<P.f&&(P.b++,y.next=P.a,P.a=y)}tr=!1}function zr(y,P){de.call(this),this.b=y||1,this.a=P||Ot,this.f=Re(this.Ya,this),this.g=ze()}function pe(y){y.aa=!1,y.M&&(y.a.clearTimeout(y.M),y.M=null)}function fe(y,P,B){if("function"==ge(y))B&&(y=Re(y,B));else{if(!y||"function"!=typeof y.handleEvent)throw Error("Invalid listener argument");y=Re(y.handleEvent,y)}return 2147483647<Number(P)?-1:Ot.setTimeout(y,P||0)}function me(y){y.a=fe(function(){y.a=null,y.c&&(y.c=!1,me(y))},y.h);var P=y.b;y.b=null,y.g.apply(null,P)}At(zr,de),(Xe=zr.prototype).aa=!1,Xe.M=null,Xe.Ya=function(){if(this.aa){var y=ze()-this.g;0<y&&y<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-y):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(pe(this),this.start()))}},Xe.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=ze())},Xe.G=function(){zr.S.G.call(this),pe(this),delete this.a};var Ce=function(y){function P(B,oe,Te){var qe=y.call(this)||this;return qe.g=null!=Te?B.bind(Te):B,qe.h=oe,qe.b=null,qe.c=!1,qe.a=null,qe}return function(y,P){function B(){this.constructor=y}$(y,P),y.prototype=null===P?Object.create(P):(B.prototype=P.prototype,new B)}(P,y),P.prototype.f=function(B){this.b=arguments,this.a?this.c=!0:me(this)},P.prototype.G=function(){y.prototype.G.call(this),this.a&&(Ot.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},P}(Nt);function J(y){Nt.call(this),this.b=y,this.a={}}At(J,Nt);var x=[];function W(y,P,B,oe){Array.isArray(B)||(B&&(x[0]=B.toString()),B=x);for(var Te=0;Te<B.length;Te++){var qe=dn(P,B[Te],oe||y.handleEvent,!1,y.b||y);if(!qe)break;y.a[qe.key]=qe}}function se(y){Pe(y.a,function(P,B){this.a.hasOwnProperty(B)&&Cr(P)},y),y.a={}}function ye(){this.a=!0}function vt(y,P,B,oe){y.info(function(){return"XMLHTTP TEXT ("+P+"): "+function(y,P){if(!y.a)return P;if(!P)return null;try{var B=JSON.parse(P);if(B)for(y=0;y<B.length;y++)if(Array.isArray(B[y])){var oe=B[y];if(!(2>oe.length)){var Te=oe[1];if(Array.isArray(Te)&&!(1>Te.length)){var qe=Te[0];if("noop"!=qe&&"stop"!=qe&&"close"!=qe)for(var Xt=1;Xt<Te.length;Xt++)Te[Xt]=""}}}return Be(B)}catch(dr){return P}}(y,B)+(oe?" "+oe:"")})}J.prototype.G=function(){J.S.G.call(this),se(this)},J.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ye.prototype.info=function(){};var Tt=null;function Bt(){return Tt=Tt||new de}function cr(y){Rn.call(this,"serverreachability",y)}function xn(y){var P=Bt();P.dispatchEvent(new cr(P,y))}function pn(y){Rn.call(this,"statevent",y)}function bn(y){var P=Bt();P.dispatchEvent(new pn(P,y))}function xs(y){Rn.call(this,"timingevent",y)}function Lr(y,P){if("function"!=ge(y))throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){y()},P)}At(cr,Rn),At(pn,Rn),At(xs,Rn);var $o={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},$i={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function An(){}function _s(){}An.prototype.a=null;var bi,Lo={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Ko(){Rn.call(this,"d")}function ro(){Rn.call(this,"c")}function ws(){}function Qo(y,P,B,oe){this.g=y,this.c=P,this.f=B,this.T=oe||1,this.J=new J(this),this.P=po,this.R=new zr(y=on?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}At(Ko,Rn),At(ro,Rn),At(ws,An),bi=new ws;var po=45e3,Hi={},ei={};function Oi(y,P,B){y.H=1,y.i=Pn(Gi(P)),y.j=B,y.I=!0,Sn(y,null)}function Sn(y,P){y.u=ze(),Ir(y),y.l=Gi(y.i);var B=y.l,oe=y.T;Array.isArray(oe)||(oe=[String(oe)]),sn(B.b,"t",oe),y.D=0,y.a=lo(y.g,y.g.C?P:null),0<y.O&&(y.F=new Ce(Re(y.Ca,y,y.a),y.O)),W(y.J,y.a,"readystatechange",y.Wa),P=y.B?dt(y.B):{},y.j?(y.m||(y.m="POST"),P["Content-Type"]="application/x-www-form-urlencoded",y.a.ba(y.l,y.m,y.j,P)):(y.m="GET",y.a.ba(y.l,y.m,null,P)),xn(1),function(y,P,B,oe,Te,qe){y.info(function(){if(y.a)if(qe)for(var Xt="",dr=qe.split("&"),rr=0;rr<dr.length;rr++){var xi=dr[rr].split("=");if(1<xi.length){var mo=xi[0];xi=xi[1];var Uo=mo.split("_");Xt=2<=Uo.length&&"type"==Uo[1]?Xt+(mo+"=")+xi+"&":Xt+(mo+"=redacted&")}}else Xt=null;else Xt=qe;return"XMLHTTP REQ ("+oe+") [attempt "+Te+"]: "+P+"\n"+B+"\n"+Xt})}(y.c,y.m,y.l,y.f,y.T,y.j)}function Di(y,P,B){for(var oe=!0;!y.A&&y.D<B.length;){var Te=Yo(y,B);if(Te==ei){4==P&&(y.h=4,bn(14),oe=!1),vt(y.c,y.f,null,"[Incomplete Response]");break}if(Te==Hi){y.h=4,bn(15),vt(y.c,y.f,B,"[Invalid Chunk]"),oe=!1;break}vt(y.c,y.f,Te,null),kn(y,Te)}4==P&&0==B.length&&(y.h=1,bn(16),oe=!1),y.b=y.b&&oe,oe?0<B.length&&!y.W&&(y.W=!0,(P=y.g).a==y&&P.V&&!P.F&&(P.c.info("Great, no buffering proxy detected. Bytes received: "+B.length),uo(P),P.F=!0)):(vt(y.c,y.f,B,"[Invalid Chunked Response]"),jt(y),Fr(y))}function Yo(y,P){var B=y.D,oe=P.indexOf("\n",B);return-1==oe?ei:(B=Number(P.substring(B,oe)),isNaN(B)?Hi:(oe+=1)+B>P.length?ei:(P=P.substr(oe,B),y.D=oe+B,P))}function Ir(y){y.U=ze()+y.P,io(y,y.P)}function io(y,P){if(null!=y.o)throw Error("WatchDog timer not null");y.o=Lr(Re(y.Ua,y),P)}function bs(y){y.o&&(Ot.clearTimeout(y.o),y.o=null)}function Fr(y){0==y.g.v||y.A||tu(y.g,y)}function jt(y){bs(y);var P=y.F;P&&"function"==typeof P.ja&&P.ja(),y.F=null,pe(y.R),se(y.J),y.a&&(P=y.a,y.a=null,P.abort(),P.ja())}function kn(y,P){try{var B=y.g;if(0!=B.v&&(B.a==y||nr(B.b,y)))if(B.I=y.N,!y.C&&nr(B.b,y)&&3==B.v){try{var oe=B.ka.a.parse(P)}catch(ru){oe=null}if(Array.isArray(oe)&&3==oe.length){var Te=oe;if(0==Te[0])e:if(B.j)B.oa=Te[1],0<B.oa-B.P&&37500>Te[2]&&B.H&&0==B.o&&!B.m&&(B.m=Lr(Re(B.Ra,B),6e3));else{if(B.a){if(!(B.a.u+3e3<y.u))break e;na(B),vi(B)}ao(B),bn(18)}if(1>=Nr(B.b)&&B.ea){try{B.ea()}catch(ru){}B.ea=void 0}}else So(B,11)}else if((y.C||B.a==y)&&na(B),!k(P))for(P=oe=B.ka.a.parse(P),oe=0;oe<P.length;oe++)if(B.P=(Te=P[oe])[0],Te=Te[1],2==B.v)if("c"==Te[0]){B.J=Te[1],B.ga=Te[2];var qe=Te[3];null!=qe&&(B.ha=qe,B.c.info("VER="+B.ha));var Xt=Te[4];null!=Xt&&(B.pa=Xt,B.c.info("SVER="+B.pa));var dr=Te[5];if(null!=dr&&"number"==typeof dr&&0<dr){var rr=1.5*dr;B.D=rr,B.c.info("backChannelRequestTimeoutMs_="+rr)}rr=B;var xi=y.a;if(xi){var mo=xi.a?xi.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(mo){var Uo=rr.b;!Uo.a&&(N(mo,"spdy")||N(mo,"quic")||N(mo,"h2"))&&(Uo.f=Uo.g,Uo.a=new Set,Uo.b&&($r(Uo,Uo.b),Uo.b=null))}if(rr.A){var Ks=xi.a?xi.a.getResponseHeader("X-HTTP-Session-Id"):null;Ks&&(rr.na=Ks,Ar(rr.B,rr.A,Ks))}}B.v=3,B.f&&B.f.ta(),B.V&&(B.N=ze()-y.u,B.c.info("Handshake RTT: "+B.N+"ms"));var hs=y;if((rr=B).la=yo(rr,rr.C?rr.ga:null,rr.fa),hs.C){hi(rr.b,hs);var Br=hs,fi=rr.D;fi&&Br.setTimeout(fi),Br.o&&(bs(Br),Ir(Br)),rr.a=hs}else Vo(rr);0<B.g.length&&so(B)}else"stop"!=Te[0]&&"close"!=Te[0]||So(B,7);else 3==B.v&&("stop"==Te[0]||"close"==Te[0]?"stop"==Te[0]?So(B,7):ni(B):"noop"!=Te[0]&&B.f&&B.f.sa(Te),B.o=0);xn(4)}catch(ru){}}function Xo(y,P){if(y.forEach&&"function"==typeof y.forEach)y.forEach(P,void 0);else if(te(y)||"string"==typeof y)rt(y,P,void 0);else{if(y.L&&"function"==typeof y.L)var B=y.L();else if(y.K&&"function"==typeof y.K)B=void 0;else if(te(y)||"string"==typeof y){B=[];for(var oe=y.length,Te=0;Te<oe;Te++)B.push(Te)}else for(Te in B=[],oe=0,y)B[oe++]=Te;oe=function(y){if(y.K&&"function"==typeof y.K)return y.K();if("string"==typeof y)return y.split("");if(te(y)){for(var P=[],B=y.length,oe=0;oe<B;oe++)P.push(y[oe]);return P}for(oe in P=[],B=0,y)P[B++]=y[oe];return P}(y),Te=oe.length;for(var qe=0;qe<Te;qe++)P.call(void 0,oe[qe],B&&B[qe],y)}}function hr(y,P){this.b={},this.a=[],this.c=0;var B=arguments.length;if(1<B){if(B%2)throw Error("Uneven number of arguments");for(var oe=0;oe<B;oe+=2)this.set(arguments[oe],arguments[oe+1])}else if(y)if(y instanceof hr)for(B=y.L(),oe=0;oe<B.length;oe++)this.set(B[oe],y.get(B[oe]));else for(oe in y)this.set(oe,y[oe])}function oo(y){if(y.c!=y.a.length){for(var P=0,B=0;P<y.a.length;){var oe=y.a[P];Si(y.b,oe)&&(y.a[B++]=oe),P++}y.a.length=B}if(y.c!=y.a.length){var Te={};for(B=P=0;P<y.a.length;)Si(Te,oe=y.a[P])||(y.a[B++]=oe,Te[oe]=1),P++;y.a.length=B}}function Si(y,P){return Object.prototype.hasOwnProperty.call(y,P)}(Xe=Qo.prototype).setTimeout=function(y){this.P=y},Xe.Wa=function(y){y=y.target;var P=this.F;P&&3==yr(y)?P.f():this.Ca(y)},Xe.Ca=function(y){try{if(y==this.a)e:{var P=yr(this.a),B=this.a.ua(),oe=this.a.X();if(!(3>P||3==P&&!on&&!this.a.$())){this.A||4!=P||7==B||xn(8==B||0>=oe?3:2),bs(this);var Te=this.a.X();this.N=Te;var qe=this.a.$();if(this.b=200==Te,function(y,P,B,oe,Te,qe,Xt){y.info(function(){return"XMLHTTP RESP ("+oe+") [ attempt "+Te+"]: "+P+"\n"+B+"\n"+qe+" "+Xt})}(this.c,this.m,this.l,this.f,this.T,P,Te),this.b){if(this.V&&!this.C){t:{if(this.a){var Xt,dr=this.a;if((Xt=dr.a?dr.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Xt)){var rr=Xt;break t}}rr=null}if(!rr){this.b=!1,this.h=3,bn(12),jt(this),Fr(this);break e}vt(this.c,this.f,rr,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,kn(this,rr)}this.I?(Di(this,P,qe),on&&this.b&&3==P&&(W(this.J,this.R,"tick",this.Va),this.R.start())):(vt(this.c,this.f,qe,null),kn(this,qe)),4==P&&jt(this),this.b&&!this.A&&(4==P?tu(this.g,this):(this.b=!1,Ir(this)))}else 400==Te&&0<qe.indexOf("Unknown SID")?(this.h=3,bn(12)):(this.h=0,bn(13)),jt(this),Fr(this)}}}catch(xi){}},Xe.Va=function(){if(this.a){var y=yr(this.a),P=this.a.$();this.D<P.length&&(bs(this),Di(this,y,P),this.b&&4!=y&&Ir(this))}},Xe.cancel=function(){this.A=!0,jt(this)},Xe.Ua=function(){this.o=null;var y=ze();0<=y-this.U?(function(y,P){y.info(function(){return"TIMEOUT: "+P})}(this.c,this.l),2!=this.H&&(xn(3),bn(17)),jt(this),this.h=2,Fr(this)):io(this,this.U-y)},(Xe=hr.prototype).K=function(){oo(this);for(var y=[],P=0;P<this.a.length;P++)y.push(this.b[this.a[P]]);return y},Xe.L=function(){return oo(this),this.a.concat()},Xe.get=function(y,P){return Si(this.b,y)?this.b[y]:P},Xe.set=function(y,P){Si(this.b,y)||(this.c++,this.a.push(y)),this.b[y]=P},Xe.forEach=function(y,P){for(var B=this.L(),oe=0;oe<B.length;oe++){var Te=B[oe],qe=this.get(Te);y.call(P,qe,Te,this)}};var Fn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qi(y,P){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,y instanceof Qi){this.a=void 0!==P?P:y.a,ls(this,y.f),this.j=y.j,To(this,y.c),Jo(this,y.h),this.g=y.g,P=y.b;var B=new yt;B.c=P.c,P.a&&(B.a=new hr(P.a),B.b=P.b),ks(this,B),this.i=y.i}else y&&(B=String(y).match(Fn))?(this.a=!!P,ls(this,B[1]||"",!0),this.j=si(B[2]||""),To(this,B[3]||"",!0),Jo(this,B[4]),this.g=si(B[5]||"",!0),ks(this,B[6]||"",!0),this.i=si(B[7]||"")):(this.a=!!P,this.b=new yt(null,this.a))}function Gi(y){return new Qi(y)}function ls(y,P,B){y.f=B?si(P,!0):P,y.f&&(y.f=y.f.replace(/:$/,""))}function To(y,P,B){y.c=B?si(P,!0):P}function Jo(y,P){if(P){if(P=Number(P),isNaN(P)||0>P)throw Error("Bad port number "+P);y.h=P}else y.h=null}function ks(y,P,B){P instanceof yt?(y.b=P,function(y,P){P&&!y.f&&(ft(y),y.c=null,y.a.forEach(function(B,oe){var Te=oe.toLowerCase();oe!=Te&&(xt(this,oe),sn(this,Te,B))},y)),y.f=P}(y.b,y.a)):(B||(P=j(P,Ne)),y.b=new yt(P,y.a))}function Ar(y,P,B){y.b.set(P,B)}function Pn(y){return Ar(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^ze()).toString(36)),y}function si(y,P){return y?P?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function j(y,P,B){return"string"==typeof y?(y=encodeURI(y).replace(P,L),B&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function L(y){return"%"+((y=y.charCodeAt(0))>>4&15).toString(16)+(15&y).toString(16)}Qi.prototype.toString=function(){var y=[],P=this.f;P&&y.push(j(P,K,!0),":");var B=this.c;return(B||"file"==P)&&(y.push("//"),(P=this.j)&&y.push(j(P,K,!0),"@"),y.push(encodeURIComponent(String(B)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(B=this.h)&&y.push(":",String(B))),(B=this.g)&&(this.c&&"/"!=B.charAt(0)&&y.push("/"),y.push(j(B,"/"==B.charAt(0)?we:le,!0))),(B=this.b.toString())&&y.push("?",B),(B=this.i)&&y.push("#",j(B,Qe)),y.join("")};var K=/[#\/\?@]/g,le=/[#\?:]/g,we=/[#\?]/g,Ne=/[#\?@]/g,Qe=/#/g;function yt(y,P){this.b=this.a=null,this.c=y||null,this.f=!!P}function ft(y){y.a||(y.a=new hr,y.b=0,y.c&&function(y,P){if(y){y=y.split("&");for(var B=0;B<y.length;B++){var oe=y[B].indexOf("="),Te=null;if(0<=oe){var qe=y[B].substring(0,oe);Te=y[B].substring(oe+1)}else qe=y[B];P(qe,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}(y.c,function(P,B){y.add(decodeURIComponent(P.replace(/\+/g," ")),B)}))}function xt(y,P){ft(y),P=mn(y,P),Si(y.a.b,P)&&(y.c=null,y.b-=y.a.get(P).length,Si((y=y.a).b,P)&&(delete y.b[P],y.c--,y.a.length>2*y.c&&oo(y)))}function qt(y,P){return ft(y),P=mn(y,P),Si(y.a.b,P)}function sn(y,P,B){xt(y,P),0<B.length&&(y.c=null,y.a.set(mn(y,P),E(B)),y.b+=B.length)}function mn(y,P){return P=String(P),y.f&&(P=P.toLowerCase()),P}function Vn(y,P){this.b=y,this.a=P}function wn(y){this.g=y||lr,y=Ot.PerformanceNavigationTiming?0<(y=Ot.performance.getEntriesByType("navigation")).length&&("hq"==y[0].nextHopProtocol||"h2"==y[0].nextHopProtocol):!!(Ot.ia&&Ot.ia.ya&&Ot.ia.ya()&&Ot.ia.ya().qb),this.f=y?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(Xe=yt.prototype).add=function(y,P){ft(this),this.c=null,y=mn(this,y);var B=this.a.get(y);return B||this.a.set(y,B=[]),B.push(P),this.b+=1,this},Xe.forEach=function(y,P){ft(this),this.a.forEach(function(B,oe){rt(B,function(Te){y.call(P,Te,oe,this)},this)},this)},Xe.L=function(){ft(this);for(var y=this.a.K(),P=this.a.L(),B=[],oe=0;oe<P.length;oe++)for(var Te=y[oe],qe=0;qe<Te.length;qe++)B.push(P[oe]);return B},Xe.K=function(y){ft(this);var P=[];if("string"==typeof y)qt(this,y)&&(P=C(P,this.a.get(mn(this,y))));else{y=this.a.K();for(var B=0;B<y.length;B++)P=C(P,y[B])}return P},Xe.set=function(y,P){return ft(this),this.c=null,qt(this,y=mn(this,y))&&(this.b-=this.a.get(y).length),this.a.set(y,[P]),this.b+=1,this},Xe.get=function(y,P){return y&&0<(y=this.K(y)).length?String(y[0]):P},Xe.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var y=[],P=this.a.L(),B=0;B<P.length;B++){var oe=P[B],Te=encodeURIComponent(String(oe));oe=this.K(oe);for(var qe=0;qe<oe.length;qe++){var Xt=Te;""!==oe[qe]&&(Xt+="="+encodeURIComponent(String(oe[qe]))),y.push(Xt)}}return this.c=y.join("&")};var lr=10;function gi(y){return!!y.b||!!y.a&&y.a.size>=y.f}function Nr(y){return y.b?1:y.a?y.a.size:0}function nr(y,P){return y.b?y.b==P:!!y.a&&y.a.has(P)}function $r(y,P){y.a?y.a.add(P):y.b=P}function hi(y,P){y.b&&y.b==P?y.b=null:y.a&&y.a.has(P)&&y.a.delete(P)}function Fo(y){var P,B;if(null!=y.b)return y.c.concat(y.b.s);if(null!=y.a&&0!==y.a.size){var oe=y.c;try{for(var Te=Z(y.a.values()),qe=Te.next();!qe.done;qe=Te.next())oe=oe.concat(qe.value.s)}catch(dr){P={error:dr}}finally{try{qe&&!qe.done&&(B=Te.return)&&B.call(Te)}finally{if(P)throw P.error}}return oe}return E(y.c)}function Gr(){}function Pi(){this.a=new Gr}function fs(y,P,B){var oe=B||"";try{Xo(y,function(Te,qe){var Xt=Te;$e(Te)&&(Xt=Be(Te)),P.push(oe+qe+"="+encodeURIComponent(Xt))})}catch(Te){throw P.push(oe+"type="+encodeURIComponent("_badmap")),Te}}function es(y,P,B,oe,Te){try{P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null,Te(oe)}catch(qe){}}wn.prototype.cancel=function(){var y,P;if(this.c=Fo(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var B=Z(this.a.values()),oe=B.next();!oe.done;oe=B.next())oe.value.cancel()}catch(qe){y={error:qe}}finally{try{oe&&!oe.done&&(P=B.return)&&P.call(B)}finally{if(y)throw y.error}}this.a.clear()}},Gr.prototype.stringify=function(y){return Ot.JSON.stringify(y,void 0)},Gr.prototype.parse=function(y){return Ot.JSON.parse(y,void 0)};var zs=Ot.JSON.parse;function ti(y){de.call(this),this.headers=new hr,this.H=y||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=fr,this.D=this.F=!1}At(ti,de);var fr="",Er=/^https?$/i,Tr=["POST","PUT"];function jo(y){return"content-type"==y.toLowerCase()}function Mi(y,P){y.b=!1,y.a&&(y.g=!0,y.a.abort(),y.g=!1),y.f=P,y.h=5,Ci(y),zt(y)}function Ci(y){y.u||(y.u=!0,y.dispatchEvent("complete"),y.dispatchEvent("error"))}function ai(y){if(y.b&&void 0!==In&&(!y.s[1]||4!=yr(y)||2!=y.X()))if(y.l&&4==yr(y))fe(y.za,0,y);else if(y.dispatchEvent("readystatechange"),4==yr(y)){y.b=!1;try{var oe,P=y.X();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}if(!(oe=B)){var Te;if(Te=0===P){var qe=String(y.B).match(Fn)[1]||null;if(!qe&&Ot.self&&Ot.self.location){var Xt=Ot.self.location.protocol;qe=Xt.substr(0,Xt.length-1)}Te=!Er.test(qe?qe.toLowerCase():"")}oe=Te}if(oe)y.dispatchEvent("complete"),y.dispatchEvent("success");else{y.h=6;try{var dr=2<yr(y)?y.a.statusText:""}catch(rr){dr=""}y.f=dr+" ["+y.X()+"]",Ci(y)}}finally{zt(y)}}}function zt(y,P){if(y.a){Hn(y);var B=y.a,oe=y.s[0]?ln:null;y.a=null,y.s=null,P||y.dispatchEvent("ready");try{B.onreadystatechange=oe}catch(Te){}}}function Hn(y){y.a&&y.D&&(y.a.ontimeout=null),y.m&&(Ot.clearTimeout(y.m),y.m=null)}function yr(y){return y.a?y.a.readyState:0}function qr(y,P,B){e:{for(oe in B){var oe=!1;break e}oe=!0}oe||(B=function(y){var P="";return Pe(y,function(B,oe){P+=oe,P+=":",P+=B,P+="\r\n"}),P}(B),"string"==typeof y?null!=B&&encodeURIComponent(String(B)):Ar(y,P,B))}function Rr(y,P,B){return B&&B.internalChannelParams&&B.internalChannelParams[y]||P}function ts(y){this.pa=0,this.g=[],this.c=new ye,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Rr("failFast",!1,y),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Rr("baseRetryDelayMs",5e3,y),this.Ma=Rr("retryDelaySeedMs",1e4,y),this.Ja=Rr("forwardChannelMaxRetries",2,y),this.ma=Rr("forwardChannelRequestTimeoutMs",2e4,y),this.Ka=y&&y.g||void 0,this.D=void 0,this.C=y&&y.supportsCrossDomainXhr||!1,this.J="",this.b=new wn(y&&y.concurrentRequestLimit),this.ka=new Pi,this.da=y&&y.fastHandshake||!1,this.Ga=y&&y.b||!1,y&&y.f&&(this.c.a=!1),y&&y.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&y&&y.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function ni(y){if(Do(y),3==y.v){var P=y.R++,B=Gi(y.B);Ar(B,"SID",y.J),Ar(B,"RID",P),Ar(B,"TYPE","terminate"),li(y,B),(P=new Qo(y,y.c,P,void 0)).H=2,P.i=Pn(Gi(B)),B=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(B=Ot.navigator.sendBeacon(P.i.toString(),"")),!B&&Ot.Image&&((new Image).src=P.i,B=!0),B||(P.a=lo(P.g,null),P.a.ba(P.i)),P.u=ze(),Ir(P)}co(y)}function vi(y){y.a&&(uo(y),y.a.cancel(),y.a=null)}function Do(y){vi(y),y.j&&(Ot.clearTimeout(y.j),y.j=null),na(y),y.b.cancel(),y.h&&("number"==typeof y.h&&Ot.clearTimeout(y.h),y.h=null)}function En(y,P){y.g.push(new Vn(y.La++,P)),3==y.v&&so(y)}function so(y){gi(y.b)||y.h||(y.h=!0,an(y.Ba,y),y.u=0)}function Mr(y,P){var B;B=P?P.f:y.R++;var oe=Gi(y.B);Ar(oe,"SID",y.J),Ar(oe,"RID",B),Ar(oe,"AID",y.P),li(y,oe),y.i&&y.l&&qr(oe,y.i,y.l),B=new Qo(y,y.c,B,y.u+1),null===y.i&&(B.B=y.l),P&&(y.g=P.s.concat(y.g)),P=Ei(y,B,1e3),B.setTimeout(Math.round(.5*y.ma)+Math.round(.5*y.ma*Math.random())),$r(y.b,B),Oi(B,oe,P)}function li(y,P){y.f&&Xo({},function(B,oe){Ar(P,oe,B)})}function Ei(y,P,B){B=Math.min(y.g.length,B);var oe=y.f?Re(y.f.Ha,y.f,y):null;e:for(var Te=y.g,qe=-1;;){var Xt=["count="+B];-1==qe?0<B?Xt.push("ofs="+(qe=Te[0].b)):qe=0:Xt.push("ofs="+qe);for(var dr=!0,rr=0;rr<B;rr++){var xi=Te[rr].b,mo=Te[rr].a;if(0>(xi-=qe))qe=Math.max(0,Te[rr].b-100),dr=!1;else try{fs(mo,Xt,"req"+xi+"_")}catch(Uo){oe&&oe(mo)}}if(dr){oe=Xt.join("&");break e}}return y=y.g.splice(0,B),P.s=y,oe}function Vo(y){y.a||y.j||(y.U=1,an(y.Aa,y),y.o=0)}function ao(y){return!(y.a||y.j||3<=y.o||(y.U++,y.j=Lr(Re(y.Aa,y),vo(y,y.o)),y.o++,0))}function uo(y){null!=y.s&&(Ot.clearTimeout(y.s),y.s=null)}function xr(y){y.a=new Qo(y,y.c,"rpc",y.U),null===y.i&&(y.a.B=y.l),y.a.O=0;var P=Gi(y.la);Ar(P,"RID","rpc"),Ar(P,"SID",y.J),Ar(P,"CI",y.H?"0":"1"),Ar(P,"AID",y.P),li(y,P),Ar(P,"TYPE","xmlhttp"),y.i&&y.l&&qr(P,y.i,y.l),y.D&&y.a.setTimeout(y.D);var B=y.a;y=y.ga,B.H=1,B.i=Pn(Gi(P)),B.j=null,B.I=!0,Sn(B,y)}function na(y){null!=y.m&&(Ot.clearTimeout(y.m),y.m=null)}function tu(y,P){var B=null;if(y.a==P){na(y),uo(y),y.a=null;var oe=2}else{if(!nr(y.b,P))return;B=P.s,hi(y.b,P),oe=1}if(y.I=P.N,0!=y.v)if(P.b)if(1==oe){B=P.j?P.j.length:0,P=ze()-P.u;var Te=y.u;(oe=Bt()).dispatchEvent(new xs(oe,B,P,Te)),so(y)}else Vo(y);else if(3==(Te=P.h)||0==Te&&0<y.I||!(1==oe&&function(y,P){return!(Nr(y.b)>=y.b.f-(y.h?1:0)||(y.h?(y.g=P.s.concat(y.g),0):1==y.v||2==y.v||y.u>=(y.Ia?0:y.Ja)||(y.h=Lr(Re(y.Ba,y,P),vo(y,y.u)),y.u++,0)))}(y,P)||2==oe&&ao(y)))switch(B&&0<B.length&&(P=y.b,P.c=P.c.concat(B)),Te){case 1:So(y,5);break;case 4:So(y,10);break;case 3:So(y,6);break;default:So(y,2)}}function vo(y,P){var B=y.Fa+Math.floor(Math.random()*y.Ma);return y.f||(B*=2),B*P}function So(y,P){if(y.c.info("Error code "+P),2==P){var B=null;y.f&&(B=null);var oe=Re(y.Xa,y);B||(B=new Qi("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||ls(B,"https"),Pn(B)),function(y,P){var B=new ye;if(Ot.Image){var oe=new Image;oe.onload=it(es,B,oe,"TestLoadImage: loaded",!0,P),oe.onerror=it(es,B,oe,"TestLoadImage: error",!1,P),oe.onabort=it(es,B,oe,"TestLoadImage: abort",!1,P),oe.ontimeout=it(es,B,oe,"TestLoadImage: timeout",!1,P),Ot.setTimeout(function(){oe.ontimeout&&oe.ontimeout()},1e4),oe.src=y}else P(!1)}(B.toString(),oe)}else bn(2);y.v=0,y.f&&y.f.ra(P),co(y),Do(y)}function co(y){y.v=0,y.I=-1,y.f&&((0!=Fo(y.b).length||0!=y.g.length)&&(y.b.c.length=0,E(y.g),y.g.length=0),y.f.qa())}function yo(y,P,B){var oe=function(y){return y instanceof Qi?Gi(y):new Qi(y,void 0)}(B);if(""!=oe.c)P&&To(oe,P+"."+oe.c),Jo(oe,oe.h);else{var Te=Ot.location;oe=function(y,P,B,oe){var Te=new Qi(null,void 0);return y&&ls(Te,y),P&&To(Te,P),B&&Jo(Te,B),oe&&(Te.g=oe),Te}(Te.protocol,P?P+"."+Te.hostname:Te.hostname,+Te.port,B)}return y.W&&Pe(y.W,function(qe,Xt){Ar(oe,Xt,qe)}),B=y.na,(P=y.A)&&B&&Ar(oe,P,B),Ar(oe,"VER",y.ha),li(y,oe),oe}function lo(y,P){if(P&&!y.C)throw Error("Can't create secondary domain capable XhrIo object.");return(P=new ti(y.Ka)).F=y.C,P}function Wr(){}function $s(){if(St&&!(10<=Number(Zn)))throw Error("Environmental error: no available transport.")}function Yn(y,P){de.call(this),this.a=new ts(P),this.l=y,this.b=P&&P.messageUrlParams||null,y=P&&P.messageHeaders||null,P&&P.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.a.l=y,y=P&&P.initMessageHeaders||null,P&&P.messageContentType&&(y?y["X-WebChannel-Content-Type"]=P.messageContentType:y={"X-WebChannel-Content-Type":P.messageContentType}),P&&P.a&&(y?y["X-WebChannel-Client-Profile"]=P.a:y={"X-WebChannel-Client-Profile":P.a}),this.a.O=y,(y=P&&P.httpHeadersOverwriteParam)&&!k(y)&&(this.a.i=y),this.h=P&&P.supportsCrossDomainXhr||!1,this.g=P&&P.sendRawJson||!1,(P=P&&P.httpSessionIdParam)&&!k(P)&&(this.a.A=P,null!==(y=this.b)&&P in y&&P in(y=this.b)&&delete y[P]),this.f=new Dr(this)}function Yi(y){Ko.call(this);var P=y.__sm__;if(P){e:{for(var B in P){y=B;break e}y=void 0}(this.c=y)?(y=this.c,this.data=null!==P&&y in P?P[y]:void 0):this.data=P}else this.data=y}function Rt(){ro.call(this),this.status=1}function Dr(y){this.a=y}(Xe=ti.prototype).ba=function(y,P,B,oe){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+y);P=P?P.toUpperCase():"GET",this.B=y,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(y){var P;return(P=y.a)||(P=y.a={}),P}(this.H?this.H:bi),this.a.onreadystatechange=Re(this.za,this);try{this.A=!0,this.a.open(P,String(y),!0),this.A=!1}catch(qe){return void Mi(this,qe)}y=B||"";var Te=new hr(this.headers);oe&&Xo(oe,function(qe,Xt){Te.set(Xt,qe)}),oe=function(y){e:{for(var P=jo,B=y.length,oe="string"==typeof y?y.split(""):y,Te=0;Te<B;Te++)if(Te in oe&&P.call(void 0,oe[Te],Te,y)){P=Te;break e}P=-1}return 0>P?null:"string"==typeof y?y.charAt(P):y[P]}(Te.L()),B=Ot.FormData&&y instanceof Ot.FormData,!(0<=He(Tr,P))||oe||B||Te.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),Te.forEach(function(qe,Xt){this.a.setRequestHeader(Xt,qe)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Hn(this),0<this.o&&((this.D=function(y){return St&&yn(9)&&"number"==typeof y.timeout&&void 0!==y.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Re(this.xa,this)):this.m=fe(this.xa,this.o,this)),this.l=!0,this.a.send(y),this.l=!1}catch(qe){Mi(this,qe)}},Xe.xa=function(){void 0!==In&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Xe.abort=function(y){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=y||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),zt(this))},Xe.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),zt(this,!0)),ti.S.G.call(this)},Xe.za=function(){this.j||(this.A||this.l||this.g?ai(this):this.Ta())},Xe.Ta=function(){ai(this)},Xe.X=function(){try{return 2<yr(this)?this.a.status:-1}catch(y){return-1}},Xe.$=function(){try{return this.a?this.a.responseText:""}catch(y){return""}},Xe.Na=function(y){if(this.a){var P=this.a.responseText;return y&&0==P.indexOf(y)&&(P=P.substring(y.length)),zs(P)}},Xe.ua=function(){return this.h},Xe.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Xe=ts.prototype).ha=8,Xe.v=1,Xe.Ba=function(y){if(this.h)if(this.h=null,1==this.v){if(!y){this.R=Math.floor(1e5*Math.random()),y=this.R++;var oe,P=new Qo(this,this.c,y,void 0),B=this.l;if(this.O&&(B?De(B=dt(B),this.O):B=this.O),null===this.i&&(P.B=B),this.da)e:{for(var Te=oe=0;Te<this.g.length;Te++){var qe=this.g[Te];if(void 0===(qe="__data__"in qe.a&&"string"==typeof(qe=qe.a.__data__)?qe.length:void 0))break;if(4096<(oe+=qe)){oe=Te;break e}if(4096===oe||Te===this.g.length-1){oe=Te+1;break e}}oe=1e3}else oe=1e3;oe=Ei(this,P,oe),Ar(Te=Gi(this.B),"RID",y),Ar(Te,"CVER",22),this.A&&Ar(Te,"X-HTTP-Session-Id",this.A),li(this,Te),this.i&&B&&qr(Te,this.i,B),$r(this.b,P),this.Ga&&Ar(Te,"TYPE","init"),this.da?(Ar(Te,"$req",oe),Ar(Te,"SID","null"),P.V=!0,Oi(P,Te,null)):Oi(P,Te,oe),this.v=2}}else 3==this.v&&(y?Mr(this,y):0==this.g.length||gi(this.b)||Mr(this))},Xe.Aa=function(){if(this.j=null,xr(this),this.V&&!(this.F||null==this.a||0>=this.N)){var y=2*this.N;this.c.info("BP detection timer enabled: "+y),this.s=Lr(Re(this.Sa,this),y)}},Xe.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,vi(this),xr(this))},Xe.Ra=function(){null!=this.m&&(this.m=null,vi(this),ao(this),bn(19))},Xe.Xa=function(y){y?(this.c.info("Successfully pinged google.com"),bn(2)):(this.c.info("Failed to ping google.com"),bn(1))},(Xe=Wr.prototype).ta=function(){},Xe.sa=function(){},Xe.ra=function(){},Xe.qa=function(){},Xe.Ha=function(){},$s.prototype.a=function(y,P){return new Yn(y,P)},At(Yn,de),(Xe=Yn.prototype).addEventListener=function(y,P,B,oe){Yn.S.addEventListener.call(this,y,P,B,oe)},Xe.removeEventListener=function(y,P,B,oe){Yn.S.removeEventListener.call(this,y,P,B,oe)},Xe.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var y=this.a,P=this.l,B=this.b||void 0;bn(0),y.fa=P,y.W=B||{},y.H=y.T,y.B=yo(y,null,y.fa),so(y)},Xe.close=function(){ni(this.a)},Xe.Pa=function(y){if("string"==typeof y){var P={};P.__data__=y,En(this.a,P)}else this.g?((P={}).__data__=Be(y),En(this.a,P)):En(this.a,y)},Xe.G=function(){this.a.f=null,delete this.f,ni(this.a),delete this.a,Yn.S.G.call(this)},At(Yi,Ko),At(Rt,ro),At(Dr,Wr),Dr.prototype.ta=function(){this.a.dispatchEvent("a")},Dr.prototype.sa=function(y){this.a.dispatchEvent(new Yi(y))},Dr.prototype.ra=function(y){this.a.dispatchEvent(new Rt(y))},Dr.prototype.qa=function(){this.a.dispatchEvent("b")},$s.prototype.createWebChannel=$s.prototype.a,Yn.prototype.send=Yn.prototype.Pa,Yn.prototype.open=Yn.prototype.Oa,Yn.prototype.close=Yn.prototype.close,$o.NO_ERROR=0,$o.TIMEOUT=8,$o.HTTP_ERROR=6,$i.COMPLETE="complete",_s.EventType=Lo,Lo.OPEN="a",Lo.CLOSE="b",Lo.ERROR="c",Lo.MESSAGE="d",de.prototype.listen=de.prototype.va,ti.prototype.listenOnce=ti.prototype.wa,ti.prototype.getLastError=ti.prototype.Qa,ti.prototype.getLastErrorCode=ti.prototype.ua,ti.prototype.getStatus=ti.prototype.X,ti.prototype.getResponseJson=ti.prototype.Na,ti.prototype.getResponseText=ti.prototype.$,ti.prototype.send=ti.prototype.ba;var Ls=function(){return new $s},qi=$o,ns=$i,Co=_s,nu=ti;const ui={createWebChannelTransport:Ls,ErrorCode:$o,EventType:$i,WebChannel:_s,XhrIo:ti}},515:(br,ot,lt)=>{"use strict";var $=lt(2);function Q(ln){return ln&&"object"==typeof ln&&"default"in ln?ln:{default:ln}}lt(548),lt(679),lt(684),lt(401),lt(299),lt(314),lt(560),lt(429),lt(665);var Z=Q($);Z.default.registerVersion("firebase","7.24.0","app"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Z.default.registerVersion("firebase","7.24.0"),br.exports=Z.default},995:function(br,ot){!function(lt){"use strict";function $(Re){return Array.prototype.slice.call(Re)}function Q(Re){return new Promise(function(it,ze){Re.onsuccess=function(){it(Re.result)},Re.onerror=function(){ze(Re.error)}})}function Z(Re,it,ze){var At,Nt=new Promise(function(_t,He){Q(At=Re[it].apply(Re,ze)).then(_t,He)});return Nt.request=At,Nt}function kt(Re,it,ze){var At=Z(Re,it,ze);return At.then(function(Nt){if(Nt)return new te(Nt,At.request)})}function Xe(Re,it,ze){ze.forEach(function(At){Object.defineProperty(Re.prototype,At,{get:function(){return this[it][At]},set:function(Nt){this[it][At]=Nt}})})}function In(Re,it,ze,At){At.forEach(function(Nt){Nt in ze.prototype&&(Re.prototype[Nt]=function(){return Z(this[it],Nt,arguments)})})}function Ot(Re,it,ze,At){At.forEach(function(Nt){Nt in ze.prototype&&(Re.prototype[Nt]=function(){return this[it][Nt].apply(this[it],arguments)})})}function ln(Re,it,ze,At){At.forEach(function(Nt){Nt in ze.prototype&&(Re.prototype[Nt]=function(){return kt(this[it],Nt,arguments)})})}function ge(Re){this._index=Re}function te(Re,it){this._cursor=Re,this._request=it}function $e(Re){this._store=Re}function Ze(Re){this._tx=Re,this.complete=new Promise(function(it,ze){Re.oncomplete=function(){it()},Re.onerror=function(){ze(Re.error)},Re.onabort=function(){ze(Re.error)}})}function Ae(Re,it,ze){this._db=Re,this.oldVersion=it,this.transaction=new Ze(ze)}function mt(Re){this._db=Re}Xe(ge,"_index",["name","keyPath","multiEntry","unique"]),In(ge,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ln(ge,"_index",IDBIndex,["openCursor","openKeyCursor"]),Xe(te,"_cursor",["direction","key","primaryKey","value"]),In(te,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Re){Re in IDBCursor.prototype&&(te.prototype[Re]=function(){var it=this,ze=arguments;return Promise.resolve().then(function(){return it._cursor[Re].apply(it._cursor,ze),Q(it._request).then(function(At){if(At)return new te(At,it._request)})})})}),$e.prototype.createIndex=function(){return new ge(this._store.createIndex.apply(this._store,arguments))},$e.prototype.index=function(){return new ge(this._store.index.apply(this._store,arguments))},Xe($e,"_store",["name","keyPath","indexNames","autoIncrement"]),In($e,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ln($e,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),Ot($e,"_store",IDBObjectStore,["deleteIndex"]),Ze.prototype.objectStore=function(){return new $e(this._tx.objectStore.apply(this._tx,arguments))},Xe(Ze,"_tx",["objectStoreNames","mode"]),Ot(Ze,"_tx",IDBTransaction,["abort"]),Ae.prototype.createObjectStore=function(){return new $e(this._db.createObjectStore.apply(this._db,arguments))},Xe(Ae,"_db",["name","version","objectStoreNames"]),Ot(Ae,"_db",IDBDatabase,["deleteObjectStore","close"]),mt.prototype.transaction=function(){return new Ze(this._db.transaction.apply(this._db,arguments))},Xe(mt,"_db",["name","version","objectStoreNames"]),Ot(mt,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Re){[$e,ge].forEach(function(it){Re in it.prototype&&(it.prototype[Re.replace("open","iterate")]=function(){var ze=$(arguments),At=ze[ze.length-1],Nt=this._store||this._index,_t=Nt[Re].apply(Nt,ze.slice(0,-1));_t.onsuccess=function(){At(_t.result)}})})}),[ge,$e].forEach(function(Re){Re.prototype.getAll||(Re.prototype.getAll=function(it,ze){var At=this,Nt=[];return new Promise(function(_t){At.iterateCursor(it,function(He){He?(Nt.push(He.value),void 0===ze||Nt.length!=ze?He.continue():_t(Nt)):_t(Nt)})})})}),lt.openDb=function(Re,it,ze){var At=Z(indexedDB,"open",[Re,it]),Nt=At.request;return Nt&&(Nt.onupgradeneeded=function(_t){ze&&ze(new Ae(Nt.result,_t.oldVersion,Nt.transaction))}),At.then(function(_t){return new mt(_t)})},lt.deleteDb=function(Re){return Z(indexedDB,"deleteDatabase",[Re])},Object.defineProperty(lt,"__esModule",{value:!0})}(ot)},504:(br,ot,lt)=>{"use strict";function $(e){return"function"==typeof e}function Q(e){const r=e(o=>{Error.call(o),o.stack=(new Error).stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}const Z=Q(e=>function(r){e(this),this.message=r?`${r.length} errors occurred during unsubscription:\n${r.map((o,c)=>`${c+1}) ${o.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=r});function kt(e,t){if(e){const r=e.indexOf(t);0<=r&&e.splice(r,1)}}class Xe{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(const d of r)d.remove(this);else r.remove(this);const{initialTeardown:o}=this;if($(o))try{o()}catch(d){t=d instanceof Z?d.errors:[d]}const{_teardowns:c}=this;if(c){this._teardowns=null;for(const d of c)try{ln(d)}catch(w){t=null!=t?t:[],w instanceof Z?t=[...t,...w.errors]:t.push(w)}}if(t)throw new Z(t)}}add(t){var r;if(t&&t!==this)if(this.closed)ln(t);else{if(t instanceof Xe){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._teardowns=null!==(r=this._teardowns)&&void 0!==r?r:[]).push(t)}}_hasParent(t){const{_parentage:r}=this;return r===t||Array.isArray(r)&&r.includes(t)}_addParent(t){const{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t}_removeParent(t){const{_parentage:r}=this;r===t?this._parentage=null:Array.isArray(r)&&kt(r,t)}remove(t){const{_teardowns:r}=this;r&&kt(r,t),t instanceof Xe&&t._removeParent(this)}}Xe.EMPTY=(()=>{const e=new Xe;return e.closed=!0,e})();const In=Xe.EMPTY;function Ot(e){return e instanceof Xe||e&&"closed"in e&&$(e.remove)&&$(e.add)&&$(e.unsubscribe)}function ln(e){$(e)?e():e.unsubscribe()}const ge={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(...e){const{delegate:t}=te;return((null==t?void 0:t.setTimeout)||setTimeout)(...e)},clearTimeout(e){const{delegate:t}=te;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function $e(e){te.setTimeout(()=>{const{onUnhandledError:t}=ge;if(!t)throw e;t(e)})}function Ze(){}const Ae=Dt("C",void 0,void 0);function Dt(e,t,r){return{kind:e,value:t,error:r}}let Re=null;function it(e){if(ge.useDeprecatedSynchronousErrorHandling){const t=!Re;if(t&&(Re={errorThrown:!1,error:null}),e(),t){const{errorThrown:r,error:o}=Re;if(Re=null,r)throw o}}else e()}class At extends Xe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ot(t)&&t.add(this)):this.destination=D}static create(t,r,o){return new Nt(t,r,o)}next(t){this.isStopped?rt(Dt("N",t,void 0),this):this._next(t)}error(t){this.isStopped?rt(Dt("E",void 0,t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?rt(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Nt extends At{constructor(t,r,o){let c;if(super(),$(t))c=t;else if(t){let d;({next:c,error:r,complete:o}=t),this&&ge.useDeprecatedNextContext?(d=Object.create(t),d.unsubscribe=()=>this.unsubscribe()):d=t,c=null==c?void 0:c.bind(d),r=null==r?void 0:r.bind(d),o=null==o?void 0:o.bind(d)}this.destination={next:c?_t(c):Ze,error:_t(null!=r?r:He),complete:o?_t(o):Ze}}}function _t(e,t){return(...r)=>{try{e(...r)}catch(o){ge.useDeprecatedSynchronousErrorHandling?function(e){ge.useDeprecatedSynchronousErrorHandling&&Re&&(Re.errorThrown=!0,Re.error=e)}(o):$e(o)}}}function He(e){throw e}function rt(e,t){const{onStoppedNotification:r}=ge;r&&te.setTimeout(()=>r(e,t))}const D={closed:!0,next:Ze,error:He,complete:Ze},C="function"==typeof Symbol&&Symbol.observable||"@@observable";function E(e){return e}let N=(()=>{class e{constructor(r){r&&(this._subscribe=r)}lift(r){const o=new e;return o.source=this,o.operator=r,o}subscribe(r,o,c){const d=function(e){return e&&e instanceof At||function(e){return e&&$(e.next)&&$(e.error)&&$(e.complete)}(e)&&Ot(e)}(r)?r:new Nt(r,o,c);return it(()=>{const{operator:w,source:T}=this;d.add(w?w.call(d,T):T?this._subscribe(d):this._trySubscribe(d))}),d}_trySubscribe(r){try{return this._subscribe(r)}catch(o){r.error(o)}}forEach(r,o){return new(o=ee(o))((c,d)=>{let w;w=this.subscribe(T=>{try{r(T)}catch(A){d(A),null==w||w.unsubscribe()}},d,c)})}_subscribe(r){var o;return null===(o=this.source)||void 0===o?void 0:o.subscribe(r)}[C](){return this}pipe(...r){return function(e){return 0===e.length?E:1===e.length?e[0]:function(r){return e.reduce((o,c)=>c(o),r)}}(r)(this)}toPromise(r){return new(r=ee(r))((o,c)=>{let d;this.subscribe(w=>d=w,w=>c(w),()=>o(d))})}}return e.create=t=>new e(t),e})();function ee(e){var t;return null!==(t=null!=e?e:ge.Promise)&&void 0!==t?t:Promise}const re=Q(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Pe=(()=>{class e extends N{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){const o=new dt(this,this);return o.operator=r,o}_throwIfClosed(){if(this.closed)throw new re}next(r){it(()=>{if(this._throwIfClosed(),!this.isStopped){const o=this.observers.slice();for(const c of o)c.next(r)}})}error(r){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;const{observers:o}=this;for(;o.length;)o.shift().error(r)}})}complete(){it(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var r;return(null===(r=this.observers)||void 0===r?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){const{hasError:o,isStopped:c,observers:d}=this;return o||c?In:(d.push(r),new Xe(()=>kt(d,r)))}_checkFinalizedStatuses(r){const{hasError:o,thrownError:c,isStopped:d}=this;o?r.error(c):d&&r.complete()}asObservable(){const r=new N;return r.source=this,r}}return e.create=(t,r)=>new dt(t,r),e})();class dt extends Pe{constructor(t,r){super(),this.destination=t,this.source=r}next(t){var r,o;null===(o=null===(r=this.destination)||void 0===r?void 0:r.next)||void 0===o||o.call(r,t)}error(t){var r,o;null===(o=null===(r=this.destination)||void 0===r?void 0:r.error)||void 0===o||o.call(r,t)}complete(){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===r||r.call(t)}_subscribe(t){var r,o;return null!==(o=null===(r=this.source)||void 0===r?void 0:r.subscribe(t))&&void 0!==o?o:In}}function De(e){return t=>{if(function(e){return $(null==e?void 0:e.lift)}(t))return t.lift(function(r){try{return e(r,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}class Ve extends At{constructor(t,r,o,c,d){super(t),this.onFinalize=d,this._next=r?function(w){try{r(w)}catch(T){t.error(T)}}:super._next,this._error=c?function(w){try{c(w)}catch(T){t.error(T)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(w){t.error(w)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;const{closed:r}=this;super.unsubscribe(),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}function Kn(e){return this instanceof Kn?(this.v=e,this):new Kn(e)}function Pr(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,o=r.apply(e,t||[]),d=[];return c={},w("next"),w("throw"),w("return"),c[Symbol.asyncIterator]=function(){return this},c;function w(ve){o[ve]&&(c[ve]=function(Oe){return new Promise(function(et,Ct){d.push([ve,Oe,et,Ct])>1||T(ve,Oe)})})}function T(ve,Oe){try{!function(ve){ve.value instanceof Kn?Promise.resolve(ve.value.v).then(F,q):ie(d[0][2],ve)}(o[ve](Oe))}catch(et){ie(d[0][3],et)}}function F(ve){T("next",ve)}function q(ve){T("throw",ve)}function ie(ve,Oe){ve(Oe),d.shift(),d.length&&T(d[0][0],d[0][1])}}function Rn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(d){r[d]=e[d]&&function(w){return new Promise(function(T,A){!function(d,w,T,A){Promise.resolve(A).then(function(F){d({value:F,done:T})},w)}(T,A,(w=e[d](w)).done,w.value)})}}}const xe=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ft(e){return $(null==e?void 0:e.then)}function Pt(e){return $(e[C])}function Zt(e){return Symbol.asyncIterator&&$(null==e?void 0:e[Symbol.asyncIterator])}function $t(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Qn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function On(e){return $(null==e?void 0:e[Qn])}function er(e){return Pr(this,arguments,function*(){const r=e.getReader();try{for(;;){const{value:o,done:c}=yield Kn(r.read());if(c)return yield Kn(void 0);yield yield Kn(o)}}finally{r.releaseLock()}})}function Cn(e){return $(null==e?void 0:e.getReader)}function Cr(e){if(e instanceof N)return e;if(null!=e){if(Pt(e))return function(e){return new N(t=>{const r=e[C]();if($(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(xe(e))return function(e){return new N(t=>{for(let r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}(e);if(Ft(e))return function(e){return new N(t=>{e.then(r=>{t.closed||(t.next(r),t.complete())},r=>t.error(r)).then(null,$e)})}(e);if(Zt(e))return oi(e);if(On(e))return function(e){return new N(t=>{for(const r of e)if(t.next(r),t.closed)return;t.complete()})}(e);if(Cn(e))return function(e){return oi(er(e))}(e)}throw $t(e)}function oi(e){return new N(t=>{(function(e,t){var r,o,c,d;return function(e,t,r,o){return new(r||(r=Promise))(function(d,w){function T(q){try{F(o.next(q))}catch(ie){w(ie)}}function A(q){try{F(o.throw(q))}catch(ie){w(ie)}}function F(q){q.done?d(q.value):function(d){return d instanceof r?d:new r(function(w){w(d)})}(q.value).then(T,A)}F((o=o.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(r=Rn(e);!(o=yield r.next()).done;)if(t.next(o.value),t.closed)return}catch(w){c={error:w}}finally{try{o&&!o.done&&(d=r.return)&&(yield d.call(r))}finally{if(c)throw c.error}}t.complete()})})(e,t).catch(r=>t.error(r))})}function Me(e,t,r,o=0,c=!1){const d=t.schedule(function(){r(),c?e.add(this.schedule(null,o)):this.unsubscribe()},o);if(e.add(d),!c)return d}function st(e,t,r=1/0){return $(t)?st((o,c)=>function(e,t){return De((r,o)=>{let c=0;r.subscribe(new Ve(o,d=>{o.next(e.call(undefined,d,c++))}))})}((d,w)=>t(o,d,c,w))(Cr(e(o,c))),r):("number"==typeof t&&(r=t),De((o,c)=>function(e,t,r,o,c,d,w,T){const A=[];let F=0,q=0,ie=!1;const ve=()=>{ie&&!A.length&&!F&&t.complete()},Oe=Ct=>F<o?et(Ct):A.push(Ct),et=Ct=>{F++;let Ht=!1;Cr(r(Ct,q++)).subscribe(new Ve(t,Qt=>{t.next(Qt)},()=>{Ht=!0},void 0,()=>{if(Ht)try{for(F--;A.length&&F<o;){const Qt=A.shift();et(Qt)}ve()}catch(Qt){t.error(Qt)}}))};return e.subscribe(new Ve(t,Oe,()=>{ie=!0,ve()})),()=>{}}(o,c,e,r)))}const tt=new N(e=>e.complete());function wt(e){return e[e.length-1]}function Bn(e,t=0){return De((r,o)=>{r.subscribe(new Ve(o,c=>Me(o,e,()=>o.next(c),t),()=>Me(o,e,()=>o.complete(),t),c=>Me(o,e,()=>o.error(c),t)))})}function zr(e,t=0){return De((r,o)=>{o.add(e.schedule(()=>r.subscribe(o),t))})}function J(e,t){if(!e)throw new Error("Iterable cannot be null");return new N(r=>{Me(r,t,()=>{const o=e[Symbol.asyncIterator]();Me(r,t,()=>{o.next().then(c=>{c.done?r.complete():r.next(c.value)})},0,!0)})})}function se(e,t){return t?function(e,t){if(null!=e){if(Pt(e))return function(e,t){return Cr(e).pipe(zr(t),Bn(t))}(e,t);if(xe(e))return function(e,t){return new N(r=>{let o=0;return t.schedule(function(){o===e.length?r.complete():(r.next(e[o++]),r.closed||this.schedule())})})}(e,t);if(Ft(e))return function(e,t){return Cr(e).pipe(zr(t),Bn(t))}(e,t);if(Zt(e))return J(e,t);if(On(e))return function(e,t){return new N(r=>{let o;return Me(r,t,()=>{o=e[Qn](),Me(r,t,()=>{let c,d;try{({value:c,done:d}=o.next())}catch(w){return void r.error(w)}d?r.complete():r.next(c)},0,!0)}),()=>$(null==o?void 0:o.return)&&o.return()})}(e,t);if(Cn(e))return function(e,t){return J(er(e),t)}(e,t)}throw $t(e)}(e,t):Cr(e)}function ye(...e){const t=function(e){return function(e){return e&&$(e.schedule)}(wt(e))?e.pop():void 0}(e),r=function(e,t){return"number"==typeof wt(e)?e.pop():1/0}(e),o=e;return o.length?1===o.length?Cr(o[0]):function(e=1/0){return st(E,e)}(r)(se(o,t)):tt}function vt(e,t,...r){return!0===t?(e(),null):!1===t?null:t(...r).pipe(De((t,r)=>{let o=0;t.subscribe(new Ve(r,c=>{++o<=1&&(r.next(c),1<=o&&r.complete())}))})).subscribe(()=>e())}function ct(e){for(let t in e)if(e[t]===ct)return t;throw Error("Could not find renamed property on target object.")}function Tt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Tt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return-1===r?t:t.substring(0,r)}function Bt(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const cr=ct({__forward_ref__:ct});function xn(e){return e.__forward_ref__=xn,e.toString=function(){return Tt(this())},e}function pn(e){return function(e){return"function"==typeof e&&e.hasOwnProperty(cr)&&e.__forward_ref__===xn}(e)?e():e}class Lr extends Error{constructor(t,r){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(t,r)),this.code=t}}function An(e){return"string"==typeof e?e:null==e?"":String(e)}function pi(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():An(e)}function ro(e,t){const r=t?` in ${t}`:"";throw new Lr("201",`No provider for ${pi(e)} found${r}`)}function Fr(e,t){null==e&&function(e,t,r,o){throw new Error(`ASSERTION ERROR: ${e}`+(null==o?"":` [Expected=> ${r} ${o} ${t} <=Actual]`))}(t,e,null,"!=")}function hr(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Si(e){return{providers:e.providers||[],imports:e.imports||[]}}function Fn(e){return Ki(e,To)||Ki(e,ks)}function Ki(e,t){return e.hasOwnProperty(t)?e[t]:null}function ls(e){return e&&(e.hasOwnProperty(Jo)||e.hasOwnProperty(Ar))?e[Jo]:null}const To=ct({\u0275prov:ct}),Jo=ct({\u0275inj:ct}),ks=ct({ngInjectableDef:ct}),Ar=ct({ngInjectorDef:ct});var Pn=(()=>((Pn=Pn||{})[Pn.Default=0]="Default",Pn[Pn.Host=1]="Host",Pn[Pn.Self=2]="Self",Pn[Pn.SkipSelf=4]="SkipSelf",Pn[Pn.Optional=8]="Optional",Pn))();let go;function si(e){const t=go;return go=e,t}function j(e,t,r){const o=Fn(e);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:r&Pn.Optional?null:void 0!==t?t:void ro(Tt(e),"Injector")}function K(e){return{toString:e}.toString()}var le=(()=>((le=le||{})[le.OnPush=0]="OnPush",le[le.Default=1]="Default",le))(),Qe=(()=>{return(e=Qe||(Qe={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Qe;var e})();const yt="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,xt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,sn=yt||"undefined"!=typeof global&&global||ft||xt,Vn={},wn=[],lr=ct({\u0275cmp:ct}),gi=ct({\u0275dir:ct}),Nr=ct({\u0275pipe:ct}),nr=ct({\u0275mod:ct}),$r=ct({\u0275fac:ct}),hi=ct({__NG_ELEMENT_ID__:ct});let Fo=0;function Gr(e){return K(()=>{const r={},o={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===le.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||wn,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||Qe.Emulated,id:"c",styles:e.styles||wn,_:null,setInput:null,schemas:e.schemas||null,tView:null},c=e.directives,d=e.features,w=e.pipes;return o.id+=Fo++,o.inputs=fr(e.inputs,r),o.outputs=fr(e.outputs),d&&d.forEach(T=>T(o)),o.directiveDefs=c?()=>("function"==typeof c?c():c).map(fs):null,o.pipeDefs=w?()=>("function"==typeof w?w():w).map(Zo):null,o})}function fs(e){return Kr(e)||function(e){return e[gi]||null}(e)}function Zo(e){return function(e){return e[Nr]||null}(e)}const es={};function zs(e){return K(()=>{const t={type:e.type,bootstrap:e.bootstrap||wn,declarations:e.declarations||wn,imports:e.imports||wn,exports:e.exports||wn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(es[e.id]=e.type),t})}function fr(e,t){if(null==e)return Vn;const r={};for(const o in e)if(e.hasOwnProperty(o)){let c=e[o],d=c;Array.isArray(c)&&(d=c[1],c=c[0]),r[c]=o,t&&(t[c]=d)}return r}const Er=Gr;function Kr(e){return e[lr]||null}function Ci(e,t){const r=e[nr]||null;if(!r&&!0===t)throw new Error(`Type ${Tt(e)} does not have '\u0275mod' property.`);return r}function Yn(e){return Array.isArray(e)&&"object"==typeof e[1]}function Yi(e){return Array.isArray(e)&&!0===e[1]}function Rt(e){return 0!=(8&e.flags)}function Dr(e){return 2==(2&e.flags)}function Ls(e){return 1==(1&e.flags)}function qi(e){return null!==e.template}function ns(e){return 0!=(512&e[2])}function ds(e,t){return e.hasOwnProperty($r)?e[$r]:null}class gc{constructor(t,r,o){this.previousValue=t,this.currentValue=r,this.firstChange=o}isFirstChange(){return this.firstChange}}function Mu(e){return e.type.prototype.ngOnChanges&&(e.setInput=ki),Da}function Da(){const e=ra(this),t=null==e?void 0:e.current;if(t){const r=e.previous;if(r===Vn)e.previous=t;else for(let o in t)r[o]=t[o];e.current=null,this.ngOnChanges(t)}}function ki(e,t,r,o){const c=ra(e)||function(e,t){return e[Qr]=t}(e,{previous:Vn,current:null}),d=c.current||(c.current={}),w=c.previous,T=this.declaredInputs[r],A=w[T];d[T]=new gc(A&&A.currentValue,t,w===Vn),e[o]=t}const Qr="__ngSimpleChanges__";function ra(e){return e[Qr]||null}let R;function ne(e){return!!e.listen}const Le={createRenderer:(e,t)=>void 0!==R?R:"undefined"!=typeof document?document:void 0};function Ke(e){for(;Array.isArray(e);)e=e[0];return e}function Mn(e,t){return Ke(t[e.index])}function Li(e,t){return e.data[t]}function yi(e,t){const r=t[e];return Yn(r)?r:r[0]}function mi(e){return 128==(128&e[2])}function Ds(e,t){return null==t?null:e[t]}function Bl(e){e[18]=0}function vc(e,t){e[5]+=t;let r=e,o=e[3];for(;null!==o&&(1===t&&1===r[5]||-1===t&&0===r[5]);)o[5]+=t,r=o,o=o[3]}const Ln={lFrame:Ec(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Jc(){return Ln.bindingsEnabled}function bt(){return Ln.lFrame.lView}function ur(){return Ln.lFrame.tView}function Xi(){let e=Zc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Zc(){return Ln.lFrame.currentTNode}function Qs(e,t){const r=Ln.lFrame;r.currentTNode=e,r.isParent=t}function Ao(){return Ln.lFrame.isParent}function el(){return Ln.isInCheckNoChangesMode}function tl(e){Ln.isInCheckNoChangesMode=e}function Ai(){return Ln.lFrame.bindingIndex++}function oa(e,t){const r=Ln.lFrame;r.bindingIndex=r.bindingRootIndex=e,xu(t)}function xu(e){Ln.lFrame.currentDirectiveIndex=e}function wc(e){Ln.lFrame.currentQueryIndex=e}function iu(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function ql(e,t,r){if(r&Pn.SkipSelf){let c=t,d=e;for(;!(c=c.parent,null!==c||r&Pn.Host||(c=iu(d),null===c||(d=d[15],10&c.type))););if(null===c)return!1;t=c,e=d}const o=Ln.lFrame=bc();return o.currentTNode=t,o.lView=e,!0}function Ss(e){const t=bc(),r=e[1];Ln.lFrame=t,t.currentTNode=r.firstChild,t.lView=e,t.tView=r,t.contextLView=e,t.bindingIndex=r.bindingStartIndex,t.inI18n=!1}function bc(){const e=Ln.lFrame,t=null===e?null:e.child;return null===t?Ec(e):t}function Ec(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function rs(){const e=Ln.lFrame;return Ln.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const sa=rs;function ou(){const e=rs();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function wo(){return Ln.lFrame.selectedIndex}function Na(e){Ln.lFrame.selectedIndex=e}function Fu(e,t){for(let r=t.directiveStart,o=t.directiveEnd;r<o;r++){const d=e.data[r].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:T,ngAfterViewInit:A,ngAfterViewChecked:F,ngOnDestroy:q}=d;w&&(e.contentHooks||(e.contentHooks=[])).push(-r,w),T&&((e.contentHooks||(e.contentHooks=[])).push(r,T),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(r,T)),A&&(e.viewHooks||(e.viewHooks=[])).push(-r,A),F&&((e.viewHooks||(e.viewHooks=[])).push(r,F),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(r,F)),null!=q&&(e.destroyHooks||(e.destroyHooks=[])).push(r,q)}}function ju(e,t,r){gs(e,t,3,r)}function Dc(e,t,r,o){(3&e[2])===r&&gs(e,t,r,o)}function js(e,t){let r=e[2];(3&r)===t&&(r&=2047,r+=1,e[2]=r)}function gs(e,t,r,o){const d=null!=o?o:-1,w=t.length-1;let T=0;for(let A=void 0!==o?65535&e[18]:0;A<w;A++)if("number"==typeof t[A+1]){if(T=t[A],null!=o&&T>=o)break}else t[A]<0&&(e[18]+=65536),(T<d||-1==d)&&(Zi(e,r,t,A),e[18]=(4294901760&e[18])+A+2),A++}function Zi(e,t,r,o){const c=r[o]<0,d=r[o+1],T=e[c?-r[o]:r[o]];if(c){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{d.call(T)}finally{}}}else try{d.call(T)}finally{}}class au{constructor(t,r,o){this.factory=t,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=o}}function Bu(e,t,r){const o=ne(e);let c=0;for(;c<r.length;){const d=r[c];if("number"==typeof d){if(0!==d)break;c++;const w=r[c++],T=r[c++],A=r[c++];o?e.setAttribute(t,T,A,w):t.setAttributeNS(w,T,A)}else{const w=d,T=r[++c];Ro(w)?o&&e.setProperty(t,w,T):o?e.setAttribute(t,w,T):t.setAttribute(w,T),c++}}return c}function Hu(e){return 3===e||4===e||6===e}function Ro(e){return 64===e.charCodeAt(0)}function uu(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let r=-1;for(let o=0;o<t.length;o++){const c=t[o];"number"==typeof c?r=c:0===r||Cc(e,r,c,null,-1===r||2===r?t[++o]:null)}}return e}function Cc(e,t,r,o,c){let d=0,w=e.length;if(-1===t)w=-1;else for(;d<e.length;){const T=e[d++];if("number"==typeof T){if(T===t){w=-1;break}if(T>t){w=d-1;break}}}for(;d<e.length;){const T=e[d];if("number"==typeof T)break;if(T===r){if(null===o)return void(null!==c&&(e[d+1]=c));if(o===e[d+1])return void(e[d+2]=c)}d++,null!==o&&d++,null!==c&&d++}-1!==w&&(e.splice(w,0,t),d=w+1),e.splice(d++,0,r),null!==o&&e.splice(d++,0,o),null!==c&&e.splice(d++,0,c)}function Cs(e){return-1!==e}function ua(e){return 32767&e}function os(e,t){let r=function(e){return e>>16}(e),o=t;for(;r>0;)o=o[15],r--;return o}let Gu=!0;function bo(e){const t=Gu;return Gu=e,t}let qu=0;function vs(e,t){const r=Ho(e,t);if(-1!==r)return r;const o=t[1];o.firstCreatePass&&(e.injectorIndex=t.length,xa(o.data,e),xa(t,null),xa(o.blueprint,null));const c=Wu(e,t),d=e.injectorIndex;if(Cs(c)){const w=ua(c),T=os(c,t),A=T[1].data;for(let F=0;F<8;F++)t[d+F]=T[w+F]|A[w+F]}return t[d+8]=c,d}function xa(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Ho(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Wu(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let r=0,o=null,c=t;for(;null!==c;){const d=c[1],w=d.type;if(o=2===w?d.declTNode:1===w?c[6]:null,null===o)return-1;if(r++,c=c[15],-1!==o.injectorIndex)return o.injectorIndex|r<<16}return-1}function zu(e,t,r){!function(e,t,r){let o;"string"==typeof r?o=r.charCodeAt(0)||0:r.hasOwnProperty(hi)&&(o=r[hi]),null==o&&(o=r[hi]=qu++);const c=255&o;t.data[e+(c>>5)]|=1<<c}(e,t,r)}function Uf(e,t,r){if(r&Pn.Optional)return e;ro(t,"NodeInjector")}function $u(e,t,r,o){if(r&Pn.Optional&&void 0===o&&(o=null),0==(r&(Pn.Self|Pn.Host))){const c=e[9],d=si(void 0);try{return c?c.get(t,o,r&Pn.Optional):j(t,o,r&Pn.Optional)}finally{si(d)}}return Uf(o,t,r)}function As(e,t,r,o=Pn.Default,c){if(null!==e){const d=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(hi)?e[hi]:void 0;return"number"==typeof t?t>=0?255&t:Ys:t}(r);if("function"==typeof d){if(!ql(t,e,o))return o&Pn.Host?Uf(c,r,o):$u(t,r,o,c);try{const w=d(o);if(null!=w||o&Pn.Optional)return w;ro(r)}finally{sa()}}else if("number"==typeof d){let w=null,T=Ho(e,t),A=-1,F=o&Pn.Host?t[16][6]:null;for((-1===T||o&Pn.SkipSelf)&&(A=-1===T?Wu(e,t):t[T+8],-1!==A&&Bf(o,!1)?(w=t[1],T=ua(A),t=os(A,t)):T=-1);-1!==T;){const q=t[1];if(ol(d,T,q.data)){const ie=il(T,t,r,w,o,F);if(ie!==La)return ie}A=t[T+8],-1!==A&&Bf(o,t[1].data[T+8]===F)&&ol(d,T,t)?(w=q,T=ua(A),t=os(A,t)):T=-1}}}return $u(t,r,o,c)}const La={};function Ys(){return new Fa(Xi(),bt())}function il(e,t,r,o,c,d){const w=t[1],T=w.data[e+8],q=function(e,t,r,o,c){const d=e.providerIndexes,w=t.data,T=1048575&d,A=e.directiveStart,q=d>>20,ve=c?T+q:e.directiveEnd;for(let Oe=o?T:T+q;Oe<ve;Oe++){const et=w[Oe];if(Oe<A&&r===et||Oe>=A&&et.type===r)return Oe}if(c){const Oe=w[A];if(Oe&&qi(Oe)&&Oe.type===r)return A}return null}(T,w,r,null==o?Dr(T)&&Gu:o!=w&&0!=(3&T.type),c&Pn.Host&&d===T);return null!==q?cu(t,w,q,T):La}function cu(e,t,r,o){let c=e[r];const d=t.data;if(function(e){return e instanceof au}(c)){const w=c;w.resolving&&function(e,t){throw new Lr("200",`Circular dependency in DI detected for ${e}`)}(pi(d[r]));const T=bo(w.canSeeViewProviders);w.resolving=!0;const A=w.injectImpl?si(w.injectImpl):null;ql(e,o,Pn.Default);try{c=e[r]=w.factory(void 0,d,e,o),t.firstCreatePass&&r>=o.directiveStart&&function(e,t,r){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:d}=t.type.prototype;if(o){const w=Mu(t);(r.preOrderHooks||(r.preOrderHooks=[])).push(e,w),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,w)}c&&(r.preOrderHooks||(r.preOrderHooks=[])).push(0-e,c),d&&((r.preOrderHooks||(r.preOrderHooks=[])).push(e,d),(r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(e,d))}(r,d[r],t)}finally{null!==A&&si(A),bo(T),w.resolving=!1,sa()}}return c}function ol(e,t,r){return!!(r[t+(e>>5)]&1<<e)}function Bf(e,t){return!(e&Pn.Self||e&Pn.Host&&t)}class Fa{constructor(t,r){this._tNode=t,this._lView=r}get(t,r,o){return As(this._tNode,this._lView,t,o,r)}}const Ua="__parameters__";function la(e,t,r){return K(()=>{const o=function(e){return function(...r){if(e){const o=e(...r);for(const c in o)this[c]=o[c]}}}(t);function c(...d){if(this instanceof c)return o.apply(this,d),this;const w=new c(...d);return T.annotation=w,T;function T(A,F,q){const ie=A.hasOwnProperty(Ua)?A[Ua]:Object.defineProperty(A,Ua,{value:[]})[Ua];for(;ie.length<=q;)ie.push(null);return(ie[q]=ie[q]||[]).push(w),A}}return r&&(c.prototype=Object.create(r.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}class Hr{constructor(t,r){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=hr({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}toString(){return`InjectionToken ${this._desc}`}}function as(e,t){e.forEach(r=>Array.isArray(r)?as(r,t):t(r))}function Xu(e,t,r){t>=e.length?e.push(r):e.splice(t,0,r)}function Ga(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const yu={},Zu="__NG_DI_FLAG__",qa="ngTempTokenPath",ul=/\n/gm,Pc="__source",ld=ct({provide:String,useValue:ct});let Os;function $f(e){const t=Os;return Os=e,t}function Kf(e,t=Pn.Default){if(void 0===Os)throw new Error("inject() must be called from an injection context");return null===Os?j(e,void 0,t):Os.get(e,t&Pn.Optional?null:void 0,t)}function Yr(e,t=Pn.Default){return(go||Kf)(pn(e),t)}function mu(e){const t=[];for(let r=0;r<e.length;r++){const o=pn(e[r]);if(Array.isArray(o)){if(0===o.length)throw new Error("Arguments array must have arguments.");let c,d=Pn.Default;for(let w=0;w<o.length;w++){const T=o[w],A=Ql(T);"number"==typeof A?-1===A?c=T.token:d|=A:c=T}t.push(Yr(c,d))}else t.push(Yr(o))}return t}function Eo(e,t){return e[Zu]=t,e.prototype[Zu]=t,e}function Ql(e){return e[Zu]}const Mc=Eo(la("Inject",e=>({token:e})),-1),Wa=Eo(la("Optional"),8),Us=Eo(la("SkipSelf"),4),md="__ngContext__";function Po(e,t){e[md]=t}function rh(e){const t=function(e){return e[md]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function uf(e){return e.ngOriginalError}function Yp(e,...t){e.error(...t)}class bl{constructor(){this._console=console}handleError(t){const r=this._findOriginalError(t),o=(e=t)&&e.ngErrorLogger||Yp;var e;o(this._console,"ERROR",t),r&&o(this._console,"ORIGINAL ERROR",r)}_findOriginalError(t){let r=t&&uf(t);for(;r&&uf(r);)r=uf(r);return r||null}}const Il=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(sn))();function Ka(e){return e instanceof Function?e():e}var Hs=(()=>((Hs=Hs||{})[Hs.Important=1]="Important",Hs[Hs.DashCase=2]="DashCase",Hs))();function Dl(e,t){return undefined(e,t)}function cf(e){const t=e[3];return Yi(t)?t[3]:t}function ch(e){return lh(e[13])}function lf(e){return lh(e[4])}function lh(e){for(;null!==e&&!Yi(e);)e=e[4];return e}function Uc(e,t,r,o,c){if(null!=o){let d,w=!1;Yi(o)?d=o:Yn(o)&&(w=!0,o=o[0]);const T=Ke(o);0===e&&null!==r?null==c?dh(t,r,T):rc(t,r,T,c||null,!0):1===e&&null!==r?rc(t,r,T,c||null,!0):2===e?function(e,t,r){const o=ph(e,t);o&&function(e,t,r,o){ne(e)?e.removeChild(t,r,o):t.removeChild(r)}(e,o,t,r)}(t,T,w):3===e&&t.destroyNode(T),null!=d&&function(e,t,r,o,c){const d=r[7];d!==Ke(r)&&Uc(t,e,o,d,c);for(let T=10;T<r.length;T++){const A=r[T];Cl(A[1],A,e,t,o,d)}}(t,e,d,r,c)}}function Nd(e,t,r){return ne(e)?e.createElement(t,r):null===r?e.createElement(t):e.createElementNS(r,t)}function ng(e,t){const r=e[9],o=r.indexOf(t),c=t[3];1024&t[2]&&(t[2]&=-1025,vc(c,-1)),r.splice(o,1)}function ff(e,t){if(e.length<=10)return;const r=10+t,o=e[r];if(o){const c=o[17];null!==c&&c!==e&&ng(c,o),t>0&&(e[r-1][4]=o[4]);const d=Ga(e,10+t);!function(e,t){Cl(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(o[1],o);const w=d[19];null!==w&&w.detachView(d[1]),o[3]=null,o[4]=null,o[2]&=-129}return o}function rg(e,t){if(!(256&t[2])){const r=t[11];ne(r)&&r.destroyNode&&Cl(e,t,r,3,null,null),function(e){let t=e[13];if(!t)return hf(e[1],e);for(;t;){let r=null;if(Yn(t))r=t[13];else{const o=t[10];o&&(r=o)}if(!r){for(;t&&!t[4]&&t!==e;)Yn(t)&&hf(t[1],t),t=t[3];null===t&&(t=e),Yn(t)&&hf(t[1],t),r=t&&t[4]}t=r}}(t)}}function hf(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let r;if(null!=e&&null!=(r=e.destroyHooks))for(let o=0;o<r.length;o+=2){const c=t[r[o]];if(!(c instanceof au)){const d=r[o+1];if(Array.isArray(d))for(let w=0;w<d.length;w+=2){const T=c[d[w]],A=d[w+1];try{A.call(T)}finally{}}else try{d.call(c)}finally{}}}}(e,t),function(e,t){const r=e.cleanup,o=t[7];let c=-1;if(null!==r)for(let d=0;d<r.length-1;d+=2)if("string"==typeof r[d]){const w=r[d+1],T="function"==typeof w?w(t):Ke(t[w]),A=o[c=r[d+2]],F=r[d+3];"boolean"==typeof F?T.removeEventListener(r[d],A,F):F>=0?o[c=F]():o[c=-F].unsubscribe(),d+=2}else{const w=o[c=r[d+1]];r[d].call(w)}if(null!==o){for(let d=c+1;d<o.length;d++)o[d]();t[7]=null}}(e,t),1===t[1].type&&ne(t[11])&&t[11].destroy();const r=t[17];if(null!==r&&Yi(t[3])){r!==t[3]&&ng(r,t);const o=t[19];null!==o&&o.detachView(e)}}}function Od(e,t,r){return function(e,t,r){let o=t;for(;null!==o&&40&o.type;)o=(t=o).parent;if(null===o)return r[0];if(2&o.flags){const c=e.data[o.directiveStart].encapsulation;if(c===Qe.None||c===Qe.Emulated)return null}return Mn(o,r)}(e,t.parent,r)}function rc(e,t,r,o,c){ne(e)?e.insertBefore(t,r,o,c):t.insertBefore(r,o,c)}function dh(e,t,r){ne(e)?e.appendChild(t,r):t.appendChild(r)}function Md(e,t,r,o,c){null!==o?rc(e,t,r,o,c):dh(e,t,r)}function ph(e,t){return ne(e)?e.parentNode(t):t.parentNode}let kd=function(e,t,r){return 40&e.type?Mn(e,r):null};function pf(e,t,r,o){const c=Od(e,o,t),d=t[11],T=function(e,t,r){return kd(e,t,r)}(o.parent||t[6],o,t);if(null!=c)if(Array.isArray(r))for(let A=0;A<r.length;A++)Md(d,c,r[A],T,!1);else Md(d,c,r,T,!1)}function Bc(e,t){if(null!==t){const r=t.type;if(3&r)return Mn(t,e);if(4&r)return Sl(-1,e[t.index]);if(8&r){const o=t.child;if(null!==o)return Bc(e,o);{const c=e[t.index];return Yi(c)?Sl(-1,c):Ke(c)}}if(32&r)return Dl(t,e)()||Ke(e[t.index]);{const o=Fd(e,t);return null!==o?Array.isArray(o)?o[0]:Bc(cf(e[16]),o):Bc(e,t.next)}}return null}function Fd(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Sl(e,t){const r=10+e+1;if(r<t.length){const o=t[r],c=o[1].firstChild;if(null!==c)return Bc(o,c)}return t[7]}function jd(e,t,r,o,c,d,w){for(;null!=r;){const T=o[r.index],A=r.type;if(w&&0===t&&(T&&Po(Ke(T),o),r.flags|=4),64!=(64&r.flags))if(8&A)jd(e,t,r.child,o,c,d,!1),Uc(t,e,c,T,d);else if(32&A){const F=Dl(r,o);let q;for(;q=F();)Uc(t,e,c,q,d);Uc(t,e,c,T,d)}else 16&A?sg(e,t,o,r,c,d):Uc(t,e,c,T,d);r=w?r.projectionNext:r.next}}function Cl(e,t,r,o,c,d){jd(r,o,e.firstChild,t,c,d,!1)}function sg(e,t,r,o,c,d){const w=r[16],A=w[6].projection[o.projection];if(Array.isArray(A))for(let F=0;F<A.length;F++)Uc(t,e,c,A[F],d);else jd(e,t,A,w[3],c,d,!0)}function Vd(e,t,r){ne(e)?e.setAttribute(t,"style",r):t.style.cssText=r}function gf(e,t,r){ne(e)?""===r?e.removeAttribute(t,"class"):e.setAttribute(t,"class",r):t.className=r}function vh(e,t,r){let o=e.length;for(;;){const c=e.indexOf(t,r);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const d=t.length;if(c+d===o||e.charCodeAt(c+d)<=32)return c}r=c+1}}const yh="ng-template";function ug(e,t,r){let o=0;for(;o<e.length;){let c=e[o++];if(r&&"class"===c){if(c=e[o],-1!==vh(c.toLowerCase(),t,0))return!0}else if(1===c){for(;o<e.length&&"string"==typeof(c=e[o++]);)if(c.toLowerCase()===t)return!0;return!1}}return!1}function Ud(e){return 4===e.type&&e.value!==yh}function Bd(e,t,r){return t===(4!==e.type||r?e.value:yh)}function cg(e,t,r){let o=4;const c=e.attrs||[],d=function(e){for(let t=0;t<e.length;t++)if(Hu(e[t]))return t;return e.length}(c);let w=!1;for(let T=0;T<t.length;T++){const A=t[T];if("number"!=typeof A){if(!w)if(4&o){if(o=2|1&o,""!==A&&!Bd(e,A,r)||""===A&&1===t.length){if(Zs(o))return!1;w=!0}}else{const F=8&o?A:t[++T];if(8&o&&null!==e.attrs){if(!ug(e.attrs,F,r)){if(Zs(o))return!1;w=!0}continue}const ie=Tv(8&o?"class":A,c,Ud(e),r);if(-1===ie){if(Zs(o))return!1;w=!0;continue}if(""!==F){let ve;ve=ie>d?"":c[ie+1].toLowerCase();const Oe=8&o?ve:null;if(Oe&&-1!==vh(Oe,F,0)||2&o&&F!==ve){if(Zs(o))return!1;w=!0}}}}else{if(!w&&!Zs(o)&&!Zs(A))return!1;if(w&&Zs(A))continue;w=!1,o=A|1&o}}return Zs(o)||w}function Zs(e){return 0==(1&e)}function Tv(e,t,r,o){if(null===t)return-1;let c=0;if(o||!r){let d=!1;for(;c<t.length;){const w=t[c];if(w===e)return c;if(3===w||6===w)d=!0;else{if(1===w||2===w){let T=t[++c];for(;"string"==typeof T;)T=t[++c];continue}if(4===w)break;if(0===w){c+=4;continue}}c+=d?1:2}return-1}return function(e,t){let r=e.indexOf(4);if(r>-1)for(r++;r<e.length;){const o=e[r];if("number"==typeof o)return-1;if(o===t)return r;r++}return-1}(t,e)}function lg(e,t,r=!1){for(let o=0;o<t.length;o++)if(cg(e,t[o],r))return!0;return!1}function hg(e,t){return e?":not("+t.trim()+")":t}function mh(e){let t=e[0],r=1,o=2,c="",d=!1;for(;r<e.length;){let w=e[r];if("string"==typeof w)if(2&o){const T=e[++r];c+="["+w+(T.length>0?'="'+T+'"':"")+"]"}else 8&o?c+="."+w:4&o&&(c+=" "+w);else""!==c&&!Zs(w)&&(t+=hg(d,c),c=""),o=w,d=d||!Zs(o);r++}return""!==c&&(t+=hg(d,c)),t}const Xn={};function vf(e){_h(ur(),bt(),wo()+e,el())}function _h(e,t,r,o){if(!o)if(3==(3&t[2])){const d=e.preOrderCheckHooks;null!==d&&ju(t,d,r)}else{const d=e.preOrderHooks;null!==d&&Dc(t,d,0,r)}Na(r)}function rp(e,t){const r=e.contentQueries;if(null!==r)for(let o=0;o<r.length;o+=2){const c=r[o],d=r[o+1];if(-1!==d){const w=e.data[d];wc(c),w.contentQueries(2,t[d],d)}}}function Ol(e,t,r,o,c,d,w,T,A,F){const q=t.blueprint.slice();return q[0]=c,q[2]=140|o,Bl(q),q[3]=q[15]=e,q[8]=r,q[10]=w||e&&e[10],q[11]=T||e&&e[11],q[12]=A||e&&e[12]||null,q[9]=F||e&&e[9]||null,q[6]=d,q[16]=2==t.type?e[16]:q,q}function qc(e,t,r,o,c){let d=e.data[t];if(null===d)d=function(e,t,r,o,c){const d=Zc(),w=Ao(),A=e.data[t]=function(e,t,r,o,c,d){return{type:r,index:o,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?d:d&&d.parent,r,t,o,c);return null===e.firstChild&&(e.firstChild=A),null!==d&&(w?null==d.child&&null!==A.parent&&(d.child=A):null===d.next&&(d.next=A)),A}(e,t,r,o,c),Ln.lFrame.inI18n&&(d.flags|=64);else if(64&d.type){d.type=r,d.value=o,d.attrs=c;const w=function(){const e=Ln.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();d.injectorIndex=null===w?-1:w.injectorIndex}return Qs(d,!0),d}function Pl(e,t,r,o){if(0===r)return-1;const c=t.length;for(let d=0;d<r;d++)t.push(o),e.blueprint.push(o),e.data.push(null);return c}function Ef(e,t,r){Ss(t);try{const o=e.viewQuery;null!==o&&Ui(1,o,r);const c=e.template;null!==c&&ip(e,t,c,1,r),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&rp(e,t),e.staticViewQueries&&Ui(2,e.viewQuery,r);const d=e.components;null!==d&&function(e,t){for(let r=0;r<t.length;r++)Bv(e,t[r])}(t,d)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),o}finally{t[2]&=-5,ou()}}function sc(e,t,r,o){const c=t[2];if(256==(256&c))return;Ss(t);const d=el();try{Bl(t),function(e){Ln.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==r&&ip(e,t,r,2,o);const w=3==(3&c);if(!d)if(w){const F=e.preOrderCheckHooks;null!==F&&ju(t,F,null)}else{const F=e.preOrderHooks;null!==F&&Dc(t,F,0,null),js(t,0)}if(function(e){for(let t=ch(e);null!==t;t=lf(t)){if(!t[2])continue;const r=t[9];for(let o=0;o<r.length;o++){const c=r[o],d=c[3];0==(1024&c[2])&&vc(d,1),c[2]|=1024}}}(t),function(e){for(let t=ch(e);null!==t;t=lf(t))for(let r=10;r<t.length;r++){const o=t[r],c=o[1];mi(o)&&sc(c,o,c.template,o[8])}}(t),null!==e.contentQueries&&rp(e,t),!d)if(w){const F=e.contentCheckHooks;null!==F&&ju(t,F)}else{const F=e.contentHooks;null!==F&&Dc(t,F,1),js(t,1)}!function(e,t){const r=e.hostBindingOpCodes;if(null!==r)try{for(let o=0;o<r.length;o++){const c=r[o];if(c<0)Na(~c);else{const d=c,w=r[++o],T=r[++o];oa(w,d),T(2,t[d])}}}finally{Na(-1)}}(e,t);const T=e.components;null!==T&&function(e,t){for(let r=0;r<t.length;r++)Uv(e,t[r])}(t,T);const A=e.viewQuery;if(null!==A&&Ui(2,A,o),!d)if(w){const F=e.viewCheckHooks;null!==F&&ju(t,F)}else{const F=e.viewHooks;null!==F&&Dc(t,F,2),js(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),d||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,vc(t[3],-1))}finally{ou()}}function Lv(e,t,r,o){const c=t[10],d=!el(),w=function(e){return 4==(4&e[2])}(t);try{d&&!w&&c.begin&&c.begin(),w&&Ef(e,t,o),sc(e,t,r,o)}finally{d&&!w&&c.end&&c.end()}}function ip(e,t,r,o,c){const d=wo(),w=2&o;try{Na(-1),w&&t.length>20&&_h(e,t,20,el()),r(o,c)}finally{Na(d)}}function ac(e,t,r){!Jc()||(function(e,t,r,o){const c=r.directiveStart,d=r.directiveEnd;e.firstCreatePass||vs(r,t),Po(o,t);const w=r.initialInputs;for(let T=c;T<d;T++){const A=e.data[T],F=qi(A);F&&Mh(t,r,A);const q=cu(t,e,T,r);Po(q,t),null!==w&&Sg(0,T-c,q,A,0,w),F&&(yi(r.index,t)[8]=q)}}(e,t,r,Mn(r,t)),128==(128&r.flags)&&function(e,t,r){const o=r.directiveStart,c=r.directiveEnd,w=r.index,T=Ln.lFrame.currentDirectiveIndex;try{Na(w);for(let A=o;A<c;A++){const F=e.data[A],q=t[A];xu(A),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&fp(F,q)}}finally{Na(-1),xu(T)}}(e,t,r))}function op(e,t,r=Mn){const o=t.localNames;if(null!==o){let c=t.index+1;for(let d=0;d<o.length;d+=2){const w=o[d+1],T=-1===w?r(t,e):e[w];e[c++]=T}}}function mg(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Rh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Rh(e,t,r,o,c,d,w,T,A,F){const q=20+o,ie=q+c,ve=function(e,t){const r=[];for(let o=0;o<t;o++)r.push(o<e?null:Xn);return r}(q,ie),Oe="function"==typeof F?F():F;return ve[1]={type:e,blueprint:ve,template:r,queries:null,viewQuery:T,declTNode:t,data:ve.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:A,consts:Oe,incompleteFirstPass:!1}}function ji(e,t,r){for(let o in e)if(e.hasOwnProperty(o)){const c=e[o];(r=null===r?{}:r).hasOwnProperty(o)?r[o].push(t,c):r[o]=[t,c]}return r}function Df(e,t,r,o){let c=!1;if(Jc()){const d=function(e,t,r){const o=e.directiveRegistry;let c=null;if(o)for(let d=0;d<o.length;d++){const w=o[d];lg(r,w.selectors,!1)&&(c||(c=[]),zu(vs(r,t),e,w.type),qi(w)?(hp(e,r),c.unshift(w)):c.push(w))}return c}(e,t,r),w=null===o?null:{"":-1};if(null!==d){c=!0,Dg(r,e.data.length,d.length);for(let q=0;q<d.length;q++){const ie=d[q];ie.providersResolver&&ie.providersResolver(ie)}let T=!1,A=!1,F=Pl(e,t,d.length,null);for(let q=0;q<d.length;q++){const ie=d[q];r.mergedAttrs=uu(r.mergedAttrs,ie.hostAttrs),Ph(e,r,t,F,ie),Tg(F,ie,w),null!==ie.contentQueries&&(r.flags|=8),(null!==ie.hostBindings||null!==ie.hostAttrs||0!==ie.hostVars)&&(r.flags|=128);const ve=ie.type.prototype;!T&&(ve.ngOnChanges||ve.ngOnInit||ve.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(r.index),T=!0),!A&&(ve.ngOnChanges||ve.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(r.index),A=!0),F++}!function(e,t){const o=t.directiveEnd,c=e.data,d=t.attrs,w=[];let T=null,A=null;for(let F=t.directiveStart;F<o;F++){const q=c[F],ie=q.inputs,ve=null===d||Ud(t)?null:gn(ie,d);w.push(ve),T=ji(ie,F,T),A=ji(q.outputs,F,A)}null!==T&&(T.hasOwnProperty("class")&&(t.flags|=16),T.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=w,t.inputs=T,t.outputs=A}(e,r)}w&&function(e,t,r){if(t){const o=e.localNames=[];for(let c=0;c<t.length;c+=2){const d=r[t[c+1]];if(null==d)throw new Lr("301",`Export of name '${t[c+1]}' not found!`);o.push(t[c],d)}}}(r,o,w)}return r.mergedAttrs=uu(r.mergedAttrs,r.attrs),c}function Eg(e,t,r,o,c,d){const w=d.hostBindings;if(w){let T=e.hostBindingOpCodes;null===T&&(T=e.hostBindingOpCodes=[]);const A=~t.index;(function(e){let t=e.length;for(;t>0;){const r=e[--t];if("number"==typeof r&&r<0)return r}return 0})(T)!=A&&T.push(A),T.push(o,c,w)}}function fp(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function hp(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function Tg(e,t,r){if(r){if(t.exportAs)for(let o=0;o<t.exportAs.length;o++)r[t.exportAs[o]]=e;qi(t)&&(r[""]=e)}}function Dg(e,t,r){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+r,e.providerIndexes=t}function Ph(e,t,r,o,c){e.data[o]=c;const d=c.factory||(c.factory=ds(c.type)),w=new au(d,qi(c),null);e.blueprint[o]=w,r[o]=w,Eg(e,t,0,o,Pl(e,r,c.hostVars,Xn),c)}function Mh(e,t,r){const o=Mn(t,e),c=mg(r),d=e[10],w=Sf(e,Ol(e,c,null,r.onPush?64:16,o,t,d,d.createRenderer(o,r),null,null));e[t.index]=w}function Sg(e,t,r,o,c,d){const w=d[t];if(null!==w){const T=o.setInput;for(let A=0;A<w.length;){const F=w[A++],q=w[A++],ie=w[A++];null!==T?o.setInput(r,ie,F,q):r[q]=ie}}}function gn(e,t){let r=null,o=0;for(;o<t.length;){const c=t[o];if(0!==c)if(5!==c){if("number"==typeof c)break;e.hasOwnProperty(c)&&(null===r&&(r=[]),r.push(c,e[c],t[o+1])),o+=2}else o+=2;else o+=4}return r}function fo(e,t,r,o){return new Array(e,!0,!1,t,null,0,o,r,null,null)}function Uv(e,t){const r=yi(t,e);if(mi(r)){const o=r[1];80&r[2]?sc(o,r,o.template,r[8]):r[5]>0&&dp(r)}}function dp(e){for(let o=ch(e);null!==o;o=lf(o))for(let c=10;c<o.length;c++){const d=o[c];if(1024&d[2]){const w=d[1];sc(w,d,w.template,d[8])}else d[5]>0&&dp(d)}const r=e[1].components;if(null!==r)for(let o=0;o<r.length;o++){const c=yi(r[o],e);mi(c)&&c[5]>0&&dp(c)}}function Bv(e,t){const r=yi(t,e),o=r[1];(function(e,t){for(let r=t.length;r<e.blueprint.length;r++)t.push(e.blueprint[r])})(o,r),Ef(o,r,r[8])}function Sf(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Ll(e,t,r){const o=t[10];o.begin&&o.begin();try{sc(e,t,e.template,r)}catch(c){throw function(e,t){const r=e[9],o=r?r.get(bl,null):null;o&&o.handleError(t)}(t,c),c}finally{o.end&&o.end()}}function Wi(e){!function(e){for(let t=0;t<e.components.length;t++){const r=e.components[t],o=rh(r),c=o[1];Lv(c,o,c.template,r)}}(e[8])}function Ui(e,t,r){wc(0),t(e,r)}const Gv=(()=>Promise.resolve(null))();function M(e,t,r,o,c){for(let d=0;d<r.length;){const w=r[d++],T=r[d++],A=t[w],F=e.data[w];null!==F.setInput?F.setInput(A,c,o,T):A[T]=c}}function G(e,t,r){const o=function(e,t){return Ke(t[e])}(t,e);!function(e,t,r){ne(e)?e.setValue(t,r):t.textContent=r}(e[11],o,r)}function Y(e,t,r){let o=r?e.styles:null,c=r?e.classes:null,d=0;if(null!==t)for(let w=0;w<t.length;w++){const T=t[w];"number"==typeof T?d=T:1==d?c=Bt(c,T):2==d&&(o=Bt(o,T+": "+t[++w]+";"))}r?e.styles=o:e.stylesWithoutHost=o,r?e.classes=c:e.classesWithoutHost=c}const Wn=new Hr("INJECTOR",-1);class ii{get(t,r=yu){if(r===yu){const o=new Error(`NullInjectorError: No provider for ${Tt(t)}!`);throw o.name="NullInjectorError",o}return r}}const kr=new Hr("Set Injector scope."),zi={},Su={};let Cf;function Tm(){return void 0===Cf&&(Cf=new ii),Cf}function Dm(e,t=null,r=null,o){const c=Sm(e,t,r,o);return c._resolveInjectorDefTypes(),c}function Sm(e,t=null,r=null,o){return new A0(e,r,t||Tm(),o)}class A0{constructor(t,r,o,c=null){this.parent=o,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const d=[];r&&as(r,T=>this.processProvider(T,t,r)),as([t],T=>this.processInjectorType(T,[],d)),this.records.set(Wn,Lh(void 0,this));const w=this.records.get(kr);this.scope=null!=w?w.value:null,this.source=c||("object"==typeof t?null:Tt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,r=yu,o=Pn.Default){this.assertNotDestroyed();const c=$f(this),d=si(void 0);try{if(!(o&Pn.SkipSelf)){let T=this.records.get(t);if(void 0===T){const A=("function"==typeof(e=t)||"object"==typeof e&&e instanceof Hr)&&Fn(t);T=A&&this.injectableDefInScope(A)?Lh(qv(t),zi):null,this.records.set(t,T)}if(null!=T)return this.hydrate(t,T)}return(o&Pn.Self?Tm():this.parent).get(t,r=o&Pn.Optional&&r===yu?null:r)}catch(w){if("NullInjectorError"===w.name){if((w[qa]=w[qa]||[]).unshift(Tt(t)),c)throw w;return function(e,t,r,o){const c=e[qa];throw t[Pc]&&c.unshift(t[Pc]),e.message=function(e,t,r,o=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let c=Tt(t);if(Array.isArray(t))c=t.map(Tt).join(" -> ");else if("object"==typeof t){let d=[];for(let w in t)if(t.hasOwnProperty(w)){let T=t[w];d.push(w+":"+("string"==typeof T?JSON.stringify(T):Tt(T)))}c=`{${d.join(", ")}}`}return`${r}${o?"("+o+")":""}[${c}]: ${e.replace(ul,"\n  ")}`}("\n"+e.message,c,r,o),e.ngTokenPath=c,e[qa]=null,e}(w,t,"R3InjectorError",this.source)}throw w}finally{si(d),$f(c)}var e}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((o,c)=>t.push(Tt(c))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,r,o){if(!(t=pn(t)))return!1;let c=ls(t);const d=null==c&&t.ngModule||void 0,w=void 0===d?t:d,T=-1!==o.indexOf(w);if(void 0!==d&&(c=ls(d)),null==c)return!1;if(null!=c.imports&&!T){let q;o.push(w);try{as(c.imports,ie=>{this.processInjectorType(ie,r,o)&&(void 0===q&&(q=[]),q.push(ie))})}finally{}if(void 0!==q)for(let ie=0;ie<q.length;ie++){const{ngModule:ve,providers:Oe}=q[ie];as(Oe,et=>this.processProvider(et,ve,Oe||wn))}}this.injectorDefTypes.add(w);const A=ds(w)||(()=>new w);this.records.set(w,Lh(A,zi));const F=c.providers;if(null!=F&&!T){const q=t;as(F,ie=>this.processProvider(ie,q,F))}return void 0!==d&&void 0!==t.providers}processProvider(t,r,o){let c=Fh(t=pn(t))?t:pn(t&&t.provide);const d=(e=t,Am(e)?Lh(void 0,e.useValue):Lh(function(e,t,r){let o;if(Fh(e)){const c=pn(e);return ds(c)||qv(c)}if(Am(e))o=()=>pn(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))o=()=>e.useFactory(...mu(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))o=()=>Yr(pn(e.useExisting));else{const c=pn(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ds(c)||qv(c);o=()=>new c(...mu(e.deps))}return o}(e),zi));var e;if(Fh(t)||!0!==t.multi)this.records.get(c);else{let w=this.records.get(c);w||(w=Lh(void 0,zi,!0),w.factory=()=>mu(w.multi),this.records.set(c,w)),c=t,w.multi.push(t)}this.records.set(c,d)}hydrate(t,r){return r.value===zi&&(r.value=Su,r.value=r.factory()),"object"==typeof r.value&&r.value&&null!==(e=r.value)&&"object"==typeof e&&"function"==typeof e.ngOnDestroy&&this.onDestroy.add(r.value),r.value;var e}injectableDefInScope(t){if(!t.providedIn)return!1;const r=pn(t.providedIn);return"string"==typeof r?"any"===r||r===this.scope:this.injectorDefTypes.has(r)}}function qv(e){const t=Fn(e),r=null!==t?t.factory:ds(e);if(null!==r)return r;if(e instanceof Hr)throw new Error(`Token ${Tt(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const o=function(e,t){const r=[];for(let o=0;o<e;o++)r.push(t);return r}(t,"?");throw new Error(`Can't resolve all parameters for ${Tt(e)}: (${o.join(", ")}).`)}const r=function(e){const t=e&&(e[To]||e[ks]);if(t){const r=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${r}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${r}" class.`),t}return null}(e);return null!==r?()=>r.factory(e):()=>new e}(e);throw new Error("unreachable")}function Lh(e,t,r=!1){return{factory:e,value:t,multi:r?[]:void 0}}function Am(e){return null!==e&&"object"==typeof e&&ld in e}function Fh(e){return"function"==typeof e}let Xa=(()=>{class e{static create(r,o){var c;if(Array.isArray(r))return Dm({name:""},o,r,"");{const d=null!=(c=r.name)?c:"";return Dm({name:d},r.parent,r.providers,d)}}}return e.THROW_IF_NOT_FOUND=yu,e.NULL=new ii,e.\u0275prov=hr({token:e,providedIn:"any",factory:()=>Yr(Wn)}),e.__NG_ELEMENT_ID__=-1,e})();function q0(e,t){Fu(rh(e)[1],Xi())}let Ng=null;function jh(){if(!Ng){const e=sn.Symbol;if(e&&e.iterator)Ng=e.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let r=0;r<t.length;++r){const o=t[r];"entries"!==o&&"size"!==o&&Map.prototype[o]===Map.prototype.entries&&(Ng=o)}}}return Ng}function gp(e){return!!Kv(e)&&(Array.isArray(e)||!(e instanceof Map)&&jh()in e)}function Kv(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Ps(e,t,r){return!Object.is(e[t],r)&&(e[t]=r,!0)}function Rg(e,t,r,o,c){const d=function(e,t,r,o){const c=Ps(e,t,r);return Ps(e,t+1,o)||c}(e,t,r,o);return Ps(e,t+2,c)||d}function Sr(e,t=Pn.Default){const r=bt();return null===r?Yr(e,t):As(Xi(),r,pn(e),t)}function yp(e,t,r){const o=bt();return Ps(o,Ai(),t)&&function(e,t,r,o,c,d,w,T){const A=Mn(t,r);let q,F=t.inputs;!T&&null!=F&&(q=F[o])?(M(e,r,q,o,c),Dr(t)&&function(e,t){const r=yi(t,e);16&r[2]||(r[2]|=64)}(r,t.index)):3&t.type&&(o=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(o),c=null!=w?w(c,t.value||"",o):c,ne(d)?d.setProperty(A,o,c):Ro(o)||(A.setProperty?A.setProperty(o,c):A[o]=c))}(ur(),function(){const e=Ln.lFrame;return Li(e.tView,e.selectedIndex)}(),o,e,t,o[11],r,!1),yp}function Zv(e,t,r,o,c){const w=c?"class":"style";M(e,r,t.inputs[w],w,o)}function zc(e,t,r,o){const c=bt(),d=ur(),w=20+e,T=c[11],A=c[w]=Nd(T,t,Ln.lFrame.currentNamespace),F=d.firstCreatePass?function(e,t,r,o,c,d,w){const T=t.consts,F=qc(t,e,2,c,Ds(T,d));return Df(t,r,F,Ds(T,w)),null!==F.attrs&&Y(F,F.attrs,!1),null!==F.mergedAttrs&&Y(F,F.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,F),F}(w,d,c,0,t,r,o):d.data[w];Qs(F,!0);const q=F.mergedAttrs;null!==q&&Bu(T,A,q);const ie=F.classes;null!==ie&&gf(T,A,ie);const ve=F.styles;null!==ve&&Vd(T,A,ve),64!=(64&F.flags)&&pf(d,c,A,F),0===Ln.lFrame.elementDepthCount&&Po(A,c),Ln.lFrame.elementDepthCount++,Ls(F)&&(ac(d,c,F),function(e,t,r){if(Rt(t)){const c=t.directiveEnd;for(let d=t.directiveStart;d<c;d++){const w=e.data[d];w.contentQueries&&w.contentQueries(1,r[d],d)}}}(d,F,c)),null!==o&&op(c,F)}function $c(){let e=Xi();Ao()?Ln.lFrame.isParent=!1:(e=e.parent,Qs(e,!1));const t=e;Ln.lFrame.elementDepthCount--;const r=ur();r.firstCreatePass&&(Fu(r,e),Rt(e)&&r.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Zv(r,t,bt(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Zv(r,t,bt(),t.stylesWithoutHost,!1)}function Pg(e,t,r,o){zc(e,t,r,o),$c()}function ey(e){return!!e&&"function"==typeof e.then}const AE=function(e){return!!e&&"function"==typeof e.subscribe};function v_(e=1){return function(e){return(Ln.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,Ln.lFrame.contextLView))[8]}(e)}function _p(e,t=""){const r=bt(),o=ur(),c=e+20,d=o.firstCreatePass?qc(o,c,1,t,null):o.data[c],w=r[c]=function(e,t){return ne(e)?e.createText(t):e.createTextNode(t)}(r[11],t);pf(o,r,w,d),Qs(d,!1)}function iy(e){return oy("",e,""),iy}function oy(e,t,r){const o=bt(),c=function(e,t,r,o){return Ps(e,Ai(),r)?t+An(r)+o:Xn}(o,e,t,r);return c!==Xn&&G(o,wo(),c),oy}const Nf=void 0;var vI=["en",[["a","p"],["AM","PM"],Nf],[["AM","PM"],Nf,Nf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nf,"{1} 'at' {0}",Nf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const r=Math.floor(Math.abs(e)),o=e.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===o?1:5}];let Yh={};function aw(e){return e in Yh||(Yh[e]=sn.ng&&sn.ng.common&&sn.ng.common.locales&&sn.ng.common.locales[e]),Yh[e]}var hn=(()=>((hn=hn||{})[hn.LocaleId=0]="LocaleId",hn[hn.DayPeriodsFormat=1]="DayPeriodsFormat",hn[hn.DayPeriodsStandalone=2]="DayPeriodsStandalone",hn[hn.DaysFormat=3]="DaysFormat",hn[hn.DaysStandalone=4]="DaysStandalone",hn[hn.MonthsFormat=5]="MonthsFormat",hn[hn.MonthsStandalone=6]="MonthsStandalone",hn[hn.Eras=7]="Eras",hn[hn.FirstDayOfWeek=8]="FirstDayOfWeek",hn[hn.WeekendRange=9]="WeekendRange",hn[hn.DateFormat=10]="DateFormat",hn[hn.TimeFormat=11]="TimeFormat",hn[hn.DateTimeFormat=12]="DateTimeFormat",hn[hn.NumberSymbols=13]="NumberSymbols",hn[hn.NumberFormats=14]="NumberFormats",hn[hn.CurrencyCode=15]="CurrencyCode",hn[hn.CurrencySymbol=16]="CurrencySymbol",hn[hn.CurrencyName=17]="CurrencyName",hn[hn.Currencies=18]="Currencies",hn[hn.Directionality=19]="Directionality",hn[hn.PluralCase=20]="PluralCase",hn[hn.ExtraData=21]="ExtraData",hn))();const xg="en-US";let uw=xg;class Mw{}class _T{resolveComponentFactory(t){throw function(e){const t=Error(`No component factory found for ${Tt(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Tp=(()=>{class e{}return e.NULL=new _T,e})();function wT(){return Jh(Xi(),bt())}function Jh(e,t){return new Zh(Mn(e,t))}let Zh=(()=>{class e{constructor(r){this.nativeElement=r}}return e.__NG_ELEMENT_ID__=wT,e})();class kw{}let Lw=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>function(){const e=bt(),r=yi(Xi().index,e);return function(e){return e[11]}(Yn(r)?r:e)}(),e})(),TT=(()=>{class e{}return e.\u0275prov=hr({token:e,providedIn:"root",factory:()=>null}),e})();class hy{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const DT=new hy("13.0.3"),dy={};function Vg(e,t,r,o,c=!1){for(;null!==r;){const d=t[r.index];if(null!==d&&o.push(Ke(d)),Yi(d))for(let T=10;T<d.length;T++){const A=d[T],F=A[1].firstChild;null!==F&&Vg(A[1],A,F,o)}const w=r.type;if(8&w)Vg(e,t,r.child,o);else if(32&w){const T=Dl(r,t);let A;for(;A=T();)o.push(A)}else if(16&w){const T=Fd(t,r);if(Array.isArray(T))o.push(...T);else{const A=cf(t[16]);Vg(A[1],A,T,o,!0)}}r=c?r.projectionNext:r.next}return o}class Dp{constructor(t,r){this._lView=t,this._cdRefInjectingView=r,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,r=t[1];return Vg(r,t,r.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Yi(t)){const r=t[8],o=r?r.indexOf(this):-1;o>-1&&(ff(t,o),Ga(r,o))}this._attachedToViewContainer=!1}rg(this._lView[1],this._lView)}onDestroy(t){!function(e,t,r,o){const c=function(e){return e[7]||(e[7]=[])}(t);null===r?c.push(o):(c.push(r),e.firstCreatePass&&function(e){return e.cleanup||(e.cleanup=[])}(e).push(o,c.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){!function(e){for(;e;){e[2]|=64;const t=cf(e);if(ns(e)&&!t)return e;e=t}}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ll(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,r){tl(!0);try{Ll(e,t,r)}finally{tl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Cl(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class ST extends Dp{constructor(t){super(t),this._view=t}detectChanges(){Wi(this._view)}checkNoChanges(){!function(e){tl(!0);try{Wi(e)}finally{tl(!1)}}(this._view)}get context(){return null}}class Fw extends Tp{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const r=Kr(t);return new py(r,this.ngModule)}}function jw(e){const t=[];for(let r in e)e.hasOwnProperty(r)&&t.push({propName:e[r],templateName:r});return t}const AT=new Hr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Il});class py extends Mw{constructor(t,r){super(),this.componentDef=t,this.ngModule=r,this.componentType=t.type,this.selector=t.selectors.map(mh).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!r}get inputs(){return jw(this.componentDef.inputs)}get outputs(){return jw(this.componentDef.outputs)}create(t,r,o,c){const d=(c=c||this.ngModule)?function(e,t){return{get:(r,o,c)=>{const d=e.get(r,dy,c);return d!==dy||o===dy?d:t.get(r,o,c)}}}(t,c.injector):t,w=d.get(kw,Le),T=d.get(TT,null),A=w.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",q=o?function(e,t,r){if(ne(e))return e.selectRootElement(t,r===Qe.ShadowDom);let o="string"==typeof t?e.querySelector(t):t;return o.textContent="",o}(A,o,this.componentDef.encapsulation):Nd(w.createRenderer(null,this.componentDef),F,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(F)),ie=this.componentDef.onPush?576:528,ve=function(e,t){return{components:[],scheduler:e||Il,clean:Gv,playerHandler:t||null,flags:0}}(),Oe=Rh(0,null,null,1,0,null,null,null,null,null),et=Ol(null,Oe,ve,ie,null,null,w,A,T,d);let Ct,Ht;Ss(et);try{const Qt=function(e,t,r,o,c,d){const w=r[1];r[20]=e;const A=qc(w,20,2,"#host",null),F=A.mergedAttrs=t.hostAttrs;null!==F&&(Y(A,F,!0),null!==e&&(Bu(c,e,F),null!==A.classes&&gf(c,e,A.classes),null!==A.styles&&Vd(c,e,A.styles)));const q=o.createRenderer(e,t),ie=Ol(r,mg(t),null,t.onPush?64:16,r[20],A,o,q,d||null,null);return w.firstCreatePass&&(zu(vs(A,r),w,t.type),hp(w,A),Dg(A,r.length,1)),Sf(r,ie),r[20]=ie}(q,this.componentDef,et,w,A);if(q)if(o)Bu(A,q,["ng-version",DT.full]);else{const{attrs:gt,classes:Dn}=function(e){const t=[],r=[];let o=1,c=2;for(;o<e.length;){let d=e[o];if("string"==typeof d)2===c?""!==d&&t.push(d,e[++o]):8===c&&r.push(d);else{if(!Zs(c))break;c=d}o++}return{attrs:t,classes:r}}(this.componentDef.selectors[0]);gt&&Bu(A,q,gt),Dn&&Dn.length>0&&gf(A,q,Dn.join(" "))}if(Ht=Li(Oe,20),void 0!==r){const gt=Ht.projection=[];for(let Dn=0;Dn<this.ngContentSelectors.length;Dn++){const wr=r[Dn];gt.push(null!=wr?Array.from(wr):null)}}Ct=function(e,t,r,o,c){const d=r[1],w=function(e,t,r){const o=Xi();e.firstCreatePass&&(r.providersResolver&&r.providersResolver(r),Ph(e,o,t,Pl(e,t,1,null),r));const c=cu(t,e,o.directiveStart,o);Po(c,t);const d=Mn(o,t);return d&&Po(d,t),c}(d,r,t);if(o.components.push(w),e[8]=w,c&&c.forEach(A=>A(w,t)),t.contentQueries){const A=Xi();t.contentQueries(1,w,A.directiveStart)}const T=Xi();return!d.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Na(T.index),Eg(r[1],T,0,T.directiveStart,T.directiveEnd,t),fp(t,w)),w}(Qt,this.componentDef,et,ve,[q0]),Ef(Oe,et,null)}finally{ou()}return new OT(this.componentType,Ct,Jh(Ht,et),et,Ht)}}class OT extends class{}{constructor(t,r,o,c,d){super(),this.location=o,this._rootLView=c,this._tNode=d,this.instance=r,this.hostView=this.changeDetectorRef=new ST(c),this.componentType=t}get injector(){return new Fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class ed{}const td=new Map;class Bw extends ed{constructor(t,r){super(),this._parent=r,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fw(this);const o=Ci(t);this._bootstrapComponents=Ka(o.bootstrap),this._r3Injector=Sm(t,r,[{provide:ed,useValue:this},{provide:Tp,useValue:this.componentFactoryResolver}],Tt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,r=Xa.THROW_IF_NOT_FOUND,o=Pn.Default){return t===Xa||t===ed||t===Wn?this:this._r3Injector.get(t,r,o)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class gy extends class{}{constructor(t){super(),this.moduleType=t,null!==Ci(t)&&function(e){const t=new Set;!function r(o){const c=Ci(o,!0),d=c.id;null!==d&&(function(e,t,r){if(t&&t!==r)throw new Error(`Duplicate module registered for ${e} - ${Tt(t)} vs ${Tt(t.name)}`)}(d,td.get(d),o),td.set(d,o));const w=Ka(c.imports);for(const T of w)t.has(T)||(t.add(T),r(T))}(e)}(t)}create(t){return new Bw(this.moduleType,t)}}function Hw(e,t,r,o,c,d){return function(e,t,r,o,c,d,w,T){const A=t+r;return Rg(e,A,c,d,w)?function(e,t,r){return e[t]=r}(e,A+3,T?o.call(T,c,d,w):o(c,d,w)):function(e,t){const r=e[t];return r===Xn?void 0:r}(e,A+3)}(bt(),function(){const e=Ln.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}(),e,t,r,o,c,d)}function vy(e){return t=>{setTimeout(e,void 0,t)}}const Kc=class extends Pe{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,r,o){var A,F,q;let c=t,d=r||(()=>null),w=o;if(t&&"object"==typeof t){const ie=t;c=null==(A=ie.next)?void 0:A.bind(ie),d=null==(F=ie.error)?void 0:F.bind(ie),w=null==(q=ie.complete)?void 0:q.bind(ie)}this.__isAsync&&(d=vy(d),c&&(c=vy(c)),w&&(w=vy(w)));const T=super.subscribe({next:c,error:d,complete:w});return t instanceof Xe&&t.add(T),T}};Symbol;let Qc=(()=>{class e{}return e.__NG_ELEMENT_ID__=tD,e})();const ZT=Qc,eD=class extends ZT{constructor(t,r,o){super(),this._declarationLView=t,this._declarationTContainer=r,this.elementRef=o}createEmbeddedView(t){const r=this._declarationTContainer.tViews,o=Ol(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null);o[17]=this._declarationLView[this._declarationTContainer.index];const d=this._declarationLView[19];return null!==d&&(o[19]=d.createEmbeddedView(r)),Ef(r,o,t),new Dp(o)}};function tD(){return e=Xi(),t=bt(),4&e.type?new eD(t,e,Jh(e,t)):null;var e,t}let dc=(()=>{class e{}return e.__NG_ELEMENT_ID__=nD,e})();function nD(){return function(e,t){let r;const o=t[e.index];if(Yi(o))r=o;else{let c;if(8&e.type)c=Ke(o);else{const d=t[11];c=d.createComment("");const w=Mn(e,t);rc(d,ph(d,w),c,function(e,t){return ne(e)?e.nextSibling(t):t.nextSibling}(d,w),!1)}t[e.index]=r=fo(o,t,c,e),Sf(t,r)}return new Kw(r,e,t)}(Xi(),bt())}const rD=dc,Kw=class extends rD{constructor(t,r,o){super(),this._lContainer=t,this._hostTNode=r,this._hostLView=o}get element(){return Jh(this._hostTNode,this._hostLView)}get injector(){return new Fa(this._hostTNode,this._hostLView)}get parentInjector(){const t=Wu(this._hostTNode,this._hostLView);if(Cs(t)){const r=os(t,this._hostLView),o=ua(t);return new Fa(r[1].data[o+8],r)}return new Fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const r=Qw(this._lContainer);return null!==r&&r[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,r,o){const c=t.createEmbeddedView(r||{});return this.insert(c,o),c}createComponent(t,r,o,c,d){const w=t&&!("function"==typeof t);let T;if(w)T=r;else{const ie=r||{};T=ie.index,o=ie.injector,c=ie.projectableNodes,d=ie.ngModuleRef}const A=w?t:new py(Kr(t)),F=o||this.parentInjector;if(!d&&null==A.ngModule&&F){const ie=F.get(ed,null);ie&&(d=ie)}const q=A.create(F,c,void 0,d);return this.insert(q.hostView,T),q}insert(t,r){const o=t._lView,c=o[1];if(Yi(o[3])){const q=this.indexOf(t);if(-1!==q)this.detach(q);else{const ie=o[3],ve=new Kw(ie,ie[6],ie[3]);ve.detach(ve.indexOf(t))}}const d=this._adjustIndex(r),w=this._lContainer;!function(e,t,r,o){const c=10+o,d=r.length;o>0&&(r[c-1][4]=t),o<d-10?(t[4]=r[c],Xu(r,10+o,t)):(r.push(t),t[4]=null),t[3]=r;const w=t[17];null!==w&&r!==w&&function(e,t){const r=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===r?e[9]=[t]:r.push(t)}(w,t);const T=t[19];null!==T&&T.insertView(e),t[2]|=128}(c,o,w,d);const T=Sl(d,w),A=o[11],F=ph(A,w[7]);return null!==F&&function(e,t,r,o,c,d){o[0]=c,o[6]=t,Cl(e,o,r,1,c,d)}(c,w[6],A,o,F,T),t.attachToViewContainerRef(),Xu(my(w),d,t),t}move(t,r){return this.insert(t,r)}indexOf(t){const r=Qw(this._lContainer);return null!==r?r.indexOf(t):-1}remove(t){const r=this._adjustIndex(t,-1),o=ff(this._lContainer,r);o&&(Ga(my(this._lContainer),r),rg(o[1],o))}detach(t){const r=this._adjustIndex(t,-1),o=ff(this._lContainer,r);return o&&null!=Ga(my(this._lContainer),r)?new Dp(o):null}_adjustIndex(t,r=0){return null==t?this.length+r:t}};function Qw(e){return e[8]}function my(e){return e[8]||(e[8]=[])}function Gg(...e){}const Ny=new Hr("Application Initializer");let rd=(()=>{class e{constructor(r){this.appInits=r,this.resolve=Gg,this.reject=Gg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((o,c)=>{this.resolve=o,this.reject=c})}runInitializers(){if(this.initialized)return;const r=[],o=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const d=this.appInits[c]();if(ey(d))r.push(d);else if(AE(d)){const w=new Promise((T,A)=>{d.subscribe({complete:T,error:A})});r.push(w)}}Promise.all(r).then(()=>{o()}).catch(c=>{this.reject(c)}),0===r.length&&o(),this.initialized=!0}}return e.\u0275fac=function(r){return new(r||e)(Yr(Ny,8))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();const Np=new Hr("AppId"),kD={provide:Np,useFactory:function(){return`${Ry()}${Ry()}${Ry()}`},deps:[]};function Ry(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _b=new Hr("Platform Initializer"),Oy=new Hr("Platform ID"),LD=new Hr("appBootstrapListener");let FD=(()=>{class e{log(r){console.log(r)}warn(r){console.warn(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();const Fl=new Hr("LocaleId"),wb=new Hr("DefaultCurrencyCode");class jD{constructor(t,r){this.ngModuleFactory=t,this.componentFactories=r}}let bb=(()=>{class e{compileModuleSync(r){return new gy(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const o=this.compileModuleSync(r),d=Ka(Ci(r).declarations).reduce((w,T)=>{const A=Kr(T);return A&&w.push(new py(A)),w},[]);return new jD(o,d)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();const UD=(()=>Promise.resolve(0))();function Py(e){"undefined"==typeof Zone?UD.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ms{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kc(!1),this.onMicrotaskEmpty=new Kc(!1),this.onStable=new Kc(!1),this.onError=new Kc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&r,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let e=sn.requestAnimationFrame,t=sn.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const o=t[Zone.__symbol__("OriginalDelegate")];o&&(t=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(sn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,xy(e),e.isCheckStableRunning=!0,My(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),xy(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,o,c,d,w,T)=>{try{return Eb(e),r.invokeTask(c,d,w,T)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||e.shouldCoalesceRunChangeDetection)&&t(),Ib(e)}},onInvoke:(r,o,c,d,w,T,A)=>{try{return Eb(e),r.invoke(c,d,w,T,A)}finally{e.shouldCoalesceRunChangeDetection&&t(),Ib(e)}},onHasTask:(r,o,c,d)=>{r.hasTask(c,d),o===c&&("microTask"==d.change?(e._hasPendingMicrotasks=d.microTask,xy(e),My(e)):"macroTask"==d.change&&(e.hasPendingMacrotasks=d.macroTask))},onHandleError:(r,o,c,d)=>(r.handleError(c,d),e.runOutsideAngular(()=>e.onError.emit(d)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ms.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ms.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,r,o){return this._inner.run(t,r,o)}runTask(t,r,o,c){const d=this._inner,w=d.scheduleEventTask("NgZoneEvent: "+c,t,HD,Gg,Gg);try{return d.runTask(w,r,o)}finally{d.cancelTask(w)}}runGuarded(t,r,o){return this._inner.runGuarded(t,r,o)}runOutsideAngular(t){return this._outer.run(t)}}const HD={};function My(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function xy(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Eb(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ib(e){e._nesting--,My(e)}class WD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kc,this.onMicrotaskEmpty=new Kc,this.onStable=new Kc,this.onError=new Kc}run(t,r,o){return t.apply(r,o)}runGuarded(t,r,o){return t.apply(r,o)}runOutsideAngular(t){return t()}runTask(t,r,o,c){return t.apply(r,o)}}let ky=(()=>{class e{constructor(r){this._ngZone=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ms.assertNotInAngularZone(),Py(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Py(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb(this._didWork)}this._didWork=!1});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(r)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,o,c){let d=-1;o&&o>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==d),r(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:r,timeoutId:d,updateCb:c})}whenStable(r,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(r,o,c){return[]}}return e.\u0275fac=function(r){return new(r||e)(Yr(Ms))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})(),Tb=(()=>{class e{constructor(){this._applications=new Map,Ly.addToWindow(this)}registerApplication(r,o){this._applications.set(r,o)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,o=!0){return Ly.findTestabilityInTree(this,r,o)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();class zD{addToWindow(t){}findTestabilityInTree(t,r,o){return null}}let Ru,Ly=new zD;const Db=new Hr("AllowMultipleToken");function Sb(e,t,r=[]){const o=`Platform: ${t}`,c=new Hr(o);return(d=[])=>{let w=Cb();if(!w||w.injector.get(Db,!1))if(e)e(r.concat(d).concat({provide:c,useValue:!0}));else{const T=r.concat(d).concat({provide:c,useValue:!0},{provide:kr,useValue:"platform"});!function(e){if(Ru&&!Ru.destroyed&&!Ru.injector.get(Db,!1))throw new Lr("400","");Ru=e.get(Ab);const t=e.get(_b,null);t&&t.forEach(r=>r())}(Xa.create({providers:T,name:o}))}return function(e){const t=Cb();if(!t)throw new Lr("401","");return t}()}}function Cb(){return Ru&&!Ru.destroyed?Ru:null}let Ab=(()=>{class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,o){const T=function(e,t){let r;return r="noop"===e?new WD:("zone.js"===e?void 0:e)||new Ms({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),r}(o?o.ngZone:void 0,{ngZoneEventCoalescing:o&&o.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:o&&o.ngZoneRunCoalescing||!1}),A=[{provide:Ms,useValue:T}];return T.run(()=>{const F=Xa.create({providers:A,parent:this.injector,name:r.moduleType.name}),q=r.create(F),ie=q.injector.get(bl,null);if(!ie)throw new Lr("402","");return T.runOutsideAngular(()=>{const ve=T.onError.subscribe({next:Oe=>{ie.handleError(Oe)}});q.onDestroy(()=>{Fy(this._modules,q),ve.unsubscribe()})}),function(e,t,r){try{const o=r();return ey(o)?o.catch(c=>{throw t.runOutsideAngular(()=>e.handleError(c)),c}):o}catch(o){throw t.runOutsideAngular(()=>e.handleError(o)),o}}(ie,T,()=>{const ve=q.injector.get(rd);return ve.runInitializers(),ve.donePromise.then(()=>(function(e){Fr(e,"Expected localeId to be defined"),"string"==typeof e&&(uw=e.toLowerCase().replace(/_/g,"-"))}(q.injector.get(Fl,xg)||xg),this._moduleDoBootstrap(q),q))})})}bootstrapModule(r,o=[]){const c=Nb({},o);return function(e,t,r){const o=new gy(r);return Promise.resolve(o)}(0,0,r).then(d=>this.bootstrapModuleFactory(d,c))}_moduleDoBootstrap(r){const o=r.injector.get(qg);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!r.instance.ngDoBootstrap)throw new Lr("403","");r.instance.ngDoBootstrap(o)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Lr("404","");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(r){return new(r||e)(Yr(Xa))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();function Nb(e,t){return Array.isArray(t)?t.reduce(Nb,e):Vl(Vl({},e),t)}let qg=(()=>{class e{constructor(r,o,c,d,w){this._zone=r,this._injector=o,this._exceptionHandler=c,this._componentFactoryResolver=d,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const T=new N(F=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{F.next(this._stable),F.complete()})}),A=new N(F=>{let q;this._zone.runOutsideAngular(()=>{q=this._zone.onStable.subscribe(()=>{Ms.assertNotInAngularZone(),Py(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,F.next(!0))})})});const ie=this._zone.onUnstable.subscribe(()=>{Ms.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{F.next(!1)}))});return()=>{q.unsubscribe(),ie.unsubscribe()}});this.isStable=ye(T,A.pipe(function(e={}){const{connector:t=(()=>new Pe),resetOnError:r=!0,resetOnComplete:o=!0,resetOnRefCountZero:c=!0}=e;return d=>{let w=null,T=null,A=null,F=0,q=!1,ie=!1;const ve=()=>{null==T||T.unsubscribe(),T=null},Oe=()=>{ve(),w=A=null,q=ie=!1},et=()=>{const Ct=w;Oe(),null==Ct||Ct.unsubscribe()};return De((Ct,Ht)=>{F++,!ie&&!q&&ve();const Qt=A=null!=A?A:t();Ht.add(()=>{F--,0===F&&!ie&&!q&&(T=vt(et,c))}),Qt.subscribe(Ht),w||(w=new Nt({next:gt=>Qt.next(gt),error:gt=>{ie=!0,ve(),T=vt(Oe,r,gt),Qt.error(gt)},complete:()=>{q=!0,ve(),T=vt(Oe,o),Qt.complete()}}),se(Ct).subscribe(w))})(d)}}()))}bootstrap(r,o){if(!this._initStatus.done)throw new Lr("405","");let c;c=r instanceof Mw?r:this._componentFactoryResolver.resolveComponentFactory(r),this.componentTypes.push(c.componentType);const d=function(e){return e.isBoundToModule}(c)?void 0:this._injector.get(ed),T=c.create(Xa.NULL,[],o||c.selector,d),A=T.location.nativeElement,F=T.injector.get(ky,null),q=F&&T.injector.get(Tb);return F&&q&&q.registerApplication(A,F),T.onDestroy(()=>{this.detachView(T.hostView),Fy(this.components,T),q&&q.unregisterApplication(A)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new Lr("101","");try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(r))}finally{this._runningTick=!1}}attachView(r){const o=r;this._views.push(o),o.attachToAppRef(this)}detachView(r){const o=r;Fy(this._views,o),o.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r),this._injector.get(LD,[]).concat(this._bootstrapListeners).forEach(c=>c(r))}ngOnDestroy(){this._views.slice().forEach(r=>r.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(r){return new(r||e)(Yr(Ms),Yr(Xa),Yr(bl),Yr(Tp),Yr(rd))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();function Fy(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}let Ob=!0;class jb{constructor(){}supports(t){return gp(t)}create(t){return new fS(t)}}const lS=(e,t)=>t;class fS{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||lS}forEachItem(t){let r;for(r=this._itHead;null!==r;r=r._next)t(r)}forEachOperation(t){let r=this._itHead,o=this._removalsHead,c=0,d=null;for(;r||o;){const w=!o||r&&r.currentIndex<Ub(o,c,d)?r:o,T=Ub(w,c,d),A=w.currentIndex;if(w===o)c--,o=o._nextRemoved;else if(r=r._next,null==w.previousIndex)c++;else{d||(d=[]);const F=T-c,q=A-c;if(F!=q){for(let ve=0;ve<F;ve++){const Oe=ve<d.length?d[ve]:d[ve]=0,et=Oe+ve;q<=et&&et<F&&(d[ve]=Oe+1)}d[w.previousIndex]=q-F}}T!==A&&t(w,T,A)}}forEachPreviousItem(t){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachMovedItem(t){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}forEachIdentityChange(t){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)t(r)}diff(t){if(null==t&&(t=[]),!gp(t))throw new Error(`Error trying to diff '${Tt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let c,d,w,r=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let T=0;T<this.length;T++)d=t[T],w=this._trackByFn(T,d),null!==r&&Object.is(r.trackById,w)?(o&&(r=this._verifyReinsertion(r,d,w,T)),Object.is(r.item,d)||this._addIdentityChange(r,d)):(r=this._mismatch(r,d,w,T),o=!0),r=r._next}else c=0,function(e,t){if(Array.isArray(e))for(let r=0;r<e.length;r++)t(e[r]);else{const r=e[jh()]();let o;for(;!(o=r.next()).done;)t(o.value)}}(t,T=>{w=this._trackByFn(c,T),null!==r&&Object.is(r.trackById,w)?(o&&(r=this._verifyReinsertion(r,T,w,c)),Object.is(r.item,T)||this._addIdentityChange(r,T)):(r=this._mismatch(r,T,w,c),o=!0),r=r._next,c++}),this.length=c;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,r,o,c){let d;return null===t?d=this._itTail:(d=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._reinsertAfter(t,d,c)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(t.item,r)||this._addIdentityChange(t,r),this._moveAfter(t,d,c)):t=this._addAfter(new hS(r,o),d,c),t}_verifyReinsertion(t,r,o,c){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==d?t=this._reinsertAfter(d,t._prev,c):t.currentIndex!=c&&(t.currentIndex=c,this._addToMoves(t,c)),t}_truncate(t){for(;null!==t;){const r=t._next;this._addToRemovals(this._unlink(t)),t=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,r,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const c=t._prevRemoved,d=t._nextRemoved;return null===c?this._removalsHead=d:c._nextRemoved=d,null===d?this._removalsTail=c:d._prevRemoved=c,this._insertAfter(t,r,o),this._addToMoves(t,o),t}_moveAfter(t,r,o){return this._unlink(t),this._insertAfter(t,r,o),this._addToMoves(t,o),t}_addAfter(t,r,o){return this._insertAfter(t,r,o),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,r,o){const c=null===r?this._itHead:r._next;return t._next=c,t._prev=r,null===c?this._itTail=t:c._prev=t,null===r?this._itHead=t:r._next=t,null===this._linkedRecords&&(this._linkedRecords=new Vb),this._linkedRecords.put(t),t.currentIndex=o,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const r=t._prev,o=t._next;return null===r?this._itHead=o:r._next=o,null===o?this._itTail=r:o._prev=r,t}_addToMoves(t,r){return t.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vb),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,r){return t.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class hS{constructor(t,r){this.item=t,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dS{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,r){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===r||r<=o.currentIndex)&&Object.is(o.trackById,t))return o;return null}remove(t){const r=t._prevDup,o=t._nextDup;return null===r?this._head=o:r._nextDup=o,null===o?this._tail=r:o._prevDup=r,null===this._head}}class Vb{constructor(){this.map=new Map}put(t){const r=t.trackById;let o=this.map.get(r);o||(o=new dS,this.map.set(r,o)),o.add(t)}get(t,r){const c=this.map.get(t);return c?c.get(t,r):null}remove(t){const r=t.trackById;return this.map.get(r).remove(t)&&this.map.delete(r),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ub(e,t,r){const o=e.previousIndex;if(null===o)return o;let c=0;return r&&o<r.length&&(c=r[o]),o+t+c}class Bb{constructor(){}supports(t){return t instanceof Map||Kv(t)}create(){return new pS}}class pS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let r;for(r=this._mapHead;null!==r;r=r._next)t(r)}forEachPreviousItem(t){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)t(r)}forEachChangedItem(t){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)t(r)}forEachAddedItem(t){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)t(r)}forEachRemovedItem(t){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)t(r)}diff(t){if(t){if(!(t instanceof Map||Kv(t)))throw new Error(`Error trying to diff '${Tt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(t,(o,c)=>{if(r&&r.key===c)this._maybeAddToChanges(r,o),this._appendAfter=r,r=r._next;else{const d=this._getOrCreateRecordForKey(c,o);r=this._insertBeforeOrAppend(r,d)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let o=r;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,r){if(t){const o=t._prev;return r._next=t,r._prev=o,t._prev=r,o&&(o._next=r),t===this._mapHead&&(this._mapHead=r),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(t,r){if(this._records.has(t)){const c=this._records.get(t);this._maybeAddToChanges(c,r);const d=c._prev,w=c._next;return d&&(d._next=w),w&&(w._prev=d),c._next=null,c._prev=null,c}const o=new gS(t);return this._records.set(t,o),o.currentValue=r,this._addToAdditions(o),o}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,r){Object.is(r,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=r,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,r){t instanceof Map?t.forEach(r):Object.keys(t).forEach(o=>r(t[o],o))}}class gS{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Hb(){return new Rp([new jb])}let Rp=(()=>{class e{constructor(r){this.factories=r}static create(r,o){if(null!=o){const c=o.factories.slice();r=r.concat(c)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||Hb()),deps:[[e,new Us,new Wa]]}}find(r){const o=this.factories.find(c=>c.supports(r));if(null!=o)return o;throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(e){return e.name||typeof e}(r)}'`)}}return e.\u0275prov=hr({token:e,providedIn:"root",factory:Hb}),e})();function Gb(){return new id([new Bb])}let id=(()=>{class e{constructor(r){this.factories=r}static create(r,o){if(o){const c=o.factories.slice();r=r.concat(c)}return new e(r)}static extend(r){return{provide:e,useFactory:o=>e.create(r,o||Gb()),deps:[[e,new Us,new Wa]]}}find(r){const o=this.factories.find(c=>c.supports(r));if(o)return o;throw new Error(`Cannot find a differ supporting object '${r}'`)}}return e.\u0275prov=hr({token:e,providedIn:"root",factory:Gb}),e})();const yS=[new Bb],_S=new Rp([new jb]),wS=new id(yS),bS=Sb(null,"core",[{provide:Oy,useValue:"unknown"},{provide:Ab,deps:[Xa]},{provide:Tb,deps:[]},{provide:FD,deps:[]}]),SS=[{provide:qg,useClass:qg,deps:[Ms,Xa,bl,Tp,rd]},{provide:AT,deps:[Ms],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(r){t.push(r)}}},{provide:rd,useClass:rd,deps:[[new Wa,Ny]]},{provide:bb,useClass:bb,deps:[]},kD,{provide:Rp,useFactory:function(){return _S},deps:[]},{provide:id,useFactory:function(){return wS},deps:[]},{provide:Fl,useFactory:function(e){return e||"undefined"!=typeof $localize&&$localize.locale||xg},deps:[[new Mc(Fl),new Wa,new Us]]},{provide:wb,useValue:"USD"}];let AS=(()=>{class e{constructor(r){}}return e.\u0275fac=function(r){return new(r||e)(Yr(qg))},e.\u0275mod=zs({type:e}),e.\u0275inj=Si({providers:SS}),e})(),zg=null;function Op(){return zg}const pc=new Hr("DocumentToken");var xo=(()=>((xo=xo||{})[xo.Zero=0]="Zero",xo[xo.One=1]="One",xo[xo.Two=2]="Two",xo[xo.Few=3]="Few",xo[xo.Many=4]="Many",xo[xo.Other=5]="Other",xo))();const BS=function(e){return function(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let r=aw(t);if(r)return r;const o=t.split("-")[0];if(r=aw(o),r)return r;if("en"===o)return vI;throw new Error(`Missing locale data for the locale "${e}".`)}(e)[hn.PluralCase]};class nv{}let vC=(()=>{class e extends nv{constructor(r){super(),this.locale=r}getPluralCategory(r,o){switch(BS(o||this.locale)(r)){case xo.Zero:return"zero";case xo.One:return"one";case xo.Two:return"two";case xo.Few:return"few";case xo.Many:return"many";default:return"other"}}}return e.\u0275fac=function(r){return new(r||e)(Yr(Fl))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})(),t0=(()=>{class e{constructor(r,o){this._viewContainer=r,this._context=new IC,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){n0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){n0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,o){return!0}}return e.\u0275fac=function(r){return new(r||e)(Sr(dc),Sr(Qc))},e.\u0275dir=Er({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class IC{constructor(){this.$implicit=null,this.ngIf=null}}function n0(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Tt(t)}'.`)}let o0=(()=>{class e{constructor(r,o,c){this._ngEl=r,this._differs=o,this._renderer=c,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){const r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,o){const[c,d]=r.split(".");null!=(o=null!=o&&d?`${o}${d}`:o)?this._renderer.setStyle(this._ngEl.nativeElement,c,o):this._renderer.removeStyle(this._ngEl.nativeElement,c)}_applyChanges(r){r.forEachRemovedItem(o=>this._setStyle(o.key,null)),r.forEachAddedItem(o=>this._setStyle(o.key,o.currentValue)),r.forEachChangedItem(o=>this._setStyle(o.key,o.currentValue))}}return e.\u0275fac=function(r){return new(r||e)(Sr(Zh),Sr(id),Sr(Lw))},e.\u0275dir=Er({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),e})(),QC=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=zs({type:e}),e.\u0275inj=Si({providers:[{provide:nv,useClass:vC}]}),e})();class em extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new em,zg||(zg=e)}onAndCancel(t,r,o){return t.addEventListener(r,o,!1),()=>{t.removeEventListener(r,o,!1)}}dispatchEvent(t,r){t.dispatchEvent(r)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,r){return(r=r||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,r){return"window"===r?window:"document"===r?t:"body"===r?t.body:null}getBaseHref(t){const r=(xp=xp||document.querySelector("base"),xp?xp.getAttribute("href"):null);return null==r?null:function(e){rv=rv||document.createElement("a"),rv.setAttribute("href",e);const t=rv.pathname;return"/"===t.charAt(0)?t:`/${t}`}(r)}resetBaseElement(){xp=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(e,t){t=encodeURIComponent(t);for(const r of e.split(";")){const o=r.indexOf("="),[c,d]=-1==o?[r,""]:[r.slice(0,o),r.slice(o+1)];if(c.trim()===t)return decodeURIComponent(d)}return null}(document.cookie,t)}}let rv,xp=null;const c0=new Hr("TRANSITION_ID"),oA=[{provide:Ny,useFactory:function(e,t,r){return()=>{r.get(rd).donePromise.then(()=>{const o=Op(),c=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let d=0;d<c.length;d++)o.remove(c[d])})}},deps:[c0,pc,Xa],multi:!0}];class tm{static init(){var e;e=new tm,Ly=e}addToWindow(t){sn.getAngularTestability=(o,c=!0)=>{const d=t.findTestabilityInTree(o,c);if(null==d)throw new Error("Could not find testability for element.");return d},sn.getAllAngularTestabilities=()=>t.getAllTestabilities(),sn.getAllAngularRootElements=()=>t.getAllRootElements(),sn.frameworkStabilizers||(sn.frameworkStabilizers=[]),sn.frameworkStabilizers.push(o=>{const c=sn.getAllAngularTestabilities();let d=c.length,w=!1;const T=function(A){w=w||A,d--,0==d&&o(w)};c.forEach(function(A){A.whenStable(T)})})}findTestabilityInTree(t,r,o){if(null==r)return null;const c=t.getTestability(r);return null!=c?c:o?Op().isShadowRoot(r)?this.findTestabilityInTree(t,r.host,!0):this.findTestabilityInTree(t,r.parentElement,!0):null}}let sA=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();const iv=new Hr("EventManagerPlugins");let ov=(()=>{class e{constructor(r,o){this._zone=o,this._eventNameToPlugin=new Map,r.forEach(c=>c.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,o,c){return this._findPluginFor(o).addEventListener(r,o,c)}addGlobalEventListener(r,o,c){return this._findPluginFor(o).addGlobalEventListener(r,o,c)}getZone(){return this._zone}_findPluginFor(r){const o=this._eventNameToPlugin.get(r);if(o)return o;const c=this._plugins;for(let d=0;d<c.length;d++){const w=c[d];if(w.supports(r))return this._eventNameToPlugin.set(r,w),w}throw new Error(`No event manager plugin found for event ${r}`)}}return e.\u0275fac=function(r){return new(r||e)(Yr(iv),Yr(Ms))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();class l0{constructor(t){this._doc=t}addGlobalEventListener(t,r,o){const c=Op().getGlobalEventTarget(this._doc,t);if(!c)throw new Error(`Unsupported event target ${c} for event ${r}`);return this.addEventListener(c,r,o)}}let f0=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(r){const o=new Set;r.forEach(c=>{this._stylesSet.has(c)||(this._stylesSet.add(c),o.add(c))}),this.onStylesAdded(o)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})(),kp=(()=>{class e extends f0{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,o,c){r.forEach(d=>{const w=this._doc.createElement("style");w.textContent=d,c.push(o.appendChild(w))})}addHost(r){const o=[];this._addStylesToHost(this._stylesSet,r,o),this._hostNodes.set(r,o)}removeHost(r){const o=this._hostNodes.get(r);o&&o.forEach(h0),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((o,c)=>{this._addStylesToHost(r,c,o)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(h0))}}return e.\u0275fac=function(r){return new(r||e)(Yr(pc))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();function h0(e){Op().remove(e)}const nm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rm=/%COMP%/g;function sv(e,t,r){for(let o=0;o<t.length;o++){let c=t[o];Array.isArray(c)?sv(e,c,r):(c=c.replace(rm,e),r.push(c))}return r}function g0(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let im=(()=>{class e{constructor(r,o,c){this.eventManager=r,this.sharedStylesHost=o,this.appId=c,this.rendererByCompId=new Map,this.defaultRenderer=new om(r)}createRenderer(r,o){if(!r||!o)return this.defaultRenderer;switch(o.encapsulation){case Qe.Emulated:{let c=this.rendererByCompId.get(o.id);return c||(c=new hA(this.eventManager,this.sharedStylesHost,o,this.appId),this.rendererByCompId.set(o.id,c)),c.applyToHost(r),c}case 1:case Qe.ShadowDom:return new dA(this.eventManager,this.sharedStylesHost,r,o);default:if(!this.rendererByCompId.has(o.id)){const c=sv(o.id,o.styles,[]);this.sharedStylesHost.addStyles(c),this.rendererByCompId.set(o.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(r){return new(r||e)(Yr(ov),Yr(kp),Yr(Np))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();class om{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,r){return r?document.createElementNS(nm[r]||r,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,r){t.appendChild(r)}insertBefore(t,r,o){t&&t.insertBefore(r,o)}removeChild(t,r){t&&t.removeChild(r)}selectRootElement(t,r){let o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error(`The selector "${t}" did not match any elements`);return r||(o.textContent=""),o}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,r,o,c){if(c){r=c+":"+r;const d=nm[c];d?t.setAttributeNS(d,r,o):t.setAttribute(r,o)}else t.setAttribute(r,o)}removeAttribute(t,r,o){if(o){const c=nm[o];c?t.removeAttributeNS(c,r):t.removeAttribute(`${o}:${r}`)}else t.removeAttribute(r)}addClass(t,r){t.classList.add(r)}removeClass(t,r){t.classList.remove(r)}setStyle(t,r,o,c){c&(Hs.DashCase|Hs.Important)?t.style.setProperty(r,o,c&Hs.Important?"important":""):t.style[r]=o}removeStyle(t,r,o){o&Hs.DashCase?t.style.removeProperty(r):t.style[r]=""}setProperty(t,r,o){t[r]=o}setValue(t,r){t.nodeValue=r}listen(t,r,o){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,r,g0(o)):this.eventManager.addEventListener(t,r,g0(o))}}class hA extends om{constructor(t,r,o,c){super(t),this.component=o;const d=sv(c+"-"+o.id,o.styles,[]);r.addStyles(d),this.contentAttr="_ngcontent-%COMP%".replace(rm,c+"-"+o.id),this.hostAttr="_nghost-%COMP%".replace(rm,c+"-"+o.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,r){const o=super.createElement(t,r);return super.setAttribute(o,this.contentAttr,""),o}}class dA extends om{constructor(t,r,o,c){super(t),this.sharedStylesHost=r,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=sv(c.id,c.styles,[]);for(let w=0;w<d.length;w++){const T=document.createElement("style");T.textContent=d[w],this.shadowRoot.appendChild(T)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,r){return super.appendChild(this.nodeOrShadowRoot(t),r)}insertBefore(t,r,o){return super.insertBefore(this.nodeOrShadowRoot(t),r,o)}removeChild(t,r){return super.removeChild(this.nodeOrShadowRoot(t),r)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let pA=(()=>{class e extends l0{constructor(r){super(r)}supports(r){return!0}addEventListener(r,o,c){return r.addEventListener(o,c,!1),()=>this.removeEventListener(r,o,c)}removeEventListener(r,o,c){return r.removeEventListener(o,c)}}return e.\u0275fac=function(r){return new(r||e)(Yr(pc))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();const y0=["alt","control","meta","shift"],vA={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},m0={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},yA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let mA=(()=>{class e extends l0{constructor(r){super(r)}supports(r){return null!=e.parseEventName(r)}addEventListener(r,o,c){const d=e.parseEventName(o),w=e.eventCallback(d.fullKey,c,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Op().onAndCancel(r,d.domEventName,w))}static parseEventName(r){const o=r.toLowerCase().split("."),c=o.shift();if(0===o.length||"keydown"!==c&&"keyup"!==c)return null;const d=e._normalizeKey(o.pop());let w="";if(y0.forEach(A=>{const F=o.indexOf(A);F>-1&&(o.splice(F,1),w+=A+".")}),w+=d,0!=o.length||0===d.length)return null;const T={};return T.domEventName=c,T.fullKey=w,T}static getEventFullKey(r){let o="",c=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&m0.hasOwnProperty(t)&&(t=m0[t]))}return vA[t]||t}(r);return c=c.toLowerCase()," "===c?c="space":"."===c&&(c="dot"),y0.forEach(d=>{d!=c&&yA[d](r)&&(o+=d+".")}),o+=c,o}static eventCallback(r,o,c){return d=>{e.getEventFullKey(d)===r&&c.runGuarded(()=>o(d))}}static _normalizeKey(r){return"esc"===r?"escape":r}}return e.\u0275fac=function(r){return new(r||e)(Yr(pc))},e.\u0275prov=hr({token:e,factory:e.\u0275fac}),e})();const IA=Sb(bS,"browser",[{provide:Oy,useValue:"browser"},{provide:_b,useValue:function(){em.makeCurrent(),tm.init()},multi:!0},{provide:pc,useFactory:function(){return e=document,R=e,document;var e},deps:[]}]),TA=[{provide:kr,useValue:"root"},{provide:bl,useFactory:function(){return new bl},deps:[]},{provide:iv,useClass:pA,multi:!0,deps:[pc,Ms,Oy]},{provide:iv,useClass:mA,multi:!0,deps:[pc]},{provide:im,useClass:im,deps:[ov,kp,Np]},{provide:kw,useExisting:im},{provide:f0,useExisting:kp},{provide:kp,useClass:kp,deps:[pc]},{provide:ky,useClass:ky,deps:[Ms]},{provide:ov,useClass:ov,deps:[iv,Ms]},{provide:class{},useClass:sA,deps:[]}];let DA=(()=>{class e{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:e,providers:[{provide:Np,useValue:r.appId},{provide:c0,useExisting:Np},oA]}}}return e.\u0275fac=function(r){return new(r||e)(Yr(e,12))},e.\u0275mod=zs({type:e}),e.\u0275inj=Si({providers:TA,imports:[QC,AS]}),e})();function b0(e,t,r,o,c,d,w){try{var T=e[d](w),A=T.value}catch(F){return void r(F)}T.done?t(A):Promise.resolve(A).then(o,c)}"undefined"!=typeof window&&window;var E0=lt(515);const I0_configFirebase={apiKey:"AIzaSyDVt7zGsutWPXEuUPYlP_2jwvOUcReEjJ4",authDomain:"push-cb753.firebaseapp.com",projectId:"push-cb753",storageBucket:"push-cb753.appspot.com",messagingSenderId:"513676918650",appId:"1:513676918650:web:f920c8456ec298443520c3",databaseURL:"https://push-cb753-default-rtdb.firebaseio.com/"};let T0=(()=>{class e{constructor(){var r=this;this.requestPermission=()=>new Promise(function(){var o=function(e){return function(){var t=this,r=arguments;return new Promise(function(o,c){var d=e.apply(t,r);function w(A){b0(d,o,c,w,T,"next",A)}function T(A){b0(d,o,c,w,T,"throw",A)}w(void 0)})}}(function*(c,d){var w;"granted"==(yield Notification.requestPermission())?c(yield null===(w=r.messagingFirebase)||void 0===w?void 0:w.getToken()):d(new Error("No se otorgaron los permisos"))});return function(c,d){return o.apply(this,arguments)}}()),this.messagingObservable=new N(o=>{var c;null===(c=this.messagingFirebase)||void 0===c||c.onMessage(d=>{o.next(d)})}),E0.initializeApp(I0_configFirebase),this.messagingFirebase=E0.messaging()}receiveMessage(){return this.messagingObservable}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=hr({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Of=(()=>{return(e=Of||(Of={})).SlideLeft="slide-left",e.SlideRight="slide-right",e.FadeOut="fade-out",Of;var e})();const FA=function(e,t,r){return{left:e,opacity:t,transition:r}};function jA(e,t){if(1&e&&(zc(0,"div",1),zc(1,"div",2),Pg(2,"div",3),zc(3,"div",4),_p(4,"Bienvenido"),$c(),Pg(5,"div",5),$c(),$c()),2&e){const r=v_();yp("ngStyle",Hw(1,FA,r.windowWidth,r.opacityChange,r.splashTransition))}}let VA=(()=>{class e{constructor(){this.opacityChange=1,this.showSplash=!0,this.animationDuration=.5,this.duration=3,this.animationType=Of.SlideLeft}ngOnInit(){setTimeout(()=>{let r="";switch(this.animationType){case Of.SlideLeft:this.windowWidth="-"+window.innerWidth+"px",r="left "+this.animationDuration+"s";break;case Of.SlideRight:this.windowWidth=window.innerWidth+"px",r="left "+this.animationDuration+"s";break;case Of.FadeOut:r="opacity "+this.animationDuration+"s",this.opacityChange=0}this.splashTransition=r,setTimeout(()=>{this.showSplash=!this.showSplash},1e3*this.animationDuration)},1e3*this.duration)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Gr({type:e,selectors:[["splash-screen"]],inputs:{animationDuration:"animationDuration",duration:"duration",animationType:"animationType"},decls:1,vars:1,consts:[["class","app-splash-screen",3,"ngStyle",4,"ngIf"],[1,"app-splash-screen",3,"ngStyle"],[1,"app-splash-inner"],[1,"app-logo"],[1,"app-label"],[1,"app-loader"]],template:function(r,o){1&r&&function(e,t,r,o,c,d,w,T){const A=bt(),F=ur(),q=e+20,ie=F.firstCreatePass?function(e,t,r,o,c,d,w,T,A){const F=t.consts,q=qc(t,e,4,w||null,Ds(F,T));Df(t,r,q,Ds(F,A)),Fu(t,q);const ie=q.tViews=Rh(2,q,o,c,d,t.directiveRegistry,t.pipeRegistry,null,t.schemas,F);return null!==t.queries&&(t.queries.template(t,q),ie.queries=t.queries.embeddedTView(q)),q}(q,F,A,t,r,o,c,d,w):F.data[q];Qs(ie,!1);const ve=A[11].createComment("");pf(F,A,ve,ie),Po(ve,A),Sf(A,A[q]=fo(ve,A,ve,ie)),Ls(ie)&&ac(F,A,ie),null!=w&&op(A,ie,T)}(0,jA,6,5,"div",0),2&r&&yp("ngIf",o.showSplash)},directives:[t0,o0],styles:['.app-splash-screen[_ngcontent-%COMP%]{background:#0CA505;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;z-index:100;opacity:1}.app-label[_ngcontent-%COMP%]{margin-top:32px;color:#fff;font-size:2.5em;font-family:"Pacifico",cursive}.app-splash-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.app-logo[_ngcontent-%COMP%]{background-repeat:no-repeat;max-width:100%;background-position:center;background-size:contain;width:100px;height:100px}.app-loader[_ngcontent-%COMP%]{background-repeat:no-repeat;max-width:100%;background-position:center;background-size:contain;width:80px;height:80px;margin-top:80px}']}),e})(),UA=(()=>{class e{constructor(r){this.notification=r,r.requestPermission().then(o=>{console.log(o)})}ngOnInit(){this.notification.receiveMessage().subscribe(r=>{console.log(r),this.mesaggeReceived=r.notification.title})}}return e.\u0275fac=function(r){return new(r||e)(Sr(T0))},e.\u0275cmp=Gr({type:e,selectors:[["app-root"]],decls:8,vars:3,consts:[[1,"center"],[1,"nes-text","is-error"],[3,"duration","animationDuration"]],template:function(r,o){1&r&&(zc(0,"div",0),zc(1,"h2"),_p(2,"NOTIFICACIONES WEB PUSH"),$c(),zc(3,"h4"),_p(4,"Mensaje recibido:"),$c(),zc(5,"p",1),_p(6),$c(),$c(),Pg(7,"splash-screen",2)),2&r&&(vf(6),iy(o.mesaggeReceived),vf(1),yp("duration",2)("animationDuration",.5))},directives:[VA],styles:[".center[_ngcontent-%COMP%]{margin:auto;width:50%;padding:10px}"]}),e})(),BA=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=zs({type:e,bootstrap:[UA]}),e.\u0275inj=Si({providers:[T0],imports:[[DA]]}),e})();Ob=!1,IA().bootstrapModule(BA).catch(e=>console.error(e))},796:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}},385:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}},209:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}},704:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}},483:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}},9:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}},698:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}},57:(br,ot,lt)=>{"use strict";lt.r(ot),lt.d(ot,{__extends:()=>Q,__assign:()=>Z,__rest:()=>kt,__decorate:()=>Xe,__param:()=>In,__metadata:()=>Ot,__awaiter:()=>ln,__generator:()=>ge,__createBinding:()=>te,__exportStar:()=>$e,__values:()=>Ze,__read:()=>Ae,__spread:()=>mt,__spreadArrays:()=>fn,__await:()=>Dt,__asyncGenerator:()=>Re,__asyncDelegator:()=>it,__asyncValues:()=>ze,__makeTemplateObject:()=>At,__importStar:()=>Nt,__importDefault:()=>_t,__classPrivateFieldGet:()=>He,__classPrivateFieldSet:()=>rt});var $=function(D,C){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,k){E.__proto__=k}||function(E,k){for(var U in k)k.hasOwnProperty(U)&&(E[U]=k[U])})(D,C)};function Q(D,C){function E(){this.constructor=D}$(D,C),D.prototype=null===C?Object.create(C):(E.prototype=C.prototype,new E)}var Z=function(){return Z=Object.assign||function(C){for(var E,k=1,U=arguments.length;k<U;k++)for(var N in E=arguments[k])Object.prototype.hasOwnProperty.call(E,N)&&(C[N]=E[N]);return C},Z.apply(this,arguments)};function kt(D,C){var E={};for(var k in D)Object.prototype.hasOwnProperty.call(D,k)&&C.indexOf(k)<0&&(E[k]=D[k]);if(null!=D&&"function"==typeof Object.getOwnPropertySymbols){var U=0;for(k=Object.getOwnPropertySymbols(D);U<k.length;U++)C.indexOf(k[U])<0&&Object.prototype.propertyIsEnumerable.call(D,k[U])&&(E[k[U]]=D[k[U]])}return E}function Xe(D,C,E,k){var ee,U=arguments.length,N=U<3?C:null===k?k=Object.getOwnPropertyDescriptor(C,E):k;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)N=Reflect.decorate(D,C,E,k);else for(var ae=D.length-1;ae>=0;ae--)(ee=D[ae])&&(N=(U<3?ee(N):U>3?ee(C,E,N):ee(C,E))||N);return U>3&&N&&Object.defineProperty(C,E,N),N}function In(D,C){return function(E,k){C(E,k,D)}}function Ot(D,C){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(D,C)}function ln(D,C,E,k){return new(E||(E=Promise))(function(N,ee){function ae(Pe){try{re(k.next(Pe))}catch(dt){ee(dt)}}function pt(Pe){try{re(k.throw(Pe))}catch(dt){ee(dt)}}function re(Pe){Pe.done?N(Pe.value):function(N){return N instanceof E?N:new E(function(ee){ee(N)})}(Pe.value).then(ae,pt)}re((k=k.apply(D,C||[])).next())})}function ge(D,C){var k,U,N,ee,E={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return ee={next:ae(0),throw:ae(1),return:ae(2)},"function"==typeof Symbol&&(ee[Symbol.iterator]=function(){return this}),ee;function ae(re){return function(Pe){return function(re){if(k)throw new TypeError("Generator is already executing.");for(;E;)try{if(k=1,U&&(N=2&re[0]?U.return:re[0]?U.throw||((N=U.return)&&N.call(U),0):U.next)&&!(N=N.call(U,re[1])).done)return N;switch(U=0,N&&(re=[2&re[0],N.value]),re[0]){case 0:case 1:N=re;break;case 4:return E.label++,{value:re[1],done:!1};case 5:E.label++,U=re[1],re=[0];continue;case 7:re=E.ops.pop(),E.trys.pop();continue;default:if(!(N=(N=E.trys).length>0&&N[N.length-1])&&(6===re[0]||2===re[0])){E=0;continue}if(3===re[0]&&(!N||re[1]>N[0]&&re[1]<N[3])){E.label=re[1];break}if(6===re[0]&&E.label<N[1]){E.label=N[1],N=re;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(re);break}N[2]&&E.ops.pop(),E.trys.pop();continue}re=C.call(D,E)}catch(Pe){re=[6,Pe],U=0}finally{k=N=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}([re,Pe])}}}function te(D,C,E,k){void 0===k&&(k=E),D[k]=C[E]}function $e(D,C){for(var E in D)"default"!==E&&!C.hasOwnProperty(E)&&(C[E]=D[E])}function Ze(D){var C="function"==typeof Symbol&&Symbol.iterator,E=C&&D[C],k=0;if(E)return E.call(D);if(D&&"number"==typeof D.length)return{next:function(){return D&&k>=D.length&&(D=void 0),{value:D&&D[k++],done:!D}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(D,C){var E="function"==typeof Symbol&&D[Symbol.iterator];if(!E)return D;var U,ee,k=E.call(D),N=[];try{for(;(void 0===C||C-- >0)&&!(U=k.next()).done;)N.push(U.value)}catch(ae){ee={error:ae}}finally{try{U&&!U.done&&(E=k.return)&&E.call(k)}finally{if(ee)throw ee.error}}return N}function mt(){for(var D=[],C=0;C<arguments.length;C++)D=D.concat(Ae(arguments[C]));return D}function fn(){for(var D=0,C=0,E=arguments.length;C<E;C++)D+=arguments[C].length;var k=Array(D),U=0;for(C=0;C<E;C++)for(var N=arguments[C],ee=0,ae=N.length;ee<ae;ee++,U++)k[U]=N[ee];return k}function Dt(D){return this instanceof Dt?(this.v=D,this):new Dt(D)}function Re(D,C,E){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,k=E.apply(D,C||[]),N=[];return U={},ee("next"),ee("throw"),ee("return"),U[Symbol.asyncIterator]=function(){return this},U;function ee(Se){k[Se]&&(U[Se]=function(De){return new Promise(function(Ve,at){N.push([Se,De,Ve,at])>1||ae(Se,De)})})}function ae(Se,De){try{!function(Se){Se.value instanceof Dt?Promise.resolve(Se.value.v).then(re,Pe):dt(N[0][2],Se)}(k[Se](De))}catch(Ve){dt(N[0][3],Ve)}}function re(Se){ae("next",Se)}function Pe(Se){ae("throw",Se)}function dt(Se,De){Se(De),N.shift(),N.length&&ae(N[0][0],N[0][1])}}function it(D){var C,E;return C={},k("next"),k("throw",function(U){throw U}),k("return"),C[Symbol.iterator]=function(){return this},C;function k(U,N){C[U]=D[U]?function(ee){return(E=!E)?{value:Dt(D[U](ee)),done:"return"===U}:N?N(ee):ee}:N}}function ze(D){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E,C=D[Symbol.asyncIterator];return C?C.call(D):(D=Ze(D),E={},k("next"),k("throw"),k("return"),E[Symbol.asyncIterator]=function(){return this},E);function k(N){E[N]=D[N]&&function(ee){return new Promise(function(ae,pt){!function(N,ee,ae,pt){Promise.resolve(pt).then(function(re){N({value:re,done:ae})},ee)}(ae,pt,(ee=D[N](ee)).done,ee.value)})}}}function At(D,C){return Object.defineProperty?Object.defineProperty(D,"raw",{value:C}):D.raw=C,D}function Nt(D){if(D&&D.__esModule)return D;var C={};if(null!=D)for(var E in D)Object.hasOwnProperty.call(D,E)&&(C[E]=D[E]);return C.default=D,C}function _t(D){return D&&D.__esModule?D:{default:D}}function He(D,C){if(!C.has(D))throw new TypeError("attempted to get private field on non-instance");return C.get(D)}function rt(D,C,E){if(!C.has(D))throw new TypeError("attempted to set private field on non-instance");return C.set(D,E),E}}},br=>{br(br.s=504)}]);